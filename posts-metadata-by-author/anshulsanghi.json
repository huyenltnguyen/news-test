{"https://www.freecodecamp.org/news/author/anshulsanghi/":{"https://www.freecodecamp.org//news/rust-tutorial-build-a-json-parser/":{"metadata":[{"tagName":"meta","attributes":{"charset":"utf-8"},"content":""},{"tagName":"meta","attributes":{"http-equiv":"X-UA-Compatible","content":"IE=edge"},"content":""},{"tagName":"title","attributes":{},"content":"Rust Tutorial – Learn Advanced Iterators & Pattern Matching by Building a JSON Parser"},{"tagName":"meta","attributes":{"name":"HandheldFriendly","content":"True"},"content":""},{"tagName":"meta","attributes":{"name":"viewport","content":"width=device-width, initial-scale=1.0"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.googleapis.com"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com","crossorigin":""},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n"},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n"},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"/news/assets/css/global-26e2f3cde9.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/screen-926fddfac2.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/search-bar-124f5f949c.css"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js"},"content":""},{"tagName":"script","attributes":{},"content":"let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));"},{"tagName":"script","attributes":{"data-ad-client":"ca-pub-9482786369113753","src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","crossorigin":"anonymous","async":""},"content":""},{"tagName":"link","attributes":{"rel":"icon","href":"https://cdn.freecodecamp.org/universal/favicons/favicon.ico","type":"image/png"},"content":""},{"tagName":"link","attributes":{"rel":"canonical","href":"https://www.freecodecamp.org/news/rust-tutorial-build-a-json-parser/"},"content":""},{"tagName":"meta","attributes":{"name":"referrer","content":"no-referrer-when-downgrade"},"content":""},{"tagName":"meta","attributes":{"name":"description","content":"Iterators and match patterns are two of the most used language features in Rust. If you have written any real world application, big or small, chances are that you've already used these, whether knowingly or unknowingly. In this tutorial, I aim to help you understand how they actually work, the"},"content":""},{"tagName":"meta","attributes":{"property":"og:site_name","content":"freeCodeCamp.org"},"content":""},{"tagName":"meta","attributes":{"property":"og:type","content":"article"},"content":""},{"tagName":"meta","attributes":{"property":"og:title","content":"Rust Tutorial – Learn Advanced Iterators & Pattern Matching by Building a JSON Parser"},"content":""},{"tagName":"meta","attributes":{"property":"og:description","content":"Iterators and match patterns are two of the most used language features in Rust. If you have written any real world application, big or small, chances are that you've already used these, whether knowingly or unknowingly. In this tutorial, I aim to help you understand how they actually work, the"},"content":""},{"tagName":"meta","attributes":{"property":"og:url","content":"https://www.freecodecamp.org/news/rust-tutorial-build-a-json-parser/"},"content":""},{"tagName":"meta","attributes":{"property":"og:image","content":"https://www.freecodecamp.org/news/content/images/2024/05/JSON-Parser-Cover.png"},"content":""},{"tagName":"meta","attributes":{"property":"article:published_time","content":"2024-05-29T10:45:15.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:modified_time","content":"2024-05-29T10:45:15.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Rust"},"content":""},{"tagName":"meta","attributes":{"property":"article:publisher","content":"https://www.facebook.com/freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:card","content":"summary_large_image"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:title","content":"Rust Tutorial – Learn Advanced Iterators & Pattern Matching by Building a JSON Parser"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:description","content":"Iterators and match patterns are two of the most used language features in Rust. If you have written any real world application, big or small, chances are that you've already used these, whether knowingly or unknowingly. In this tutorial, I aim to help you understand how they actually work, the"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:url","content":"https://www.freecodecamp.org/news/rust-tutorial-build-a-json-parser/"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:image","content":"https://www.freecodecamp.org/news/content/images/2024/05/JSON-Parser-Cover.png"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label1","content":"Written by"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data1","content":"Anshul Sanghi"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label2","content":"Filed under"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data2","content":"Rust"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:site","content":"@freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:creator","content":"@AnshulsAstro"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:width","content":"2000"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:height","content":"1047"},"content":""},{"tagName":"script","attributes":{"type":"application/ld+json"},"content":"{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/05/JSON-Parser-Cover.png\",\n\t\t\"width\": 2000,\n\t\t\"height\": 1047\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/rust-tutorial-build-a-json-parser/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-05-29T10:45:15.000Z\",\n\t\"dateModified\": \"2024-05-29T10:45:15.000Z\",\n\t\"keywords\": \"Rust\",\n\t\"description\": \"Iterators and match patterns are two of the most used language features in Rust.\\nIf you have written any real world application, big or small, chances are that\\nyou&#x27;ve already used these, whether knowingly or unknowingly.\\n\\nIn this tutorial, I aim to help you understand how they actually work, the many\\nways they&#x27;re usually used, and how powerful they are by writing a JSON parser\\nthat heavily uses these features.\\n\\nDisclaimer\\nThe goal of this tutorial is to create a real-world library that extensive\",\n\t\"headline\": \"Rust Tutorial – Learn Advanced Iterators &amp; Pattern Matching by Building a JSON Parser\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Anshul Sanghi\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/anshulsanghi/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://twitter.com/AnshulsAstro\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/DSC02590.JPG\",\n\t\t\t\"width\": 2000,\n\t\t\t\"height\": 2000\n\t\t}\n\t}\n}"},{"tagName":"meta","attributes":{"name":"generator","content":"Eleventy"},"content":""},{"tagName":"link","attributes":{"rel":"alternate","type":"application/rss+xml","title":"freeCodeCamp.org","href":"https://www.freecodecamp.org/news/rss/"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com"},"content":""},{"tagName":"script","attributes":{},"content":"\nwindow.dataLayer = window.dataLayer || [];\n"},{"tagName":"script","attributes":{},"content":"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');"},{"tagName":"meta","attributes":{"name":"google-site-verification","content":"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E"},"content":""},{"tagName":"meta","attributes":{"name":"x-fcc-source","data-test-label":"x-fcc-source","content":"Ghost"},"content":""}],"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Rust Tutorial – Learn Advanced Iterators &amp; Pattern Matching by Building a JSON Parser</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/rust-tutorial-build-a-json-parser/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Iterators and match patterns are two of the most used language features in Rust. If you have written any real world application, big or small, chances are that you&#39;ve already used these, whether knowingly or unknowingly. In this tutorial, I aim to help you understand how they actually work, the\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Rust Tutorial – Learn Advanced Iterators &amp; Pattern Matching by Building a JSON Parser\">\n    \n        <meta property=\"og:description\" content=\"Iterators and match patterns are two of the most used language features in Rust. If you have written any real world application, big or small, chances are that you&#39;ve already used these, whether knowingly or unknowingly. In this tutorial, I aim to help you understand how they actually work, the\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/rust-tutorial-build-a-json-parser/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2024/05/JSON-Parser-Cover.png\">\n    <meta property=\"article:published_time\" content=\"2024-05-29T10:45:15.000Z\">\n    <meta property=\"article:modified_time\" content=\"2024-05-29T10:45:15.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Rust\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Rust Tutorial – Learn Advanced Iterators &amp; Pattern Matching by Building a JSON Parser\">\n    \n        <meta name=\"twitter:description\" content=\"Iterators and match patterns are two of the most used language features in Rust. If you have written any real world application, big or small, chances are that you&#39;ve already used these, whether knowingly or unknowingly. In this tutorial, I aim to help you understand how they actually work, the\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/rust-tutorial-build-a-json-parser/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2024/05/JSON-Parser-Cover.png\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Anshul Sanghi\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Rust\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@AnshulsAstro\">\n    \n\n    <meta property=\"og:image:width\" content=\"2000\">\n    <meta property=\"og:image:height\" content=\"1047\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/05/JSON-Parser-Cover.png\",\n\t\t\"width\": 2000,\n\t\t\"height\": 1047\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/rust-tutorial-build-a-json-parser/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-05-29T10:45:15.000Z\",\n\t\"dateModified\": \"2024-05-29T10:45:15.000Z\",\n\t\"keywords\": \"Rust\",\n\t\"description\": \"Iterators and match patterns are two of the most used language features in Rust.\\nIf you have written any real world application, big or small, chances are that\\nyou&#x27;ve already used these, whether knowingly or unknowingly.\\n\\nIn this tutorial, I aim to help you understand how they actually work, the many\\nways they&#x27;re usually used, and how powerful they are by writing a JSON parser\\nthat heavily uses these features.\\n\\nDisclaimer\\nThe goal of this tutorial is to create a real-world library that extensive\",\n\t\"headline\": \"Rust Tutorial – Learn Advanced Iterators &amp; Pattern Matching by Building a JSON Parser\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Anshul Sanghi\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/anshulsanghi/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://twitter.com/AnshulsAstro\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/DSC02590.JPG\",\n\t\t\t\"width\": 2000,\n\t\t\t\"height\": 2000\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Wed May 29 2024 10:45:15 GMT+0000 (Coordinated Universal Time)\">\n                            May 29, 2024\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/rust/\">\n                                #Rust\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Rust Tutorial – Learn Advanced Iterators &amp; Pattern Matching by Building a JSON Parser</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG\" class=\"author-profile-image\" alt=\"Anshul Sanghi\" width=\"2000\" height=\"2000\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/anshulsanghi/\" data-test-label=\"profile-link\">\n                    \n                        Anshul Sanghi\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2024/05/JSON-Parser-Cover.png 300w, https://www.freecodecamp.org/news/content/images/size/w600/2024/05/JSON-Parser-Cover.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/05/JSON-Parser-Cover.png 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2024/05/JSON-Parser-Cover.png 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2024/05/JSON-Parser-Cover.png\" alt=\"Rust Tutorial – Learn Advanced Iterators &amp; Pattern Matching by Building a JSON Parser\" ,=\"\" width=\"2000\" height=\"1047\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>Iterators and match patterns are two of the most used language features in Rust. If you have written any real world application, big or small, chances are that you've already used these, whether knowingly or unknowingly.</p><p>In this tutorial, I aim to help you understand how they actually work, the many ways they're usually used, and how powerful they are by writing a JSON parser that heavily uses these features.</p><h2 id=\"disclaimer\">Disclaimer</h2><p>The goal of this tutorial is to create a real-world library that extensively uses match patterns and iterators. The goal is not to write a performant or fully-compliant JSON parser.</p><p>If you're very familiar with JSON, you will notice many things that are missing in this code, the biggest one being error handling when invalid tokens are encountered, and giving feedback to the user or helpful suggestions on what's wrong with the JSON.</p><p>This program also doesn't handle escape characters and sequences within string literals, for example. The code, for the most part, assumes that you have a valid JSON.</p><h2 id=\"prerequisites\">Prerequisites</h2><p>Although this tutorial can be consumed by Rust programmers of any experience, previous experience or understanding of basic iterators and match patterns in Rust is helpful.</p><p>It is also assumed that you're familiar with the most basic Rust concepts such as <code>traits</code>, <code>structs</code>, <code>enums</code>, <code>for</code> loops, <code>impl</code> blocks, and so on. The tutorial does introduce you to <code>iterator</code> and <code>match</code>, so you don't need to be familiar with those to benefit from this tutorial.</p><h2 id=\"table-of-contents\">Table Of Contents</h2><!--kg-card-begin: markdown--><ol>\n<li><a href=\"#what-are-iterators-in-rust\">What are Iterators in Rust?</a>\n<ol>\n<li><a href=\"#how-to-implement-iterators-in-rust\">How to implement iterators in Rust</a></li>\n<li><a href=\"#what-are-peekable-iterators-in-rust\">What are peekable iterators in Rust?</a></li>\n</ol>\n</li>\n<li><a href=\"#what-is-the-match-statement-in-rust\">What is The Match Statement in Rust?</a>\n<ol>\n<li><a href=\"#how-to-use-iterators-in-match-statements-in-rust\">How to use iterators in match statements in Rust</a></li>\n<li><a href=\"#what-are-match-guards-in-rust\">What are match guards in Rust?</a></li>\n<li><a href=\"#what-is-binding-in-rust\">What is binding in Rust?</a></li>\n</ol>\n</li>\n<li><a href=\"#how-to-build-a-json-parser-stage-1-reader\">How to Build a JSON Parser – Stage 1: Reader</a>\n<ol>\n<li><a href=\"#what-is-the-utf-8-byte-encoding\">What is the UTF-8 byte encoding?</a></li>\n<li><a href=\"#how-to-read-the-data\">How to read the data</a></li>\n<li><a href=\"#how-to-implement-the-iterator-for-jsonreader\">How to implement the iterator for JsonReader</a></li>\n</ol>\n</li>\n<li><a href=\"#how-to-build-a-json-parser-stage-2-prepare-intermediate-data-types\">How to Build a JSON Parser – Stage 2: Prepare Intermediate Data Types</a>\n<ol>\n<li><a href=\"#the-value-type\">The value type</a></li>\n<li><a href=\"#how-to-add-helpful-conversion-methods\">How to add helpful conversion methods</a></li>\n</ol>\n</li>\n<li><a href=\"#how-to-build-a-json-parser-stage-3-tokenization\">How to Build a JSON Parser – Stage 3: Tokenization</a>\n<ol>\n<li><a href=\"#how-to-define-expected-valid-tokens\">How to define expected valid tokens</a></li>\n<li><a href=\"#how-to-implement-the-tokenizer-struct\">How to implement the tokenizer struct</a></li>\n<li><a href=\"#how-to-tokenize-an-iterator-of-characters\">How to tokenize an iterator of characters</a></li>\n<li><a href=\"#how-to-parse-string-tokens\">How to parse string tokens</a></li>\n<li><a href=\"#how-to-parse-number-tokens\">How to parse number tokens</a></li>\n<li><a href=\"#how-to-parse-boolean-tokens\">How to parse boolean tokens</a></li>\n<li><a href=\"#how-to-parse-null-literal\">How to parse Null Literal</a></li>\n<li><a href=\"#how-to-parse-delimiters\">How to parse delimiters</a></li>\n<li><a href=\"#how-to-parse-a-terminating-character\">How to parse a terminating character</a></li>\n</ol>\n</li>\n<li><a href=\"#how-to-build-a-json-parser-stage-4-from-tokens-to-value\">How to Build a JSON Parser – Stage 4: From Tokens To Value</a>\n<ol>\n<li><a href=\"#how-to-parse-primitives\">How to parse primitives</a></li>\n<li><a href=\"#how-to-parse-arrays\">How to parse arrays</a></li>\n<li><a href=\"#how-to-parse-objects\">How to parse objects</a></li>\n</ol>\n</li>\n<li><a href=\"#how-to-use-the-json-parser\">How to Use the JSON parser</a></li>\n<li><a href=\"#wrapping-up\">Wrapping Up</a></li>\n</ol>\n<!--kg-card-end: markdown--><h2 id=\"what-are-iterators-in-rust\">What are Iterators in Rust?</h2><p>Iterators are not a new concept, neither are they specific to Rust. It's both a pattern that is also implemented as an object in most programming languages for working with lists (such as arrays or vectors) or collections (such as HashMaps) that allows you to traverse through these data types and act on individual entries in them.</p><p>In Rust, iterators are a very powerful feature. The official Rust book describes it as:</p><blockquote>The iterator pattern allows you to perform some task on a sequence of items in turn. An iterator is responsible for the logic of iterating over each item and determining when the sequence has finished. When you use iterators, you don’t have to reimplement that logic yourself.</blockquote><blockquote>In Rust, iterators are <em>lazy</em>, meaning they have no effect until you call methods that consume the iterator to use it up.</blockquote><p>An iterator is an object that facilitates sequential access to the elements of a collection, like an array or a vector, without exposing the implementation details.</p><h3 id=\"how-to-implement-iterators-in-rust\">How to implement iterators in Rust</h3><p>Iterators are implemented in Rust using a collection of traits, the most basic of which is the <code>Iterator</code> trait. It is implemented for all collections in the standard library, and can be implemented for custom types as well. </p><blockquote>It requires the implementation of a single method: <code>next()</code>. This method returns an <code>Option&lt;T&gt;</code>, where <code>T</code> is the type of element the iterator is for. When <code>next()</code> is called (the call is implicit in most cases and you generally use higher level methods), the iterator produces <code>Some(value)</code> for the next element in the sequence or <code>None</code> when the iteration is complete. &nbsp;In most cases, whether the value is <code>Some</code> or <code>None</code> is also implicit.</blockquote><p>For example, anything that implements the <code>Iterator</code> trait, can be used with a for loop directly, which implicitly handles both calling the <code>next</code> method as well as handling whether the value is <code>Some</code> or <code>None</code>. A <code>None</code> value triggers the loop to end. This is true for the built-in types such as arrays, slices, vectors, and hash-maps as well.</p><p>For example, let's implement the iterator trait on a simple custom type. You need to store the current state of the iterator in the type. You can also store any additional information you need. Here, we just need to know the max number after which the iteration should end:</p><pre><code class=\"language-rust\">use std::iter::Iterator;\n\nstruct CustomType {\n    current: usize,\n    max: usize,\n}\n\nimpl CustomType {\n    fn new(max: usize) -&gt; Self {\n        Self {\n            current: 0,\n            max,\n        }\n    }\n}\n\nimpl Iterator for CustomType {\n    type Item = usize;\n    \n    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {\n        if self.current &gt;= self.max {\n            None\n        } else {\n            self.current += 1;\n            Some(self.current)\n        }\n    }\n}\n\nfn main() {\n    let custom = CustomType::new(10);\n    \n    for item in custom {\n        println!(\"Item is {item}\");\n    }\n}\n</code></pre><pre><code class=\"language-shell\"># Output\n\nItem is 1\nItem is 2\nItem is 3\nItem is 4\nItem is 5\nItem is 6\nItem is 7\nItem is 8\nItem is 9\nItem is 10</code></pre><p>Rust iterators are also lazily evaluated, meaning they do not do anything unless they're used. This means that until you actually want to get the next value and do something with it, it won't even compute what the next value is.</p><p>This also means that if you have a chain of operations, such as a map and a filter, each item will go through the entire pipeline first, before the code processes the next item. This is unlike many other languages which support <code>map</code> and <code>filter</code> as methods, where first the entire map will be processed for all operations, and then the filter will be performed.</p><p>If you think about it carefully, iterators allow us to write parallel processing pipelines in a much easier way than the counterpart.</p><p>Since <code>Iterator</code> is just a trait, it allows for iterators to be chain-able and transformable to other iterators using various adapter methods (either the ones in standard library, or the ones that you can implement yourself).</p><h3 id=\"what-are-peekable-iterators-in-rust\">What are peekable iterators in Rust?</h3><p>Many times, you need the ability to know what the next element will be for deciding what to do, without actually modifying the iterator state for it to move to the next element. This is especially necessary when working with an iterator of tokens for parsing, as we'll do later in this tutorial.</p><p>This is where the <code>Peekable</code> struct comes in. You can convert any iterator into a peekable iterator by calling the <code>peekable</code> method on it.</p><p>Let's take the previous example and see how peekable works in action:</p><pre><code class=\"language-rust\">use std::iter::Iterator;\n\nstruct CustomType {\n    current: usize,\n    max: usize,\n}\n\nimpl CustomType {\n    fn new(max: usize) -&gt; Self {\n        Self {\n            current: 0,\n            max,\n        }\n    }\n}\n\nimpl Iterator for CustomType {\n    type Item = usize;\n    \n    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {\n        if self.current &gt;= self.max {\n            None\n        } else {\n            self.current += 1;\n            Some(self.current)\n        }\n    }\n}\n\nfn main() {\n    let mut custom = CustomType::new(2).peekable();\n    \n    let first = custom.peek();\n    println!(\"{first:?}\");\n    \n    let second = custom.next();\n    println!(\"{second:?}\");\n    \n    let third = custom.next();\n    println!(\"{third:?}\");\n    \n    let fourth = custom.next();\n    println!(\"{fourth:?}\");\n}</code></pre><pre><code class=\"language-shell\"># Output\n\nSome(1)\nSome(1)\nSome(2)\nNone</code></pre><p>I also wanted to show you how you can use iterators manually without a for loop, which is why you see all the calls to <code>next</code> method, and also that it returns <code>Option</code> instead of the value directly.</p><p>Also notice that the <code>first</code> and <code>second</code> variables are both <code>Some(1)</code>. This is because we called <code>peek</code> the first time which returned the first element but without modifying the state of the iterator.</p><h2 id=\"what-is-the-match-statement-in-rust\">What is The Match Statement in Rust?</h2><p>The match statement is a pattern-matching syntax in Rust that allows you to conditionally run code based on complex conditions in a concise syntax. You can think of it as a <code>switch</code> statement from other languages, but on steroids.</p><p>A very simple example of a match statement is:</p><pre><code class=\"language-rust\">let value = true;\n\nmatch value {\n\ttrue =&gt; {\n    \tprintln!(\"Value is true\")\n    },\n    false =&gt; {\n    \tprintln!(\"Value is false\")\n\t}\n}</code></pre><p>The various conditions defined above, namely <code>true</code> and <code>false</code>, are known as branches. Each branch can have a single match, multiple matches separated by the pipe <code>|</code> operator, and ranges. They also can have <code>guards</code> and <code>binding</code> for each arm. Let's see what each of these mean:</p><pre><code class=\"language-rust\">// Multiple conditions per branch\n\nlet value = \"some_string\";\n\nmatch value {\n\t\"some_string1\" | \"some_string2\" | \"some_string3\" =&gt; {\n    \tprintln!(\"Bad match\");\n    }\n    \"some_string\" =&gt; {\n    \tprintln!(\"Good match\");\n    }\n    _ =&gt; {\n    \tprintln!(\"No match\");\n    }\n}</code></pre><p>Notice the <code>_</code> branch in the above example. Match statements require you to cover all possible cases. In the first example, since the value was a boolean, there were only two possible values, <code>true</code> and <code>false</code>. This is why in the first case, we &nbsp;already covered all possible values.</p><p>In the 2nd example however, the value we're matching against is a string ( <code>&amp;str</code> to be more precise). A string can be any value. It's impossible to write a match statement that can ever cover all possible cases for this example. Good thing is, Rust has a special matcher <code>_</code> that matches any value. </p><p>If you're experienced with JavaScript or C (or many other languages that have the traditional <code>switch</code> syntax), <code>_</code> is equivalent to the <code>default</code> case in <code>switch</code>, but you don't need to use <code>_</code>, you can also bind it to a variable and handle it differently. We'll see how to do this shortly.</p><h3 id=\"how-to-use-iterators-in-match-statements-in-rust\">How to use iterators in match statements in Rust</h3><p>A match statement allows you to use iterators as branches. A successful match occurs if the value being matched is one of the values in the iterator. For example, say you are matching if a <code>char</code> type is a digit or not. You can write a simple iterator of characters that contains all the digit characters and use that as a branch:</p><pre><code class=\"language-rust\">let value: char = '5';\n\nmatch value {\n\t'0'..='9' =&gt; {\n    \tprintln!(\"Character is a digit\");\n    }\n    _ =&gt; {\n    \tprintln!(\"Character is not a digit\");\n    }\n}</code></pre><p>The above example will print \"Character is a digit\". If you're not familiar with the <code>..=</code> syntax, it's a shorthand to create iterators over a range. In the example above, the iterator starts at <code>'0'</code> character and ends at <code>'9'</code> character, including all of the characters in between.</p><p>You can also use <code>1..5</code> to create a iterator over the range between 1 and 5 but excluding 5, so that the iterator will contain <code>1, 2, 3, 4</code>.</p><p>You can also use a variable that holds the iterator as the value, meaning that the iterators do not need to be created inline:</p><pre><code class=\"language-rust\">let list = vec![\"1, 2\", \"3, 4\"].iter();\n    let value = \"3, 4\";\n    \n    match value {\n        list =&gt; {\n            println!(\"Matched\");\n        }\n        _ =&gt; {\n            println!(\"No matches\");\n        }\n    }</code></pre><p>Note that the example calls <code>.iter()</code> on the vec to store the iterator in <code>list</code> variable and not the vector. Match arms cannot have method calls, so it's important to convert the value to an iterator outside of the match statement.</p><h3 id=\"what-are-match-guards-in-rust\">What are match guards in Rust?</h3><p>Guards in match statements are additional conditions for a particular branch that the branch must satisfy to consider a successful match. For example, if you want to match over a range of numbers, but also match on whether they're odd or even, match guards can come in handy.</p><p>The syntax is also pretty intuitive. It is of the form <code>&lt;pattern&gt; if &lt;condition&gt; =&gt; {}</code>.</p><pre><code class=\"language-rust\">let value: u8 = 5;\n\nmatch value {\n    0..=9 if value % 2 == 0 =&gt; {\n        println!(\"Value is even\");\n    }\n    0..=9 if value % 2 == 1 =&gt; {\n        println!(\"Value is odd\");\n    }\n    _ =&gt; {\n        println!(\"Unexpected value\");\n    }\n}</code></pre><p>The above code will print \"Value is odd\".</p><h3 id=\"what-is-binding-in-rust\">What is binding in Rust?</h3><p>Binding allows you to store values in variables that can be used within the branch where the binding is present. It's basically assigning variables to certain parts of the pattern. </p><h4 id=\"pattern-binding\">Pattern Binding</h4><p>A very simple example is binding the catch-all pattern to a variable instead of ignoring its value using <code>_</code>.</p><pre><code class=\"language-rust\">let value: u8 = 5;\n\nmatch value {\n    0..=9 if value % 2 == 0 =&gt; {\n        println!(\"Value is even\");\n    }\n    0..=9 if value % 2 == 1 =&gt; {\n        println!(\"Value is odd\");\n    }\n    other_value =&gt; {\n        println!(\"Unexpected value: {other_value}\");\n    }\n}</code></pre><p>Notice that in this example, we used the variable <code>other_value</code> to bind the value of <code>value</code> in the last pattern, which is a catch-all if it doesn't match any of the previous patterns. We can then use the variable in logic for that arm. Here we just print it the console.</p><p>Some other examples of binding are:</p><pre><code class=\"language-rust\">let value: Option&lt;i32&gt; = Some(43);\n\nmatch value {\n\tSome(matched_value) =&gt; println!(\"The value is {matched_value}\"),\n    None =&gt; println!(\"There is no value\")\n}</code></pre><p>In this example, we bound the value within the <code>Some</code> pattern for storing the inner value of the option, and use it in our logic.</p><pre><code class=\"language-rust\">pub struct Person {\n\tname: String,\n    age: u32,\n}\n\nlet value: Option&lt;Person&gt; = Some(Person {\n\tname: \"Name\".to_string(),\n    age: 23,\n});\n\nmatch value {\n\tSome(Person { name: person_name, age }) =&gt; {\n    \tprintln!(\"{person_name} is {age} years old\");\n    },\n    None =&gt; {\n    \tprintln!(\"The value is empty\");\n    }\n}</code></pre><p>We see two different types of binding in this example. The first is assigning a different name to a struct field by destructuring it ( <code>name</code> field), and the other is using the same name as the name of the field ( <code>age</code> field).</p><h4 id=\"the-binding\">The <code>@</code> Binding</h4><p>The official Rust book describes it as:</p><blockquote>The at operator @ lets us create a variable that holds a value at the same time as we’re testing that value for a pattern match.</blockquote><p>In our example of pattern matching against a range of values, or against an iterator, we can bind the matched value to a variable using this syntax to use it within that branch:</p><pre><code class=\"language-rust\">let value: u8 = 5;\n\nmatch value {\n    digit @ 0..=9 =&gt; {\n    \tprintln!(\"The matched value is {digit}\");\n    }\n    _ =&gt; {\n        println!(\"Unexpected value\");\n    }\n}</code></pre><p>Here we are binding the matched value from the iterator to the <code>digit</code> variable, that we then use within the branch to read the actual value.</p><h2 id=\"how-to-build-a-json-parser-stage-1-reader\">How to Build a JSON Parser – Stage 1: Reader</h2><p>Before we can parse incoming JSON data, we need to be able to read it in a way which facilitates parsing it. To be able to tokenize the incoming JSON, we need to analyse each character as they come in, and based on whether they represent a literal value, or a delimiter, (or an invalid value), decide what to do with them as well as subsequent characters.</p><p>This is a really good use case for using a combination of iterators and Rust's match syntax.</p><p>Our reader needs to hold two pieces of data. A buffered reader using which we can iterate over the input, and a <code>character_buffer</code>, which will hold the current character being decoded. </p><p>At this point, you may ask why we need to hold the character buffer in the reader and the reason is that JSON is UTF-8 encoded.</p><h3 id=\"what-is-the-utf-8-byte-encoding\">What is the UTF-8 byte encoding?</h3><p>A UTF-8 character can be anywhere between 1 byte to 4 bytes long. We need to be able to parse all of the valid characters because the JSON spec supports these characters. This means that JSON characters can be either of 1-byte, 2-bytes, 3-bytes or 4-bytes long.</p><p>For each iteration, we need to read 4 bytes at a time, decide how many characters the 4 bytes contain (for example, these 4 bytes can contain 4 1-byte characters), finish iterating over them and then move on to the reading next 4 bytes and repeating the process. To store this intermediary piece of information, we need the character buffer.</p><p>It is also possible that we only have part of the character in the current 4 byte. For example, if you consider 2 1-byte characters followed by 1 3-byte character like <code>23€</code>, the first 4 bytes will contain 2 valid characters and only part of the next valid character. You also need to be able to handle this, which will involve rewinding the iterator.</p><p>It's possible to handle this in a way where we do not need allocations, and for performance reasons it's in fact better to do so. But I will leave that to you as a reader to think about how to implement it in this case, as it is not the focus of this article.</p><p>I hope that it's now clear why we iterators are the best tool for the job here.</p><h3 id=\"how-to-read-the-data\">How to read the data</h3><p>We are going to support two different readers. One is directly from a buffered reader (which is most commonly created from a file), and the other is from a iterator over bytes.</p><p>These are going to be pretty straightforward. For reading from a file, you need to create a buffered cursor over the underlying file data:</p><pre><code class=\"language-rust\">let file = File::create(\"dummy.json\").unwrap();\nlet reader = BufReader::new(file);</code></pre><p>Let's start by implementing the JSON Reader struct and these methods on it:</p><pre><code class=\"language-rust\">// src/reader.rs\n\nuse std::collections::VecDeque;\nuse std::io::{BufReader, Cursor, Read, Seek};\nuse std::str::from_utf8;\n\n/// A struct that handles reading input data to be parsed and\n/// provides an iterator over said data character-by-character.\npub struct JsonReader&lt;T&gt;\nwhere\n    T: Read + Seek,\n{\n    /// A reference to the input data, which can be anything\n    /// that implements [`Read`]\n    reader: BufReader&lt;T&gt;,\n    \n    /// A character buffer that holds queue of characters to\n    /// be used by the iterator.\n    ///\n    /// This is necessary because UTF-8 can be 1-4 bytes long.\n    /// Because of this, the reader always reads 4 bytes at a \n    /// time. We then iterate over \"characters\", irrespective of \n    /// whether they are 1 byte long, or 4.\n    ///\n    /// A [`VecDeque`] is used instead of a normal vector \n    /// because characters need to be read out from the start \n    /// of the buffer.\n    character_buffer: VecDeque&lt;char&gt;,\n}\n\nimpl&lt;T&gt; JsonReader&lt;T&gt;\nwhere\n    T: Read + Seek,\n{\n    /// Create a new [`JsonReader`] that reads from a file\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// use std::fs::File;\n    /// use std::io::BufReader;\n    /// use json_parser::reader::JsonReader;\n    ///\n    /// let file = File::create(\"dummy.json\").unwrap();\n    /// let reader = BufReader::new(file);\n    ///\n    /// let json_reader = JsonReader::new(reader);\n    /// ```\n    pub fn new(reader: BufReader&lt;T&gt;) -&gt; Self {\n        JsonReader {\n            reader,\n            character_buffer: VecDeque::with_capacity(4),\n        }\n    }\n\n    /// Create a new [`JsonReader`] that reads from a given byte stream\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// use std::io::{BufReader, Cursor};\n    /// use json_parser::reader::JsonReader;\n    ///\n    /// let input_json_string = r#\"{\"key1\":\"value1\",\"key2\":\"value2\"}\"#;\n    ///\n    /// let json_reader = JsonReader::&lt;Cursor&lt;&amp;'static [u8]&gt;&gt;::from_bytes(input_json_string.as_bytes());\n    /// ```\n    #[must_use]\n    pub fn from_bytes(bytes: &amp;[u8]) -&gt; JsonReader&lt;Cursor&lt;&amp;[u8]&gt;&gt; {\n        JsonReader {\n            reader: BufReader::new(Cursor::new(bytes)),\n            character_buffer: VecDeque::with_capacity(4),\n        }\n    }\n}</code></pre><h3 id=\"how-to-implement-the-iterator-for-jsonreader\">How to implement the iterator for <code>JsonReader</code></h3><p>Next, you are going to need to implement the <code>Iterator</code> trait on this <code>JSONReader</code> which will facilitate parsing.</p><p>First, if the character buffer isn't empty already, you can return the first character in buffer from iterator:</p><pre><code class=\"language-rust\">if !self.character_buffer.is_empty() {\n\treturn self.character_buffer.pop_front();\n}</code></pre><p>If it is empty, you need to create a new buffer and read into that buffer from the reader:</p><pre><code class=\"language-rust\">let mut utf8_buffer = [0, 0, 0, 0];\nlet _ = self.reader.read(&amp;mut utf8_buffer);</code></pre><p>Here, you are creating a new array of size 4, and you'll be reading 4 bytes into it from the reader. </p><p>Next, you need to parse it as UTF-8. Rust provides you with a <code>from_utf8</code> function that will try to parse the given bytes as UTF-8. It returns a string containing parsed characters if it was valid. </p><p>It returns an error with number of invalid bytes as part of the error information, which you can use to backtrack the reader to only retain the valid characters, and try the next 4 characters from the point of failure.</p><p>If that didn't make too much sense, looking at the code will make things clear:</p><pre><code class=\"language-rust\">match from_utf8(&amp;utf8_buffer) {\n    Ok(string) =&gt; {\n        self.character_buffer = string.chars().collect();\n        self.character_buffer.pop_front()\n    }\n    Err(error) =&gt; {\n        // Read valid bytes, and rewind the buffered reader for \n        // the remaining bytes so that they can be read again in the\n        // next iteration.\n\n        let valid_bytes = error.valid_up_to();\n        let string = from_utf8(&amp;utf8_buffer[..valid_bytes]).unwrap();\n\n        let remaining_bytes = 4 - valid_bytes;\n\n        let _ = self.reader.seek_relative(-(remaining_bytes as i64));\n\n\t\t// Collect the valid characters into character_buffer\n        self.character_buffer = string.chars().collect();\n        \n        // Return the first character from character_buffer\n        self.character_buffer.pop_front()\n    }\n}</code></pre><p>Here's the complete implementation of the <code>Iterator</code> trait:</p><pre><code class=\"language-rust\">// src/reader.rs\n\nimpl&lt;T&gt; Iterator for JsonReader&lt;T&gt;\nwhere\n    T: Read + Seek,\n{\n    type Item = char;\n\n    #[allow(clippy::cast_possible_wrap)]\n    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {\n        if !self.character_buffer.is_empty() {\n            return self.character_buffer.pop_front();\n        }\n\n        let mut utf8_buffer = [0, 0, 0, 0];\n        let _ = self.reader.read(&amp;mut utf8_buffer);\n\n        match from_utf8(&amp;utf8_buffer) {\n            Ok(string) =&gt; {\n                self.character_buffer = string.chars().collect();\n                self.character_buffer.pop_front()\n            }\n            Err(error) =&gt; {\n                // Read valid bytes, and rewind the buffered reader for\n                // the remaining bytes so that they can be read again in the\n                // next iteration.\n\n                let valid_bytes = error.valid_up_to();\n                let string = from_utf8(&amp;utf8_buffer[..valid_bytes]).unwrap();\n\n                let remaining_bytes = 4 - valid_bytes;\n\n                let _ = self.reader.seek_relative(-(remaining_bytes as i64));\n\n                // Collect the valid characters into character_buffer\n                self.character_buffer = string.chars().collect();\n\n                // Return the first character from character_buffer\n                self.character_buffer.pop_front()\n            }\n        }\n    }\n}\n</code></pre><p>And that's all you need to do for reading the input data for parsing. It's time to move on to the next stage in the process.</p><h2 id=\"how-to-build-a-json-parser-stage-2-prepare-intermediate-data-types\">How to Build a JSON Parser – Stage 2: Prepare Intermediate Data Types</h2><p>This isn't really a stage in the parsing pipeline, but it is a prerequisite for the next steps. We need to define Rust types that map to all of the possible types that JSON supports.</p><p>JSON supports the following data types:</p><ul><li>String</li><li>Number</li><li>Boolean</li><li>Array</li><li>Object</li><li>Null</li></ul><p>A number can further be either an integer, or a floating-point number. While you can use <code>f64</code> as the Rust type for all JSON numbers, practically it's not feasible without littering your code with type casts everywhere when you try to use it. </p><p>So in this tutorial, we're going to indeed make that distinction and record that fact.</p><h3 id=\"the-value-type\">The value type</h3><p>Enums are the ideal way to store state like this, where each variant needs to have some identifier as metadata (in this case the type of JSON value), and optionally some data attached to it. The data you're going to attach to these variants will be the actual value of that type in JSON.</p><pre><code class=\"language-rust\">// src/value.rs\n\nuse std::collections::HashMap;\n\n#[derive(Debug, Copy, Clone, PartialEq)]\npub enum Number {\n    I64(i64),\n    F64(f64),\n}\n\n#[derive(Debug, PartialEq, Clone)]\npub enum Value {\n    String(String),\n    Number(Number),\n    Boolean(bool),\n    Array(Vec&lt;Value&gt;),\n    Object(HashMap&lt;String, Value&gt;),\n    Null,\n}</code></pre><p>The first few variants are pretty straightforward, you define the variant and the data it holds is a corresponding Rust type. The last variant is even simpler, representing the <code>null</code> value which doesn't need further data to be stored.</p><p>The <code>Array</code> and <code>Object</code> variants though are a bit more interesting, since they are recursively storing the Enum itself. This makes sense, as arrays in JSON can have any value type that JSON spec supports. And objects in JSON always have string keys and any JSON supported value, including other objects.</p><h3 id=\"how-to-add-helpful-conversion-methods\">How to add helpful conversion methods</h3><p>You will also need a way to convert the enum type into the underlying types, and throw an error if the underlying data isn't what you expected. This is mostly boilerplate code, so I'm just going to put it all together without further explanation:</p><pre><code class=\"language-rust\">// src/value.rs\n\nimpl TryFrom&lt;&amp;Value&gt; for String {\n    type Error = ();\n\n    fn try_from(value: &amp;Value) -&gt; Result&lt;Self, ()&gt; {\n        match value {\n            Value::String(value) =&gt; Ok(value.clone()),\n            _ =&gt; Err(()),\n        }\n    }\n}\n\nimpl TryFrom&lt;&amp;Value&gt; for i64 {\n    type Error = ();\n\n    #[allow(clippy::cast_possible_truncation)]\n    fn try_from(value: &amp;Value) -&gt; Result&lt;Self, ()&gt; {\n        match value {\n            Value::Number(value) =&gt; match value {\n                Number::I64(value) =&gt; Ok(*value),\n                Number::F64(value) =&gt; Ok(*value as i64),\n            },\n            _ =&gt; Err(()),\n        }\n    }\n}\n\nimpl TryFrom&lt;&amp;Value&gt; for f64 {\n    type Error = ();\n\n    fn try_from(value: &amp;Value) -&gt; Result&lt;Self, ()&gt; {\n        match value {\n            Value::Number(value) =&gt; match value {\n                Number::F64(value) =&gt; Ok(*value),\n                Number::I64(value) =&gt; Ok(*value as f64),\n            },\n            _ =&gt; Err(()),\n        }\n    }\n}\n\nimpl TryFrom&lt;&amp;Value&gt; for bool {\n    type Error = ();\n\n    fn try_from(value: &amp;Value) -&gt; Result&lt;Self, ()&gt; {\n        match value {\n            Value::Boolean(value) =&gt; Ok(*value),\n            _ =&gt; Err(()),\n        }\n    }\n}\n\nimpl&lt;'a&gt; TryFrom&lt;&amp;'a Value&gt; for &amp;'a Vec&lt;Value&gt; {\n    type Error = ();\n\n    fn try_from(value: &amp;'a Value) -&gt; Result&lt;Self, ()&gt; {\n        match value {\n            Value::Array(value) =&gt; Ok(value),\n            _ =&gt; Err(()),\n        }\n    }\n}\n\n#[allow(clippy::implicit_hasher)]\nimpl&lt;'a&gt; TryFrom&lt;&amp;'a Value&gt; for &amp;'a HashMap&lt;String, Value&gt; {\n    type Error = ();\n\n    fn try_from(value: &amp;'a Value) -&gt; Result&lt;Self, ()&gt; {\n        match value {\n            Value::Object(value) =&gt; Ok(value),\n            _ =&gt; Err(()),\n        }\n    }\n}</code></pre><h2 id=\"how-to-build-a-json-parser-stage-3-tokenization\">How to Build a JSON Parser – Stage 3: Tokenization</h2><p>The next step is to take the input data and tokenize it. </p><p>Tokenization is the process of splitting a large chunk of input into smaller, more digestible units that can then be analysed independently. This also allows you to work with them much more easily than just byte streams and they help represent the incoming data as a standard form, and allow for mapping tokens to output value types.</p><p>The parser can then recursively process all tokens until there's nothing to process, giving us the parsed data once it finishes.</p><h3 id=\"how-to-define-expected-valid-tokens\">How to define expected valid tokens</h3><p>There is going to be some duplication here compared to the value type you looked at previously, but that's to be expected, since the token representation of any literal value will be that value itself. There's no way to break it down to smaller units in that case.</p><p>Once again, Enum is the right data type for this since we need both metadata (as the token type), and optionally data associated with it.</p><p>The tokens representing literal values can be defined in this way:</p><pre><code class=\"language-rust\">// src/token.rs\n\nuse std::io::{Read, Seek};\nuse std::iter::Peekable;\nuse crate::reader::JsonReader;\n\n#[derive(Debug, Copy, Clone, PartialEq)]\npub enum Number {\n    I64(i64),\n    F64(f64),\n}\n\n#[derive(Debug, Clone, PartialEq)]\npub enum Token {\n    String(String),\n    Number(Number),\n    Boolean(bool),\n    Null,\n}</code></pre><p>Apart from these, we also have a lot of other tokens in JSON that form the \"grammar\" of the JSON format. These are:</p><ul><li>Curly braces (<code>{</code> or <code>}</code> ) that represent opening and closing of an object respectively.</li><li>Square brackets (<code>[</code> or <code>]</code>) that represent opening and closing of an array respectively.</li><li>Colon (<code>:</code>) for separating key-value pairs within the object.</li><li>Comma (<code>,</code>) for separating values.</li><li>Quotes (<code>\"</code>) that represent opening/closing of the string literal values.</li></ul><p>All of these do not need to have any data associated with them, so they're going to be unit variants in the enum. Adding these in, the complete enum will be:</p><pre><code class=\"language-rust\">// src/token.rs\n\nuse std::io::{Read, Seek};\nuse std::iter::Peekable;\nuse crate::reader::JsonReader;\nuse crate::value::Number;\n\n#[derive(Debug, Clone, PartialEq)]\npub enum Token {\n    CurlyOpen,\n    CurlyClose,\n    Quotes,\n    Colon,\n    String(String),\n    Number(Number),\n    ArrayOpen,\n    ArrayClose,\n    Comma,\n    Boolean(bool),\n    Null,\n}</code></pre><h3 id=\"how-to-implement-the-tokenizer-struct\">How to implement the tokenizer struct</h3><p>You are going to need a <code>JsonTokenizer</code> struct that can facilitate the process while also responsible for holding the state of the tokenizer process:</p><pre><code class=\"language-rust\">// src/token.rs\n\npub struct JsonTokenizer&lt;T&gt;\n    where\n        T: Read + Seek,\n{\n    tokens: Vec&lt;Token&gt;,\n    iterator: Peekable&lt;JsonReader&lt;T&gt;&gt;,\n}\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt;\nwhere\n    T: Read + Seek,\n{\n    pub fn new(reader: File) -&gt; JsonTokenizer&lt;File&gt; {\n        let json_reader = JsonReader::&lt;File&gt;::new(BufReader::new(reader));\n\n        JsonTokenizer {\n            iterator: json_reader.peekable(),\n            tokens: vec![],\n        }\n    }\n\n    pub fn from_bytes&lt;'a&gt;(input: &amp;'a [u8]) -&gt; JsonTokenizer&lt;Cursor&lt;&amp;'a [u8]&gt;&gt; {\n        let json_reader = JsonReader::&lt;Cursor&lt;&amp;'a [u8]&gt;&gt;::from_bytes(input);\n\n        JsonTokenizer {\n            iterator: json_reader.peekable(),\n            tokens: Vec::with_capacity(input.len()),\n        }\n    }\n}</code></pre><p>In this case, we've made it generic over where the input comes from. The type T needs to implement <code>Read</code> &amp; <code>Seek</code> traits, the reason for which is explained shortly.</p><p>The iterator also needs to be <code>Peekable</code>, which basically means we should be able to read the next item in the iterator without advancing the iterator itself.</p><h3 id=\"how-to-tokenize-an-iterator-of-characters\">How to tokenize an iterator of characters</h3><p>Once you've defined all of the expected tokens, you need to take your character iterator and convert it into a list of tokens, where each entry is a variant of the <code>Token</code> enum defined in the last section.</p><p>We'll start by writing a skeleton function that matches on the incoming character and panics if it encounters an invalid token:</p><pre><code class=\"language-rust\">// src/token.rs\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt; where\n    T: Read + Seek, {\n    pub fn tokenize_json(&amp;mut self) -&gt; Result&lt;&amp;[Token], ()&gt; {\n        while let Some(character) = self.iterator.peek() {\n            match *character {\n                // Parse all other tokens here\n                // ...\n                character =&gt; {\n                    if character.is_ascii_whitespace() {\n                        continue;\n                    }\n\n                    panic!(\"Unexpected character: ;{character};\")\n                }\n            }\n        }\n\n        Ok(&amp;self.tokens)\n    }\n}</code></pre><p>There are two noteworthy things here, let's start with the easy one. If your match block doesn't encounter any known characters (you will implement this shortly), you need to have a \"catch-all\" condition that matches any character. </p><p>Here, we are going to ignore any whitespace characters and continue to the next iteration if it encounters one. If the character isn't a whitespace, then you need to panic (or return error) here.</p><p>The next noteworthy thing here is <code>self.iterator.peek()</code>. To facilitate parsing of different kinds of tokens from delimiters to literal values, it is important that the iterator is not advanced when reading out the next character. This needs to happen so that you can conditionally advance it based on what character is next. </p><p>You also need to delegate parsing of certain sets of tokens to different functions, which will have their own logic of advancing the iterator. </p><p>A good example is parsing the <code>null</code> literal value. If the match encounters a <code>n</code> character and is not within a string, object, number, and so on, then you need to ensure that the next three characters are <code>u</code>, <code>l</code>, <code>l</code> respectively to form the literal value <code>null</code> and then advance the iterator by four so that the next loop starts parsing after the <code>null</code> character and not in the middle of it.</p><h3 id=\"how-to-parse-string-tokens\">How to parse string tokens</h3><p>We're going to start by parsing strings. Let's stop for a second and think what needs to happen step-by-step:</p><ul><li>Check if match encounters a <code>\"</code> character. If it does, push <code>Token::Quote</code> to your list of output tokens.</li><li>Advance the iterator by one so the next steps start from after the <code>\"</code> character.</li><li>Parse all characters as part of the string until you encounter another <code>\"</code> character which indicates closing of the string value.</li><li>Advance the iterator by however many characters are parsed as part of the string, and one addition to also jump over the closing <code>\"</code> character.</li><li>Push <code>Token::String</code> with the parsed value to your list of output tokens.</li><li>Push <code>Token::Quote</code> to your list of output tokens.</li></ul><p>Hopefully, that isn't too confusing. But the code should help you understand it better:</p><pre><code class=\"language-rust\">// src/token.rs\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt;\n    where\n        T: Read + Seek,\n{\n    // ...\n\n    pub fn tokenize_json(&amp;mut self) -&gt; Result&lt;&amp;[Token], ()&gt; {\n        while let Some(character) = self.iterator.peek() {\n            match *character {\n                '\"' =&gt; {\n                    // Pushed opening quote to output tokens list.\n                    self.tokens.push(Token::Quotes);\n\n                    // Skip quote token since we already added it to the tokens list.\n                    let _ = self.iterator.next();\n\n                    // Delegate parsing string value to a separate function.\n                    // The function should also take care of advancing the iterator properly.\n                    let string = self.parse_string();\n\n                    // Push parsed string to output tokens list.\n                    self.tokens.push(Token::String(string));\n\n                    // Pushed closing quote to output tokens list.\n                    self.tokens.push(Token::Quotes);\n                }\n                // ...\n            }\n        }\n\n        Ok(&amp;self.tokens)\n    }\n\n    fn parse_string(&amp;mut self) -&gt; String {\n        // Create new vector to hold parsed characters.\n        let mut string_characters = Vec::&lt;char&gt;::new();\n\n        // Take each character by reference so that they\n        // aren't moved out of the iterator, which will\n        // require you to move the iterator into this\n        // function.\n        for character in self.iterator.by_ref() {\n            // If it encounters a closing `\"`, break\n            // out of the loop as the string has ended.\n            if character == '\"' {\n                break;\n            }\n\n            // Continue pushing to the vector to build\n            // the string.\n            string_characters.push(character);\n        }\n\n        // Create a string out of character iterator and\n        // return it.\n        String::from_iter(string_characters)\n    }\n}</code></pre><p>As I've previously mentioned, we're not going to look at handling escape characters in this tutorial, as they do not add much value towards learning the topic at hand, but if you're interested, it will be a good exercise for you to add that in on top of the implementation.</p><p>That takes care of parsing the string, we can move on to a more interesting value type next.</p><h3 id=\"how-to-parse-number-tokens\">How to parse number tokens</h3><p>Numbers in JSON spec have a lot of variation. They can either be positive or negative, and integers or decimals. They can also be defined as scientific notation (for example negative exponential <code>3.7e-5</code> or positive exponential <code>3.7e5</code>). And we need to parse all of these variations.</p><p>As always, we'll start with the easy bit. If we encounter any character that can be a valid character in number, you need to delegate parsing to a <code>parse_number</code> function. But also, any valid number can only start with either a digit, or a negative sign. A number cannot begin with a decimal character or an epsilon character, so it makes things easier for us.</p><pre><code class=\"language-rust\">// src/token.rs\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt;\n    where\n        T: Read + Seek,\n{\n    // ...\n\n    pub fn tokenize_json(&amp;mut self) -&gt; Result&lt;&amp;[Token], ()&gt; {\n        while let Some(character) = self.iterator.peek() {\n            match *character {\n                // ...\n\n                '-' | '0'..='9' =&gt; {\n                    let number = self.parse_number()?;\n                    self.tokens.push(Token::Number(number));\n                }\n\n                // ...\n            }\n        }\n\n        Ok(&amp;self.tokens)\n    }\n    \n    // ...\n}</code></pre><p>Next, we'll implement the <code>parse_number</code> method:</p><pre><code class=\"language-rust\">// src/token.rs\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt;\n    where\n        T: Read + Seek,\n{\n    // ...\n\n    fn parse_number(&amp;mut self) -&gt; Result&lt;Number, ()&gt; {\n        // Store parsed number characters.\n        let mut number_characters = Vec::&lt;char&gt;::new();\n\n        // Stores whether the digit being parsed is after a `.` character\n        // making it a decimal.\n        let mut is_decimal = false;\n\n        // Stores the characters after an epsilon character `e` or `E`\n        // to indicate the exponential value.\n        let mut epsilon_characters = Vec::&lt;char&gt;::new();\n\n        // Stores whether the digit being parsed is part of the epsilon\n        // characters.\n        let mut is_epsilon_characters = false;\n\n        while let Some(character) = self.iterator.peek() {\n            match character {\n                // Match the negative sign character that indicates whether number is negative\n                '-' =&gt; {\n                    if is_epsilon_characters {\n                        // If it's parsing epsilon characters, push it to the epsilon\n                        // character set.\n                        epsilon_characters.push('-');\n                    } else {\n                        // Otherwise, push it to normal character set.\n                        number_characters.push('-');\n                    }\n\n                    // Advance the iterator by 1.\n                    let _ = self.iterator.next();\n                }\n                // Match a positive sign, which can be treated as redundant and ignored since\n                // positive is the default.\n                '+' =&gt; {\n                    // Advance the iterator by 1.\n                    let _ = self.iterator.next();\n                }\n                // Match any digit between 0 and 9, and store it into the `digit`\n                // variable.\n                digit @ '0'..='9' =&gt; {\n                    if is_epsilon_characters {\n                        // If it's parsing epsilon characters, push it to the epsilon\n                        // character set.\n                        epsilon_characters.push(*digit);\n                    } else {\n                        // Otherwise, push it to normal character set.\n                        number_characters.push(*digit);\n                    }\n                    // Advance the iterator by 1.\n                    let _ = self.iterator.next();\n                }\n                // Match the period character which indicates start of the fractional\n                // part of a decimal number.\n                '.' =&gt; {\n                    // Push the decimal character to numbers character set.\n                    number_characters.push('.');\n\n                    // Set the current state of number being decimal to true.\n                    is_decimal = true;\n\n                    // Advance the iterator by 1.\n                    let _ = self.iterator.next();\n                }\n                // Match any of the characters that can signify end of the number\n                // literal value. This can be a comma which separates key-value pair,\n                // closing object character, closing array character, or a `:` which\n                // separates a key from its value.\n                '}' | ',' | ']' | ':' =&gt; {\n                    break;\n                }\n                // Match the epsilon character which indicates that the number is in\n                // scientific notation.\n                'e' | 'E' =&gt; {\n                    // Panic if it's already parsing an exponential number since this would\n                    // mean there are 2 epsilon characters which is invalid.\n                    if is_epsilon_characters {\n                        panic!(\"Unexpected character while parsing number: {character}. Double epsilon characters encountered\");\n                    }\n\n                    // Set the current state of number being in scientific notation to true.\n                    is_epsilon_characters = true;\n\n                    // Advance the iterator by 1.\n                    let _ = self.iterator.next();\n                }\n                // Panic if any other character is encountered.\n                other =&gt; {\n                    if !other.is_ascii_whitespace() {\n                        panic!(\"Unexpected character while parsing number: {character}\")\n                    } else {\n                        self.iterator.next();\n                    }\n                },\n            }\n        }\n\n        if is_epsilon_characters {\n            // if the number is an exponential, perform the calculations to convert it\n            // to a floating point number in rust.\n\n            // Parse base as floating point number.\n            let base: f64 = String::from_iter(number_characters).parse().unwrap();\n\n            // Parse exponential as floating point number.\n            let exponential: f64 = String::from_iter(epsilon_characters).parse().unwrap();\n\n            // Return the final computed decimal number.\n            Ok(Number::F64(base * 10_f64.powf(exponential)))\n        } else if is_decimal {\n            // if the number is a decimal, parse it as a floating point number in rust.\n            Ok(Number::F64(\n                String::from_iter(number_characters).parse::&lt;f64&gt;().unwrap(),\n            ))\n        } else {\n            // Parse the number as an integer in rust.\n            Ok(Number::I64(\n                String::from_iter(number_characters).parse::&lt;i64&gt;().unwrap(),\n            ))\n        }\n    }\n}</code></pre><p>It is advisable for you to go through the code and read the comments to understand this function. You shouldn't encounter any new syntax that is not either covered already or assumed to be known by the reader.</p><h3 id=\"how-to-parse-boolean-tokens\">How to parse boolean tokens</h3><p>Parsing booleans is going to be the simplest one we look at so far. All we need to do is match <code>t</code> or <code>f</code> as the first character, and then check the next few characters to ensure they form the literal value <code>true</code> or <code>false</code>.</p><pre><code class=\"language-rust\">// src/token.rs\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt;\n    where\n        T: Read + Seek,\n{\n    // ...\n\n    pub fn tokenize_json(&amp;mut self) -&gt; Result&lt;&amp;[Token], ()&gt; {\n        while let Some(character) = self.iterator.peek() {\n            match *character {\n                // ...\n\n                // Match `t` character which indicates beginning of a boolean literal.\n                't' =&gt; {\n                    // Advance iterator by 1.\n                    let _ = self.iterator.next();\n\n                    // Assert next character is `r` while advancing the iterator by 1.\n                    assert_eq!(Some('r'), self.iterator.next());\n                    // Assert next character is `u` while advancing the iterator by 1.\n                    assert_eq!(Some('u'), self.iterator.next());\n                    // Assert next character is `e` while advancing the iterator by 1.\n                    assert_eq!(Some('e'), self.iterator.next());\n                    \n                    // Push the literal value to token list.\n                    self.tokens.push(Token::Boolean(true));\n                }\n                'f' =&gt; {\n                    // Advance iterator by 1.\n                    let _ = self.iterator.next();\n\n                    // Assert next character is `a` while advancing the iterator by 1.\n                    assert_eq!(Some('a'), self.iterator.next());\n                    // Assert next character is `l` while advancing the iterator by 1.\n                    assert_eq!(Some('l'), self.iterator.next());\n                    // Assert next character is `s` while advancing the iterator by 1.\n                    assert_eq!(Some('s'), self.iterator.next());\n                    // Assert next character is `e` while advancing the iterator by 1.\n                    assert_eq!(Some('e'), self.iterator.next());\n                    \n                    // Push the literal value to token list.\n                    self.tokens.push(Token::Boolean(false));\n                }\n\n                // ...\n            }\n        }\n\n        Ok(&amp;self.tokens)\n    }\n}</code></pre><h3 id=\"how-to-parse-null-literal\">How to parse Null Literal</h3><p>This is very similar to how we parsed booleans in the previous step:</p><pre><code class=\"language-rust\">// src/token.rs\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt;\n    where\n        T: Read + Seek,\n{\n    // ...\n\n    pub fn tokenize_json(&amp;mut self) -&gt; Result&lt;&amp;[Token], ()&gt; {\n        while let Some(character) = self.iterator.peek() {\n            match *character {\n                // ...\n\n                'n' =&gt; {\n                    // Advance iterator by 1.\n                    let _ = self.iterator.next();\n\n                    // Assert next character is `u` while advancing the iterator by 1.\n                    assert_eq!(Some('u'), self.iterator.next());\n                    // Assert next character is `l` while advancing the iterator by 1.\n                    assert_eq!(Some('l'), self.iterator.next());\n                    // Assert next character is `l` while advancing the iterator by 1.\n                    assert_eq!(Some('l'), self.iterator.next());\n\n                    // Push null literal value to output tokens list.\n                    self.tokens.push(Token::Null);\n                }\n\n                // ...\n            }\n        }\n\n        Ok(&amp;self.tokens)\n    }\n}</code></pre><h3 id=\"how-to-parse-delimiters\">How to parse delimiters</h3><p>Parsing delimiters is very simple. All you need to do is to match on them, and push the respective token into the output token list:</p><pre><code class=\"language-rust\">// src/token.rs\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt;\n    where\n        T: Read + Seek,\n{\n    // ...\n\n    pub fn tokenize_json(&amp;mut self) -&gt; Result&lt;&amp;[Token], ()&gt; {\n        while let Some(character) = self.iterator.peek() {\n            match *character {\n                // ...\n\n                '{' =&gt; {\n                    self.tokens.push(Token::CurlyOpen);\n                    let _ = self.iterator.next();\n                }\n                '}' =&gt; {\n                    self.tokens.push(Token::CurlyClose);\n                    let _ = self.iterator.next();\n                }\n                '[' =&gt; {\n                    self.tokens.push(Token::ArrayOpen);\n                    let _ = self.iterator.next();\n                }\n                ']' =&gt; {\n                    self.tokens.push(Token::ArrayClose);\n                    let _ = self.iterator.next();\n                }\n                ',' =&gt; {\n                    self.tokens.push(Token::Comma);\n                    let _ = self.iterator.next();\n                }\n                ':' =&gt; {\n                    self.tokens.push(Token::Colon);\n                    let _ = self.iterator.next();\n                }\n\n                // ...\n            }\n        }\n\n        Ok(&amp;self.tokens)\n    }\n}</code></pre><h3 id=\"how-to-parse-a-terminating-character\">How to parse a terminating character</h3><p>The input can sometimes contain <code>\\0</code> as the last character to indicate that the input has ended. This is more commonly known as EOF (End Of File) when dealing with files. It is also referred by other names like \"escape sequence\" or \"null\" character.</p><p>We need to handle it and break out of our parsing loop if we ever encounter this:</p><pre><code class=\"language-rust\">// src/token.rs\n\nimpl&lt;T&gt; JsonTokenizer&lt;T&gt;\n    where\n        T: Read + Seek,\n{\n    // ...\n\n    pub fn tokenize_json(&amp;mut self) -&gt; Result&lt;&amp;[Token], ()&gt; {\n        while let Some(character) = self.iterator.peek() {\n            match *character {\n                // ...\n\n                '\\0' =&gt; break,\n                other =&gt; {\n                    if !other.is_ascii_whitespace() {\n                        panic!(\"Unexpected token encountered: {other}\")\n                    } else {\n                        self.iterator.next();\n                    }\n                },\n\n                // ...\n            }\n        }\n\n        Ok(&amp;self.tokens)\n    }\n}</code></pre><h2 id=\"how-to-build-a-json-parser-stage-4-from-tokens-to-value\">How to Build a JSON Parser &nbsp;– Stage 4: From Tokens To Value</h2><p>Now that you have all the tokens, it's time to move on to the final stage of the process, converting tokens to real values that you can work with in the Rust code.</p><p>Start by creating a unit struct, which can be used as the parser. At this stage, we don't need to hold any state for the entirety of the process:</p><pre><code class=\"language-rust\">// src/parser.rs\n\nuse std::collections::HashMap;\nuse std::fs::File;\nuse std::io::{BufReader, Cursor};\nuse std::iter::Peekable;\nuse std::slice::Iter;\nuse crate::token::{JsonTokenizer, Token};\nuse crate::value::Value;\n\n/// Main parser which is the entrypoint for parsing JSON.\npub struct JsonParser;</code></pre><p>We are also going to use this as the public interface for the parser. So let's start by implementing those methods first:</p><pre><code class=\"language-rust\">// src/parser.rs\n\nimpl JsonParser {\n    /// Create a new [`JsonParser`] that parses JSON from bytes.\n    pub fn parse_from_bytes&lt;'a&gt;(input: &amp;'a [u8]) -&gt; Result&lt;Value, ()&gt; {\n        let mut json_tokenizer = JsonTokenizer::&lt;BufReader&lt;Cursor&lt;&amp;[u8]&gt;&gt;&gt;::from_bytes(input);\n        let tokens = json_tokenizer.tokenize_json()?;\n\n        Ok(Self::tokens_to_value(tokens))\n    }\n\n    /// Create a new [`JsonParser`] that parses JSON from file.\n    pub fn parse(reader: File) -&gt; Result&lt;Value, ()&gt; {\n        let mut json_tokenizer = JsonTokenizer::&lt;BufReader&lt;File&gt;&gt;::new(reader);\n        let tokens = json_tokenizer.tokenize_json()?;\n\n        Ok(Self::tokens_to_value(tokens))\n    }\n}</code></pre><p>With that out of the way, you first need to implement the <code>tokens_to_value</code> method that these public methods are calling. </p><h3 id=\"how-to-parse-primitives\">How to parse primitives</h3><p>This method will be responsible for taking an iterator of tokens as input and outputting the <code>Value</code> type you defined previously. This is also pretty straightforward, since the object/array parsing is delegated to separate methods, which we'll look at shortly.</p><pre><code class=\"language-rust\">// src/parser.rs\n\nimpl JsonParser {\n\t// ...\n    \n    fn tokens_to_value(tokens: &amp;[Token]) -&gt; Value {\n        // Create a peekable iterator over tokens\n        let mut iterator = tokens.iter().peekable();\n\n        // Initialize final value to null.\n        let mut value = Value::Null;\n\n        // Loop while there are tokens in the iterator.\n        // Note that you do not need to manually handle advancing the\n        // iterator in this case which is why you can directly call\n        // `iterator.next()`.\n        while let Some(token) = iterator.next() {\n            match token {\n                Token::CurlyOpen =&gt; {\n                    value = Value::Object(Self::process_object(&amp;mut iterator));\n                }\n                Token::String(string) =&gt; {\n                    value = Value::String(string.clone());\n                }\n                Token::Number(number) =&gt; {\n                    value = Value::Number(*number);\n                }\n                Token::ArrayOpen =&gt; {\n                    value = Value::Array(Self::process_array(&amp;mut iterator));\n                }\n                Token::Boolean(boolean) =&gt; value = Value::Boolean(*boolean),\n                Token::Null =&gt; value = Value::Null,\n                // Ignore all delimiters as you don't need to explicitly do anything\n                // when you encounter them.\n                Token::Comma\n                | Token::CurlyClose\n                | Token::Quotes\n                | Token::Colon\n                | Token::ArrayClose =&gt; {}\n            }\n        }\n\n        value\n    }\n}</code></pre><h3 id=\"how-to-parse-arrays\">How to parse arrays</h3><p>Parsing arrays is almost as straightforward as the parsing logic we looked at above. Since arrays are just collection of other JSON values, there's not much logic involved into parsing them, unlike objects.</p><pre><code class=\"language-rust\">// src/parser.rs\n\nimpl JsonParser {\n    fn process_array(iterator: &amp;mut Peekable&lt;Iter&lt;Token&gt;&gt;) -&gt; Vec&lt;Value&gt; {\n        // Initialise a vector of JSON Value type to hold the value of\n        // array that's currently being parsed.\n        let mut internal_value = Vec::&lt;Value&gt;::new();\n\n        // Iterate over all tokens provided.\n        while let Some(token) = iterator.next() {\n            match token {\n                Token::CurlyOpen =&gt; {\n                    internal_value.push(Value::Object(Self::process_object(iterator)));\n                }\n                Token::String(string) =&gt; internal_value.push(Value::String(string.clone())),\n                Token::Number(number) =&gt; internal_value.push(Value::Number(*number)),\n                Token::ArrayOpen =&gt; {\n                    internal_value.push(Value::Array(Self::process_array(iterator)));\n                }\n                // Break loop if array is closed. Due to recursive nature of process_array,\n                // we don't need to explicitly check if the closing token matches the opening\n                // one.\n                Token::ArrayClose =&gt; {\n                    break;\n                }\n                Token::Boolean(boolean) =&gt; internal_value.push(Value::Boolean(*boolean)),\n                Token::Null =&gt; internal_value.push(Value::Null),\n                // Ignore delimiters\n                Token::Comma | Token::CurlyClose | Token::Quotes | Token::Colon =&gt; {}\n            }\n        }\n\n        internal_value\n    }\n}</code></pre><h3 id=\"how-to-parse-objects\">How to parse objects</h3><p>Parsing objects is a bit more tricky than the previous value types, since objects come with their own syntax. But there should be no surprises for you, which is why I encourage you to read through the code and the comments below to understand how it works.</p><pre><code class=\"language-rust\">// src/parser.rs\n\nimpl JsonParser {\n    fn process_object(iterator: &amp;mut Peekable&lt;Iter&lt;Token&gt;&gt;) -&gt; HashMap&lt;String, Value&gt; {\n        // Whether the item being parsed is a key or a value. The first element\n        // should always be a key so this is initialised to true.\n        let mut is_key = true;\n\n        // The current key for which the value is being parsed.\n        let mut current_key: Option&lt;&amp;str&gt; = None;\n\n        // The current state of parsed object.\n        let mut value = HashMap::&lt;String, Value&gt;::new();\n\n        while let Some(token) = iterator.next() {\n            match token {\n                // If it is a nested object, recursively parse it and store\n                // in the hashmap with current key.\n                Token::CurlyOpen =&gt; {\n                    if let Some(current_key) = current_key {\n                        value.insert(\n                            current_key.to_string(),\n                            Value::Object(Self::process_object(iterator)),\n                        );\n                    }\n                }\n                // If this token is encountered, break the loop since it\n                // indicates end of an object being parsed.\n                Token::CurlyClose =&gt; {\n                    break;\n                }\n                Token::Quotes | Token::ArrayClose =&gt; {}\n                // If the token is a colon, it is the separator between key\n                // and value pair. So the item being parsed from this point\n                // ahead will not be a key.\n                Token::Colon =&gt; {\n                    is_key = false;\n                }\n                Token::String(string) =&gt; {\n                    if is_key {\n                        // If the process is presently parsing key, set the value\n                        // as current key.\n                        current_key = Some(string);\n                    } else if let Some(key) = current_key {\n                        // If the process already has a key set for present item,\n                        // parse string as value instead, and set the current_key to none\n                        // once done to prepare for the next key-value pair.\n                        value.insert(key.to_string(), Value::String(string.clone()));\n                        // Set current_key to None to prepare for the next key-value pair.\n                        current_key = None;\n                    }\n                }\n                Token::Number(number) =&gt; {\n                    if let Some(key) = current_key {\n                        value.insert(key.to_string(), Value::Number(*number));\n                        // Set current_key to None to prepare for the next key-value pair.\n                        current_key = None;\n                    }\n                }\n                Token::ArrayOpen =&gt; {\n                    if let Some(key) = current_key {\n                        value.insert(key.to_string(), Value::Array(Self::process_array(iterator)));\n                        // Set current_key to None to prepare for the next key-value pair.\n                        current_key = None;\n                    }\n                }\n                // If the token is a comma, it is the separator between multiple key-value pairs\n                // in JSON. So the item being parsed from this point ahead will be a key.\n                Token::Comma =&gt; is_key = true,\n                Token::Boolean(boolean) =&gt; {\n                    if let Some(key) = current_key {\n                        value.insert(key.to_string(), Value::Boolean(*boolean));\n                        // Set current_key to None to prepare for the next key-value pair.\n                        current_key = None;\n                    }\n                }\n                Token::Null =&gt; {\n                    if let Some(key) = current_key {\n                        value.insert(key.to_string(), Value::Null);\n                        // Set current_key to None to prepare for the next key-value pair.\n                        current_key = None;\n                    }\n                }\n            }\n        }\n\n        value\n    }\n}</code></pre><p>And that's it. You should now have everything to start using this to parse a valid JSON file into Rust.</p><h2 id=\"how-to-use-the-json-parser\">How to Use the JSON parser</h2><p>Let's create a new example in the project to run our JSON parser:</p><pre><code class=\"language-shell\">mkdir examples; touch examples/json.rs</code></pre><p>You also need to register it as an example in the <code>Cargo.toml</code> file:</p><pre><code class=\"language-toml\">[package]\nname = \"json-parser\"\nversion = \"0.1.0\"\nedition = \"2021\"\n\n[dependencies]\n\n[[example]]\npath = \"examples/json.rs\"\nname = \"json\"</code></pre><p>Now let's write the code to run for this example. We start by copying over a sample JSON file to the root of the project, which you can find <a href=\"https://raw.githubusercontent.com/anshulsanghi-blog/json-parser/master/test.json\">here</a>.</p><pre><code class=\"language-rust\">// examples/json.rs\n\nuse std::fs::File;\nuse json_parser::parser::JsonParser;\n\nfn main() {\n    let file = File::open(\"test.json\").unwrap();\n    let parser = JsonParser::parse(file).unwrap();\n\n    dbg!(parser);\n}</code></pre><p>Running this code using the following command, you should see the same output as below:</p><pre><code class=\"language-shell\">cargo run --example json --release</code></pre><pre><code class=\"language-shell\">[examples/json.rs:8:5] parser = Object(\n    {\n        \"pairs\": Array(\n            [\n                Object(\n                    {\n                        \"x1\": Number(\n                            F64(\n                                41.844453001935875,\n                            ),\n                        ),\n                        \"y0\": Number(\n                            F64(\n                                -33.78221816487377,\n                            ),\n                        ),\n                        \"y1\": Number(\n                            F64(\n                                -78.10213222087448,\n                            ),\n                        ),\n                        \"x0\": Number(\n                            F64(\n                                95.26235434764715,\n                            ),\n                        ),\n                    },\n                ),\n                Object(\n                    {\n                        \"x0\": Number(\n                            F64(\n                                115.42029308864215,\n                            ),\n                        ),\n                        \"y0\": Number(\n                            F64(\n                                1.2002187300000001e-5,\n                            ),\n                        ),\n                        \"x1\": Number(\n                            F64(\n                                83.39640643072113,\n                            ),\n                        ),\n                        \"y1\": Number(\n                            F64(\n                                28.643090267505812,\n                            ),\n                        ),\n                    },\n                ),\n                Object(\n                    {\n                        \"isWorking\": Boolean(\n                            true,\n                        ),\n                        \"sample\": String(\n                            \"string sample\",\n                        ),\n                        \"nullable\": Null,\n                        \"isNotWorking\": Boolean(\n                            false,\n                        ),\n                    },\n                ),\n            ],\n        ),\n        \"utf8\": Object(\n            {\n                \"key2\": String(\n                    \"value2\",\n                ),\n                \"key1\": String(\n                    \"ࠄࠀࠆࠄࠀࠁࠃ\",\n                ),\n            },\n        ),\n    },\n)\n</code></pre><p>Congratulations! You've now written your very own JSON parser, while learning some of the advanced use cases of match and iterators in Rust.</p><h2 id=\"wrapping-up\"><strong>Wrapping Up</strong></h2><p>I hope you can already see interesting ways you can make use of what you've learned today to optimize existing Rust code in your projects, and any future code you write that involves these.</p><p>You can find the complete code for everything we looked at in this article in <a href=\"https://github.com/anshulsanghi-blog/json-parser\">this repository</a>.</p><p>Also, feel free to <strong><strong><strong><strong><strong><strong><strong><strong><a href=\"mailto:contact@anshulsanghi.tech\">contact me</a></strong></strong></strong></strong></strong></strong></strong></strong> if you have any questions or opinions on this topic.</p><h3 id=\"enjoying-my-work\">Enjoying my work?</h3><p>Consider buying me a coffee to support my work!</p><p><a href=\"https://buymeacoffee.com/anshulsanghi\">☕Buy me a coffee</a>.</p><p>'Till next time, happy coding and wishing you clear skies!</p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG\" class=\"author-profile-image\" alt=\"Anshul Sanghi\" width=\"2000\" height=\"2000\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/anshulsanghi/\" data-test-label=\"profile-link\">\n                    \n                        Anshul Sanghi\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Full-stack engineer mainly working with Rust &amp; TypeScript with heavy focus on High-performance backend systems &amp; Image processing and analysis tools. I&#39;m also into Infrared &amp; Astro Photography</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Rust%20Tutorial%20%E2%80%93%20Learn%20Advanced%20Iterators%20%26%20Pattern%20Matching%20by%20Building%20a%20JSON%20Parser\".replace(/&#39;/g,\"%27\"),o=\"\",r=\"@AnshulsAstro\",i=Boolean(\"\");let a;if(i&&(o||r)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Anshul Sanghi\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${r||t.currentPostAuthor} for translating it.`)}else!i&&r&&(a=encodeURIComponent(`Thank you ${r} for writing this helpful article.`));const s=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",s)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac216ff2da440eb\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/procedural-macros-in-rust/":{"metadata":[{"tagName":"meta","attributes":{"charset":"utf-8"},"content":""},{"tagName":"meta","attributes":{"http-equiv":"X-UA-Compatible","content":"IE=edge"},"content":""},{"tagName":"title","attributes":{},"content":"Procedural Macros in Rust – A Handbook for Beginners"},{"tagName":"meta","attributes":{"name":"HandheldFriendly","content":"True"},"content":""},{"tagName":"meta","attributes":{"name":"viewport","content":"width=device-width, initial-scale=1.0"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.googleapis.com"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com","crossorigin":""},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n"},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n"},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"/news/assets/css/global-26e2f3cde9.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/screen-926fddfac2.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/search-bar-124f5f949c.css"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js"},"content":""},{"tagName":"script","attributes":{},"content":"let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));"},{"tagName":"script","attributes":{"data-ad-client":"ca-pub-9482786369113753","src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","crossorigin":"anonymous","async":""},"content":""},{"tagName":"link","attributes":{"rel":"icon","href":"https://cdn.freecodecamp.org/universal/favicons/favicon.ico","type":"image/png"},"content":""},{"tagName":"link","attributes":{"rel":"canonical","href":"https://www.freecodecamp.org/news/procedural-macros-in-rust/"},"content":""},{"tagName":"meta","attributes":{"name":"referrer","content":"no-referrer-when-downgrade"},"content":""},{"tagName":"meta","attributes":{"name":"description","content":"In this handbook, you'll learn about procedural macros in Rust, and what purposes they serve. You'll also learn how to write your own procedural macros with both hypothetical and real-world examples. This guide assumes that you're familiar with Rust and its basic concepts, such as data-types, iterators, and traits. If"},"content":""},{"tagName":"meta","attributes":{"property":"og:site_name","content":"freeCodeCamp.org"},"content":""},{"tagName":"meta","attributes":{"property":"og:type","content":"article"},"content":""},{"tagName":"meta","attributes":{"property":"og:title","content":"Procedural Macros in Rust – A Handbook for Beginners"},"content":""},{"tagName":"meta","attributes":{"property":"og:description","content":"In this handbook, you'll learn about procedural macros in Rust, and what purposes they serve. You'll also learn how to write your own procedural macros with both hypothetical and real-world examples. This guide assumes that you're familiar with Rust and its basic concepts, such as data-types, iterators, and traits. If"},"content":""},{"tagName":"meta","attributes":{"property":"og:url","content":"https://www.freecodecamp.org/news/procedural-macros-in-rust/"},"content":""},{"tagName":"meta","attributes":{"property":"og:image","content":"https://www.freecodecamp.org/news/content/images/2024/04/Procedural-Macros-in-Rust-Cover--1-.png"},"content":""},{"tagName":"meta","attributes":{"property":"article:published_time","content":"2024-04-24T17:49:17.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:modified_time","content":"2024-07-09T17:23:30.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Rust"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"handbook"},"content":""},{"tagName":"meta","attributes":{"property":"article:publisher","content":"https://www.facebook.com/freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:card","content":"summary_large_image"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:title","content":"Procedural Macros in Rust – A Handbook for Beginners"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:description","content":"In this handbook, you'll learn about procedural macros in Rust, and what purposes they serve. You'll also learn how to write your own procedural macros with both hypothetical and real-world examples. This guide assumes that you're familiar with Rust and its basic concepts, such as data-types, iterators, and traits. If"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:url","content":"https://www.freecodecamp.org/news/procedural-macros-in-rust/"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:image","content":"https://www.freecodecamp.org/news/content/images/2024/04/Procedural-Macros-in-Rust-Cover--1-.png"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label1","content":"Written by"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data1","content":"Anshul Sanghi"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label2","content":"Filed under"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data2","content":"Rust, handbook"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:site","content":"@freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:creator","content":"@AnshulsAstro"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:width","content":"1280"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:height","content":"720"},"content":""},{"tagName":"script","attributes":{"type":"application/ld+json"},"content":"{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/Procedural-Macros-in-Rust-Cover--1-.png\",\n\t\t\"width\": 1280,\n\t\t\"height\": 720\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/procedural-macros-in-rust/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-04-24T17:49:17.000Z\",\n\t\"dateModified\": \"2024-07-09T17:23:30.000Z\",\n\t\"keywords\": \"Rust, handbook\",\n\t\"description\": \"In this handbook, you&#x27;ll learn about procedural macros in Rust, and what\\npurposes they serve. You&#x27;ll also learn how to write your own procedural macros\\nwith both hypothetical and real-world examples.\\n\\nThis guide assumes that you&#x27;re familiar with Rust and its basic concepts, such\\nas data-types, iterators, and traits. If you need to establish or review your\\nRust basics, check out this interactive course [/news/rust-in-replit/].\\n\\nYou don&#x27;t need any prior knowledge of macros, as this article covers \",\n\t\"headline\": \"Procedural Macros in Rust – A Handbook for Beginners\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Anshul Sanghi\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/anshulsanghi/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://twitter.com/AnshulsAstro\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/DSC02590.JPG\",\n\t\t\t\"width\": 2000,\n\t\t\t\"height\": 2000\n\t\t}\n\t}\n}"},{"tagName":"meta","attributes":{"name":"generator","content":"Eleventy"},"content":""},{"tagName":"link","attributes":{"rel":"alternate","type":"application/rss+xml","title":"freeCodeCamp.org","href":"https://www.freecodecamp.org/news/rss/"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com"},"content":""},{"tagName":"script","attributes":{},"content":"\nwindow.dataLayer = window.dataLayer || [];\n"},{"tagName":"script","attributes":{},"content":"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');"},{"tagName":"meta","attributes":{"name":"google-site-verification","content":"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E"},"content":""},{"tagName":"meta","attributes":{"name":"x-fcc-source","data-test-label":"x-fcc-source","content":"Ghost"},"content":""}],"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Procedural Macros in Rust – A Handbook for Beginners</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/procedural-macros-in-rust/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"In this handbook, you&#39;ll learn about procedural macros in Rust, and what purposes they serve. You&#39;ll also learn how to write your own procedural macros with both hypothetical and real-world examples. This guide assumes that you&#39;re familiar with Rust and its basic concepts, such as data-types, iterators, and traits. If\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Procedural Macros in Rust – A Handbook for Beginners\">\n    \n        <meta property=\"og:description\" content=\"In this handbook, you&#39;ll learn about procedural macros in Rust, and what purposes they serve. You&#39;ll also learn how to write your own procedural macros with both hypothetical and real-world examples. This guide assumes that you&#39;re familiar with Rust and its basic concepts, such as data-types, iterators, and traits. If\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/procedural-macros-in-rust/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2024/04/Procedural-Macros-in-Rust-Cover--1-.png\">\n    <meta property=\"article:published_time\" content=\"2024-04-24T17:49:17.000Z\">\n    <meta property=\"article:modified_time\" content=\"2024-07-09T17:23:30.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Rust\">\n    \n        <meta property=\"article:tag\" content=\"handbook\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Procedural Macros in Rust – A Handbook for Beginners\">\n    \n        <meta name=\"twitter:description\" content=\"In this handbook, you&#39;ll learn about procedural macros in Rust, and what purposes they serve. You&#39;ll also learn how to write your own procedural macros with both hypothetical and real-world examples. This guide assumes that you&#39;re familiar with Rust and its basic concepts, such as data-types, iterators, and traits. If\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/procedural-macros-in-rust/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2024/04/Procedural-Macros-in-Rust-Cover--1-.png\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Anshul Sanghi\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Rust, handbook\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@AnshulsAstro\">\n    \n\n    <meta property=\"og:image:width\" content=\"1280\">\n    <meta property=\"og:image:height\" content=\"720\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/Procedural-Macros-in-Rust-Cover--1-.png\",\n\t\t\"width\": 1280,\n\t\t\"height\": 720\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/procedural-macros-in-rust/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-04-24T17:49:17.000Z\",\n\t\"dateModified\": \"2024-07-09T17:23:30.000Z\",\n\t\"keywords\": \"Rust, handbook\",\n\t\"description\": \"In this handbook, you&#x27;ll learn about procedural macros in Rust, and what\\npurposes they serve. You&#x27;ll also learn how to write your own procedural macros\\nwith both hypothetical and real-world examples.\\n\\nThis guide assumes that you&#x27;re familiar with Rust and its basic concepts, such\\nas data-types, iterators, and traits. If you need to establish or review your\\nRust basics, check out this interactive course [/news/rust-in-replit/].\\n\\nYou don&#x27;t need any prior knowledge of macros, as this article covers \",\n\t\"headline\": \"Procedural Macros in Rust – A Handbook for Beginners\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Anshul Sanghi\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/anshulsanghi/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://twitter.com/AnshulsAstro\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/DSC02590.JPG\",\n\t\t\t\"width\": 2000,\n\t\t\t\"height\": 2000\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Wed Apr 24 2024 17:49:17 GMT+0000 (Coordinated Universal Time)\">\n                            April 24, 2024\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/rust/\">\n                                #Rust\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Procedural Macros in Rust – A Handbook for Beginners</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG\" class=\"author-profile-image\" alt=\"Anshul Sanghi\" width=\"2000\" height=\"2000\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/anshulsanghi/\" data-test-label=\"profile-link\">\n                    \n                        Anshul Sanghi\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2024/04/Procedural-Macros-in-Rust-Cover--1-.png 300w, https://www.freecodecamp.org/news/content/images/size/w600/2024/04/Procedural-Macros-in-Rust-Cover--1-.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/Procedural-Macros-in-Rust-Cover--1-.png 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2024/04/Procedural-Macros-in-Rust-Cover--1-.png 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2024/04/Procedural-Macros-in-Rust-Cover--1-.png\" alt=\"Procedural Macros in Rust – A Handbook for Beginners\" ,=\"\" width=\"1280\" height=\"720\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>In this handbook, you'll learn about procedural macros in Rust, and what purposes they serve. You'll also learn how to write your own procedural macros with both hypothetical and real-world examples.</p><p>This guide assumes that you're familiar with Rust and its basic concepts, such as data-types, iterators, and traits. If you need to establish or review your Rust basics, <a href=\"https://www.freecodecamp.org/news/rust-in-replit/\">check out this interactive course</a>.</p><p>You don't need any prior knowledge of macros, as this article covers everything from the ground up.</p><h2 id=\"table-of-contents\">Table of Contents</h2><!--kg-card-begin: markdown--><ol>\n<li><a href=\"#what-are-macros-in-rust\">What are Macros in Rust?</a>\n<ol>\n<li><a href=\"#types-of-macros-in-rust\">Types of Macros in Rust</a></li>\n<li><a href=\"#types-of-procedural-macros\">Types of Procedural Macros</a></li>\n</ol>\n</li>\n<li><a href=\"#prerequisites\">Prerequisites</a>\n<ol>\n<li><a href=\"#helpful-dependencies\">Helpful Dependencies</a></li>\n</ol>\n</li>\n<li><a href=\"#how-to-write-a-simple-derive-macro\">How to Write a Simple Derive Macro</a>\n<ol>\n<li><a href=\"#the-intostringhashmap-derive-macro\">The <code>IntoStringHashMap</code> Derive Macro</a></li>\n<li><a href=\"#how-to-declare-a-derive-macro\">How to Declare a Derive Macro</a></li>\n<li><a href=\"#how-to-parse-macro-input\">How to Parse Macro Input</a></li>\n<li><a href=\"#how-to-ensure-a-struct-target-for-macro\">How to Ensure a Struct Target for the Macro</a></li>\n<li><a href=\"#how-to-build-the-output-code\">How to Build the Output Code</a></li>\n<li><a href=\"#how-to-use-your-derive-macro\">How to Use Your Derive Macro</a></li>\n<li><a href=\"#how-to-improve-our-implementation\">How to Improve Our Implementation</a></li>\n</ol>\n</li>\n<li><a href=\"#a-more-elaborate-derive-macro\">A More Elaborate Derive macro</a>\n<ol>\n<li><a href=\"#the-derivecustommodel-macro\">The <code>DeriveCustomModel</code> Macro</a></li>\n<li><a href=\"#how-to-separate-implementation-from-declaration\">How to Separate Implementation From Declaration</a></li>\n<li><a href=\"#how-to-parse-derive-macro-arguments\">How to Parse Derive Macro Arguments</a></li>\n<li><a href=\"#how-to-implement-derivecustommodel\">How to Implement <code>DeriveCustomModel</code></a></li>\n<li><a href=\"#how-to-generate-each-custom-model\">How to Generate Each Custom Model</a></li>\n<li><a href=\"#how-to-use-your-derivecustommodal-macro\">How to Use Your <code>DeriveCustomModal</code> Macro</a></li>\n</ol>\n</li>\n<li><a href=\"#a-simple-attribute-macro\">A Simple Attribute Macro</a>\n<ol>\n<li><a href=\"#the-log_duration-attribute\">The <code>log_duration</code> Attribute</a></li>\n<li><a href=\"#how-to-declare-an-attribute-macro\">How to Declare an Attribute Macro</a></li>\n<li><a href=\"#how-to-implement-the-log_duration-attribute-macro\">How to Implement the <code>log_duration</code> Attribute Macro</a></li>\n<li><a href=\"#how-to-use-your-log-duration-macro\">How to Use Your <code>log_duration</code> Macro</a></li>\n</ol>\n</li>\n<li><a href=\"#a-more-elaborate-attribute-macro\">A More Elaborate Attribute macro</a>\n<ol>\n<li><a href=\"#the-cached_fn-attribute\">The <code>cached_fn</code> Attribute</a></li>\n<li><a href=\"#how-to-implement-the-cached_fn-attribute-macro\">How to Implement the <code>cached_fn</code> Attribute Macro</a></li>\n<li><a href=\"#cached_fn-attribute-arguments\"><code>cached_fn</code> Attribute Arguments</a></li>\n<li><a href=\"#how-to-use-the-cached_fn-macro\">How to Use the <code>cached_fn</code> Macro</a></li>\n</ol>\n</li>\n<li><a href=\"#a-simple-function-like-macro\">A Simple Function-like Macro</a>\n<ol>\n<li><a href=\"#the-constant_string-macro\">The <code>constant_string</code> Macro</a></li>\n<li><a href=\"#how-to-declare-a-function-like-macro\">How to Declare a Function-like Macro</a></li>\n<li><a href=\"#how-to-implement-the-constant_string-macro\">How to Implement the <code>constant_string</code> Macro</a></li>\n<li><a href=\"#how-to-use-the-constant_string-macro\">How to Use the <code>constant_string</code> Macro</a></li>\n</ol>\n</li>\n<li><a href=\"#a-more-elaborate-function-like-macro\">A More Elaborate Function-like Macro</a>\n<ol>\n<li><a href=\"#the-hash_mapify-macro\">The <code>hash_mapify</code> Macro</a></li>\n<li><a href=\"#how-to-implement-the-hash_mapify-macro\">How to Implement the <code>hash_mapify</code> Macro</a></li>\n<li><a href=\"#how-to-parse-hash-mapifys-input\">How to Parse <code>hash_mapify</code>'s Input</a></li>\n<li><a href=\"#how-to-generate-output-code\">How to Generate Output Code</a></li>\n<li><a href=\"#how-to-convert-custom-data-types-to-output-tokens\">How to Convert Custom Data Types To Output Tokens</a></li>\n<li><a href=\"#how-to-use-the-hash_mapify-macro\">How to Use the <code>hash_mapify</code> Macro</a></li>\n</ol>\n</li>\n<li><a href=\"#beyond-writing-macros\">Beyond Writing Macros</a>\n<ol>\n<li><a href=\"#helpful-crates-tools\">Helpful Crates/Tools</a></li>\n</ol>\n</li>\n<li><a href=\"#downsides-of-macros\">Downsides of Macros</a>\n<ol>\n<li><a href=\"#debugging-or-lack-thereof-\">Debugging (or lack thereof)</a></li>\n<li><a href=\"#compile-time-costs\">Compile Time Costs</a></li>\n<li><a href=\"#lack-of-auto-complete-and-code-checks\">Lack of auto-complete and code checks</a></li>\n<li><a href=\"#where-do-we-draw-the-line\">Where do we draw the line?</a></li>\n</ol>\n</li>\n<li><a href=\"#wrapping-up\">Wrapping Up</a>\n<ol>\n<li><a href=\"#enjoying-my-work\">Enjoying my work?</a></li>\n</ol>\n</li>\n</ol>\n<!--kg-card-end: markdown--><h2 id=\"what-are-macros-in-rust\"><strong>What are Macros in Rust?</strong></h2><p>Macros are an integral part of the Rust programming language. It doesn’t take long before you start encountering them when first learning the language.</p><p>In their simplest form, macros in Rust allow you to execute some code at compile-time. Rust pretty much allows you to do whatever you want when it comes to macros and what you can do with them. The most common use-case of this feature is writing code that generates other code. </p><p>Macros are a way to extend functionality of the compiler beyond what's supported as standard. Whether you want to generate code based on existing code, or you want to transform existing code in some form, macros are your go-to tool.</p><p>Here's how the official Rust book describes it:</p><blockquote>The term <em>macro</em> refers to a family of features in Rust.<br><br>Fundamentally, macros are a way of writing code that writes other code, which is known as <em>metaprogramming</em>.<br><br>Metaprogramming is useful for reducing the amount of code you have to write and maintain, which is also one of the roles of functions. However, macros have some additional powers that functions don’t.</blockquote><p>Using macros, you can also dynamically add things that are required to be added at compilation time, which is not possible using functions since they get called at runtime. One such feature, for example, is implementing <em>Traits </em>on types, which is required to be implemented at compilation time.</p><p>Another advantage of macros is that they can be very flexible, since they can take a dynamic amount of parameters or inputs unlike a function.</p><p>Macros do have their own syntax for both writing and using them, which we'll explore in detail in the coming sections.</p><p>Some examples of how macros are being used really helps convey just how powerful they are:</p><ul><li>The <strong><strong>SQLx</strong></strong> project uses macros to verify all your SQL queries and statements (as long as you created them using the provided macro) at compile-time by actually executing them against a running instance of DB (yes, at compile time).</li><li><strong><strong>typed_html</strong></strong> implements a complete HTML parser with compile-time validation, all while using the familiar JSX syntax.</li></ul><h2 id=\"types-of-macros-in-rust\">Types of Macros in Rust</h2><p>In Rust, there are 2 different types of macros: declarative and procedural.</p><h3 id=\"declarative-macros\">Declarative macros</h3><p>Declarative macros work based on syntax parsing. While the official docs define them as allowing you to write syntax extensions, I believe it's more intuitive to consider them as an advanced version of the <code>match</code> keyword for the compiler. </p><p>You can define one or more patterns to match, and their body should return the output Rust code you'd like the macro to produce. </p><p>We're not going to be talking about them in this article, but if you'd like to learn more, <a href=\"https://doc.rust-lang.org/reference/macros-by-example.html\">this</a> is a good place to start.</p><h3 id=\"procedural-macros\">Procedural macros</h3><p>These macros, in their most basic use cases, execute any Rust code you want at compile time. The only requirement is that they should take Rust code as input, and return Rust code as output. </p><p>There's no special syntax parsing involved for writing these macros (unless you want to do so), which is why they're personally easier for me to understand and write. </p><p>Procedural macros are further divided into 3 categories: derive macros, attribute macros, and functional macros.</p><h3 id=\"types-of-procedural-macros\">Types of Procedural Macros</h3><h4 id=\"derive-macros\">Derive macros</h4><p>Derive macros are, generally speaking, applied to data types in Rust. They are a way to extend the type declaration to also automatically \"derive\" functionality for it. </p><p>You can use them to generate \"derived\" types from a type, or as a way to implement methods on the target data type automatically. This should make sense once you look at the following example below.</p><p>Printing non-primitive data types, such as structs, enums or even errors (which are just structs, but let's assume they're not), for debugging purposes is a very common feature for any language, not just Rust. In Rust, only primitives implicitly have the ability to be printed in \"debug\" contexts. </p><p>If you think about how everything in Rust is just traits (even basic operations like add and equals), this makes sense. You want to be able to debug print your custom data types, but Rust has no way of saying \"please apply this trait to every single data type in the code out there, ever\".</p><p>This is where the <code>Debug</code> derive macro comes in. There's a standard way of debug-printing each type of data structure in Rust that it uses for its internal types. The <code>Debug</code> macro allows you to automatically implement the <code>Debug</code> trait for your custom types, while following the same rules and style guide as the implementation for internal data types.</p><pre><code class=\"language-rust\">// Derive macro examples\n\n/// Example for deriving methods on data types\n#[derive(Debug)]\npub struct User {\n\tusername: String,\n    first_name: String,\n    last_name: String,\n}</code></pre><p>The <code>Debug</code> derive macro will result in the following code (presentational, not exact):</p><pre><code class=\"language-rust\">impl core::fmt::Debug for User {\n    fn fmt(&amp;self, f: &amp;mut core::fmt::Formatter) -&gt; core::fmt::Result {\n        f.debug_struct(\n            \"User\"\n        )\n        .field(\"username\", &amp;self.username)\n        .field(\"first_name\", &amp;self.first_name)\n        .field(\"last_name\", &amp;self.last_name)\n        .finish()\n    }\n}</code></pre><p>As you might be able to tell, nobody wants to write this code for all of their custom structs and enums again and again. This simple macro gives you a sense of both the power of macros in Rust, as well as why they're an essential part of the language itself.</p><p>During actual compilation, the same code would give the following as the result:</p><pre><code class=\"language-rust\">pub struct User {\n\tusername: String,\n    first_name: String,\n    last_name: String,\n}\n\nimpl core::fmt::Debug for User {\n    fn fmt(&amp;self, f: &amp;mut core::fmt::Formatter) -&gt; ::core::fmt::Result {\n        f.debug_struct(\n            \"User\"\n        )\n        .field(\"username\", &amp;self.username)\n        .field(\"first_name\", &amp;self.first_name)\n        .field(\"last_name\", &amp;self.last_name)\n        .finish()\n    }\n}</code></pre><p>Notice how the original type declaration is preserved in the output code. This is one of the main differences between derive macros vs others. Derive macros preserve the input type without modifications. They only add additional code to the output. On the other hand, all the other macros do not behave the same way. They only preserve the target when the output for macro itself includes the target as well.</p><h4 id=\"attribute-macros\">Attribute macros</h4><p>Attribute macros, in addition to data types, are usually applied to code blocks such as functions, impl blocks, inline blocks, and so on. They're usually used to either transform the target code in some way, or annotate it with additional information. </p><p>The most common use case for these is to modify a function to add additional functionality or logic to it. For example, you can easily write an attribute macro that:</p><ul><li>Logs all input and output parameters</li><li>Logs the total runtime of the function</li><li>Counts the number of times that function is called</li><li>Adds pre-determined additional fields to any struct</li></ul><p>and so on.</p><p>All of the things I mentioned above, and much more, combined form the insanely popular and useful <code>instrumentation</code> macro in Rust provided by the <code>tracing</code> crate. Of course I'm massively simplifying here, but it's good enough as an example.</p><p>If you're used to using Clippy, it might have screamed at you a couple of times to add the <code>#[must_use]</code> attribute to your function or method. </p><p>That is an example of macros used to annotate the function with additional information. It tells the compiler to warn the user if the return value from this function call isn't used. The <code>Result</code> type is already annotated with <code>#[must_use]</code> by default, which is how you see the warning <code>Unused Result&lt;...&gt; that must be used</code> when you don't use a return value of <code>Result</code> type.</p><p>Attribute macros are also what powers <a href=\"https://doc.rust-lang.org/reference/conditional-compilation.html\">conditional compilation</a> in Rust.</p><h4 id=\"functional-macros\">Functional macros</h4><p>Functional macros are macros disguised as functions. These are the least restrictive type of procedural macros, as they can be used literally anywhere, as long as they output code that's valid in the context that they're used in. </p><p>These macros aren't \"applied\" to anything unlike the 2 others, but rather called just like you'd call a function. As arguments, you can literally pass in anything you want, as long as your macro knows how to parse it. This includes everything all the way from no arguments to valid Rust code to random gibberish that only your macro can make sense of.</p><p>They're in a sense the procedural version of declarative macros. If you need to execute Rust code and also be able to parse custom syntax, functional macros are your go-to tool. They're also useful if you need macro-like functionality in places where other macros cannot be used.</p><p>After that lengthy description of the basic information regarding macros, it's finally time to dive into actually writing procedural macros.</p><h2 id=\"prerequisites\">Prerequisites</h2><p>There are certain rules around writing your own procedural-macros that you'll need to follow. These rules apply to all 3 types of procedural macros. They are:</p><ul><li>Procedural macros can only be added to a project that is marked as <code>proc-macro</code> in <code>Cargo.toml</code></li><li>Projects marked as such cannot export anything other than procedural macros.</li><li>The macros themselves have to all be declared in the <code>lib.rs</code> file.</li></ul><p>Let’s begin by setting up our project with this code:</p><pre><code class=\"language-shell\">cargo new --bin my-app\ncd my-app\ncargo new --lib my-app-macros;</code></pre><p>This will create a root project, as well as a sub-project within it that will host our macros. You need some changes in the <code>Cargo.toml</code> files for both these projects.</p><p>First, the <code>Cargo.toml</code> file for <code>my-app-macros</code> should have the following contents (notice that you need to declare a lib section that has the <code>proc-macro</code> property):</p><pre><code class=\"language-toml\"># my-app/my-app-macros/Cargo.toml\n\n[package]\nname = \"my-app-macros\"\nversion = \"0.1.0\"\nedition = \"2021\"\n\n[lib]\nname = \"my_app_macros\"\npath = \"src/lib.rs\"\nproc-macro = true\n\n[dependencies]</code></pre><p>Next, the <code>Cargo.toml</code> file for <code>my-app</code> should have the following contents:</p><pre><code class=\"language-toml\"># my-app/Cargo.toml\n\nworkspace = { members = [\"my-app-macros\"] }\n\n[package]\nname = \"my-app\"\nversion = \"0.1.0\"\nedition = \"2021\"\nresolver = \"2\"\n\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n\n[dependencies]\nmy-app-macros = { path = \"./my-app-macros\" }</code></pre><p>You need to set the dependency resolver version to “2”, and add your macros project as a dependency of the <code>my-app</code> project.</p><h3 id=\"helpful-dependencies\">Helpful dependencies</h3><p>From the compiler’s point of view, this is how macros work:</p><ul><li>They take a stream of tokens as input (and optionally a stream of tokens as arguments to the macro itself).</li><li>They return a stream of tokens as output.</li></ul><p>That’s all that the compiler knows! And as you'll soon see, it's enough for the compiler to know that.</p><p>This does create a problem though. You need to be able to make sense of this \"stream of tokens\" in a way where you correctly understand them, whether as Rust code or custom syntax, are able to modify them, and also output them. Doing so manually is no easy task, and for the purposes of this tutorial, it is out of scope. </p><p>We can, however, rely on great open source work done by many developers to ease this for us. You need to add a few dependencies to help with this problem:</p><ul><li><code>syn</code> — A syntax parser for Rust. This helps you to parse the input token stream as Rust AST. AST is a concept that you mostly run into when trying to write your own interpreter or compiler, but a basic understanding is essential for working with macros. Macros, after all, are just extensions that you write for the compiler in a sense. If you’re interested in learning more about what ASTs are, <a href=\"https://dev.to/balapriya/abstract-syntax-tree-ast-explained-in-plain-english-1h38\">check out this very helpful introduction</a>.</li><li><code>quote</code> — quote is, and this is a huge generalisation, a crate that helps us perform the reverse operation of what <code>syn</code> does. It helps us convert Rust source code into a stream of tokens that we can output from our macro.</li><li><code>proc-macro2</code> — The standard library provides a <code>proc-macro</code> crate, but the types it provides cannot exist outside of procedural macros. <code>proc-macro2</code> is a wrapper around the standard library that makes all of the internal types usable outside of the context of macros. This, for example, allows both <code>syn</code> and <code>quote</code> to not only be used for procedural macros, but in regular Rust code as well, should you ever have such a need. And we will indeed be using that extensively if we ever want to unit test our macros or their expansions.</li><li><code>darling</code>–It facilitates parsing and working with macro arguments, which is otherwise a tedious process due to having to manually parse it from the syntax tree. <code>darling</code> provides us with <code>serde</code>-like ability to automatically parse input argument tree into our arguments struct. It also helps us in error handling around invalid arguments, required arguments, and so on.</li></ul><p>While these projects are contributed to by many developers, I want to give special thanks to <a href=\"https://crates.io/users/dtolnay\">David Tolnay</a>. He's a legend in the Rust community and is the creator of most of these projects, and many many more open source crates in Rust.</p><p>Let’s quickly add these dependencies to our project and start writing our macro:</p><pre><code class=\"language-shell\">// my-app-macros\n\ncargo add syn quote proc-macro2 darling</code></pre><h2 id=\"how-to-write-a-simple-derive-macro\">How to Write a Simple Derive Macro</h2><p>You are going to learn how to write a <code>Derive</code> macro in this section. By this time, you should already be aware of the different types of macros and what they entail, as we talked about them in the above sections.</p><h3 id=\"the-intostringhashmap-derive-macro\">The <code>IntoStringHashMap</code> Derive Macro</h3><p>Let's say you have an app where you need to be able to convert structs into hash maps, that uses the <code>String</code> type for both keys and values. This means that it should work with any struct where all of the fields are convertible to <code>String</code> type using the <code>Into</code> trait.</p><h3 id=\"how-to-declare-a-derive-macro\">How to Declare a Derive Macro</h3><p>You declare macros by creating a function, and annotating that function using attribute macros that tell the compiler to consider that function as a macro declaration. Since your <code>lib.rs</code> is empty right now, you also need to declare <code>proc-macro2</code> as an extern crate:</p><pre><code class=\"language-rust\">// my-app-macros/src/lib.rs\nextern crate proc_macro;\n\nuse proc_macro::TokenStream;\n\n#[proc_macro_derive(IntoStringHashMap)]\npub fn derive_into_hash_map(item: TokenStream) -&gt; TokenStream {\n\ttodo!()\n}</code></pre><p>All we’re doing here is declaring our macro as a derive macro with the identifier <code>IntoStringHashMap</code>. Note that the function name is not important here. What's important is the identifier passed to the <code>proc_macro_derive</code> attribute macro. </p><p>Let's immediately see how you can use this – we'll come back and finish the implementation later:</p><pre><code class=\"language-rust\">// my-app/src/main.rs\n\nuse my_app_macros::IntoStringHashMap;\n\n#[derive(IntoStringHashMap)]\npub struct User {\n    username: String,\n    first_name: String,\n    last_name: String,\n    age: u32,\n}\n\nfn main() {\n\n}</code></pre><p>You can just use your macro as any other derive macro, using the identifier you declared for it (in this case it was <code>IntoStringHashMap</code>).</p><p>If you try and compile your code at this stage, you should see the following compilation error:</p><pre><code class=\"language-shell\">   Compiling my-app v0.1.0 \n   \nerror: proc-macro derive panicked\n --&gt; src/main.rs:3:10\n  |\n3 | #[derive(IntoHashMap)]\n  |          ^^^^^^^^^^^\n  |\n  = help: message: not yet implemented\n\nerror: could not compile `my-app` (bin \"my-app\") due to 1 previous error\n</code></pre><p>This clearly proves that our macro was executed during the compilation stage, as, if you're not familiar with the <code>todo!()</code> macro, panics with <code>help: message: not yet implemented</code> when executed. </p><p>This means that both our macro declaration and its usage works. We can move on to actually implementing this macro now.</p><h3 id=\"how-to-parse-the-macro-s-input\">How to Parse the Macro's Input</h3><p>First, you parse the input token stream as a <code>DeriveInput</code><em> </em>using <code>syn</code>, which is a representation of any target that you can use a derive macro with<em>:</em></p><pre><code class=\"language-rust\">let input = syn::parse_macro_input!(item as syn::DeriveInput);</code></pre><p><code>syn</code> provides us with the <code>parse_macro_input</code> macro that uses a somewhat custom syntax as its arguments. You provide it the name of your input variable, the <code>as</code> keyword, and the data type in <code>syn</code> that it should parse the input token stream as (in our case, a <code>DeriveInput</code>). </p><p>If you jump into the source code for <code>DeriveInput</code>, you'll see that it gives us the following information:</p><ul><li><code>attrs</code>: Attributes applied to this type, whether other attribute macros declared by us, or the built-in ones such as <code>must_use</code>.</li><li><code>vis</code>: The visibility specifier for this type declaration.</li><li><code>ident</code>: The identifier (name) of the type.</li><li><code>generics</code>: Information about the generic parameters this type takes, including lifetimes.</li><li><code>data</code>: An enum that describes whether the target is a struct, an enum, or a union, and also provides us with more information for each of these.</li></ul><p>These field names and their types (apart from data field) are pretty standard across targets supported by <code>syn</code>, such as functions, enums, and so on.</p><p>If you further jump into the declaration of the <code>Data</code> enum, and into <code>DataStruct</code> in particular, you'll see that it provides you with a field called <code>fields</code>. This is a collection of all the fields of this struct and you can use it to iterate over them. This is exactly what we need to build our hash map!</p><p>The complete implementation for this macro looks like this:</p><pre><code class=\"language-rust\">// my-app/my-app-macros/lib.rs\n\nextern crate proc_macro2;\n\nuse proc_macro::TokenStream;\nuse quote::quote;\nuse syn::Data;\n\n#[proc_macro_derive(IntoHashMap)]\npub fn into_hash_map(item: TokenStream) -&gt; TokenStream {\n    let input = syn::parse_macro_input!(item as syn::DeriveInput);\n\n    let struct_identifier = &amp;input.ident;\n\n    match &amp;input.data {\n        Data::Struct(syn::DataStruct { fields, .. }) =&gt; {\n            let mut implementation = quote!{\n                let mut hash_map = std::collections::HashMap::&lt;String, String&gt;::new();\n            };\n\n            for field in fields {\n                let identifier = field.ident.as_ref().unwrap();\n                implementation.extend(quote!{\n                    hash_map.insert(stringify!(#identifier).to_string(), String::from(value.#identifier));\n                });\n            }\n\n            quote! {\n                #[automatically_derived]\n                impl From&lt;#struct_identifier&gt; for std::collections::HashMap&lt;String, String&gt; {\n                    fn from(value: #struct_identifier) -&gt; Self {\n                        #implementation\n\n                        hash_map\n                    }\n                }\n            }\n        }\n        _ =&gt; unimplemented!()\n    }.into()\n}</code></pre><p>There's a lot going on here, so let's break it down:</p><h3 id=\"how-to-ensure-a-struct-target-for-the-macro\">How to Ensure a <code>struct</code> Target for the Macro</h3><p><code>let struct_identifier = &amp;input.ident;</code>: You store the struct identifier into a separate variable, so that you can easily use it later.</p><pre><code class=\"language-rust\">match &amp;input.data {\n\tData::struct(syn::DataStruct { fields, .. }) =&gt; { ... },\n    _ =&gt; unimplemented!()\n}</code></pre><p>You match over the parsed data field from <code>DeriveInput</code>. If it is of type <code>DataStruct</code> (a Rust struct) then continue, else panic, as the macro isn't implemented for other types.</p><h3 id=\"how-to-build-the-output-code\">How to Build the Output Code</h3><p>Let's take a look at the match arm implementation when you do have a <code>DataStruct</code>:</p><pre><code class=\"language-rust\">let mut implementation = quote!{\n\tlet mut hash_map = std::collections::HashMap::&lt;String, String&gt;::new();\n};</code></pre><p>Here you created a new <code>TokenStream</code> using <code>quote</code>. This <code>TokenStream</code> is different than the one provided by the standard library, so don't confuse it with that. This needs to be mutable, as we'll be adding more code to this <code>TokenStream</code> soon.</p><p><code>TokenStream</code> is basically the inverse representation of an AST. You provide actual Rust code to the <code>quote</code> macro, and it gives us the \"stream of tokens\" as you've called it previously for that source code. </p><p>This <code>TokenStream</code> can either be converted to the macro's output type, or be manipulated using methods provided by <code>quote</code> such as extend.</p><p>Moving on,</p><pre><code class=\"language-rust\">for field in fields {\n\tlet identifier = field.ident.as_ref().unwrap();\n\timplementation.extend(quote!{\n\t\thash_map.insert(\n\t\t\tstringify!(#identifier).to_string(),\n\t\t\tString::from(value.#identifier)\n\t\t);\n\t});\n}</code></pre><p>You loop over all of the fields. In each iteration, you first create a variable <code>identifier</code> to hold the name of the field for later use. You then use the <code>extend</code> method on our previously created <code>TokenStream</code> to add additional code to it. </p><p>The <code>extend</code> method just takes another <code>TokenStream</code>, which can easily be generated using <code>quote</code> macro. For the extension, you simply write code to insert a new entry into the <code>hash_map</code> that will be created in the macro output. </p><p>Let's have a closer look at that:</p><pre><code class=\"language-rust\">hash_map.insert(\n\tstringify!(#identifier).to_string(),\n\tString::from(value.#identifier)\n);</code></pre><p>As you know, the insert method takes a key and a value. You've told the compiler that both the key and value are of <code>String</code> type. <code>stringify</code> is a built-in macro in the standard library, that converts any <code>Ident</code> type into its <code>&amp;str</code> equivalent. You use it here to convert your field identifiers into actual <code>&amp;str</code>. You then call <code>to_string()</code> method on it to convert it to the <code>String</code> type.</p><p>But what does the <code>#identifier</code> represent?</p><p><code>quote</code> provides you with the ability to use any variables declared outside of the <code>TokenStream</code> within it using the <code>#</code> prefix. Think of it as <code>{}</code> in format args. <code>#identifier</code> in this case simply gets replaced with the field identifier we declared outside of the <code>extend</code> call. So you basically call the <code>stringify!()</code> macro on the field identifier directly.</p><p>Similarly, you can access the value of a field using the familiar <code>struct_variable.field_name</code> syntax, but use the identifier variable instead of the field name instead. This is what you do when you pass the value to your insert statement: <code>String::from(value.#identifier)</code>. </p><p>If you've looked at the code closely, you'll realise where the <code>value</code> came from, but if not, it's just what the trait implementation method uses to declare its input argument further down.</p><p>Once you've built your implementation using the for loop for each field in the struct, you have a <code>TokenStream</code> which, for representational purposes, contains the following code:</p><pre><code class=\"language-rust\">let mut hash_map = std::collections::HashMap::&lt;String, String&gt;::new();\nhash_map.insert(\"username\".to_string(), String::from(value.username));\nhash_map.insert(\"first_name\".to_string(), String::from(value.first_name));\nhash_map.insert(\"last_name\".to_string(), String::from(value.last_name));\n</code></pre><p>Moving on to finally generating the output of our macro, you have:</p><pre><code class=\"language-rust\">quote! {\n\timpl From&lt;#struct_identifier&gt; for std::collections::HashMap&lt;String, String&gt; {\n\t\tfn from(value: #struct_identifier) -&gt; Self {\n\t\t\t#implementation\n\n\t\t\thash_map\n\t\t}\n\t}\n}</code></pre><p>Here you start by creating another <code>TokenStream</code> using <code>quote</code>. You write your <code>From</code> trait implementation in this block.</p><p>The following line again uses the <code>#</code> prefix syntax that we just looked at to declare that the trait implementation should be for your target struct, based on the identifier for the struct. In this case, this identifier will be replaced with <code>User</code> if you apply the derive macro to <code>User</code> struct.</p><pre><code class=\"language-rust\">impl From&lt;#struct_identifier&gt; for std::collections::HashMap&lt;String, String&gt; {}</code></pre><p>Finally, you have the actual method body:</p><pre><code class=\"language-rust\">fn from(value: #struct_identifier) -&gt; Self {\n\t#implementation\n\n\thash_map\n}</code></pre><p>As you can see, you can easily nest <code>TokenStream</code>s into other <code>TokenStreams</code> using the same <code>#</code> syntax that lets you use external variables within the <code>quote</code> macro. </p><p>Here, you declare that your hash map implementation should be inserted as the first few lines of the function. And then you simply return the same <code>hash_map</code>. This completes your trait implementation.</p><p>As the very last step, you call <code>.into()</code> on the return type of our <code>match</code> block, which returns the output of <code>quote</code> macro call. This converts the <code>TokenStream</code> type used by <code>quote</code> into the <code>TokenStream</code> type that comes from the standard library and is expected by the compiler to be returned from a macro.</p><p>If it was harder to understand it when I broke it down line by line, you can look at the following complete but commented code in addition:</p><pre><code class=\"language-rust\">// Tell the compiler that this function is a derive macro, and the identifier for derive is `IntoHashMap`.\n#[proc_macro_derive(IntoHashMap)]\n// Declare a function that takes an input `TokenStream` and outputs `TokenStream`.\npub fn into_hash_map(item: TokenStream) -&gt; TokenStream {\n    // Parse the input token stream as `DeriveInput` type provided by `syn` crate.\n    let input = syn::parse_macro_input!(item as syn::DeriveInput);\n\n    // Store the struct identifier (name) into a variable so that you can insert it in the output code.\n    let struct_identifier = &amp;input.ident;\n\n    // Match over the target type to which the derive macro was applied\n    match &amp;input.data {\n        // Match that the target was a struct, and destructure the `fields` field from its information.\n        Data::Struct(syn::DataStruct { fields, .. }) =&gt; {\n            // Declare a new quote block that will hold the code for your implementation of the hash map.\n            // This block will both create a new hash map, and also populate it with all of the fields from\n            // the struct.\n            let mut implementation = quote!{\n                // This is just code that you want to see in the output. In this case, you want to have\n                // a new hash map created.\n                let mut hash_map = std::collections::HashMap::&lt;String, String&gt;::new();\n            };\n\n            // Iterate over all the fields of your target struct\n            for field in fields {\n                // Create a variable to store the identifier (name) of the field for later use\n                let identifier = field.ident.as_ref().unwrap();\n                // Extend your `implementation` block to include code in the output that populates\n                // the hash map you create with the information from current field.\n                implementation.extend(quote!{\n                    // Convert the field identifier to a string using `stringify!` macro. This is used\n                    // as the key in your new hash map entry. For value of this key, we access the field value\n                    // from the struct using `value.#identifier`, where `#identifier` is replaced with the actual\n                    // field name in output code.\n                    hash_map.insert(stringify!(#identifier).to_string(), String::from(value.#identifier));\n                });\n            }\n\n            // Create the final output block\n            quote! {\n                // Implement the `From` trait to allow converting your target struct, identified by\n                // `struct_identifier` to a HashMap with both the key and the value as `String`.\n                // Just like previously, #struct_identifier is replaced with the actual name of the\n                // target struct in output code.\n                impl From&lt;#struct_identifier&gt; for std::collections::HashMap&lt;String, String&gt; {\n                    // This is just a method that the `From` trait requires you to implement. The\n                    // type of the input value is again `#struct_identifier`, which is replaced with\n                    // the name of the target struct in output code.\n                    fn from(value: #struct_identifier) -&gt; Self {\n                        // Include the `implementation` block you created using `quote!` as the body\n                        // of this method. `quote` allows you to nest other `quote` blocks freely.\n                        #implementation\n\n                        // Return the hash_map.\n                        hash_map\n                    }\n                }\n            }\n        }\n        // If the target is of any other type, panic.\n        _ =&gt; unimplemented!()\n        // Convert the `TokenStream` type used by `quote` to `TokenStream` type used by the\n        // standard library and the compiler\n    }.into()\n}</code></pre><p>And that's it. You've written your very first procedural macro in Rust!</p><p><strong>It's now time to enjoy the fruits of your labour.</strong></p><h3 id=\"how-to-use-your-derive-macro\">How to Use Your Derive Macro</h3><p>Coming back to your <code>my-app/main.rs</code>, let's debug-print the hashmap that you create using the macro you implemented. Your <code>main.rs</code> should look like this:</p><pre><code class=\"language-rust\">// my-app/src/main.rs\n\nuse std::collections::HashMap;\nuse my_app_macros::IntoHashMap;\n\n#[derive(IntoHashMap)]\npub struct User {\n    username: String,\n    first_name: String,\n    last_name: String,\n}\n\nfn main() {\n    let user = User {\n        username: \"username\".to_string(),\n        first_name: \"First\".to_string(),\n        last_name: \"Last\".to_string(),\n    };\n\n    let hash_map = HashMap::&lt;String, String&gt;::from(user);\n\n    dbg!(hash_map);\n}</code></pre><p>If you run this using <code>cargo run</code>, you should see the following output in your terminal:</p><pre><code class=\"language-shell\">[src/main.rs:20:5] hash_map = {\n    \"last_name\": \"Last\",\n    \"first_name\": \"First\",\n    \"username\": \"username\",\n}</code></pre><p>And there you go!</p><h3 id=\"how-to-improve-our-implementation\">How to Improve Our Implementation</h3><p>There is a better way to work with iterators and <code>quote</code> that I skipped over in our original implementation – intentionally so, because it requires us to learn a bit more of the syntax specific to <code>quote</code>. </p><p>Let's see what it would have looked like with that, before we dive into how it works:</p><pre><code class=\"language-rust\">let input = syn::parse_macro_input!(item as syn::DeriveInput);\n    let struct_identifier = &amp;input.ident;\n\n    match &amp;input.data {\n        Data::Struct(syn::DataStruct { fields, .. }) =&gt; {\n            let field_identifiers = fields.iter().map(|item| item.ident.as_ref().unwrap()).collect::&lt;Vec&lt;_&gt;&gt;();\n\n            quote! {\n                impl From&lt;#struct_identifier&gt; for std::collections::HashMap&lt;String, String&gt; {\n                    fn from(value: #struct_identifier) -&gt; Self {\n                        let mut hash_map = std::collections::HashMap::&lt;String, String&gt;::new();\n\n                        #(\n                            hash_map.insert(stringify!(#field_identifiers).to_string(), String::from(value.#field_identifiers));\n                        )*\n\n                        hash_map\n                    }\n                }\n            }\n        }\n        _ =&gt; unimplemented!()\n    }.into()</code></pre><p>That looks so much more concise and easier to understand! Let's look at the special bit of syntax that makes it possible – in particular, the following line:</p><pre><code class=\"language-rust\">#(\n\thash_map.insert(stringify!(#field_identifiers).to_string(), String::from(value.#field_identifiers));\n)*</code></pre><p>Let's break it down. First, you wrap the entire block in a <code>#()*</code> and your code goes inside the parentheses. This syntax is what allows you to make use of any iterator inside of the parenthesis, and it will repeat that block of code for all items in the iterator, while replacing the variable with correct item in each iteration.</p><p>In this case, you first create a <code>field_identifiers</code> iterator, that is a collection of all the field identifiers in your target struct. You then write your <code>hash_map</code> insert statement while using the iterator directly as if it is a single item. The <code>#()*</code> wrapper converts this into the expected output of multiple lines, one for each item in the iterator.</p><h2 id=\"a-more-elaborate-derive-macro\">A More Elaborate Derive Macro</h2><p>Now that you're comfortable writing a simple Derive macro, it's time to move on and create something that will actually be useful in the real world – especially if you're working with database models.</p><h3 id=\"the-derivecustommodel-macro\">The <code>DeriveCustomModel</code> Macro</h3><p>You're going to be building a Derive macro that helps you generate derived structs from your original struct. You're going to be needing this all the time whenever you're working with databases, and only want to load part of the data.</p><p>For example, if you have a <code>User</code> struct, which has all of the user information, but you only want to load the name information for the User from the database, you'll need a struct that only contains those fields – unless you want to make all the fields an Option, which isn't the best idea.</p><p>We will also need to add an implementation of <code>From</code> trait to automatically convert from <code>User</code> struct to the derived struct. Another thing our macro needs is to be able to derive multiple models from the same target struct.</p><p>Let's start by declaring it in <code>lib.rs</code>:</p><pre><code class=\"language-rust\">// lib.rs\n\n#[proc_macro_derive(DeriveCustomModel, attributes(custom_model))]\npub fn derive_custom_model(item: TokenStream) -&gt; TokenStream {\n\ttodo!()\n}</code></pre><p>Most of this syntax should familiar to you by now from our previous example. The only addition we have here, is now we also define <code>attributes(custom_model)</code> in the call to <code>proc_macro_derive</code>, which basically tells the compiler to treat any attribute that begins with <code>#[custom_model]</code> as an argument for this derive macro on that target.</p><p>For example, once you've defined this, you can apply <code>#[custom_model(name = \"SomeName\")]</code> to the target struct, to define that the derived struct should have the name \"SomeName\". You need to parse this yourself and handle it too, of course – the definition was only to tell the compiler to pass that through to your macro implementation and not treat it as an unknown attribute.</p><p>Let's also create a new file that will contain the implementation detail of this macro. The macro rule states that it needs to be <strong>defined</strong> in <code>lib.rs</code>, and we've done that. The implementation itself can live anywhere in the project.</p><p>Create a new file <code>custom_model.rs</code>:</p><pre><code class=\"language-shell\">touch src/custom_model.rs</code></pre><h3 id=\"how-to-separate-the-implementation-from-the-declaration\">How to Separate the Implementation from the Declaration</h3><p>Define a function that implements the <code>DeriveCustomModel</code> macro. We're also going to add all imports right away to avoid confusion later:</p><pre><code class=\"language-rust\">// custom_model.rs\n\nuse syn::{\n    parse_macro_input, Data::Struct, DataStruct, DeriveInput, Field, Fields, Ident, Path,\n};\nuse darling::util::PathList;\nuse darling::{FromAttributes, FromDeriveInput, FromMeta};\nuse proc_macro::TokenStream;\nuse quote::{quote, ToTokens};\n\npub(crate) fn derive_custom_model_impl(input: TokenStream) -&gt; TokenStream {\n\t// Parse input token stream as `DeriveInput`\n\tlet original_struct = parse_macro_input!(input as DeriveInput);\n    \n    // Destructure data &amp; ident fields from the input\n    let DeriveInput { data, ident, .. } = original_struct.clone();\n}</code></pre><p>This is just a Rust function, so there are no special rules here. You can call this from the declaration just like a regular Rust function.</p><pre><code class=\"language-rust\">#[proc_macro_derive(DeriveCustomModel, attributes(custom_model))]\npub fn derive_custom_model(item: TokenStream) -&gt; TokenStream {\n\tcustom_model::custom_model_impl(item)\n}</code></pre><h3 id=\"how-to-parse-derive-macro-arguments\">How to Parse Derive Macro Arguments</h3><p>To parse the arguments to our derive macro (which are usually provided using attributes applied to either the target or to its fields), we are going to rely on the <code>darling</code> crate to make it as simple as defining the data type for them.</p><pre><code class=\"language-rust\">// custom_model.rs\n\n// Derive `FromDeriveInput` for this struct, which is a\n// macro provided by darling to automatically add the ability\n// to parse argument tokens into the given struct.\n#[derive(FromDeriveInput, Clone)]\n// We tell darling that we're looking for arguments\n// that are defined using the `custom_model` attribute, and\n// that we only support named structs for this.\n#[darling(attributes(custom_model), supports(struct_named))]\nstruct CustomModelArgs {\n    // Specify parameters for generating a derive model.\n    // Multiple models can be generated by repeating\n    // this attribute with parameters for each model.\n    #[darling(default, multiple, rename = \"model\")]\n    pub models: Vec&lt;CustomModel&gt;,\n}</code></pre><p>We've told <code>darling</code> that for arguments to the struct, we should expect a list of <code>model</code> arguments, and each one will define parameters for a single derived model. This allows us to use the macro to generate multiple derived structs from a single input struct.</p><p>Next, let's define the arguments for each model:</p><pre><code class=\"language-rust\">// custom_model.rs\n\n// Derive `FromMeta` for this struct, which is a\n// macro provided by darling to automatically add the ability\n// to parse metadata into the given struct.\n#[derive(FromMeta, Clone)]\nstruct CustomModel {\n    // Name of the generated model.\n    name: String,\n    // Comma-separated list of field identifiers\n    // to be included in the generated model\n    fields: PathList,\n    // List of additional derives to apply to the\n    // resulting struct such as `Eq` or `Hash`.\n    #[darling(default)]\n    extra_derives: PathList,\n}</code></pre><p>In this, we have two required arguments, <code>name</code> and <code>fields</code>, and one optional argument <code>extra_derives</code>. It's optional because of the <code>#[darling(default)]</code> annotation on it.</p><h3 id=\"how-to-implement-derivecustommodel\">How to Implement <code>DeriveCustomModel</code></h3><p>Now that we have all of our data types defined, let's get to parsing – which is as simple as calling a method on our argument struct! The complete function implementation should like this:</p><pre><code class=\"language-rust\">// custom_model.rs\n\npub(crate) fn derive_custom_model_impl(input: TokenStream) -&gt; TokenStream {\n\t// Parse input token stream as `DeriveInput`\n\tlet original_struct = parse_macro_input!(input as DeriveInput);\n    \n    // Destructure data &amp; ident fields from the input\n    let DeriveInput { data, ident, .. } = original_struct.clone();\n    \n    if let Struct(data_struct) = data {\n    \t// Extract the fields from this data struct\n        let DataStruct { fields, .. } = data_struct;\n        \n        // `darling` provides this method on the struct\n        // to easily parse arguments, and also handles\n        // errors for us.\n        let args = match CustomModelArgs::from_derive_input(&amp;original_struct) {\n            Ok(v) =&gt; v,\n            Err(e) =&gt; {\n            \t// If darling returned an error, generate a\n                // token stream from it so that the compiler\n                // shows the error in the right location.\n                return TokenStream::from(e.write_errors());\n            }\n        };\n\n\t\t// Destructure `models` field from parsed args.\n        let CustomModelArgs { models } = args;\n\n\t\t// Create a new output\n        let mut output = quote!();\n\n\t\t// Panic if no models are defined but macro is\n        // used.\n        if models.is_empty() {\n            panic!(\n                \"Please specify at least 1 model using the `model` attribute\"\n            )\n        }\n\n\t\t// Iterate over all defined models\n        for model in models {\n        \t// Generate custom model from target struct's fields and `model` args.\n            let generated_model = generate_custom_model(&amp;fields, &amp;model);\n\n\t\t\t// Extend the output to include the generated model\n            output.extend(quote!(#generated_model));\n        }\n\n\t\t// Convert output into TokenStream and return\n        output.into()\n    } else {\n    \t// Panic if target is not a named struct\n        panic!(\"DeriveCustomModel can only be used with named structs\")\n    }\n}</code></pre><p>The code that generates tokens for each model has been extracted away to another function that we call <code>generate_custom_model</code>. Let's implement that as well:</p><h3 id=\"how-to-generate-each-custom-model\">How to Generate Each Custom Model</h3><pre><code class=\"language-rust\">// custom_model.rs\n\nfn generate_custom_model(fields: &amp;Fields, model: &amp;CustomModel) -&gt; proc_macro2::TokenStream {\n    let CustomModel {\n        name,\n        fields: target_fields,\n        extra_derives,\n    } = model;\n\n    // Create new fields output\n    let mut new_fields = quote!();\n\n    // Iterate over all fields in the source struct\n    for Field {\n        // The identifier for this field\n        ident,\n        // Any attributes applied to this field\n        attrs,\n        // The visibility specifier for this field\n        vis,\n        // The colon token `:`\n        colon_token,\n        // The type of this field\n        ty,\n        ..\n    } in fields\n    {\n        // Make sure that field has an identifier, panic otherwise\n        let Some(ident) = ident else {\n            panic!(\"Failed to get struct field identifier\")\n        };\n\n        // Try to convert field identifier to `Path` which is a type provided\n        // by `syn`. We do this because `darling`'s PathList type is just a\n        // collection of this type with additional methods on it.\n        let path = match Path::from_string(&amp;ident.clone().to_string()) {\n            Ok(path) =&gt; path,\n            Err(error) =&gt; panic!(\"Failed to convert field identifier to path: {error:?}\"),\n        };\n\n        // If the list of target fields doesn't contain this field,\n        // skip to the next field\n        if !target_fields.contains(&amp;path) {\n            continue;\n        }\n\n        // If it does contain it, reconstruct the field declaration\n        // and add it in `new_fields` output so that we can use it\n        // in the output struct.\n        new_fields.extend(quote! {\n            #(#attrs)*\n            #vis #ident #colon_token #ty,\n        });\n    }\n\n    // Create a new identifier for output struct\n    // from the name provided.\n    let struct_ident = match Ident::from_string(name) {\n        Ok(ident) =&gt; ident,\n        Err(error) =&gt; panic!(\"{error:?}\"),\n    };\n\n    // Create a TokenStream to hold the extra derive declarations\n    // on new struct.\n    let mut extra_derives_output = quote!();\n\n    // If extra_derives is not empty,\n    if !extra_derives.is_empty() {\n        // This syntax is a bit compact, but you should already\n        // know everything you need to understand it by now.\n        extra_derives_output.extend(quote! {\n            #(#extra_derives,)*\n        })\n    }\n\n    // Construct the final struct by combining all the\n    // TokenStreams generated so far.\n    quote! {\n        #[derive(#extra_derives_output)]\n        pub struct #struct_ident {\n            #new_fields\n        }\n    }\n}</code></pre><h3 id=\"how-to-use-your-derivecustommodel-macro\">How to Use Your <code>DeriveCustomModel</code> Macro</h3><p>Coming back to your <code>my-app/main.rs</code>, let's debug-print the generated hash-maps for your new structs that you create using the macro you implemented. Your <code>main.rs</code> should look like this:</p><pre><code class=\"language-rust\">// my-app/src/main.rs\n\nuse macros::{DeriveCustomModel, IntoStringHashMap};\nuse std::collections::HashMap;\n\n#[derive(DeriveCustomModel)]\n#[custom_model(model(\n    name = \"UserName\",\n    fields(first_name, last_name),\n    extra_derives(IntoStringHashMap)\n))]\n#[custom_model(model(name = \"UserInfo\", fields(username, age), extra_derives(Debug)))]\npub struct User2 {\n    username: String,\n    first_name: String,\n    last_name: String,\n    age: u32,\n}\n\nfn main() {\n    let user_name = UserName {\n        first_name: \"first_name\".to_string(),\n        last_name: \"last_name\".to_string(),\n    };\n    let hash_map = HashMap::&lt;String, String&gt;::from(user_name);\n\n    dbg!(hash_map);\n\n    let user_info = UserInfo {\n        username: \"username\".to_string(),\n        age: 27,\n    };\n\n    dbg!(user_info);\n}\n</code></pre><p>As you can see, <code>extra_derives</code> is already useful to us since we need to derive <code>Debug</code> and <code>IntoStringHashMap</code> for the new models.</p><p>If you run this using <code>cargo run</code>, you should see the following output in your terminal:</p><pre><code class=\"language-shell\">[src/main.rs:32:5] hash_map = {\n    \"last_name\": \"last_name\",\n    \"first_name\": \"first_name\",\n}\n[src/main.rs:39:5] user_info = UserInfo {\n    username: \"username\",\n    age: 27,\n}\n</code></pre><p>We are going to wrap up the derive macros here.</p><h2 id=\"a-simple-attribute-macro\">A Simple Attribute Macro</h2><p>In this section, you're going to learn how to write an <strong>attribute</strong> macro.</p><h3 id=\"the-log_duration-attribute\">The <code>log_duration</code> Attribute</h3><p>You are going to write a simple attribute macro that can be applied to any function (or method) that will log the total run time of that function each time the function is called.</p><h3 id=\"how-to-declare-an-attribute-macro\">How to Declare an Attribute Macro</h3><p>You declare attribute macros by creating a function and annotating that function using the <code>proc_macro_attribute</code> macro that tells the compiler to consider that function as a macro declaration. Let's see what that looks like:</p><pre><code class=\"language-rust\">// my-app-macros/src/lib.rs\n\n#[proc_macro_attribute]\npub fn log_duration(args: TokenStream, item: TokenStream) -&gt; TokenStream {\n    log_duration_impl(args, item)\n}\n</code></pre><p>For these macros, the function name is important, as that also becomes the name of the macro. As you can see, these take two different arguments. The first is the argument passed to the attribute macro, and the second is the target of the attribute macro.</p><p>Let's also implement <code>log_duration_impl</code>. Create a new file <code>log_duration.rs</code>:</p><pre><code class=\"language-shell\">touch src/log_duration.rs</code></pre><h3 id=\"how-to-implement-the-log_duration-attribute-macro\">How to Implement the <code>log_duration</code> Attribute Macro</h3><p>I'm going to give you the complete implementation first, and then I'll break down the parts that I haven't used so far:</p><pre><code class=\"language-rust\">// my-app-macros/src/log_duration.rs\n\nuse proc_macro::TokenStream;\nuse quote::quote;\nuse syn::{parse_macro_input, ItemFn};\n\npub(crate) fn log_duration_impl(_args: TokenStream, input: TokenStream) -&gt; TokenStream {\n    // Parse the input as `ItemFn` which is a type provided\n    // by `syn` to represent a function.\n    let input = parse_macro_input!(input as ItemFn);\n\n    let ItemFn {\n        // The function signature\n        sig,\n        // The visibility specifier of this function\n        vis,\n        // The function block or body\n        block,\n        // Other attributes applied to this function\n        attrs,\n    } = input;\n\n    // Extract statements in the body of the functions\n    let statements = block.stmts;\n    \n    // Store the function identifier for logging\n    let function_identifier = sig.ident.clone();\n\n    // Reconstruct the function as output using parsed input\n    quote!(\n    \t// Reapply all the other attributes on this function.\n        // The compiler doesn't include the macro we are\n        // currently working in this list.\n        #(#attrs)*\n        // Reconstruct the function declaration\n        #vis #sig {\n            // At the beginning of the function, create an instance of `Instant`\n            let __start = std::time::Instant::now();\n            \n            // Create a new block, the body of which is the body of the function.\n            // Store the return value of this block as a variable so that we can\n            // return it later from the parent function.\n            let __result = {\n                #(#statements)*\n            };\n\n            // Log the duration information for this function\n            println!(\"{} took {}μs\", stringify!(#function_identifier), __start.elapsed().as_micros());\n\n            // Return the result (if any)\n            return __result;\n        }\n    )\n    .into()\n}\n</code></pre><p>The only things that you might not have seen previously are the <code>sig</code> and the <code>block</code> fields you get from parsing the input as <code>ItemFn</code>. <code>sig</code> contains the entire signature of a function while <code>block</code> contains the entire body of the function. This is why, by using the following code, we can basically reconstruct the unmodified function:</p><pre><code class=\"language-rust\">// Example code to reconstruct unmodified fn in macro\n\n#vis #sig #block</code></pre><p>In this example, you want to modify the function body, which is why you create a new block that encapsulates the original function block.</p><h3 id=\"how-to-use-your-log_duration-macro\">How to Use Your <code>log_duration</code> Macro</h3><p>Coming back to <code>main.rs</code>, using an attribute macro is simpler than you might think:</p><pre><code class=\"language-rust\">// main.rs\n\n#[log_duration]\n#[must_use]\nfn function_to_benchmark() -&gt; u16 {\n    let mut counter = 0;\n    for _ in 0..u16::MAX {\n        counter += 1;\n    }\n\n    counter\n}\n\nfn main() {\n    println!(\"{}\", function_to_benchmark());\n}</code></pre><p>When you run this, you should get the following output:</p><pre><code class=\"language-shell\">function_to_benchmark took 498μs\n65535</code></pre><p>We are now ready to move on to a more complex use-case.</p><h2 id=\"a-more-elaborate-attribute-macro\">A More Elaborate Attribute Macro</h2><h3 id=\"the-cached_fn-attribute\">The <code>cached_fn</code> Attribute</h3><p>You are going to write an attribute macro that will allow you to add caching capability to any function. For the purposes of this example, we're going to assume that our function always has <code>String</code> arguments and also returns a <code>String</code> value. </p><p>Some of you might know this better as a \"memoized\" function. </p><p>In addition, you will need to allow the user of this macro to tell the macro how it can generate a dynamic key based on function args.</p><p>To help us facilitate the caching part so that we don't get diverted, we're going to use a dependency called <code>cacache</code>. <code>cacache</code> is a Rust library for managing local key and content caches. It works by writing the cache to the disk.</p><p>Let's add it to the project by editing the <code>Cargo.toml</code> file for <code>my-app</code> directly:</p><pre><code class=\"language-rust\">// Cargo.toml\n\nworkspace = { members = [\"my-app-macros\"] }\n\n[package]\nname = \"my-app\"\nversion = \"0.1.0\"\nedition = \"2021\"\nresolver = \"2\"\n\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n\n[dependencies]\n# New dependency\ncacache = { version = \"13.0.0\", default-features = false, features = [\"mmap\"] }\nmacros = { path = \"./macros\" }\n</code></pre><h3 id=\"how-to-implement-the-cached_fn-attribute-macro\">How to Implement the <code>cached_fn</code> Attribute Macro</h3><p>Let's start by declaring this macro in <code>lib.rs</code>:</p><pre><code class=\"language-rust\">// my-app-macros/src/lib.rs\n\n#[proc_macro_attribute]\npub fn cached_fn(args: TokenStream, item: TokenStream) -&gt; TokenStream {\n\tcached_fn_impl(args, item)\n}</code></pre><p>Create a new file <code>cached_fn.rs</code> to store the implementation:</p><pre><code class=\"language-shell\">touch my-app-macros/src/cached_fn.rs</code></pre><p>Let's define how our arguments should look before we go ahead and implement anything:</p><h3 id=\"cached_fn-attribute-arguments\"><code>cached_fn</code> Attribute Arguments</h3><pre><code class=\"language-rust\">// my-app-macros/src/cached_fn.rs\n\n#[derive(FromMeta)]\nstruct CachedParams {\n    // Accept any expression that we should use to compute the\n    // key. This can be a constant string, or some computation\n    // based on function arguments.\n    keygen: Option&lt;Expr&gt;,\n}</code></pre><p>The only argument is an optional <code>keygen</code>, which is of type <code>Expr</code>. <code>Expr</code> represents any valid <a href=\"https://doc.rust-lang.org/reference/expressions.html\">Rust expression</a>, so it can be very dynamic. In this example, you'll be passing an expression that generates the key based on function arguments of the target function.</p><p>As always, we'll first see the entire implementation and then break down the parts that are new:</p><pre><code class=\"language-rust\">// my-app-macros/src/cached_fn.rs\n\npub fn cached_fn_impl(args: TokenStream, item: TokenStream) -&gt; TokenStream {\n    // Parse argument tokens as a list of NestedMeta items\n    let attr_args = match NestedMeta::parse_meta_list(args.into()) {\n        Ok(v) =&gt; v,\n        Err(e) =&gt; {\n            // Write error to output token stream if there is one\n            return proc_macro::TokenStream::from(Error::from(e).write_errors());\n        }\n    };\n\n    // Parse the nested meta list as our `CachedParams` struct\n    let CachedParams { keygen } = match CachedParams::from_list(&amp;attr_args) {\n        Ok(params) =&gt; params,\n        Err(error) =&gt; {\n            // Write error to output token stream if there is one\n            return proc_macro::TokenStream::from(Error::from(error).write_errors());\n        }\n    };\n\n    // Parse the input target item as a function\n    let ItemFn {\n        // The function signature\n        sig,\n        // The visibility specifier of this function\n        vis,\n        // The function block or body\n        block,\n        // Other attributes applied to this function\n        attrs,\n    } = parse_macro_input!(item as ItemFn);\n\n    // Generate our key statement based on given param (or lack thereof)\n    let key_statement = if let Some(keygen) = keygen {\n        // If the user specified a `keygen`, use that as an expression to\n        // get the cache key.\n        quote! {\n            let __cache_key = #keygen;\n        }\n    } else {\n        // If no `keygen` was provided, use the name of the function\n        // as cache key.\n        let fn_name = sig.ident.clone().to_string();\n        quote! {\n            let __cache_key = #fn_name;\n        }\n    };\n\n    // Reconstruct the function as output using parsed input\n    quote!(\n        // Apply other attributes from the original function to the generated function\n        #(#attrs)*\n        #vis #sig {\n            // Include the key_statement we generated above as the first\n            // thing in the function body\n            #key_statement\n\n            // Try to read the value from cache\n            match cacache::read_sync(\"./__cache\", __cache_key.clone()) {\n                // If the value exists, parse it as string and return it\n                Ok(value) =&gt; {\n                    println!(\"Data is fetched from cached\");\n                    from_utf8(&amp;value).unwrap().to_string()\n                },\n                Err(_) =&gt; {\n                    println!(\"Data is not fetched from cached\");\n                    // Save the output of original function block into\n                    // a variable.\n                    let output = #block;\n\n                    // Write the output value to cache as bytes\n                    cacache::write_sync(\"./__cache\", __cache_key, output.as_bytes()).unwrap();\n\n                    // Return the original output\n                    output\n                }\n            }\n        }\n    )\n    .into()\n}</code></pre><p>Well, turns out that you've seen everything that we used in this one before. </p><p>The only new thing here is the use of the <code>cacache</code> dependency, but that's also pretty straightforward. You just give the location where you want to store the cached data as the first argument to the <code>read_sync</code> and <code>write_sync</code> functions provided by <code>cacache</code>.</p><p>We've also added some logging to help us verify that the macro works as expected.</p><h3 id=\"how-to-use-the-cached_fn-macro\">How to Use the <code>cached_fn</code> Macro</h3><p>To make any function memoized or cached, we simply annotate it using the <code>cached_fn</code> attribute:</p><pre><code class=\"language-rust\">// src/main.rs\n\n#[cached_fn(keygen = \"format!(\\\"{first_name} {last_name}\\\")\")]\nfn test_cache(first_name: String, last_name: String) -&gt; String {\n    format!(\"{first_name} {last_name}\")\n}\n\nfn main() {\n\ttest_cache(\"John\".to_string(), \"Appleseed\".to_string());\n    test_cache(\"John\".to_string(), \"Appleseed\".to_string());\n    test_cache(\"John\".to_string(), \"Doe\".to_string());\n}</code></pre><p>If you run this, you should see the following output:</p><pre><code class=\"language-shell\">Data is not fetched from cached\nData is fetched from cached\nData is not fetched from cached</code></pre><p>Which clearly shows that if the function is called more than once for the same arguments, data is returned from cache. But if the arguments are different, it doesn't return the value that was cached for a different set of arguments.</p><p>We did make a lot of assumptions for this one which don't hold true for a real-world use case. As such, this is only for learning purposes, but depicts a real-world use case.</p><p>For example, I've written attribute macros to cache HTTP handler functions using <code>redis</code> for production servers. Those have a very similar implementation to this, but contains a lot of bells and whistles to work with that particular use case.</p><h2 id=\"a-simple-function-like-macro\">A Simple Function-like Macro</h2><p>It's finally time to have some <em>fun</em> again. We are going to start simple, but the second example is going to include parsing custom syntax. <em>Fun</em>, right?</p><p>Disclaimer: If you're familiar with declarative macros (using <code>macro_rules!</code> syntax), you might realize that the following examples can easily be written using that syntax and don't need to be procedural macros. Writing example procedural macros that cannot be written as declarative ones is extremely difficult if you also want to keep things simple, which is why the examples were chosen despite this.</p><h3 id=\"the-constant_string-macro\">The <code>constant_string</code> Macro</h3><p>We're going to build a very simple macro that takes in a string literal (of type <code>&amp;str</code>) as input and creates a global public constant for it (the name of the variable being the same as the value). Basically, our macro will generate the following:</p><pre><code class=\"language-rust\">pub const STRING_LITERAL: &amp;str = \"STRING_LITERAL\";</code></pre><h3 id=\"how-to-declare-a-function-like-macro\">How to Declare a Function-like Macro</h3><p>You declare function-like macros by creating a function and annotating that function using a <code>proc_macro</code> macro. It tells the compiler to consider that function as a macro declaration. Let's see what that looks like:‌</p><pre><code class=\"language-rust\">// my-app-macros/src/lib.rs\n\n#[proc_macro]\npub fn constant_string(item: TokenStream) -&gt; TokenStream {\n    constant_string_impl(item)\n}</code></pre><p>For these macros, the function name is important, as that also becomes the name of the macro. As you can see, these only take a single argument, which is whatever you pass on to the macro. It can literally be anything, even custom syntax that's not valid Rust code.</p><h3 id=\"how-to-implement-the-constant_string-macro\">How to Implement the <code>constant_string</code> Macro</h3><p>For the implementation, let's create a new file <code>constant_string.rs</code>:</p><pre><code class=\"language-rust\">touch my-app-macros/src/constant_string.rs</code></pre><p>The implementation is pretty simple:</p><pre><code class=\"language-rust\">use darling::FromMeta;\nuse proc_macro::TokenStream;\nuse quote::quote;\nuse syn::{parse_macro_input, Ident, LitStr};\n\npub fn constant_string_impl(item: TokenStream) -&gt; TokenStream {\n    // Parse input as a string literal\n    let constant_value = parse_macro_input!(item as LitStr);\n\n    // Create a new `Ident` (identifier) from the passed string value.\n    // This is going to be the name of the constant variable.\n    let constant_value_name = Ident::from_string(&amp;constant_value.value()).unwrap();\n\n    // Generate the code for declaring the constant variable.\n    quote!(pub const #constant_value_name: &amp;str = #constant_value;).into()\n}</code></pre><p>All we're doing is parsing input as a string literal. If you pass something to do this is not a string literal, it will throw an error. Then we take the string, create a identifier out of it, and generate the output code. Short and simple.</p><h3 id=\"how-to-use-the-constant_string-macro\">How to Use the <code>constant_string</code> Macro</h3><p>The usage of this macro is also pretty simple:</p><pre><code class=\"language-rust\">// src/main.rs\n\nconstant_string!(\"SOME_CONSTANT_STRING_VALUE\");</code></pre><p>The above code will expand to this:</p><pre><code class=\"language-rust\">pub const SOME_CONSTANT_STRING_VALUE: &amp;str = \"SOME_CONSTANT_STRING_VALUE\";</code></pre><h2 id=\"a-more-elaborate-function-like-macro\">A More Elaborate Function-like Macro</h2><p>Function-like macros, as the name might suggest, can be used in a similar way to calling a function. You can also use them in any place where you can call a function, and beyond.</p><h3 id=\"the-hash_mapify-macro\">The <code>hash_mapify</code> Macro</h3><p>Moving on to the interesting parts: the macro you're going to write now will allow you to generate a <code>HashMap</code> by simply passing in a list of key-value pairs. For example:</p><pre><code class=\"language-rust\">let variable = \"Some variable\";\n\nhash_mapify!(\n\t&amp;str,\n\tkey = \"value\", \n    key2 = \"value2\", \n    key3 = \"value3\", \n    key4 = variable\n);</code></pre><p>As you can see, we want the first argument to be the type of the value, and the subsequent arguments to be the key-value pairs. And we'll need to parse all of this ourselves.</p><p>To keep things simple, since this can easily get out of hand, we're only going to support primitive values such as strings, integers, floats and booleans. So we're not going to support creating a <code>hash_map</code> with non-string keys or <code>enum</code> and <code>struct</code> as values.</p><h3 id=\"how-to-implement-the-hash_mapify-macro\">How to Implement the <code>hash_mapify</code> Macro</h3><p>We're going to start as usual by declaring our macro:</p><pre><code class=\"language-rust\">// my-app-macros/src/lib.rs\n\n#[proc_macro]\npub fn hash_mapify(item: TokenStream) -&gt; TokenStream {\n    hash_mapify_impl(item)\n}</code></pre><p>Next, you're going to define a data structure to hold your input data. In this case, you need to know the value type passed, as well as a list of key-value pairs. </p><p>We are going to extract the implementation to a separate file, which is where you'll also implement the data types and parsing logic. </p><p>Create new file <code>hash_mapify.rs</code> and declare the data type to hold input data:</p><pre><code class=\"language-shell\">touch my-app-macros/src/hash_mapify.rs</code></pre><h3 id=\"how-to-parse-hash_mapify-s-input\">How to Parse <code>hash_mapify</code>'s Input</h3><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nuse proc_macro::TokenStream;\nuse quote::{quote, ToTokens};\nuse syn::parse::{Parse, ParseStream};\nuse syn::{parse_macro_input, Lit, LitStr, Token, Type};\n\npub struct ParsedMapEntry(String, proc_macro2::TokenStream);\n\npub struct ParsedMap {\n    value_type: Type,\n    entries: Vec&lt;ParsedMapEntry&gt;,\n}</code></pre><p>You store the value as <code>TokenStream</code> directly because you need to support both literal values as well as variables, both of which only have 1 common type in this context, <code>TokenStream</code>.</p><p>You also might have noticed that we save the <code>value_type</code> as <code>Type</code> which is a type provided by <code>syn</code> crate which is an enum of the possible types that a Rust value could have. That was a mouthful! </p><p>You won't need to handle each variant of this enum, since this type can also directly be converted to <code>TokenStream</code>. You'll better understand what that means shortly.</p><p>Next, you need to implement the <code>syn::parse::Parse</code> trait for <code>ParsedMap</code> declared previously, so that it can be computed from the <code>TokenStream</code> passed as arguments to the macro.</p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nimpl Parse for ParsedMap {\n\tfn parse(input: ParseStream) -&gt; syn::Result&lt;Self&gt; {\n    \tlet mut entries = Vec::&lt;ParsedMapEntry&gt;::new();\n    }\n}</code></pre><p><code>input</code>, which is of type <code>ParsedStream</code> in this case, works similar to an iterator. You need to parse tokens out of the input using the method <code>parse</code> on it, which will also advance the stream to the beginning of the next token. </p><p>For example, if you have a stream of tokens representing <code>[a, b, c]</code>, as soon as you parse <code>[</code> out of this stream, the stream will be mutated to only contain <code>a, b, c]</code> . This is very similar to iterators, where as soon as you take a value out, the iterator is advanced by one position and only holds the remaining items.</p><p>Before you parse anything, you need to check if input is empty, and panic if it is:</p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nimpl Parse for ParsedMap {\n\tfn parse(input: ParseStream) -&gt; syn::Result&lt;Self&gt; {\n    \t// ...\n        \n    \t// Check if input is empty (no arguments are passed). If\n        // not, then panic as we cannot continue further.\n        if input.is_empty() {\n            panic!(\"At least a type must be specified for an empty hashmap\");\n        }\n        \n        // ...\n    }\n}</code></pre><p>Since we expect the first argument passed to the macro to be the type of the value in our hashmap, let's parse that out of the token stream:</p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nimpl Parse for ParsedMap {\n\tfn parse(input: ParseStream) -&gt; syn::Result&lt;Self&gt; {\n    \t// ...\n        \n    \t// Since the first argument should be of type `Type`, you try\n        // to parse `Type` out of input and returns an error otherwise.\n        let ty = input.parse::&lt;Type&gt;()?;\n        \n        // ...\n    }\n}</code></pre><p>Parse takes a single type argument which represents what to parse.</p><p>If the first argument cannot be parsed as a valid type, an error will be returned. Do note that this doesn't verify if the type you passed actually exists or not, this will only validate whether the tokens in the first argument are valid for a type definition, and that's all.</p><p>This means that if you pass <code>SomeRandomType</code> where <code>SomeRandomType</code> isn't actually defined, the parsing will still succeed. It will only fail after expanding the macro during compile time.</p><p>Moving on, we also expect the user to use <code>,</code> to separate the arguments. Let's parse that as the next token after type:</p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nimpl Parse for ParsedMap {\n\tfn parse(input: ParseStream) -&gt; syn::Result&lt;Self&gt; {\n    \t// ...\n        \n    \t// Next, parse the `,` token, which you expect to be used to\n        // separate the arguments.\n        input.parse::&lt;Token![,]&gt;()?;\n        \n        // ...\n    }\n}</code></pre><p>You might notice the usage of the <code>Token!</code> macro when providing the type argument for the <code>parse</code> method. It's a macro provided by <code>syn</code> to easily convert built-ins such as keywords (<code>type</code>, <code>async</code> , <code>fn</code> and so on) as well as punctuation marks (<code>,</code>, <code>.</code>, <code>;</code> and so on) and delimiters (<code>{</code>, <code>[</code>, <code>(</code> and so on). This macro takes a single argument, which is the keyword/punctuation/delimiter literal for which the type is needed. </p><p>The official docs define it as:</p><blockquote>A type-macro that expands to the name of the Rust type representation of a given token.</blockquote><p>Now that you have the type of value as well as the first separator (comma), it's time to start parsing key-value pairs. All of the key-value pairs follow the same structure <code>key = value</code> and are separated by commas.</p><p>Do note that white-space isn't important, as that is entirely handled during the tokenization process and isn't something that you need to handle.</p><p>Since you won't know how many key-value pairs are passed, you need something to tell you when all of it is parsed:</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nimpl Parse for ParsedMap {\n\tfn parse(input: ParseStream) -&gt; syn::Result&lt;Self&gt; {\n    \t// ...\n        \n        // Loop until the input is empty (there is nothing else\n        // left to parse).\n    \twhile !input.is_empty() {\n        \t// ..\n        }\n        \n        // ...\n    }\n}</code></pre><figcaption>'</figcaption></figure><p>As I explained previously, tokens are taken out of the stream and it's advanced each time you parse something. This means that when all of the tokens are parsed, the stream will be empty. We utilise this fact here to figure out when to break out of the loop.</p><p>Each key-value pair can be parsed in a similar fashion as you parsed the type argument:</p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nimpl Parse for ParsedMap {\n\tfn parse(input: ParseStream) -&gt; syn::Result&lt;Self&gt; {\n    \t// ...\n        \n        // Loop until the input is empty (there is nothing else\n        // left to parse).\n    \twhile !input.is_empty() {\n        \t// Try to parse the key as an identifier\n            let key = if let Ok(key) = input.parse::&lt;syn::Ident&gt;() {\n                key.to_string()\n                // If it's not an identifier, try to parse it as\n                // a string literal\n            } else if let Ok(key) = input.parse::&lt;LitStr&gt;() {\n                key.value()\n                // If it's neither an identifier nor a string literal,\n                // it is not a valid key, so panic with appropriate\n                // error.\n            } else {\n                panic!(\"Key must be either a string literal or an identifier!\");\n            };\n\n            // Parse the `=` sign, which should be the next token after\n            // a key.\n            input.parse::&lt;Token![=]&gt;()?;\n\n            // Next, try to parse the value as an identifier. If it is, it\n            // means that it's a variable, so we should convert it to token\n            // stream directly.\n            let value = if let Ok(value) = input.parse::&lt;syn::Ident&gt;() {\n                value.to_token_stream()\n                // If the input isn't an identifier, try to parse it as a\n                // literal value such as `\"string\"` for strings, `42`\n                // for numbers `false` for boolean value, etc.\n            } else if let Ok(value) = input.parse::&lt;Lit&gt;() {\n                value.to_token_stream()\n            } else {\n                // If the input is neither an identifier nor a literal value\n                // panic with appropriate error.\n                panic!(\"Value must be either a literal or an identifier!\");\n            };\n\n            // Push the parsed key value pair to our list.\n            entries.push(ParsedMapEntry(key, value));\n\n            // Check if next token is a comma, without advancing the stream\n            if input.peek(Token![,]) {\n                // If it is, then parse it out and advance the stream before\n                // moving on to the next key-value pair\n                input.parse::&lt;Token![,]&gt;()?;\n            }\n        }\n        \n        // ...\n    }\n}</code></pre><p>The only thing here that is new, is the call to <code>peek</code> method at the end. This is a special method that returns a boolean if the token that is passed to <code>peek</code> is the next token in the stream, and false otherwise.</p><p>As the name might suggest, this only performs a check, so it doesn't take that token out of the stream or advance the stream in any form.</p><p>Once all of the parsing is done, you just return the information as part of <code>ParsedMap</code> struct we declared earlier. The complete implementation for this trait is as below if that's easier for you to read through:</p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nimpl Parse for ParsedMap {\n    fn parse(input: ParseStream) -&gt; syn::Result&lt;Self&gt; {\n        let mut entries = Vec::&lt;ParsedMapEntry&gt;::new();\n\n        // Check if input is empty (no arguments are passed). If not, then\n        // panic as we cannot continue further.\n        if input.is_empty() {\n            panic!(\"At least a type must be specified for an empty hashmap\");\n        }\n\n        // Since the first argument should be of type `Type`, you try\n        // to parse `Type` out of input and returns an error otherwise.\n        let ty = input.parse::&lt;Type&gt;()?;\n\n        // Next, parse the `,` token, which you expect to be used to\n        // separate the arguments.\n        input.parse::&lt;Token![,]&gt;()?;\n\n        // Loop until the input is empty (there is nothing else\n        // left to parse).\n        while !input.is_empty() {\n            // Try to parse the key as an identifier\n            let key = if let Ok(key) = input.parse::&lt;syn::Ident&gt;() {\n                key.to_string()\n                // If it's not an identifier, try to parse it as\n                // a string literal\n            } else if let Ok(key) = input.parse::&lt;LitStr&gt;() {\n                key.value()\n                // If it's neither an identifier nor a string literal,\n                // it is not a valid key, so panic with appropriate\n                // error.\n            } else {\n                panic!(\"Key must be either a string literal or an identifier!\");\n            };\n\n            // Parse the `=` sign, which should be the next token after\n            // a key.\n            input.parse::&lt;Token![=]&gt;()?;\n\n            // Next, try to parse the value as an identifier. If it is, it\n            // means that it's a variable, so we should convert it to token\n            // stream directly.\n            let value = if let Ok(value) = input.parse::&lt;syn::Ident&gt;() {\n                value.to_token_stream()\n                // If the input isn't an identifier, try to parse it as a\n                // literal value such as `\"string\"` for strings, `42`\n                // for numbers `false` for boolean value, etc.\n            } else if let Ok(value) = input.parse::&lt;Lit&gt;() {\n                value.to_token_stream()\n            } else {\n                // If the input is neither an identifier nor a literal value\n                // panic with appropriate error.\n                panic!(\"Value must be either a literal or an identifier!\");\n            };\n\n            // Push the parsed key value pair to our list.\n            entries.push(ParsedMapEntry(key, value));\n\n            // Check if next token is a comma, without advancing the stream\n            if input.peek(Token![,]) {\n                // If it is, then parse it out and advance the stream before\n                // moving on to the next key-value pair\n                input.parse::&lt;Token![,]&gt;()?;\n            }\n        }\n\n        Ok(ParsedMap {\n            value_type: ty,\n            entries,\n        })\n    }\n}</code></pre><h3 id=\"how-to-generate-the-output-code\">How to Generate the Output Code</h3><p>You can now finally write the actual macro implementation, which is going to be pretty-straightforward:</p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\npub fn hash_mapify_impl(item: TokenStream) -&gt; TokenStream {\n    // Parse input token stream as `ParsedMap` defined by us.\n    // This will use the logic from parse trait we implemented\n    // earlier.\n    let input = parse_macro_input!(item as ParsedMap);\n    \n    let key_value_pairs = input.entries;\n    let ty = input.value_type;\n\n    // Generate the output hashmap inside a code block so that\n    // we don't shadow any existing variables. Return the hashmap\n    // from the block.\n    quote!({\n        // Create a new hashmap with `String` for key type and `#ty` for \n        // value type, which parsed from the macro input arguments.\n        let mut hash_map = std::collections::HashMap::&lt;String, #ty&gt;::new();\n        \n        // Insert all key-value pairs into the hashmap.\n        #(\n            hash_map.insert(#key_value_pairs);\n        )*\n\n        // Return the generated hashmap\n        hash_map\n    })\n    .into()\n}</code></pre><p>If you're coding along with me, or if you have a keen eye, you might have noticed that there is an error here. The type of variable <code>key_value_pairs</code> is <code>Vec&lt;ParsedMapEntry&gt;</code>. We are trying to use it in the output as:</p><pre><code class=\"language-rust\">#(hash_map.insert(#key_value_pairs);)*</code></pre><p>which is the correct syntax for working with lists, but the underlying type <code>ParsedMapEntry</code> is a custom type. And neither <code>syn</code> nor <code>quote</code> would know how to convert it to a token stream. So we cannot use it with this syntax.</p><p>But if we try to manually write an implementation where we loop it ourselves, generate a separate tokens stream in each loop, and extend the existing one, it's going to be quite tedious. Wouldn't it be great if there was a better solution? Turns out there is: <code>ToTokens</code> trait.</p><h3 id=\"how-to-convert-custom-data-types-to-output-tokens\">How to Convert Custom Data Types to Output Tokens</h3><p>This trait can be implemented for any of our custom types and defines how the type looks like when converted into the token stream. </p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nimpl ToTokens for ParsedMapEntry {\n    fn to_tokens(&amp;self, tokens: &amp;mut proc_macro2::TokenStream) {\n        let key = self.0.clone();\n        let value = self.1.clone();\n\n        tokens.extend(quote!(String::from(#key), #value));\n    }\n}</code></pre><p>As part of the implementation, you need to mutate the <code>tokens</code> argument and extend it to contain the token stream that we want our type to generate. The syntax I used to do that should all be familiar by now.</p><p>Once you've done this, <code>quote</code> can now easily convert the problematic code to token stream. So this: <code>#(hash_map.insert(#key_value_pairs);)*</code> will now work directly.</p><p>As usual, here's the complete implementation if that's easier to understand:</p><pre><code class=\"language-rust\">// my-app-macros/src/hash_mapify.rs\n\nuse proc_macro::TokenStream;\nuse quote::{quote, ToTokens};\nuse syn::parse::{Parse, ParseStream};\nuse syn::{parse_macro_input, Lit, LitStr, Token, Type};\n\npub struct ParsedMapEntry(String, proc_macro2::TokenStream);\n\npub struct ParsedMap {\n    value_type: Type,\n    entries: Vec&lt;ParsedMapEntry&gt;,\n}\n\nimpl ToTokens for ParsedMapEntry {\n    fn to_tokens(&amp;self, tokens: &amp;mut proc_macro2::TokenStream) {\n        let key = self.0.clone();\n        let value = self.1.clone();\n\n        tokens.extend(quote!(String::from(#key), #value));\n    }\n}\n\nimpl Parse for ParsedMap {\n    fn parse(input: ParseStream) -&gt; syn::Result&lt;Self&gt; {\n        let mut entries = Vec::&lt;ParsedMapEntry&gt;::new();\n\n        // Check if input is empty (no arguments are passed). If not, then\n        // panic as we cannot continue further.\n        if input.is_empty() {\n            panic!(\"At least a type must be specified for an empty hashmap\");\n        }\n\n        // Since the first argument should be of type `Type`, you try\n        // to parse `Type` out of input and returns an error otherwise.\n        let ty = input.parse::&lt;Type&gt;()?;\n\n        // Next, parse the `,` token, which you expect to be used to\n        // separate the arguments.\n        input.parse::&lt;Token![,]&gt;()?;\n\n        // Loop until the input is empty (there is nothing else\n        // left to parse).\n        while !input.is_empty() {\n            // Try to parse the key as an identifier\n            let key = if let Ok(key) = input.parse::&lt;syn::Ident&gt;() {\n                key.to_string()\n                // If it's not an identifier, try to parse it as\n                // a string literal\n            } else if let Ok(key) = input.parse::&lt;LitStr&gt;() {\n                key.value()\n                // If it's neither an identifier nor a string literal,\n                // it is not a valid key, so panic with appropriate\n                // error.\n            } else {\n                panic!(\"Key must be either a string literal or an identifier!\");\n            };\n\n            // Parse the `=` sign, which should be the next token after\n            // a key.\n            input.parse::&lt;Token![=]&gt;()?;\n\n            // Next, try to parse the value as an identifier. If it is, it\n            // means that it's a variable, so we should convert it to token\n            // stream directly.\n            let value = if let Ok(value) = input.parse::&lt;syn::Ident&gt;() {\n                value.to_token_stream()\n                // If the input isn't an identifier, try to parse it as a\n                // literal value such as `\"string\"` for strings, `42`\n                // for numbers `false` for boolean value, etc.\n            } else if let Ok(value) = input.parse::&lt;Lit&gt;() {\n                value.to_token_stream()\n            } else {\n                // If the input is neither an identifier nor a literal value\n                // panic with appropriate error.\n                panic!(\"Value must be either a literal or an identifier!\");\n            };\n\n            // Push the parsed key value pair to our list.\n            entries.push(ParsedMapEntry(key, value));\n\n            // Check if next token is a comma, without advancing the stream\n            if input.peek(Token![,]) {\n                // If it is, then parse it out and advance the stream before\n                // moving on to the next key-value pair\n                input.parse::&lt;Token![,]&gt;()?;\n            }\n        }\n\n        Ok(ParsedMap {\n            value_type: ty,\n            entries,\n        })\n    }\n}\n\npub fn hash_mapify_impl(item: TokenStream) -&gt; TokenStream {\n    // Parse input token stream as `ParsedMap` defined by us.\n    // This will use the logic from parse trait we implemented\n    // earlier.\n    let input = parse_macro_input!(item as ParsedMap);\n\n    let key_value_pairs = input.entries;\n    let ty = input.value_type;\n\n    // Generate the output hashmap inside a code block so that\n    // we don't shadow any existing variables. Return the hashmap\n    // from the block.\n    quote!({\n        // Create a new hashmap with `String` for key type and `#ty` for\n        // value type, which parsed from the macro input arguments.\n        let mut hash_map = std::collections::HashMap::&lt;String, #ty&gt;::new();\n\n        // Insert all key-value pairs into the hashmap.\n        #(\n            hash_map.insert(#key_value_pairs);\n        )*\n\n        // Return the generated hashmap\n        hash_map\n    })\n    .into()\n}\n</code></pre><h3 id=\"how-to-use-the-hash_mapify-macro\">How to Use the <code>hash_mapify</code> Macro</h3><p>We can verify that our macro works by writing a simple usage:</p><pre><code class=\"language-rust\">// src/main.rs\n\nfn main() {\n\ttest_hashmap();\n}\n\nfn test_hashmap() {\n    let some_variable = \"Some variable value\";\n\n    let hash_map = hash_mapify!(\n        &amp;str,\n        \"first_key\" = \"first_value\",\n        \"second_variable\" = some_variable,\n        some_key = \"value for variable key\",\n    );\n\n    let number_hash_map =\n        hash_mapify!(usize, \"first_key\" = 1, \"second_variable\" = 2, some_key = 3,);\n\n    dbg!(hash_map);\n    dbg!(number_hash_map);\n}</code></pre><p>If you run this code, you should see the following output:</p><pre><code class=\"language-shell\">[src/main.rs:62:5] hash_map = {\n    \"first_key\": \"first_value\",\n    \"some_key\": \"value for variable key\",\n    \"second_variable\": \"Some variable value\",\n}\n[src/main.rs:63:5] number_hash_map = {\n    \"second_variable\": 2,\n    \"first_key\": 1,\n    \"some_key\": 3,\n}</code></pre><p>which is what we would expect to happen.</p><p>And now that we've covered all three types of procedural macros, we're going to wrap up the examples here.</p><h2 id=\"beyond-writing-macros\">Beyond Writing Macros</h2><p>Now that you've learned how to write basic derive macros, I'd like to take some time to quickly introduce some additional tools and techniques that will be helpful when working with macros. I'll also point out some drawbacks of why and when to avoid them.</p><h3 id=\"helpful-crates-tools\">Helpful Crates/Tools</h3><p><a href=\"https://github.com/dtolnay/cargo-expand\"><strong>cargo-expand</strong></a></p><p>This is a CLI tool that can generate macro expanded code for any file in your project. Another great project by <a href=\"https://crates.io/users/dtolnay\">David Tolnay</a>. You do need the nightly toolchain for Rust to use this, though. Don't worry – it's only required for the tool itself to work. You don't need to make your project use the nightly toolchain as well. Your project can stay in the stable zone.</p><p>Install nightly toolchain:</p><pre><code class=\"language-shell\">rustup toolchain install nightly</code></pre><p>Install <code>cargo-expand</code>:</p><pre><code class=\"language-shell\">cargo install cargo-expand</code></pre><p>Now that this is done, you can see what the actual expansion of your code in main looks like. Simply run the following in the <code>my-app</code> project directory:</p><pre><code class=\"language-shell\">cargo expand</code></pre><p>and it will output the expanded code in the terminal output. You will see some unfamiliar stuff as well, such as what the <code>dbg!</code> macro expands to, but you can ignore those.</p><p><strong><a href=\"https://docs.rs/trybuild/latest/trybuild/#\">trybuild</a> &amp; <a href=\"https://docs.rs/macrotest/latest/macrotest/#\">macrotest</a></strong></p><p>These are 2 crates that are extremely useful if you want to unit-test your procedural macros' expanded forms, or assert any expected compilation errors.</p><h2 id=\"downsides-of-macros\">Downsides of Macros</h2><h3 id=\"debugging-or-lack-thereof-\">Debugging (or lack thereof)</h3><p>You cannot put a breakpoint into any line of code that is generated by the macro. Nor can you get to it from the stacktrace of an error. This makes debugging generated code very difficult. </p><p>In my usual workflow, I either put logging into the generated code, or if that is not enough, I replace the usage of macro with the code given to me by <code>cargo expand</code> temporarily to debug it, make changes, and then update the macro code based on that. </p><p>There might be better ways out there, and if you know any, I'd be grateful if you can share them with me.</p><h3 id=\"compile-time-costs\">Compile Time Costs</h3><p>There's a non-zero cost for macro expansion that the compiler needs to run and process, and then check that the code it generated is valid. This becomes even more expensive when recursive macros are involved. </p><p>As a very crude estimation, each macro expansion adds 10ms to the compile time of the project. If you're interested, I encourage you to read through this <a href=\"https://rustc-dev-guide.rust-lang.org/macro-expansion.html\">introduction on how the compiler processes macros</a> internally.</p><h3 id=\"lack-of-auto-complete-and-code-checks\">Lack of Auto-complete and Code Checks</h3><p>Code written as part of a macro output isn't presently supported fully by any IDE, nor is it supported by rust-analyzer. So in most cases, you're writing code without relying on features such as auto-complete, auto-suggestions, and so on.</p><h3 id=\"where-do-we-draw-the-line\">Where Do We Draw the Line? </h3><p>Given the insane potential of macros, it's very easy to get carried away with them. It's important to remember all of the drawbacks and make decisions accordingly, ensuring that you are not indulging yourselves into premature abstraction. </p><p>As a general rule, I personally avoid implementing any \"business logic\" with macros, nor do I attempt to write macros for generating code that I will need to step through with a debugger time and again. Or the code that I will need to make micro changes in for performance testing and improvement.</p><h2 id=\"wrapping-up\">Wrapping Up</h2><p>This was a long journey! But I wanted anyone with basic knowledge and experience with Rust to be able to follow and come out of this able to write macros in their own projects. </p><p>Hopefully, I was able to do that for you. I will be writing a lot more about macros in general, so stay tuned for that.</p><p>You can find the complete code for everything we looked at in this article in <a href=\"https://github.com/anshulsanghi-blog/macros-handbook\">https://github.com/anshulsanghi-blog/macros-handbook</a> repository.</p><p>Also, feel free to <strong><strong><strong><strong><a href=\"mailto:contact@anshulsanghi.tech\">contact me</a></strong></strong></strong></strong> if you have any questions or opinions on this topic.</p><h3 id=\"enjoying-my-work\"><strong><strong><strong>Enjoying my work?</strong></strong></strong></h3><p>Consider buying me a coffee to support my work!</p><p><a href=\"https://buymeacoffee.com/anshulsanghi\">☕Buy me a coffee</a></p><p>Till next time, happy coding and wishing you clear skies!</p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG\" class=\"author-profile-image\" alt=\"Anshul Sanghi\" width=\"2000\" height=\"2000\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/anshulsanghi/\" data-test-label=\"profile-link\">\n                    \n                        Anshul Sanghi\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Full-stack engineer mainly working with Rust &amp; TypeScript with heavy focus on High-performance backend systems &amp; Image processing and analysis tools. I&#39;m also into Infrared &amp; Astro Photography</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Procedural%20Macros%20in%20Rust%20%E2%80%93%20A%20Handbook%20for%20Beginners\".replace(/&#39;/g,\"%27\"),o=\"\",r=\"@AnshulsAstro\",i=Boolean(\"\");let s;if(i&&(o||r)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Anshul Sanghi\"};s=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${r||t.currentPostAuthor} for translating it.`)}else!i&&r&&(s=encodeURIComponent(`Thank you ${r} for writing this helpful article.`));const a=`window.open(\\n    '${s?`https://twitter.com/intent/tweet?text=${s}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",a)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac216ff2da640eb\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"version\":\"2024.7.0\",\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\"}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/rust-tutorial-naive-star-detector-for-images/":{"metadata":[{"tagName":"meta","attributes":{"charset":"utf-8"},"content":""},{"tagName":"meta","attributes":{"http-equiv":"X-UA-Compatible","content":"IE=edge"},"content":""},{"tagName":"title","attributes":{},"content":"Rust Tutorial – How to Build a Naïve Star Detector for Images"},{"tagName":"meta","attributes":{"name":"HandheldFriendly","content":"True"},"content":""},{"tagName":"meta","attributes":{"name":"viewport","content":"width=device-width, initial-scale=1.0"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.googleapis.com"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com","crossorigin":""},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n"},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n"},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"/news/assets/css/global-26e2f3cde9.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/screen-926fddfac2.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/search-bar-124f5f949c.css"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js"},"content":""},{"tagName":"script","attributes":{},"content":"let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));"},{"tagName":"script","attributes":{"data-ad-client":"ca-pub-9482786369113753","src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","crossorigin":"anonymous","async":""},"content":""},{"tagName":"link","attributes":{"rel":"icon","href":"https://cdn.freecodecamp.org/universal/favicons/favicon.ico","type":"image/png"},"content":""},{"tagName":"link","attributes":{"rel":"canonical","href":"https://www.freecodecamp.org/news/rust-tutorial-naive-star-detector-for-images/"},"content":""},{"tagName":"meta","attributes":{"name":"referrer","content":"no-referrer-when-downgrade"},"content":""},{"tagName":"meta","attributes":{"name":"description","content":"Star detection is a crucial step in many of the processing and analysis routines that we perform on astronomical images. It is extremely important for a process called plate-solving, which is the process of figuring out which part of the sky an image shows, or which part of the sky"},"content":""},{"tagName":"meta","attributes":{"property":"og:site_name","content":"freeCodeCamp.org"},"content":""},{"tagName":"meta","attributes":{"property":"og:type","content":"article"},"content":""},{"tagName":"meta","attributes":{"property":"og:title","content":"Rust Tutorial – How to Build a Naïve Star Detector for Images"},"content":""},{"tagName":"meta","attributes":{"property":"og:description","content":"Star detection is a crucial step in many of the processing and analysis routines that we perform on astronomical images. It is extremely important for a process called plate-solving, which is the process of figuring out which part of the sky an image shows, or which part of the sky"},"content":""},{"tagName":"meta","attributes":{"property":"og:url","content":"https://www.freecodecamp.org/news/rust-tutorial-naive-star-detector-for-images/"},"content":""},{"tagName":"meta","attributes":{"property":"og:image","content":"https://www.freecodecamp.org/news/content/images/2024/04/cover.jpg"},"content":""},{"tagName":"meta","attributes":{"property":"article:published_time","content":"2024-04-16T19:34:07.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:modified_time","content":"2024-04-16T19:34:06.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Rust"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Image Processing"},"content":""},{"tagName":"meta","attributes":{"property":"article:publisher","content":"https://www.facebook.com/freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:card","content":"summary_large_image"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:title","content":"Rust Tutorial – How to Build a Naïve Star Detector for Images"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:description","content":"Star detection is a crucial step in many of the processing and analysis routines that we perform on astronomical images. It is extremely important for a process called plate-solving, which is the process of figuring out which part of the sky an image shows, or which part of the sky"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:url","content":"https://www.freecodecamp.org/news/rust-tutorial-naive-star-detector-for-images/"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:image","content":"https://www.freecodecamp.org/news/content/images/2024/04/cover.jpg"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label1","content":"Written by"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data1","content":"Anshul Sanghi"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label2","content":"Filed under"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data2","content":"Rust, Image Processing"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:site","content":"@freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:creator","content":"@AnshulsAstro"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:width","content":"2000"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:height","content":"1281"},"content":""},{"tagName":"script","attributes":{"type":"application/ld+json"},"content":"{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/cover.jpg\",\n\t\t\"width\": 2000,\n\t\t\"height\": 1281\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/rust-tutorial-naive-star-detector-for-images/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-04-16T19:34:07.000Z\",\n\t\"dateModified\": \"2024-04-16T19:34:06.000Z\",\n\t\"keywords\": \"Rust, Image Processing\",\n\t\"description\": \"Star detection is a crucial step in many of the processing and analysis routines\\nthat we perform on astronomical images. It is extremely important for a process\\ncalled plate-solving, which is the process of figuring out which part of the sky\\nan image shows, or which part of the sky your telescope is pointed at. \\n\\nAll modern telescope mounts can make use of plate solving software to\\nautomatically figure out where they&#x27;re pointed at, and in which direction they\\nneed to move to point at the correct\",\n\t\"headline\": \"Rust Tutorial – How to Build a Naïve Star Detector for Images\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Anshul Sanghi\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/anshulsanghi/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://twitter.com/AnshulsAstro\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/DSC02590.JPG\",\n\t\t\t\"width\": 2000,\n\t\t\t\"height\": 2000\n\t\t}\n\t}\n}"},{"tagName":"meta","attributes":{"name":"generator","content":"Eleventy"},"content":""},{"tagName":"link","attributes":{"rel":"alternate","type":"application/rss+xml","title":"freeCodeCamp.org","href":"https://www.freecodecamp.org/news/rss/"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com"},"content":""},{"tagName":"script","attributes":{},"content":"\nwindow.dataLayer = window.dataLayer || [];\n"},{"tagName":"script","attributes":{},"content":"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');"},{"tagName":"meta","attributes":{"name":"google-site-verification","content":"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E"},"content":""},{"tagName":"meta","attributes":{"name":"x-fcc-source","data-test-label":"x-fcc-source","content":"Ghost"},"content":""}],"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Rust Tutorial – How to Build a Naïve Star Detector for Images</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/rust-tutorial-naive-star-detector-for-images/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Star detection is a crucial step in many of the processing and analysis routines that we perform on astronomical images. It is extremely important for a process called plate-solving, which is the process of figuring out which part of the sky an image shows, or which part of the sky\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Rust Tutorial – How to Build a Naïve Star Detector for Images\">\n    \n        <meta property=\"og:description\" content=\"Star detection is a crucial step in many of the processing and analysis routines that we perform on astronomical images. It is extremely important for a process called plate-solving, which is the process of figuring out which part of the sky an image shows, or which part of the sky\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/rust-tutorial-naive-star-detector-for-images/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2024/04/cover.jpg\">\n    <meta property=\"article:published_time\" content=\"2024-04-16T19:34:07.000Z\">\n    <meta property=\"article:modified_time\" content=\"2024-04-16T19:34:06.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Rust\">\n    \n        <meta property=\"article:tag\" content=\"Image Processing\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Rust Tutorial – How to Build a Naïve Star Detector for Images\">\n    \n        <meta name=\"twitter:description\" content=\"Star detection is a crucial step in many of the processing and analysis routines that we perform on astronomical images. It is extremely important for a process called plate-solving, which is the process of figuring out which part of the sky an image shows, or which part of the sky\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/rust-tutorial-naive-star-detector-for-images/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2024/04/cover.jpg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Anshul Sanghi\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Rust, Image Processing\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@AnshulsAstro\">\n    \n\n    <meta property=\"og:image:width\" content=\"2000\">\n    <meta property=\"og:image:height\" content=\"1281\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/cover.jpg\",\n\t\t\"width\": 2000,\n\t\t\"height\": 1281\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/rust-tutorial-naive-star-detector-for-images/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-04-16T19:34:07.000Z\",\n\t\"dateModified\": \"2024-04-16T19:34:06.000Z\",\n\t\"keywords\": \"Rust, Image Processing\",\n\t\"description\": \"Star detection is a crucial step in many of the processing and analysis routines\\nthat we perform on astronomical images. It is extremely important for a process\\ncalled plate-solving, which is the process of figuring out which part of the sky\\nan image shows, or which part of the sky your telescope is pointed at. \\n\\nAll modern telescope mounts can make use of plate solving software to\\nautomatically figure out where they&#x27;re pointed at, and in which direction they\\nneed to move to point at the correct\",\n\t\"headline\": \"Rust Tutorial – How to Build a Naïve Star Detector for Images\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Anshul Sanghi\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/anshulsanghi/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://twitter.com/AnshulsAstro\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/DSC02590.JPG\",\n\t\t\t\"width\": 2000,\n\t\t\t\"height\": 2000\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Tue Apr 16 2024 19:34:07 GMT+0000 (Coordinated Universal Time)\">\n                            April 16, 2024\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/rust/\">\n                                #Rust\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Rust Tutorial – How to Build a Naïve Star Detector for Images</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG\" class=\"author-profile-image\" alt=\"Anshul Sanghi\" width=\"2000\" height=\"2000\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/anshulsanghi/\" data-test-label=\"profile-link\">\n                    \n                        Anshul Sanghi\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2024/04/cover.jpg 300w, https://www.freecodecamp.org/news/content/images/size/w600/2024/04/cover.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/cover.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2024/04/cover.jpg 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2024/04/cover.jpg\" alt=\"Rust Tutorial – How to Build a Naïve Star Detector for Images\" ,=\"\" width=\"2000\" height=\"1281\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>Star detection is a crucial step in many of the processing and analysis routines that we perform on astronomical images. It is extremely important for a process called plate-solving, which is the process of figuring out which part of the sky an image shows, or which part of the sky your telescope is pointed at. </p><p>All modern telescope mounts can make use of plate solving software to automatically figure out where they're pointed at, and in which direction they need to move to point at the correct location.</p><p>Star detection, sometimes, is also used in correcting the effect of atmosphere on the sharpness of targets such as galaxies. It is also crucial for combining astronomical images from multiple nights, telescopes, locations and so on into a single output image that has a very high signal-to-noise ratio.</p><p>With this tutorial, I'd like to introduce a very naïve technique for detecting stars in an image.</p><h3 id=\"a-quick-note-\">A quick note:</h3><p>Star detection is a very complex topic, and I've only scratched the surface both in my own understanding and in this article. </p><p>The steps I use and describe in this article are derived from public documentation on existing real world applications (both for star detection and for edge detection), as well as some blog posts from incredibly knowledgeable people (which I link to at the end of the article, be sure to check them out).</p><p>As such, this implementation is intended for learning purposes only.</p><h2 id=\"before-you-read\"><strong>Before You Read</strong></h2><h3 id=\"prerequisites-for-the-first-part-of-the-tutorial\"><strong>Prerequisites for the first part of the tutorial</strong></h3><p>The process described builds upon the concept of <a href=\"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/\">multi-scale processing of images using a trous wavelet transform</a>. If you're not aware of what that is, I encourage you to learn more about it using my previous article that I just linked to, and then come back to this one.</p><p>This article also assumes that you have a basic understanding of <a href=\"https://en.wikipedia.org/wiki/Centroid\">Centroids</a>. Just knowing what they mean is enough, as you don't have to calculate them yourself. Since the article focuses on image processing and analysis, a basic understanding of how pixels work in digital format is helpful, but not mandatory.</p><h3 id=\"prerequisites-for-the-second-part-of-this-tutorial\"><strong>Prerequisites for the second part of this tutorial</strong></h3><p>Here, we focus on implementing the algorithm using the Rust programming language, without going much into the details of the language itself. So being comfortable writing Rust programs, and comfortable reading crate documentations is required.</p><p>If this is not you, you can still read Part 1 and learn the technique, and then maybe you'll want to then try it out in a language of your choice. </p><p>If you're not familiar with Rust, I highly encourage you to learn the basics. <a href=\"https://www.freecodecamp.org/news/rust-in-replit/\">Here's an interactive Rust course</a> that can get you started.</p><h2 id=\"table-of-contents\">Table of contents</h2><!--kg-card-begin: markdown--><ol>\n<li><a href=\"#how-star-detection-works\">How Star Detection Works</a>\n<ol>\n<li><a href=\"#what-is-star-detection\">What is Star Detection?</a></li>\n<li><a href=\"#how-star-detection-works\">How Star Detection Works</a></li>\n<li><a href=\"#an-intermediary-look-at-the-process\">An Intermediary Look at the Process</a></li>\n<li><a href=\"#picking-it-apart\">Picking It Apart</a></li>\n</ol>\n</li>\n<li><a href=\"#how-to-implement-it-in-rust\">How to Implement it in Rust</a>\n<ol>\n<li><a href=\"#prerequisites\">Prerequisites</a></li>\n<li><a href=\"#how-to-read-and-decompose-the-input-image\">How to read and decompose the input image</a></li>\n<li><a href=\"#noise-reduction\">Noise reduction</a></li>\n<li><a href=\"#how-to-optimize-the-threshold-and-binarization\">How to optimize the threshold and binarization</a></li>\n<li><a href=\"#how-to-construct-polygons-around-stars\">How to construct polygons around stars</a></li>\n<li><a href=\"#how-to-detect-star-size-and-location-using-contours\">How to detect star size and location using contours</a></li>\n<li><a href=\"#how-to-encapsulate-the-process\">How to encapsulate the process</a></li>\n<li><a href=\"#how-to-test-the-implementation-on-astronomical-images\">How to test the implementation on astronomical images</a></li>\n<li><a href=\"#how-to-optimize-minimum-star-count\">How to optimize minimum star count</a></li>\n<li><a href=\"#but-there-is-one-more-thing-\">But there is one more thing...</a></li>\n</ol>\n</li>\n<li><a href=\"#further-reading\">Further Reading</a></li>\n<li><a href=\"#wrapping-up\">Wrapping Up</a></li>\n</ol>\n<!--kg-card-end: markdown--><h2 id=\"how-star-detection-works\">How Star Detection Works</h2><p>Since this process involves a lot of steps, let's see how it works, with an increasing level of detail about what actually happens as we go along. With each increasing level, we'll be unwrapping the black box bit by bit.</p><h3 id=\"what-is-star-detection\">What is Star Detection?</h3><p>Star detection, at it's simplest form, involves isolating the stars from the rest of the image, and then performing edge detection on it.</p><figure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"><div class=\"kg-gallery-container\"><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/m42-star-detection-1.jpg\" width=\"2000\" height=\"1281\" alt=\"m42-star-detection-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/m42-star-detection-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/m42-star-detection-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/m42-star-detection-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/m42-star-detection-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-1-1.jpg\" width=\"2000\" height=\"1281\" alt=\"level-1-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-1-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-1-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-1-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-1-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div></div><figcaption>(From left to right) 1. Input image 2. Detected stars visualised using green circles</figcaption></figure><h3 id=\"how-star-detection-works-1\">How Star Detection Works</h3><p>First, you try to extract away the pixels that you think might be stars from the rest of the pixels in the image. This new image, that only contains the extracted pixels, is then analysed using edge detection techniques to find the star positions in 2D space.</p><figure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"><div class=\"kg-gallery-container\"><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/m42-star-detection-2.jpg\" width=\"2000\" height=\"1281\" alt=\"m42-star-detection-2\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/m42-star-detection-2.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/m42-star-detection-2.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/m42-star-detection-2.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/m42-star-detection-2.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-1-2-1.jpg\" width=\"2000\" height=\"1281\" alt=\"level-1-2-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-1-2-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-1-2-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-1-2-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-1-2-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-1-1-1.jpg\" width=\"2000\" height=\"1281\" alt=\"level-1-1-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-1-1-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-1-1-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-1-1-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-1-1-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div></div><figcaption>(From left to right) 1. Input image 2. Extracted pixels that are potentially stars 3. Detected stars visualised using green circles</figcaption></figure><h3 id=\"an-intermediary-look-at-the-process\">An Intermediary Look At The Process</h3><p>Then, you decompose your input image into multiple layers, each layer containing a part of the original data such that adding all layers gives us back the original data. </p><p>You then isolate the layers that would only contain small sized structures, such as noise and stars, and throw away the rest of the data.</p><figure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"><div class=\"kg-gallery-container\"><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer0-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer0-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer0-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer0-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer0-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer0-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer1-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer1-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer1-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer1-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer1-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer1-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer2-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer2-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer2-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer2-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer2-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer2-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer3-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer3-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer3-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer3-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer3-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer3-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer4-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer4-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer4-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer4-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer4-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer4-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer5-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer5-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer5-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer5-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer5-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer5-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer6-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer6-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer6-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer6-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer6-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer6-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer7-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer7-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer7-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer7-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer7-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer7-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer100.jpg\" width=\"2000\" height=\"1281\" alt=\"layer100\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer100.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer100.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer100.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer100.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div></div><figcaption>Different layers of structure in the image that the input is decomposed into. We throw away the final layer and retain the rest in this example</figcaption></figure><p>With this filtered data, you find the edges in the image using the contouring technique (which is explained in the next section). Each contour gives us multiple \"points\" in the 2D space. You then try to draw a closed shape using the points you have. </p><p>Once you've done this, all you need is to find the center of this shape and you have the location of the stars.</p><figure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"><div class=\"kg-gallery-container\"><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/m42-star-detection-5.jpg\" width=\"2000\" height=\"1281\" alt=\"m42-star-detection-5\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/m42-star-detection-5.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/m42-star-detection-5.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/m42-star-detection-5.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/m42-star-detection-5.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-3-1.jpg\" width=\"2000\" height=\"1281\" alt=\"level-3-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-3-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-3-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-3-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-3-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-1-2-2.jpg\" width=\"2000\" height=\"1281\" alt=\"level-1-2-2\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-1-2-2.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-1-2-2.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-1-2-2.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-1-2-2.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/polygon.jpg\" width=\"2000\" height=\"1281\" alt=\"polygon\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/polygon.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/polygon.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/polygon.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/polygon.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-1-1-2.jpg\" width=\"2000\" height=\"1281\" alt=\"level-1-1-2\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-1-1-2.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-1-1-2.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-1-1-2.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-1-1-2.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div></div><figcaption>(From top-left to bottom-right) 1. Input image 2. Image after decomposing into layers and throwing away large scale data 3. Image after binarisation 4. Detected contours visualised using green outlines 5. Detected stars visualised using green circles</figcaption></figure><h3 id=\"picking-it-apart\">Picking It Apart</h3><p>Using a multi-scale analysis technique facilitated by the à trous transform algorithm, you break down the image into multiple layers, each containing different scaled structures from the original image. You take the layers containing smaller scale structures and throw away the rest. </p><p>To these layers, you apply a bilateral denoising filter to reduce noise so that you can ensure that you're only left with stars and not noise that the algorithm might pick up as stars later on.</p><figure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"><div class=\"kg-gallery-container\"><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer0-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer0-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer0-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer0-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer0-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer0-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer1-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer1-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer1-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer1-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer1-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer1-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer2-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer2-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer2-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer2-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer2-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer2-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer3-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer3-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer3-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer3-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer3-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer3-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer4-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer4-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer4-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer4-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer4-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer4-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer5-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer5-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer5-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer5-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer5-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer5-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer6-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer6-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer6-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer6-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer6-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer6-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer7-1.jpg\" width=\"2000\" height=\"1281\" alt=\"layer7-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer7-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer7-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer7-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer7-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/layer100.jpg\" width=\"2000\" height=\"1281\" alt=\"layer100\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/layer100.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/layer100.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/layer100.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/layer100.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div></div><figcaption>Different layers of structure in the image that the input is decomposed into. We throw away the final layer and retain the rest in this example</figcaption></figure><figure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"><div class=\"kg-gallery-container\"><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/m42-star-detection-5.jpg\" width=\"2000\" height=\"1281\" alt=\"m42-star-detection-5\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/m42-star-detection-5.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/m42-star-detection-5.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/m42-star-detection-5.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/m42-star-detection-5.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-3-1.jpg\" width=\"2000\" height=\"1281\" alt=\"level-3-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-3-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-3-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-3-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-3-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-4-1.jpg\" width=\"2000\" height=\"1281\" alt=\"level-4-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-4-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-4-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-4-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-4-1.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div></div><figcaption>(From left to right) 1. Input image 2. Image after decomposing into layers and throwing away large scale data 3. Noise reduced image</figcaption></figure><p>Once you've filtered out the noise, you binarize your image using thresholding. Thresholding and binarization is the process of converting all of the pixels to either pure black or pure white, so that they're easier to work with. You can do this by selecting a certain intensity value, and all pixels with intensity less than this become black and all pixels with intensity more than this become white. </p><p>To find the optimum intensity value to binarize the image with, you define a minimum number of stars that you expect to find in the image, which is usually determined based on what you actually need to do with your star locations. </p><p>In our example, we'll start with a minimum of 500 and slowly push it to the limit of the sample image to see what happens.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-1-2-3.jpg\" class=\"kg-image\" alt=\"level-1-2-3\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-1-2-3.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-1-2-3.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-1-2-3.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-1-2-3.jpg 2400w\" sizes=\"(min-width: 720px) 720px\" width=\"2000\" height=\"1281\" loading=\"lazy\"><figcaption>Binarizing noise-reduced and wavelet filtered image</figcaption></figure><p>This makes the process of edge detection (which is the next step in our process) using contouring much more reliable. </p><p>Contouring is a term that describes the process of figuring out where the structures are in your image, and drawing a border along those structures – these are known as contours. </p><p>It is similar to edge-detection, but edge-detection helps you differentiate between individual neighbouring pixels, whereas contours are designed to work with a complete boundary of any structures in an image.</p><p>The library we'll be using finds the contours in an image using the algorithm proposed by Suzuki and Abe: <a href=\"https://www.sciencedirect.com/science/article/abs/pii/0734189X85900167\">Topological Structural Analysis of Digitized Binary Images by Border Following</a>. Contouring in this manner will give you a collection of points that lie on the border of each contour.</p><p>For each contour it finds, you create a polygon by joining all of the border points within that contour. If this shape is an open shape, then you just extrapolate the final border to create a polygon, which needs to be a closed shape. You then use the centroid formulae on this polygon to find the center of mass of your shape, which gives you the center of your star (in most cases). </p><p>You also need to find the euclidean distances between the center of mass and each border point, the longest of which becomes the size of the star.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/polygon-1.jpg\" class=\"kg-image\" alt=\"polygon-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/polygon-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/polygon-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/polygon-1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/polygon-1.jpg 2400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"1281\" loading=\"lazy\"><figcaption>Contouring the binarized image to find closed polygons around stars visualised here using green outlines</figcaption></figure><p>Once you have your star size, you reject any stars that are either smaller than 1 pixel or larger than 24 pixels. These are educated guesses that I use, and they seem to give me the best results for sample images (but this is definitely a potential point of improvement). </p><p>After all of this, you should have the x and y coordinates of the star, as well as its size in pixels.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level-1-1-3.jpg\" class=\"kg-image\" alt=\"level-1-1-3\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level-1-1-3.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level-1-1-3.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/level-1-1-3.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/level-1-1-3.jpg 2400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"1281\" loading=\"lazy\"><figcaption>Detected stars visualised using green circles around them</figcaption></figure><p>We're going to stop there, but there's a lot more that you can do after this step to remove false-positives and fix the centroid/size of stars. </p><h2 id=\"how-to-implement-it-in-rust\">How to Implement it in Rust</h2><p>Let's create a new library project:</p><pre><code class=\"language-shell\">cargo new --lib stardetect-rs &amp;&amp; cd stardetect-rs </code></pre><h3 id=\"prerequisites\">Prerequisites</h3><p>You need a couple of dependencies to get started. Let's add them and I'll explain why you need them:</p><pre><code class=\"language-shell\">cargo add image imageproc image-dwt geo</code></pre><ul><li><code>image</code> is a Rust library we'll use to work with images of all of the standard formats and encodings. It also helps us convert between various formats, and provides easy access to pixel data as buffers.</li><li><code>imageproc</code> is another library by the people who created the <code>image</code> library. It's an extension for the same as it implements image processing functions and algorithms for the <code>image</code> lib.</li><li><code>image-dwt</code> is my own library (shameless plug) that implements the <a href=\"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/\">à trous wavelet decomposition algorithm</a> for <code>image</code> crate. This is needed to break down our image into multiple scales that I mentioned previously.</li><li><code>geo</code> is a Rust library that allows us to easily work with geometric types (like points in 2d space), shapes (such as polygons), and algorithms implemented for them. We use this library to build our polygon based on contour data, and to also find the centroid of the polygon that I described above. It also helps us compute euclidean distances between points, which we use for determining star size.</li></ul><h3 id=\"how-to-read-and-decompose-the-input-image\">How to read and decompose the input image</h3><p>You start by reading the input image and decomposing it so that you're only left with stars (and noise).</p><p>You need to define a new struct that will act as a wrapper for your input image, and add a constructor for it to create an instance of this struct based on input:</p><pre><code class=\"language-rust\">// lib.rs\nuse image::{DynamicImage, GrayImage};\n\npub struct StarDetect {\n    source: GrayImage,\n}\n\nimpl From&lt;DynamicImage&gt; for StarDetect {\n    fn from(source: DynamicImage) -&gt; Self {\n        Self {\n            source: source.to_luma8(),\n        }\n    }\n}</code></pre><p>You then need to add the ability to extract the first <code>n</code> layers from wavelet decomposition of your image:</p><pre><code class=\"language-rust\">// lib.rs\n\nuse image_dwt::kernels::LinearInterpolationKernel;\nuse image_dwt::recompose::{OutputLayer, RecomposableWaveletLayers};\nuse image_dwt::transform::ATrousTransform;\n\nimpl StarDetect {\n    fn extract_small_scale_structures(&amp;mut self) {\n        let (width, height) = self.source.dimensions();\n\n        // Decompose the image into 8 layers\n        let filtered_image = ATrousTransform::new(\n            &amp;DynamicImage::ImageLuma8(self.source.clone()),\n            8,\n            LinearInterpolationKernel,\n        )\n        // Filter out the residue image and keep the rest\n        .filter(|item| item.pixel_scale.is_some())\n        // Recompose the first 3 layers into a grayscale image.\n        .recompose_into_image(width as usize, height as usize, OutputLayer::Grayscale);\n\n        // Update the source image that we will work with\n        // going forward.\n        self.source = filtered_image.to_luma8();\n    }\n}</code></pre><h3 id=\"noise-reduction\">Noise reduction</h3><p>Now that you have the input image (which should only contain noise and stars), let's get rid of the noise:</p><pre><code class=\"language-rust\">// lib.rs\n\nimpl StarDetect {\n    fn apply_noise_reduction(&amp;mut self) {\n        self.source = imageproc::filter::bilateral_filter(&amp;self.source, 10, 10., 3.);\n    }\n}</code></pre><p>Next, you need to determine the optimum threshold value for a given minimum star count. You find it by picking a value and iteratively optimising it until you hit a star count that's more than the minimum.</p><h3 id=\"how-to-optimize-the-threshold-and-binarization\">How to optimize the threshold and binarization</h3><p>Start by creating a new file <code>threshold.rs</code> and defining a trait with necessary methods. You need a method to optimise your threshold value and another for performing the binarization operation:</p><pre><code class=\"language-rust\">// threshold.rs\n\npub(crate) trait ThresholdingExtensions {\n    fn optimize_threshold_for_star_count(&amp;self, min_star_count: usize) -&gt; u8;\n    fn binarize(&amp;mut self, threshold: u8);\n}\n</code></pre><p>Let's implement both of these:</p><pre><code class=\"language-rust\">// threshold.rs\n\nuse crate::centroid::find_star_centres_and_size;\nuse crate::StarDetect;\n\nimpl ThresholdingExtensions for StarDetect {\n    fn optimize_threshold_for_star_count(&amp;self, min_star_count: usize) -&gt; u8 {\n        // Current star count\n        let mut star_count = 0;\n\n        // Starting threshold value\n        let mut threshold = u8::MAX;\n\n        // Iterate until you've found the best threshold\n        while star_count &lt; min_star_count {\n            // Panic if we reach the 0 intensity value while iterating.\n            // This means that there are fewer stars than we hoped for.\n            if threshold == 0 {\n                panic!(\"Maximum iteration count reached\");\n            }\n\n            // Reduce threshold to 95% of its previous value.\n            // Using this, we check finer and finer differences\n            // in threshold for each iteration.\n            threshold = (0.95 * threshold as f32) as u8;\n\n            // Clone the source data since we need to modify it\n            // without affecting original data.\n            let mut source = self.clone();\n\n            // Binarize the source data image using current threshold\n            ThresholdingExtensions::binarize(&amp;mut source, threshold);\n\n            // Find the number of stars detected with the current threshold\n            star_count = find_star_centres_and_size(&amp;source.source).len();\n        }\n\n        threshold\n    }\n\n    fn binarize(&amp;mut self, threshold: u8) {\n        // Iterate over every pixel in source image\n        for pixel in self.source.iter_mut() {\n            if *pixel &gt; threshold {\n                // If pixel intensity is greater than threshold\n                // set it to maximum intensity instead.\n                *pixel = u8::MAX;\n            } else {\n                // Otherwise, set it to 0 intensity.\n                *pixel = 0;\n            }\n        }\n    }\n}</code></pre><p>You might notice that we use the <code>find_star_centres_and_size</code> function when trying to find the optimised threshold value. We'll get to that shortly, as we need to declare some types that will hold the state of our computation before we implement the function.</p><p>Create a new file <code>centroid.rs</code>.</p><p>Define a new struct that will hold the coordinates and size of the star:</p><pre><code class=\"language-rust\">// centroid.rs\n\nuse imageproc::point::Point;\n\n#[derive(Eq, PartialEq, Copy, Clone, Debug)]\npub struct StarCenter {\n    coord: Point&lt;u32&gt;,\n    radius: u32,\n}\n\nimpl StarCenter {\n    pub fn coord(&amp;self) -&gt; &amp;Point&lt;u32&gt; {\n        &amp;self.coord\n    }\n    pub fn radius(&amp;self) -&gt; u32 {\n        self.radius\n    }\n}</code></pre><p>We've also defined methods to retrieve these fields. <code>Point</code> is a type provided to you by <code>imageproc</code> crate to store coordinates in an image.</p><h3 id=\"how-to-construct-polygons-around-stars\">How to construct polygons around stars</h3><p>We're going to implement this function inside out. We first need a way to construct our polygon from contours. Let's implement that:</p><pre><code class=\"language-rust\">// centroid.rs\n\nuse geo::LineString;\nuse imageproc::contours::Contour;\n\npub(crate) fn construct_closed_polygon(contour: &amp;Contour&lt;u32&gt;) -&gt; LineString&lt;f32&gt; {\n    // Create a new line string that connects all points\n    // in the contour. This can create either an open\n    // or a closed shape.\n    let mut line_string = LineString::from_iter(contour.points.iter().map(|point| Coord {\n        x: point.x as f32,\n        y: point.y as f32,\n    }));\n\n    // If it is an open shape, close the shape to create a\n    // polygon. This does nothing otherwise.\n    line_string.close();\n\n    line_string\n}</code></pre><p><code>Contour</code> is a type provided by the <code>imageproc</code> crate, which is what it returns as the result of contouring operation on an image. It contains a list of points that lie on the border of the contour.</p><p><code>LineString</code> is a type provided by <code>geo</code> and is defined by them as \"An ordered collection of two or more <a href=\"https://docs.rs/geo/latest/geo/geometry/struct.Coord.html\"><code>Coord</code></a>s, representing a path between locations.\". In this case, we use this type to construct the polygon shape.</p><h3 id=\"how-to-detect-star-size-and-location-using-contours\">How to detect star size and location using contours</h3><p>Next, you need a way to compute the <code>StarCenter</code> type we declared previously from contour data:</p><pre><code class=\"language-rust\">// centroid.rs\n\nuse geo::{Centroid, Coord, EuclideanDistance};\n\npub(crate) fn filter_map_contour_to_star_centers(contour: &amp;Contour&lt;u32&gt;) -&gt; Option&lt;StarCenter&gt; {\n    // If there are no points in the contour\n    // it is not a star.\n    if contour.points.is_empty() {\n        return None;\n    }\n\n    if contour.points.len() == 1 {\n        // If there's only 1 point in the contour\n        // consider it to be the center of the star\n        // of size 1px.\n        let center = contour.points.first().unwrap();\n        let radius = 1_u32;\n\n        return Some(StarCenter {\n            coord: *center,\n            radius,\n        });\n    }\n\n    // Otherwise, construct a polygon around the star based on\n    // contour information.\n    let polygon = construct_closed_polygon(contour);\n\n    // Find the centre of gravity of this polygon (centroid)\n    let center = polygon.centroid().unwrap();\n\n    // Find the radius of the star based on maximum distance between\n    // the centroid and any of the points in contour.\n    let radius = polygon.points().fold(0., |distance, point| {\n        point.euclidean_distance(&amp;center).max(distance)\n    });\n\n    // If the radius is less than 1px or more than 24px\n    // we reject it as a non-star.\n    if !(1. ..=24.).contains(&amp;radius) {\n        return None;\n    }\n\n    // Construct star center based on previously computed information\n    Some(StarCenter {\n        coord: Point {\n            x: center.x() as u32,\n            y: center.y() as u32,\n        },\n        radius: radius as u32,\n    })\n}</code></pre><p>This function utilises the <code>construct_closed_polygon</code> function you defined previously to compute the final star centers and sizes. Now for the easy part: let's implement the missing <code>find_star_centres_and_size</code>:</p><pre><code class=\"language-rust\">// centroid.rs\n\nuse image::GrayImage;\n\npub(crate) fn find_star_centres_and_size(image: &amp;GrayImage) -&gt; Vec&lt;StarCenter&gt; {\n    // Compute the contours in source image\n    let contours = imageproc::contours::find_contours::&lt;u32&gt;(image);\n\n    contours\n        .iter()\n        // Iterate over all contours and create a list\n        // of star center and size data.\n        .filter_map(filter_map_contour_to_star_centers)\n        .collect()\n}</code></pre><h3 id=\"how-to-encapsulate-the-process\">How to encapsulate the process</h3><p>All you need now is to implement one last method on the <code>StarDetect</code> struct that encapsulates the entire process:</p><pre><code class=\"language-rust\">// lib.rs\n\nuse crate::centroid::{find_star_centres_and_size, StarCenter};\nuse crate::threshold::ThresholdingExtensions;\n\nimpl StarDetect {\n\tpub fn find_stars(&amp;mut self, min_stars: usize) -&gt; Vec&lt;StarCenter&gt; {\n        self.extract_small_scale_structures();\n        self.apply_noise_reduction();\n\n        let threshold = self.optimize_threshold_for_star_count(min_stars);\n        self.binarize(threshold);\n\n        find_star_centres_and_size(&amp;self.source)\n    }\n}</code></pre><p>This method only calls the functions we've written so far. The user of your library will only need to call this function and nothing else.</p><p>You can now use what you've created to find stars in an image. For this article going forward, the image I'll be using to demonstrate is shown below. If you'd like to follow along, you can download the image I'll be using from <a href=\"https://anshulsanghi-assets.s3.ap-south-1.amazonaws.com/m42-star-detection.jpg\"><strong>here</strong></a>.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/m42-star-detection.jpg\" class=\"kg-image\" alt=\"m42-star-detection\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/m42-star-detection.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/m42-star-detection.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/m42-star-detection.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/m42-star-detection.jpg 2400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"1281\" loading=\"lazy\"><figcaption>M42 Orion Nebula, The Dark Horse Nebula, The Flaming Star Nebula And The Surrounding H-Alpha Gas</figcaption></figure><p>As you might notice, we have a wide range of star shapes, sizes and colors in this image, but the same goes for noise and other large-scale nebulae structures too.</p><h3 id=\"how-to-test-the-implementation-on-astronomical-images\">How to test the implementation on astronomical images</h3><p>Create a new file <code>main.rs</code> and declare it as a binary target in the <code>Cargo.toml</code> file. It should look like this:</p><pre><code class=\"language-toml\">[package]\nname = \"stardetector\"\nversion = \"0.1.0\"\nedition = \"2021\"\n\n[[bin]]\nname = \"stardetector\"\npath = \"src/main.rs\"\n\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n\n[dependencies]\ngeo = \"0.28.0\"\nimage = \"0.25.1\"\nimage-dwt = \"0.3.2\"\nimageproc = \"0.24.0\"</code></pre><p>You can finally use the lib we created to process the sample image. The final code in <code>main.rs</code> should look like this:</p><pre><code class=\"language-rust\">use image::Rgba;\nuse stardetector::StarDetect;\n\nfn main() {\n    // Load the image as mutable. You need mutability so that\n    // you can draw on this image.\n    let mut image = image::open(\"m42-star-detection.jpg\").unwrap();\n\n    // Create a new star detector instance. You clone the image\n    // here because you need to also draw on the image for\n    // visualisation purposes in this example.\n    let mut star_detector = StarDetect::from(image.clone());\n\n    // Run the star finder function with a minimum star count of\n    // 500\n    let stars = star_detector.find_stars(500);\n\n    // Iterate over all stars you've found\n    for star in stars {\n        // Draw a hollow circle on the image so that you\n        // can see what the algorithm found\n        imageproc::drawing::draw_hollow_circle_mut(\n            &amp;mut image,\n            (star.coord().x as i32, star.coord().y as i32),\n            // Extend the radius by 4px so that it's easier to see\n            // in the visualisation.\n            star.radius() as i32 + 4,\n            // Draw the circle with a pure green color\n            Rgba([0, u8::MAX, 0, 1]),\n        );\n    }\n\n    // Save the image with star positions annotated with\n    // green circles.\n    image.save(\"annotated.jpg\").unwrap();\n}</code></pre><p>Ensure that the downloaded image is present at the root of this project folder.</p><p>We can finally run the program and see what it gives us:</p><pre><code class=\"language-shell\">cargo run --release</code></pre><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/annotated.jpg\" class=\"kg-image\" alt=\"annotated\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/annotated.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/annotated.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/annotated.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/annotated.jpg 2400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"1281\" loading=\"lazy\"><figcaption>A part of the orion region with detected stars annotated with green circles</figcaption></figure><p>That looks pretty good! If we zoom in to a small part of the image:</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/annotated-zoomed.jpg\" class=\"kg-image\" alt=\"annotated-zoomed\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/annotated-zoomed.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/annotated-zoomed.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/annotated-zoomed.jpg 1500w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1500\" height=\"1077\" loading=\"lazy\"><figcaption>A part of the orion region with detected stars annotated with green circles</figcaption></figure><p>We can see that there are some minor issues with the algorithm, such as stars that are very close to each other and have an overlap of their halos are considered as a single star. The problem is quite an interesting one.</p><p>There are various techniques to solve this issue, but they're out of the scope of this article.</p><h3 id=\"how-to-optimize-minimum-star-count\">How to optimize minimum star count</h3><p>Let's crank up the minimum star count to <strong>1000</strong> and see what happens:</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/annotated1.jpg\" class=\"kg-image\" alt=\"annotated1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/annotated1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/annotated1.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/annotated1.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/annotated1.jpg 2400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"1281\" loading=\"lazy\"><figcaption>A part of the orion region with detected stars annotated with green circles</figcaption></figure><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/annotated1-zoomed.jpg\" class=\"kg-image\" alt=\"annotated1-zoomed\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/annotated1-zoomed.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/annotated1-zoomed.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/annotated1-zoomed.jpg 1500w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1500\" height=\"1077\" loading=\"lazy\"><figcaption>A part of the orion region with detected stars annotated with green circles</figcaption></figure><p>This time, it picked up many of the fainter stars since the threshold had to be lower to accommodate for the higher minimum star count.</p><p>It's time to crank it up further! Let's try <strong>2000</strong>.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/annotated2.jpg\" class=\"kg-image\" alt=\"annotated2\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/annotated2.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/annotated2.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/annotated2.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/annotated2.jpg 2400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"1281\" loading=\"lazy\"><figcaption>A part of the orion region with detected stars annotated with green circles</figcaption></figure><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/annotated2-zoomed.jpg\" class=\"kg-image\" alt=\"annotated2-zoomed\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/annotated2-zoomed.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/annotated2-zoomed.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/annotated2-zoomed.jpg 1500w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1500\" height=\"1077\" loading=\"lazy\"><figcaption>A part of the orion region with detected stars annotated with green circles</figcaption></figure><p>It picked up even more stars this time, but it has also started hallucinating some stars where there are none. This is being caused by lower threshold retaining more noise in the image, which is then picked up as a star. But noise isn't as visible in the final image unless you really pixel-peep, which is why it appears that the algorithm is hallucinating stars.</p><p><strong>Noise</strong>, in this particular situation, not only refers to the noise in the traditional sense – but also to any pixels that do no belong to a star for this particular purpose.</p><h3 id=\"but-there-is-one-more-thing-\">But there is one more thing...</h3><p>Let's crank the minimum star count up to the absolute maximum for this particular image, which I found to be <strong>3500</strong>.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/annotated3.jpg\" class=\"kg-image\" alt=\"annotated3\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/annotated3.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/annotated3.jpg 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2024/04/annotated3.jpg 1600w, https://www.freecodecamp.org/news/content/images/size/w2400/2024/04/annotated3.jpg 2400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"1281\" loading=\"lazy\"><figcaption>A part of the orion region with detected stars annotated with green circles</figcaption></figure><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/annotated3-zoomed.jpg\" class=\"kg-image\" alt=\"annotated3-zoomed\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/annotated3-zoomed.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/annotated3-zoomed.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/annotated3-zoomed.jpg 1500w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1500\" height=\"1077\" loading=\"lazy\"><figcaption>A part of the orion region with detected stars annotated with green circles</figcaption></figure><p>The algorithm now seems to have failed us miserably, which is expected when the noise is too high. There are too many false-positives for this data to be of any use at all.</p><p>I wanted to show you this anyway because it shows you the flaws in the algorithm. It also shows you what star detection on noise signal looks like and why we need to pre-process an image to remove everything that isn't a star before we run the star detection.</p><p>We're going to stop here for the implementation, but there's many resources you can find below if you're interested in learning more about the topic.</p><p>The complete code for everything I talked about today can be found here: <a href=\"https://github.com/anshulsanghi-blog/stardetector\">https://github.com/anshulsanghi-blog/stardetector</a></p><h2 id=\"further-reading\"><strong>Further Reading</strong></h2><p>These are some of the resources that were very helpful to me when I was trying to figure out how star detection works. The resources are more about plate-solving (the process of figuring out the exact coordinates in the night sky of things in an image), but star detection is a crucial part of that process.</p><ul><li><a href=\"https://olegignat.com/how-plate-solving-works/\">How astronomic plate-solving works</a> by Oleg Ignat</li><li><a href=\"https://pixinsight.com/doc/tools/StarAlignment/StarAlignment.html#description_002\">Star Detection during StarAlignment Process In PixInsight</a></li></ul><p>Stars have pretty interesting characteristics, some of which are unique such as their <a href=\"https://en.wikipedia.org/wiki/Point_spread_function\">point-spread function</a> estimates. These characteristics can be implemented to further improve the star detection and filtering of false-positives.</p><p>In addition, I've created a Rust library that implements this algorithm, but has some additional features already, and more robust processes are in the works.</p><p>Things such as handling RGB images properly instead of converting them to grayscale are already implemented. It also has the ability to work with RAW images.</p><p>I'm also soon going to be working on performance improvements for the same.</p><p>If you want to learn more, or contribute to the library, feel free to do so. The repository can be found here: <a href=\"https://github.com/anshap1719/stardetect\">https://github.com/anshap1719/stardetect</a><br></p><h2 id=\"wrapping-up\"><strong>Wrapping Up</strong></h2><p>I hope you enjoyed the journey so far. If image processing and analysis techniques or their implementation in Rust is something that interests you, then stay tuned for more as these are the topics I love writing about.</p><p>Also, feel free to <strong><strong><a href=\"mailto:contact@anshulsanghi.tech\">contact me</a></strong></strong> if you have any questions or opinions on this topic.</p><h3 id=\"enjoying-my-work\"><strong>Enjoying my work?</strong></h3><p>Consider buying me a coffee to support my work!</p><!--kg-card-begin: html--><script type=\"text/javascript\" src=\"https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js\" data-name=\"bmc-button\" data-slug=\"anshulsanghi\" data-color=\"#FFDD00\" data-emoji=\"☕\" data-font=\"Cookie\" data-text=\"Buy me a coffee\" data-outline-color=\"#000000\" data-font-color=\"#000000\" data-coffee-color=\"#ffffff\"></script><!--kg-card-end: html--><p>Till next time, happy coding and wishing you clear skies!</p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG\" class=\"author-profile-image\" alt=\"Anshul Sanghi\" width=\"2000\" height=\"2000\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/anshulsanghi/\" data-test-label=\"profile-link\">\n                    \n                        Anshul Sanghi\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Full-stack engineer mainly working with Rust &amp; TypeScript with heavy focus on High-performance backend systems &amp; Image processing and analysis tools. I&#39;m also into Infrared &amp; Astro Photography</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Rust%20Tutorial%20%E2%80%93%20How%20to%20Build%20a%20Na%C3%AFve%20Star%20Detector%20for%20Images\".replace(/&#39;/g,\"%27\"),o=\"\",r=\"@AnshulsAstro\",i=Boolean(\"\");let s;if(i&&(o||r)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Anshul Sanghi\"};s=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${r||t.currentPostAuthor} for translating it.`)}else!i&&r&&(s=encodeURIComponent(`Thank you ${r} for writing this helpful article.`));const a=`window.open(\\n    '${s?`https://twitter.com/intent/tweet?text=${s}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",a)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac216ff2da740eb\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/multi-scale-analysis-of-images-in-rust/":{"metadata":[{"tagName":"meta","attributes":{"charset":"utf-8"},"content":""},{"tagName":"meta","attributes":{"http-equiv":"X-UA-Compatible","content":"IE=edge"},"content":""},{"tagName":"title","attributes":{},"content":"Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images"},{"tagName":"meta","attributes":{"name":"HandheldFriendly","content":"True"},"content":""},{"tagName":"meta","attributes":{"name":"viewport","content":"width=device-width, initial-scale=1.0"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.googleapis.com"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com","crossorigin":""},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n"},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n"},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"/news/assets/css/global-26e2f3cde9.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/screen-926fddfac2.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/search-bar-124f5f949c.css"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js"},"content":""},{"tagName":"script","attributes":{},"content":"let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));"},{"tagName":"script","attributes":{"data-ad-client":"ca-pub-9482786369113753","src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","crossorigin":"anonymous","async":""},"content":""},{"tagName":"link","attributes":{"rel":"icon","href":"https://cdn.freecodecamp.org/universal/favicons/favicon.ico","type":"image/png"},"content":""},{"tagName":"link","attributes":{"rel":"canonical","href":"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/"},"content":""},{"tagName":"meta","attributes":{"name":"referrer","content":"no-referrer-when-downgrade"},"content":""},{"tagName":"meta","attributes":{"name":"description","content":"Recently, there's been a massive amount of effort put into developing novel image processing techniques. And many of them are derived from digital signal processing methods such as Fourier and Wavelet transforms.  These techniques have not only enabled a wide range of image processing techniques such as noise reduction,"},"content":""},{"tagName":"meta","attributes":{"property":"og:site_name","content":"freeCodeCamp.org"},"content":""},{"tagName":"meta","attributes":{"property":"og:type","content":"article"},"content":""},{"tagName":"meta","attributes":{"property":"og:title","content":"Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images"},"content":""},{"tagName":"meta","attributes":{"property":"og:description","content":"Recently, there's been a massive amount of effort put into developing novel image processing techniques. And many of them are derived from digital signal processing methods such as Fourier and Wavelet transforms.  These techniques have not only enabled a wide range of image processing techniques such as noise reduction,"},"content":""},{"tagName":"meta","attributes":{"property":"og:url","content":"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/"},"content":""},{"tagName":"meta","attributes":{"property":"og:image","content":"https://www.freecodecamp.org/news/content/images/2024/04/Watermark.png"},"content":""},{"tagName":"meta","attributes":{"property":"article:published_time","content":"2024-04-10T15:48:11.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:modified_time","content":"2024-04-11T23:06:42.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Rust"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Image Processing"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Algorithms"},"content":""},{"tagName":"meta","attributes":{"property":"article:publisher","content":"https://www.facebook.com/freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:card","content":"summary_large_image"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:title","content":"Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:description","content":"Recently, there's been a massive amount of effort put into developing novel image processing techniques. And many of them are derived from digital signal processing methods such as Fourier and Wavelet transforms.  These techniques have not only enabled a wide range of image processing techniques such as noise reduction,"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:url","content":"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:image","content":"https://www.freecodecamp.org/news/content/images/2024/04/Watermark.png"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label1","content":"Written by"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data1","content":"Anshul Sanghi"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label2","content":"Filed under"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data2","content":"Rust, Image Processing, Algorithms"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:site","content":"@freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:creator","content":"@AnshulsAstro"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:width","content":"2000"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:height","content":"1048"},"content":""},{"tagName":"script","attributes":{"type":"application/ld+json"},"content":"{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/Watermark.png\",\n\t\t\"width\": 2000,\n\t\t\"height\": 1048\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-04-10T15:48:11.000Z\",\n\t\"dateModified\": \"2024-04-11T23:06:42.000Z\",\n\t\"keywords\": \"Rust, Image Processing, Algorithms\",\n\t\"description\": \"Recently, there&#x27;s been a massive amount of effort put into developing novel\\nimage processing techniques. And many of them are derived from digital signal\\nprocessing methods such as Fourier and Wavelet transforms. \\n\\nThese techniques have not only enabled a wide range of image processing\\ntechniques such as noise reduction, sharpening, and dynamic-range extension, but\\nhave also enabled many techniques used in compute vision such as edge detection,\\nobject detection, and so on.\\n\\nMulti-scale analysis \",\n\t\"headline\": \"Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Anshul Sanghi\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/anshulsanghi/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://twitter.com/AnshulsAstro\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/DSC02590.JPG\",\n\t\t\t\"width\": 2000,\n\t\t\t\"height\": 2000\n\t\t}\n\t}\n}"},{"tagName":"meta","attributes":{"name":"generator","content":"Eleventy"},"content":""},{"tagName":"link","attributes":{"rel":"alternate","type":"application/rss+xml","title":"freeCodeCamp.org","href":"https://www.freecodecamp.org/news/rss/"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com"},"content":""},{"tagName":"script","attributes":{},"content":"\nwindow.dataLayer = window.dataLayer || [];\n"},{"tagName":"script","attributes":{},"content":"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');"},{"tagName":"meta","attributes":{"name":"google-site-verification","content":"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E"},"content":""},{"tagName":"meta","attributes":{"name":"x-fcc-source","data-test-label":"x-fcc-source","content":"Ghost"},"content":""}],"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Recently, there&#39;s been a massive amount of effort put into developing novel image processing techniques. And many of them are derived from digital signal processing methods such as Fourier and Wavelet transforms.  These techniques have not only enabled a wide range of image processing techniques such as noise reduction,\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images\">\n    \n        <meta property=\"og:description\" content=\"Recently, there&#39;s been a massive amount of effort put into developing novel image processing techniques. And many of them are derived from digital signal processing methods such as Fourier and Wavelet transforms.  These techniques have not only enabled a wide range of image processing techniques such as noise reduction,\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2024/04/Watermark.png\">\n    <meta property=\"article:published_time\" content=\"2024-04-10T15:48:11.000Z\">\n    <meta property=\"article:modified_time\" content=\"2024-04-11T23:06:42.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Rust\">\n    \n        <meta property=\"article:tag\" content=\"Image Processing\">\n    \n        <meta property=\"article:tag\" content=\"Algorithms\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images\">\n    \n        <meta name=\"twitter:description\" content=\"Recently, there&#39;s been a massive amount of effort put into developing novel image processing techniques. And many of them are derived from digital signal processing methods such as Fourier and Wavelet transforms.  These techniques have not only enabled a wide range of image processing techniques such as noise reduction,\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2024/04/Watermark.png\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Anshul Sanghi\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Rust, Image Processing, Algorithms\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@AnshulsAstro\">\n    \n\n    <meta property=\"og:image:width\" content=\"2000\">\n    <meta property=\"og:image:height\" content=\"1048\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/Watermark.png\",\n\t\t\"width\": 2000,\n\t\t\"height\": 1048\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/multi-scale-analysis-of-images-in-rust/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-04-10T15:48:11.000Z\",\n\t\"dateModified\": \"2024-04-11T23:06:42.000Z\",\n\t\"keywords\": \"Rust, Image Processing, Algorithms\",\n\t\"description\": \"Recently, there&#x27;s been a massive amount of effort put into developing novel\\nimage processing techniques. And many of them are derived from digital signal\\nprocessing methods such as Fourier and Wavelet transforms. \\n\\nThese techniques have not only enabled a wide range of image processing\\ntechniques such as noise reduction, sharpening, and dynamic-range extension, but\\nhave also enabled many techniques used in compute vision such as edge detection,\\nobject detection, and so on.\\n\\nMulti-scale analysis \",\n\t\"headline\": \"Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Anshul Sanghi\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/anshulsanghi/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://twitter.com/AnshulsAstro\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2024/04/DSC02590.JPG\",\n\t\t\t\"width\": 2000,\n\t\t\t\"height\": 2000\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Wed Apr 10 2024 15:48:11 GMT+0000 (Coordinated Universal Time)\">\n                            April 10, 2024\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/rust/\">\n                                #Rust\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG\" class=\"author-profile-image\" alt=\"Anshul Sanghi\" width=\"2000\" height=\"2000\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/anshulsanghi/\" data-test-label=\"profile-link\">\n                    \n                        Anshul Sanghi\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2024/04/Watermark.png 300w, https://www.freecodecamp.org/news/content/images/size/w600/2024/04/Watermark.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/Watermark.png 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2024/04/Watermark.png 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2024/04/Watermark.png\" alt=\"Rust Tutorial – Learn Multi-Scale Processing of Astronomical Images\" ,=\"\" width=\"2000\" height=\"1048\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>Recently, there's been a massive amount of effort put into developing novel image processing techniques. And many of them are derived from digital signal processing methods such as Fourier and Wavelet transforms. </p><p>These techniques have not only enabled a wide range of image processing techniques such as noise reduction, sharpening, and dynamic-range extension, but have also enabled many techniques used in compute vision such as edge detection, object detection, and so on.</p><p>Multi-scale analysis is one of the newer techniques (relatively speaking) that has been adopted in a wide range of applications, especially in the astronomical image and data processing applications. This technique, which is based on Wavelet transform, allows us to divide our data into multiple signals, that all add up to make the final signal. </p><p>We can then perform our processing or analysis work on this individual sub-signals, allowing us to do targeted operations that do not affect other sub-signals. </p><p>In this tutorial, we'll first be exploring what the technique is all about, through the lens of a particular algorithm for performing multi-scale analysis on images. We'll then move on to looking at how we can implement what we discussed in the first part in Rust programming language and recreate the examples you see in the first half of the article.</p><h2 id=\"before-you-read-\">Before You Read:</h2><h3 id=\"prerequisites-for-part-1-\">Prerequisites for Part 1:</h3><p>The technique described is derived from the concept of \"Wavelet Transforms\". You don't need to know everything about it, but a very basic understanding will help you grasp the material better.</p><p>Since the article focuses on image processing and analysis, a basic understanding of how pixels work in digital format is helpful, but not mandatory.</p><h3 id=\"prerequisites-for-part-2-\">Prerequisites for Part 2:</h3><p>Here, we focus on implementing the algorithm using the Rust programming language, without going much into the details of the language itself. So being comfortable writing Rust programs, and comfortable reading crate documentations is required.</p><p>If this is not you, you can still read Part 1 and learn the technique, and then maybe you'll want to then try it out in a language of your choice. If you're not familiar with Rust, I highly encourage you to learn the basics. <a href=\"https://www.freecodecamp.org/news/rust-in-replit/\">Here's an interactive Rust course</a> that can get you started.</p><h2 id=\"table-of-contents\">Table Of Contents</h2><!--kg-card-begin: markdown--><ol>\n<li><a href=\"#part-1-understanding-the-multi-scale-processing-technique-and-algorithm\">Part 1: Understanding Multi-Scale Processing Technique And Algorithm</a>\n<ol>\n<li><a href=\"#what-is-multi-scale-image-processing\">What is multi-scale image processing</a></li>\n<li><a href=\"#the-trous-wavelet-transform\">The <em>À Trous</em> Wavelet Transform</a></li>\n<li><a href=\"#scaling-functions\">Scaling Functions</a></li>\n<li><a href=\"#convolution-pixels-at-each-scale\">Convolution Pixels At Each Scale</a></li>\n<li><a href=\"#handling-boundary-conditions\">Handling Boundary Conditions</a></li>\n<li><a href=\"#computing-maximum-possible-scales-for-any-given-image\">Computing Maximum Possible Scales For Any Given Image</a></li>\n<li><a href=\"#closing-notes\">Closing Notes</a></li>\n</ol>\n</li>\n<li><a href=\"#part-2-how-to-implement-trous-tranform-in-rust\">Part 2: How to Implement <em>À Trous</em> Tranform in Rust</a>\n<ol>\n<li><a href=\"#prerequisites\">Prerequisites</a></li>\n<li><a href=\"#the-trous-transform\">The <em>À Trous</em> Transform</a></li>\n<li><a href=\"#iterators-and-the-trous-transform\">Iterators And The <em>À Trous</em> Transform</a></li>\n<li><a href=\"#convolution\">Convolution</a></li>\n<li><a href=\"#implementing-the-iterator\">Implementing the Iterator</a></li>\n<li><a href=\"#recomposition\">Recomposition</a></li>\n<li><a href=\"#using-the-trous-transform\">Using The <em>À Trous</em> Transform</a></li>\n<li><a href=\"#further-reading\">Further Reading</a></li>\n</ol>\n</li>\n<li><a href=\"#wrapping-up\">Wrapping Up</a></li>\n</ol>\n<!--kg-card-end: markdown--><h2 id=\"part-1-understanding-the-multi-scale-processing-technique-and-algorithm\">Part 1: Understanding the Multi-Scale Processing Technique and Algorithm</h2><p>So what do we mean when we talk about multi-scale processing or analysis of some data? Well, we usually mean breaking down the input data into multiple signals, each representing a particular scale of information. </p><p>Scale, when talking about image analysis, simply refers to the size of structures that we are looking at at any given time. It ignores everything else that's either smaller or larger than the current scale.</p><h3 id=\"what-is-multi-scale-image-processing\">What is multi-scale image processing?</h3><p>For images, \"scales\" generally refer to the size in pixels of various structures or details in the image. You'll be able to get an intuitive understanding by looking at the following example:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/Processed.jpg\" class=\"kg-image\" alt=\"Processed\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/Processed.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/Processed.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/Processed.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" width=\"1080\" height=\"1080\" loading=\"lazy\"><figcaption>Messier 33, AKA Triangulum Galaxy</figcaption></figure><p>Assuming our naïve understanding is correct, we can derive images of at-least the following 3 scales:</p><ul><li>Very small structures, usually the size of a single pixel. This layer, when separated from the rest of the image, will only contain the noise and some sharp stars for the most part.</li><li>Small structures, usually a few pixels in size. This layer, when separated, will contain all of the stars and the very fine details in the galaxy arms.</li><li>Large and very large scale structures, usually 100s of pixels in size. This layer, when separated, will contain the general size and shape of the galaxy at the center.</li></ul><p>Now the question becomes,<strong> why do we need to do all of this in the first place?</strong></p><p>The answer is simple: it allows us to make targeted enhancements and changes to an image. </p><p>For example, noise reduction on the overall image will usually result in a loss of sharpness in the galaxy. But since we have broken our image down into multiple scales, we can easily apply noise reduction to only the first few layers, as most of the random noise that is easy to remove resides only in lower scale layers. </p><p>We then re-combine the noise-reduced low-scale layers with unmodified large-scale ones, and we have an output that gives us noise reduction without a loss in quality.</p><p>Another peculiar thing about noise is that it's almost always present in just one of these layers, making noise reduction process both easy and non-destructive.</p><p>If you're more of a visual learner, let's see this in practice using the image we used above. We're gonna be working with the following grayscale version of that image, where I've also added random gaussian noise:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/m33-noise-lum-1.jpg\" class=\"kg-image\" alt=\"m33-noise-lum-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/m33-noise-lum-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/m33-noise-lum-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/m33-noise-lum-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" width=\"1080\" height=\"1080\" loading=\"lazy\"><figcaption>Messier 33 AKA Triangulum Galaxy, Converted to grayscale and with added Gaussian noise</figcaption></figure><p>Performing scale-based layer separation on this image, we get the following results. Note that the results are rescaled to a range where they can be viewed as an image for representational purpose. The actual transform produces pixel values that don't make sense when looked at independently, but all of the techniques and calculations described in this tutorial can still be safely applied without rescale. The recomposition process automatically gives us back the correct range:</p><figure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"><div class=\"kg-gallery-container\"><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level0-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level0-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level0-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level0-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level0-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level1-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level1-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level1-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level1-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level1-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level2-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level2-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level2-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level2-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level2-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level3-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level3-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level3-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level3-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level3-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level4-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level4-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level4-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level4-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level4-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level5-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level5-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level5-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level5-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level5-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level6-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level6-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level6-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level6-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level6-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level7-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level7-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level7-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level7-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level7-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/level8-1.jpg\" width=\"1080\" height=\"1080\" alt=\"level8-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/level8-1.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/level8-1.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/level8-1.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div></div><figcaption>9-level <em>À Trous</em> Decomposition. From top-left to bottom-right, we have images at the following pixel scales: 1, 2 4, 8, 16, 32, 64, 128, 256 (powers of 2)</figcaption></figure><ol><li>The first and second layers contain the noise and stars. In this particular example, noise is mixed in with the stars. But using the first and second layers, we can easily target areas that are not present in the second layer, as we can be sure that those are where the noise is present in the first layer.</li><li>With the third layer, we still see the residue luminance from stars. But if you look closely, we also see very faintly the arms of the galaxy starting to appear.</li><li>From the fourth layer onwards, we see the galaxy at varying scales and detail levels, completely without the stars. We start with the finer details (relatively small scale details) and increasingly move on to larger and larger scale samples. By the end, we only see a vague shape where the galaxy used to be.</li></ol><p>From here on, we can selectively apply noise reduction to the first two layers. Then we can recombine all of the layers to create the following image that has very little noise while preserving the same amount of details in the stars and the galaxy arms:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/wavelet-processed.jpg\" class=\"kg-image\" alt=\"wavelet-processed\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/wavelet-processed.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/wavelet-processed.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/wavelet-processed.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" width=\"1080\" height=\"1080\" loading=\"lazy\"><figcaption>Messier 33 AKA Triangulum Galaxy, result of recombining all layers but with noise reduction applied to the pixel scale 1 &amp; 2 layers</figcaption></figure><p>In its most basic form, multi-scale analysis involves breaking up your source image, commonly referred to as the \"signal\", into multiple \"signals\" – each containing the data for a particular scale in the source signal. </p><p>Scale, when talking about image signal here, refers to the distance between adjacent pixels that we take when creating the layer from the source image.</p><p>In practice, this technique is used as the one of the first steps in all kinds of astronomical data analysis and image processing. </p><p>As an example, you can use the technique to detect locations of stars while ignoring larger structures much more easily than would be possible otherwise.</p><h3 id=\"the-trous-wavelet-transform\">The <em>À Trous</em> Wavelet Transform</h3><p>All of what I've showed you previously, and all of what you're going to see in this tutorial, was achieved with wavelet decomposition and recomposition using the à<em> trous</em> algorithm for discreet wavelet transforms.</p><p>This algorithm has been used throughout the years for various applications. But it's become particularly important recently in astronomical image processing applications, where different objects and signals in an image can be completely separated based on structural scales.</p><p>Here's how the algorithm works:</p><!--kg-card-begin: markdown--><ol>\n<li>We start with the source image input and number of levels to decompose into n.</li>\n<li>For each level n:\n<ul>\n<li>We convolve the image with our scaling function (we'll see what this is in a bit), where adjacent pixels are considered to be <strong>2<sup>n</sup></strong> units apart from each other, giving us the result <strong>result<sub>n</sub></strong>. This is where the \"À Trous\" name comes from, which literally translates to \"with holes\".</li>\n<li>The layer output <strong>output<sub>n</sub></strong> is then computed using <strong>input</strong> - <strong>result<sub>n</sub></strong>.</li>\n<li>We then update <strong>input</strong> to equal <strong>result<sub>n</sub></strong>. This is also known as residue data which serves as the source data for next layer.</li>\n</ul>\n</li>\n<li>Repeat the above steps for all levels.</li>\n<li>In the end, we have 9 wavelet layers, and 1 residue layer. All 10 layers are required for the recomposition.</li>\n</ol>\n<!--kg-card-end: markdown--><p>For a more mathematical approach to understanding this algorithm, I encourage you to read about <a href=\"https://www.eso.org/sci/software/esomidas/doc/user/18NOV/volb/node317.html\"><strong>the à trous algorithm here</strong></a><strong>.</strong><a href=\"https://www.eso.org/sci/software/esomidas/doc/user/18NOV/volb/node317.html\"> </a></p><p>The recomposition process is very straightforward: we just need to add all 10 layers together. We can chose to apply positive or negative <strong>bias </strong>to any of the layers, which is a factor by which to multiply the layer pixel values during recomposition. You can use it either to enhance or diminish the characteristics of that particular layer.</p><h3 id=\"scaling-functions\">Scaling Functions</h3><p>Scaling functions are specific <a href=\"https://en.wikipedia.org/wiki/Kernel_(image_processing)\">convolution kernels</a> that help us better represent data at a particular scale based on our use case. There are 3 most commonly used scaling functions, which are shown below:</p><figure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"><div class=\"kg-gallery-container\"><div class=\"kg-gallery-row\"><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/b3spline-level2.jpg\" width=\"1080\" height=\"1350\" alt=\"b3spline-level2\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/b3spline-level2.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/b3spline-level2.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/b3spline-level2.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/linear-level2.jpg\" width=\"1067\" height=\"1350\" alt=\"linear-level2\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/linear-level2.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/linear-level2.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/linear-level2.jpg 1067w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div><div class=\"kg-gallery-image\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/low-scale-level2.jpg\" width=\"1080\" height=\"1351\" alt=\"low-scale-level2\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/low-scale-level2.jpg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/low-scale-level2.jpg 1000w, https://www.freecodecamp.org/news/content/images/2024/04/low-scale-level2.jpg 1080w\" sizes=\"(min-width: 720px) 720px\" loading=\"lazy\"></div></div></div><figcaption>The 3 most commonly used scaling functions in the <em>À Trous</em> algorithm, visualised using 3rd level decomposition of the triangulum galaxy image used previously.</figcaption></figure><ul><li>B3 Spline is a very smooth kernel. It is mostly used in isolation of large scale structures. If we wanted to sharpen our galaxy, we would have used this kernel.</li><li>Low-scale is a very sharply peaked kernel, and is best at working with small scale structures.</li><li>Linear interpolation kernel gives us the best of both worlds, and hence is used when we need to work with both small scale and large scale structures. This is what we have used in all of our previous examples.</li></ul><h3 id=\"convolution-pixels-at-each-scale\">Convolution Pixels At Each Scale</h3><p>I mentioned in the algorithm that at each scale, the pixels in the image are considered to be 2<sup>n</sup> units apart. Let's try to grasp a better understanding of this using the following visualisation:</p><p>Consider the following 8px by 8px image. Each pixel is labeled 1 through 64, which is their index.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/1-32x32mm.png\" class=\"kg-image\" alt=\"1-32x32mm\" width=\"472\" height=\"472\" loading=\"lazy\"><figcaption>A representational pixel grid of a 8x8px image</figcaption></figure><p>We're going to focus on a convolution operation of one of the center pixels only for this example, let's say pixel number 28.</p><p><strong>Scale 0: </strong>At scale 0, the value of 2<sup>n</sup> becomes <strong>1</strong>. This means that for convolution, we'll consider pixels that are 1 unit apart from our target center pixel. These pixels are highlighted below:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/scale0-1.png\" class=\"kg-image\" alt=\"scale0-1\" width=\"472\" height=\"472\" loading=\"lazy\"><figcaption>8x8px grid with pixels that are involved in convolution for pixel number 28 highlighted at scale 0</figcaption></figure><p><strong>Scale 1: </strong>This is where things get interesting. At scale 1, the value of 2<sup>n</sup> becomes <strong>2</strong>. This means that for convolution, we'll jump directly to pixels that are 2 locations apart from the target pixel:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/scale1-3.png\" class=\"kg-image\" alt=\"scale1-3\" width=\"472\" height=\"472\" loading=\"lazy\"><figcaption>8x8px grid with pixels that are involved in convolution for pixel number 28 highlighted at scale 1</figcaption></figure><p>As you can see, we've created \"holes\" in our computation of the value of the target pixel by skipping <strong>2<sup>n</sup> - 1 </strong>adjacent pixels and selecting the <strong>2<sup>n</sup>th </strong>pixel. This is the basis of the algorithm.</p><p>This process is repeated for every pixel in the image, just like a regular convolution process. And each time, we consider increasing distances between pixels for computation of final values at increasing scales. </p><p>Let's look at just one more scale.</p><p><strong>Scale 2</strong>: This is where things get even more interesting. At scale 2 the value of 2<sup>n</sup> becomes <strong>4</strong>. This means that for convolution, we'll jump directly to pixels that are <strong>4</strong> locations apart from the target pixel:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/scale2-1.png\" class=\"kg-image\" alt=\"scale2-1\" width=\"472\" height=\"472\" loading=\"lazy\"><figcaption>8x8px grid with pixels that are involved in convolution for pixel number 28 highlighted at scale 2</figcaption></figure><p>Wait what? Why are we choosing pixels 1, 4, 8, 25, &amp; 57? 1 &amp; 4 are only 3 locations apart, 25 is only 2 locations apart, and 8 &amp; 57 are not even diagonally aligned with the target pixel. What's going on?</p><h3 id=\"handling-boundary-conditions\">Handling Boundary Conditions </h3><p>As we've mentioned that this process is executed for all of the pixels in an image, we also need to consider cases where the pixel locations for convolution lie outside of the image.</p><p>This is not a concept unique to this algorithm. During convolution, this is referred to as a boundary condition or handling boundary pixels. There are various techniques for dealing with this, and all of them involve virtually extending the image in order to make it seem like we're not encountering the boundary at all.</p><p>Some of the techniques are:</p><ul><li>Extending as much as needed by copying the value of the last row/column</li><li>Mirroring the image on all edges and corners</li><li>Wrapping the image around the edges.</li></ul><p>In our example, we're employing the \"mirroring\" technique. When implementing such an algorithm, we don't need to actually create an extended image. Any boundary handling is implementable using just basic mathematical formulae.</p><p>Our extended image, with the correct pixels selected for scale 2, is as follows:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2024/04/scale2-mirrored.png\" class=\"kg-image\" alt=\"scale2-mirrored\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2024/04/scale2-mirrored.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2024/04/scale2-mirrored.png 1000w, https://www.freecodecamp.org/news/content/images/2024/04/scale2-mirrored.png 1416w\" sizes=\"(min-width: 720px) 720px\" width=\"1416\" height=\"1416\" loading=\"lazy\"><figcaption>Source image extended on all edges and corners using the mirroring technique. All of the faded regions represent extended areas.</figcaption></figure><p>Again, the extension is only logical and is completely computed using formulae, as opposed to actually extending the source image and then checking. We can easily see that with the mirrored images in place, our basic rule of picking pixels that are 2<sup>n</sup> locations apart is still followed.</p><h3 id=\"computing-maximum-possible-scales-for-any-given-image\">Computing Maximum Possible Scales for Any Given Image</h3><p>If you think about it carefully, you'll see that the maximum layers an image can be decomposed into can be calculated by computing the log<sub>2</sub> of the image width or height (whichever is lower) and throwing away the fractional part. </p><p>In our 5x5 image, log<sub>2</sub>(5) ~= <strong>2.32</strong>. If we throw away the fractional part, that leaves us with 2 layers. Similarly, for a 1000x1000px image, log<sub>2</sub>1000 ~= <strong>9.96</strong>, which means we can decompose a 1000x1000 px image into a maximum of 9 layers. It simply implies that our \"holes\" cannot be larger than the width or height.</p><p>Even with the mirroring extension we used above, if the holes are larger than the width of the image, they'll still end up outside of the extended regions, specially for corner or boundary pixels, making it impossible to perform convolution at that scale.</p><h3 id=\"closing-notes\">Closing Notes</h3><p>Thinking about the examples and visualisations a bit more, you can clearly see how and why this algorithm works, and how it's able to separate out structures in an image based on their sizes. The increasing hole sizes make it so that only structures larger than the hole itself are retained for any given layer.</p><p>A big advantage of using this algorithm is the computational cost. Since this doesn't involve Fourier or Wavelet transforms, the computational cost is quite low, relatively speaking. The memory cost, however, is indeed higher. But more often than not that is a good tradeoff.</p><p>Another advantage of this algorithm when comparing it to other discreet wavelet transform algorithms is that the size of source image is preserved throughout the entire process. There's no decimation or upscaling happening here, making this algorithm one of the easiest ones to understand and implement.</p><p>The algorithm is used in almost all of the astronomical image processing softwares such as <a href=\"https://pixinsight.com/\">PixInsight</a>, <a href=\"https://siril.org/\">Siril</a>, and many others.</p><p>This algorithm is also known by other names such as <strong>Stationary Wavelet Transform </strong>and <strong>Starlet Transform</strong>.</p><h2 id=\"part-2-how-to-implement-trous-tranform-in-rust\">Part 2: How to Implement <em>À Trous</em> Tranform in Rust</h2><p>Now I'm going to show you how you can implement this algorithm in Rust. </p><p>For the purposes of this tutorial, I'm going to assume that you're pretty familiar with Rust and its basic concepts, such as data-types, iterators, and traits and are comfortable writing programs that use these concepts. </p><p>I'm also going to assume that you have an understanding of what convolution and convolution kernels mean in this context.</p><h3 id=\"prerequisites\">Prerequisites</h3><p>We're going to need a couple of dependencies. Before we get to that, let's quickly create a new project:</p><pre><code class=\"language-shell\">cargo new --lib atrous-rs\ncd atrous-rs</code></pre><p>Now let's all of the dependencies we need. We actually only need 2:</p><pre><code class=\"language-shell\">cargo add image ndarray</code></pre><p><strong><code>image</code> </strong>is a Rust library we'll use to work with images of all of the standard formats and encodings. It also helps us convert between various formats, and provides easy access to pixel data as buffers.</p><p><strong><code>ndarray</code> </strong>is a Rust library that helps you you create, manipulate, and work with 2D, 3D, or N-Dimensional arrays. We can use nested Vectors, but using a project like ndarray is better in this case because we need to perform a lot of operations on both individual values as well as their neighbours. Not only is it much easier to do with <strong>ndarray</strong>,<strong> </strong>but they also have performance optimisations built in for many operations and CPU types.</p><p>Although I'll be covering the basic functions/traits/methods/data-types we use from these crates, I'm not going to go into too much detail for them. I encourage you to read the docs instead.</p><p>We're actually going to jump straight to algorithm implementation, and come back later to see how we can use it.</p><h3 id=\"the-trous-transform\">The <em>À Trous</em> Transform</h3><p>Create a new file that will hold our implementation. Let's name it <code>transform.rs</code>.</p><p>Start with adding the following struct, that will hold the information we need to perform the transform:</p><pre><code class=\"language-rust\">// transform.rs\n\nuse ndarray::Array2;\n\npub struct ATrousTransform {\n\tinput: Array2&lt;f32&gt;, // `Array2&lt;f32&gt;` is a 2D array where each value is of type `f32`. This will hold our pixel data for input image.\n    levels: usize, // The number of levels or scales to decompose the image into\n    current_level: usize, // Current level that we need to generate. This holds the state of our iterator.\n    width: usize, // Width of input image\n    height: usize, // Height of input image\n}</code></pre><p>We also need a way to create this struct easily. In our case, we want to be able to create it from the input image directly. Also, input image can be of any of the supported format and encoding, but we want a consistent color-type to implement the calculations, so we'll also need to convert the image to our expected format.</p><p>It's helpful to extract all of this logic away using the \"constructor\" pattern in Rust. Let's implement that:</p><pre><code class=\"language-rust\">// transform.rs\n\nuse image::GenericImageView;\n\nimpl ATrousTransform {\n\tpub fn new(input: &amp;image::DynamicImage, levels: usize) -&gt; Self {\n    \tlet (width, height) = input.dimensions();\n        let (width, height) = (width as usize, height as usize);\n        \n        // Create a new 2D array with proper size for each dimension to hold all of our input's pixel data. Method `zeros` takes a \"shape\" parameter, which is a tuple of (rows_count, columns_count).\n    \tlet mut data = Array2::&lt;f32&gt;::zeros((height, width));\n        \n        // Convert the image to be a grayscale image where each pixel value is of type `f32`. Loop over all pixels in the input image along with its 2D location.\n        for (x, y, pixel) in input.to_luma32f().enumerate_pixels() {\n        \t// Put the pixel value at appropriate location in our data array. The `[[]]` syntax is used to provide a 2-dimensional index such as `[[row_index, col_index]]`\n        \tdata[[y as usize, x as usize]] = pixel.0[0];\n        }\n        \n        Self {\n        \tinput: data,\n            levels,\n            current_level: 0,\n            width,\n            height\n\t\t}\n    }\n}</code></pre><p>This takes care of converting the image to grayscale and converting the pixel values to <code>f32</code>. If you're not already aware, for images with floating-point pixel values, the values are always normalized. This means that they are always between 0 and 1 – 0 representing black and 1 representing white.</p><h3 id=\"iterators-and-the-trous-transform\">Iterators and the <em>À Trous</em> Transform</h3><p>Before we continue, let's think about the algorithm for a second. We need to be able to generate images at increasing scales, until we hit the maximum number of levels we need. </p><p>We want the consumer of our library to have access to all of these scales, and be able to manipulate them and also easily recombine once they're done. They need to be able to filter layers to ignore structures at certain scales, manipulate or \"map\" them to change their characteristics, perform operations on them, or even store each image if they so need.</p><p>This sounds an awful lot like Iterators! Iterators give us methods like <code>filter</code>, <code>skip</code>, <code>take</code>, <code>map</code>, <code>for_each</code>, and so on, all of which are exactly all we need to work with our layers before recomposition.</p><p>One added advantage of Iterators is that it allows you to finish processing each layer all the way through before you move on to the next one. If you're unsure why this is, I suggest reading more about <a href=\"https://doc.rust-lang.org/book/ch13-02-iterators.html\">processing a series of items with Iterators in Rust</a>.</p><p>We're going implement the <code>Iterator</code> trait for our <code>ATrousTransform</code> type which should produce a wavelet layer as output for each iteration. </p><p>We're going to be implementing the inner-most parts of the algorithm first, and build out from there. So we first need a way to convolve an input data buffer with the scaling function while making sure that adjacent pixels are 2<sup>n</sup> locations apart, which is the first step in our loop.</p><h3 id=\"convolution\">Convolution</h3><p>We need to define our convolution kernel before we can do anything else. Create a new file <code>kernel.rs</code> and add it to <code>lib.rs</code> with the following contents:</p><pre><code class=\"language-rust\">// kernel.rs\n\n#[derive(Copy, Clone)]\npub struct LinearInterpolationKernel {\n    values: [[f32; 3]; 3]\n}\n\nimpl Default for LinearInterpolationKernel {\n    fn default() -&gt; Self {\n        Self {\n            values: [\n                [1. / 16., 1. / 8., 1. / 16.],\n                [1. / 8., 1. / 4., 1. / 8.],\n                [1. / 16., 1. / 8., 1. / 16.],\n            ]\n        }\n    }\n}</code></pre><p>We define it using a struct instead of a constant array of arrays because we need to define some tiny helpful methods on it related to index handling. We'll come back to that later.</p><p>Create another file <code>convolve.rs</code>. This is where all of the code for handling convolution for individual pixels will go. We'll define a <code>Convolution</code> trait that will define methods needed to perform the convolution on every pixel in current layer.</p><pre><code class=\"language-rust\">// convolve.rs\n\npub trait Convolution {\n    fn compute_pixel_index(\n        &amp;self,\n        distance: usize,\n        kernel_index: [isize; 2],\n        target_pixel_index: [usize; 2]\n    ) -&gt; [usize; 2];\n    \n    fn compute_convoluted_pixel(\n        &amp;self, \n        distance: usize, \n        index: [usize; 2]\n    ) -&gt; f32;\n}</code></pre><p>You may ask why we need a trait here instead of a simple <code>impl</code> block. We are only working with Grayscale images in this article, but you may want to extend it to implement it for RGB or other color modes as well.</p><p>Now, you need to implement this trait for your <code>ATrousTransform</code> struct:</p><pre><code class=\"language-rust\">// convolve.rs\n\nimpl Convolution for ATrousTransform {\n    fn compute_pixel_index(\n        &amp;self, \n        distance: usize, \n        kernel_index: [isize; 2], \n        target_pixel_index: [usize; 2]\n    ) -&gt; [usize; 2] {\n        let [kernel_index_x, kernel_index_y] = kernel_index;\n        \n        // Compute the actual distance of adjacent pixel\n        // by multiplying their relative position with the\n        // size of the hole.\n        let x_distance = kernel_index_x * distance as isize;\n        let y_distance = kernel_index_y * distance as isize;\n        \n        let [x, y] = target_pixel_index;\n\n        // Compute the index of adjacent pixel in the 2D\n        // image based on the index of current pixel.\n        let mut x = x as isize + x_distance;\n        let mut y = y as isize + y_distance;\n\n        // If x index is out of bounds, consider x to be\n        // the nearest boundary location\n        if x &lt; 0 {\n            x = 0;\n        } else if x &gt; self.width as isize - 1 {\n            x = self.width as isize - 1;\n        }\n\n        // If y index is out of bounds, consider y to be\n        // the nearest boundary location\n        if y &lt; 0 {\n            y = 0;\n        } else if y &gt; self.height as isize - 1 {\n            y = self.height as isize - 1;\n        }\n\n        // The final 2D index of pixel.\n        [y as usize, x as usize]\n    }\n\n    fn compute_convoluted_pixel(\n        &amp;self, \n        distance: usize, \n        [x, y]: [usize; 2]\n    ) -&gt; f32 {\n        // Create new variable to hold the result of convolution\n        // for current pixel.\n        let mut pixels_sum = 0.0;\n\n        let kernel = LinearInterpolationKernel::default();\n\n        // Iterate over relative position of pixels from the center\n        // pixel to perform convolution with. In other words, \n        // these are the indexes of neighbouring pixels from the\n        // center pixel.\n        for kernel_index_x in -1..=1 {\n            for kernel_index_y in -1..=1 {\n                // Get the computed pixel location that maps to\n                // the current position in kernel\n                let pixel_index = self.compute_pixel_index(\n                \tdistance,\n                    [kernel_index_x, kernel_index_y],\n                    [x, y]\n                );\n                \n                // Get the multiplicative factor (kernel value) for \n                // this relative location from the kernel.\n                let kernel_value = kernel.value_from_relative_index(\n                \tkernel_index_x,\n                    kernel_index_y\n                );\n\n                // Multiply the pixel value with kernel scaling\n                // factor and add it to the pixel sum.\n                pixels_sum += kernel_value * self.input[pixel_index];\n            }\n        }\n\n        // Return the value of computed pixel from convolution process.\n        pixels_sum\n    }\n}</code></pre><p>We need to do computations to figure out each pixel's location based on the relative position in the kernel from the center pixel as well as ensure that the \"hole size\" is also being taken into consideration for the final pixel index. As you might notice, you also want to handle the boundary conditions when computing indexes.</p><p>I encourage to take your time here and go through the code and the comments.</p><h3 id=\"implementing-the-iterator\">Implementing the Iterator</h3><p>It's finally time to implement the <code>Iterator</code> trait for your <code>ATrousTransform</code>:</p><pre><code class=\"language-rust\">// transform.rs\n\nimpl Iterator for ATrousTransform {\n    // Our output is an image as well as the current level for each\n    // iteration. The current level is an `Option` to represent the\n    // final residue layer after the intermediary layers have been\n    // generated.\n    type Item = (Array2::&lt;f32&gt;, Option&lt;usize&gt;);\n\n    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {\n        let pixel_scale = self.current_level;\n        self.current_level += 1;\n\n        // We've already generated all the layers. Return None to \n        // exit the iterator.\n        if pixel_scale &gt; self.levels {\n            return None;\n        }\n\n        // We've generated all intermediary layers, return the \n        // residue layer.\n        if pixel_scale == self.levels {\n            return Some((self.input.clone(), None))\n        }\n\n        let (width, height) = (self.width, self.height);\n\n        // Distance between adjacent pixels for convolution (also \n        // referred to as size of \"hole\").\n        let distance = 2_usize.pow(pixel_scale as u32);\n        \n        // Create new buffer to hold the computed data for this layer.\n        let mut current_data = Array2::&lt;f32&gt;::zeros((height, width));\n\n        // Iterate over each pixel location in the 2D image\n        for x in 0..width {\n            for y in 0..height {\n            \t// Set the current pixel in current layer to\n                // the result of convolution on the current\n                // pixel in input data.\n                current_data[[y, x]] = self.compute_convoluted_pixel(\n                \tdistance, \n                    [x, y]\n                );\n            }\n        }\n\n        // Create current layer by subtracting currently computed pixels \n        // from previous layer\n        let final_data = self.input.clone() - &amp;current_data;\n        \n        // Set the input layer to equal the current computed layer so \n        // that it can be used as the \"previous layer\" in next iteration.\n        // This is also our residue data for each layer.\n        self.input = current_data;\n\n        // Return the current layer data as well as current level information.\n        Some((final_data, Some(self.current_level)))\n    }\n}</code></pre><p>I'm going to point out that there's a lot of potential for optimizing for performance here, but that's out of the scope of this article.</p><p>We'll finally look at how we can take all of these layers and reconstruct our input image.</p><h3 id=\"recomposition\">Recomposition</h3><p>As I've said previously, reconstructing an image that was decomposed with the A Trous transform is as simple as summing all of the layers together.</p><p>We're going to define a trait for this. Why we need a trait here should be clear once you look at the implementation.</p><p>Create a new file <code>recompose.rs</code> with the following contents:</p><pre><code class=\"language-rust\">// recompose.rs\n\nuse image::{DynamicImage, ImageBuffer, Luma};\nuse ndarray::Array2;\n\npub trait RecomposableLayers: Iterator&lt;Item = (Array2&lt;f32&gt;, Option&lt;usize&gt;)&gt; {\n    fn recompose_into_image(\n        self,\n        width: usize,\n        height: usize,\n    ) -&gt; DynamicImage\n        where\n            Self: Sized,\n    {\n        // Create a result buffer to hold the pixel data for our output image.\n        let mut result = Array2::&lt;f32&gt;::zeros((height, width));\n\n        // For each layer, add the layer data to current value of result buffer.\n        for layer in self {\n            result += &amp;layer.0;\n        }\n\n        // Compute min and max pixel intensity values in the final data so that\n        // we can perform a \"rescale\", which normalizes all pixel values to be\n        // between the range of 0 &amp; 1, as is expected by float 32 images.\n        let min_pixel = result.iter().copied().reduce(f32::min).unwrap();\n        let max_pixel = result.iter().copied().reduce(f32::max).unwrap();\n\n        // Create a new `ImageBuffer`, which is a type provided by `image` crate to\n        // serve as buffer for pixel data of an image. Here, we're creating a new\n        // `Luma` ImageBuffer with pixel value of type `u16`. Luma just refers to\n        // grayscale.\n        let mut result_img: ImageBuffer&lt;Luma&lt;u16&gt;, Vec&lt;u16&gt;&gt; =\n            ImageBuffer::new(width as u32, height as u32);\n        \n        // Pre-compute the denominator for scaling computation so that we don't\n        // repeat this unnecessarily for every iteration.\n        let rescale_ratio = max_pixel - min_pixel;\n\n        // Iterate over all pixels in the `ImageBuffer` and fill it based on data\n        // from the `result` buffer after rescaling the value.\n        for (x, y, pixel) in result_img.enumerate_pixels_mut() {\n            let intensity = result[(y as usize, x as usize)];\n\n            *pixel =\n                Luma([((intensity - min_pixel) / rescale_ratio * u16::MAX as f32) as u16]);\n        }\n\n        // Convert the `ImageBuffer` into `DynamicImage` and return it\n        DynamicImage::ImageLuma16(result_img)\n    }\n}\n\n// Implement this trait for anything that implements the Iterator trait\n// with the given item type\nimpl&lt;T&gt; RecomposableLayers for T where T: Iterator&lt;Item = (Array2&lt;f32&gt;, Option&lt;usize&gt;)&gt; {}</code></pre><p>If you haven't noticed, since we implement this trait for a generic, this will work with any iterator, such as <code>Filter</code>, <code>Map</code>, and so on. If you didn't use a trait here, you'll have had to implement the same thing again and again for every built-in iterator type, and your code wouldn't have worked with 3rd party types.</p><h3 id=\"using-the-trous-transform\">Using the <em>À Trous</em> Transform</h3><p>After all of that, it's finally time to reproduce the processing that I showed you for the galaxy image with lots of noise. Create a new file <code>main.rs</code> with the following contents:</p><pre><code class=\"language-rust\">use image::{DynamicImage, ImageBuffer, Luma};\nuse atrous::recompose::RecomposableLayers;\nuse atrous::transform::ATrousTransform;\n\nfn main() {\n    // Open our noisy image\n    let image = image::open(\"m33-noise-lum.jpg\").unwrap();\n\n    // Create a new instance of the transform with 9 layers\n    let transform = ATrousTransform::new(&amp;image, 9);\n\n    // Map over each layer\n    transform.map(|(mut buffer, pixel_scale)| {\n        // Create a new image buffer to hold the pixel data. This\n        // will be populated from the raw buffer for this layer.\n        let mut new_buffer =\n            ImageBuffer::&lt;Luma&lt;u16&gt;, Vec&lt;u16&gt;&gt;::new(buffer.ncols() as u32, buffer.nrows() as u32);\n\n        // Iterate over all pixels of the `ImageBuffer` to populate it. We also\n        // convert from `f32` pixels to `u16` pixels.\n        for (x, y, pixel) in new_buffer.enumerate_pixels_mut() {\n            *pixel = Luma([(buffer[[y as usize, x as usize]] * u16::MAX as f32) as u16])\n        }\n\n        // If the present layer is a small scale layer (&lt; 3), \n        // perform noise reduction\n        if pixel_scale.is_some_and(|scale| scale &lt; 3) {\n            let mut image = DynamicImage::ImageLuma16(new_buffer).to_luma8();\n            \n            // Bilateral filter is a de-noising filter. Apply it to the image.\n            image = imageproc::filter::bilateral_filter(&amp;image, 10, 10., 3.);\n            \n            // Modify the raw buffer to contain the updated pixel values after\n            // filtering.\n            for (x, y, pixel) in image.enumerate_pixels() {\n                buffer[[y as usize, x as usize]] = pixel.0[0] as f32 / u8::MAX as f32;\n            }\n\n            // Return the updated buffer.\n            (buffer, pixel_scale)\n        } else {\n            // Return the unmodified buffer for larger scale layers.\n            (buffer, pixel_scale)\n        }\n    })\n        // Call the recomposition method on iterator\n        .recompose_into_image(image.width() as usize, image.height() as usize)\n        // Convert output to 8-bit grayscale image\n        .to_luma8()\n        // Save it to jpg file\n        .save(\"noise-reduced.jpg\")\n        .unwrap()\n}</code></pre><p>You also need to add a new dependency, <code>imageproc</code>, which provides useful image processing implementations on top of the <code>image</code> crate.</p><pre><code class=\"language-shell\">cargo add imageproc</code></pre><p>To make this work, we also need to modify our <code>Cargo.toml</code> to explicitly define both binary and library targets:</p><pre><code class=\"language-toml\">// Cargo.toml\n\n[package]\nname = \"atrous-rs\"\nversion = \"0.1.0\"\nedition = \"2021\"\n\n[[bin]]\nname = \"atrous\"\npath = \"src/main.rs\"\n\n[lib]\nname = \"atrous\"\npath = \"src/lib.rs\"\n\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n\n[dependencies]\nimage = \"0.25.1\"\nimageproc = \"0.24.0\"\nndarray = \"0.15.6\"\n</code></pre><p>You may download the test image from <a href=\"https://anshulsanghi-assets.s3.ap-south-1.amazonaws.com/m33-noise-lum.jpg\">here</a>. Move it to the root directory of your project, and run <code>cargo run --release</code>. Once it finishes, you should have a new file <code>noise-reduced.jpg</code> as the output of our process.</p><p>And there we have it.</p><h2 id=\"further-reading\">Further Reading</h2><p>These are some of the resources that were very helpful to me when I was learning about this algorithm and how to use it. I highly encourage anyone who wants a more technical understanding of the algorithm to check these out.</p><ul><li><a href=\"https://www.eso.org/sci/software/esomidas/doc/user/18NOV/volb/node317.html\">The <em>à trous</em> algorithm </a></li><li><a href=\"https://www.pixinsight.com/doc/legacy/LE/20_wavelets/a_trous_wavelet_transform/a_trous_wavelet_transform.html\">The <em>À Trous</em> Discrete Wavelet Transform In PixInsight</a></li><li><a href=\"https://jstarck.cosmostat.org/publications/books/book2/\">Astronomical Image and Data Analysis</a> by Jean-Luc Starck and Fionn Murtagh</li><li><a href=\"https://jstarck.cosmostat.org/publications/books/book-2015/\">Sparse Image and Signal Processing: Wavelets and Related Geometric Multiscale Analysis</a> by J.L. Starck, F. Murtagh, and J. Fadili</li></ul><p>In addition, I've created a Rust library for working with <em>À Trous</em> transform. It closely matches with what I've showed you here, but has some additional features already, and will have even more. </p><p>Things such as handling RGB images and working with all the 3 different kernels is already implemented. It also has better logic for handling boundary conditions, where it uses the image folding technique.</p><p>I'm also soon going to be working on performance improvements for the same.</p><p>If you want to learn more, or contribute to the library, feel free to do so. The repository can be found here: <a href=\"https://github.com/anshap1719/image-dwt\">https://github.com/anshap1719/image-dwt</a><br></p><h2 id=\"wrapping-up\">Wrapping Up</h2><p>I hope you enjoyed the journey so far. If image processing techniques or their implementation in Rust is something that interests you, then stay tuned for more as these are the topics I love writing about.</p><p>Also, feel free to <a href=\"mailto:nitric-brisk.0s@icloud.com\"><strong>contact me</strong></a> if you have any questions or opinions on this topic.</p><h3 id=\"enjoying-my-work\">Enjoying my work?</h3><p>Consider buying me a coffee to support my work!</p><!--kg-card-begin: html--><script type=\"text/javascript\" src=\"https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js\" data-name=\"bmc-button\" data-slug=\"anshulsanghi\" data-color=\"#FFDD00\" data-emoji=\"☕\" data-font=\"Cookie\" data-text=\"Buy me a coffee\" data-outline-color=\"#000000\" data-font-color=\"#000000\" data-coffee-color=\"#ffffff\"></script><!--kg-card-end: html--><p>Till next time, happy coding and wishing you clear skies!</p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2024/04/DSC02590.JPG\" class=\"author-profile-image\" alt=\"Anshul Sanghi\" width=\"2000\" height=\"2000\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/anshulsanghi/\" data-test-label=\"profile-link\">\n                    \n                        Anshul Sanghi\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Full-stack engineer mainly working with Rust &amp; TypeScript with heavy focus on High-performance backend systems &amp; Image processing and analysis tools. I&#39;m also into Infrared &amp; Astro Photography</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Rust%20Tutorial%20%E2%80%93%20Learn%20Multi-Scale%20Processing%20of%20Astronomical%20Images\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"@AnshulsAstro\",r=Boolean(\"\");let s;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Anshul Sanghi\"};s=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(s=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const l=`window.open(\\n    '${s?`https://twitter.com/intent/tweet?text=${s}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",l)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac216ff2daa40eb\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"}}}