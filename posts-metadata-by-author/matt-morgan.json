{"https://www.freecodecamp.org/news/author/matt-morgan/":{"/news/deep-dive-into-event-driven-architecture-on-aws/":{"metadata":[{"tagName":"meta","attributes":{"charset":"utf-8"},"content":""},{"tagName":"meta","attributes":{"http-equiv":"X-UA-Compatible","content":"IE=edge"},"content":""},{"tagName":"title","attributes":{},"content":"Refactoring with Event-Driven Architecture on AWS"},{"tagName":"meta","attributes":{"name":"HandheldFriendly","content":"True"},"content":""},{"tagName":"meta","attributes":{"name":"viewport","content":"width=device-width, initial-scale=1.0"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.googleapis.com"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com","crossorigin":""},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n"},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n"},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"/news/assets/css/global-26e2f3cde9.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/screen-926fddfac2.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/search-bar-124f5f949c.css"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js"},"content":""},{"tagName":"script","attributes":{},"content":"let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));"},{"tagName":"script","attributes":{"data-ad-client":"ca-pub-9482786369113753","src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","crossorigin":"anonymous","async":""},"content":""},{"tagName":"link","attributes":{"rel":"icon","href":"https://cdn.freecodecamp.org/universal/favicons/favicon.ico","type":"image/png"},"content":""},{"tagName":"link","attributes":{"rel":"canonical","href":"https://www.freecodecamp.org/news/deep-dive-into-event-driven-architecture-on-aws/"},"content":""},{"tagName":"meta","attributes":{"name":"referrer","content":"no-referrer-when-downgrade"},"content":""},{"tagName":"meta","attributes":{"name":"description","content":"Event-driven architecture is a software design pattern where components or services perform actions in response to events, often asynchronously. This post serves as a companion to our video course, \"Deep Dive into Event-Driven Architecture on AWS.\" In the course, we delve into some of the core fundamentals of event-driven architecture"},"content":""},{"tagName":"meta","attributes":{"property":"og:site_name","content":"freeCodeCamp.org"},"content":""},{"tagName":"meta","attributes":{"property":"og:type","content":"article"},"content":""},{"tagName":"meta","attributes":{"property":"og:title","content":"Refactoring with Event-Driven Architecture on AWS"},"content":""},{"tagName":"meta","attributes":{"property":"og:description","content":"Event-driven architecture is a software design pattern where components or services perform actions in response to events, often asynchronously. This post serves as a companion to our video course, \"Deep Dive into Event-Driven Architecture on AWS.\" In the course, we delve into some of the core fundamentals of event-driven architecture"},"content":""},{"tagName":"meta","attributes":{"property":"og:url","content":"https://www.freecodecamp.org/news/deep-dive-into-event-driven-architecture-on-aws/"},"content":""},{"tagName":"meta","attributes":{"property":"og:image","content":"https://www.freecodecamp.org/news/content/images/2023/12/eda-title-macguffin.png"},"content":""},{"tagName":"meta","attributes":{"property":"article:published_time","content":"2024-01-23T15:03:06.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:modified_time","content":"2024-01-23T15:03:06.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"AWS"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"YouTube"},"content":""},{"tagName":"meta","attributes":{"property":"article:publisher","content":"https://www.facebook.com/freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:card","content":"summary_large_image"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:title","content":"Refactoring with Event-Driven Architecture on AWS"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:description","content":"Event-driven architecture is a software design pattern where components or services perform actions in response to events, often asynchronously. This post serves as a companion to our video course, \"Deep Dive into Event-Driven Architecture on AWS.\" In the course, we delve into some of the core fundamentals of event-driven architecture"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:url","content":"https://www.freecodecamp.org/news/deep-dive-into-event-driven-architecture-on-aws/"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:image","content":"https://www.freecodecamp.org/news/content/images/2023/12/eda-title-macguffin.png"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label1","content":"Written by"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data1","content":"Matt Morgan"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label2","content":"Filed under"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data2","content":"AWS, YouTube"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:site","content":"@freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:creator","content":"@NullishCoalesce"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:width","content":"960"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:height","content":"540"},"content":""},{"tagName":"script","attributes":{"type":"application/ld+json"},"content":"{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2023/12/eda-title-macguffin.png\",\n\t\t\"width\": 960,\n\t\t\"height\": 540\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/deep-dive-into-event-driven-architecture-on-aws/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-01-23T15:03:06.000Z\",\n\t\"dateModified\": \"2024-01-23T15:03:06.000Z\",\n\t\"keywords\": \"AWS, YouTube\",\n\t\"description\": \"Event-driven architecture is a software design pattern where components or\\nservices perform actions in response to events, often asynchronously.\\n\\nThis post serves as a companion to our video course, &quot;Deep Dive into\\nEvent-Driven Architecture on AWS.&quot; In the course, we delve into some of the core\\nfundamentals of event-driven architecture on AWS in detail.\\n\\nThis blog post complements the video course by closely examining a practical\\nexample: modernizing our Warehouse Inventory Management System (WI\",\n\t\"headline\": \"Refactoring with Event-Driven Architecture on AWS\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Matt Morgan\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/matt-morgan/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://mattmorgan.cloud\",\n\t\t\t\"https://twitter.com/NullishCoalesce\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg\",\n\t\t\t\"width\": 577,\n\t\t\t\"height\": 800\n\t\t}\n\t}\n}"},{"tagName":"meta","attributes":{"name":"generator","content":"Eleventy"},"content":""},{"tagName":"link","attributes":{"rel":"alternate","type":"application/rss+xml","title":"freeCodeCamp.org","href":"https://www.freecodecamp.org/news/rss/"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com"},"content":""},{"tagName":"script","attributes":{},"content":"\nwindow.dataLayer = window.dataLayer || [];\n"},{"tagName":"script","attributes":{},"content":"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');"},{"tagName":"meta","attributes":{"name":"google-site-verification","content":"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E"},"content":""},{"tagName":"meta","attributes":{"name":"x-fcc-source","data-test-label":"x-fcc-source","content":"Ghost"},"content":""}],"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Refactoring with Event-Driven Architecture on AWS</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/deep-dive-into-event-driven-architecture-on-aws/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Event-driven architecture is a software design pattern where components or services perform actions in response to events, often asynchronously. This post serves as a companion to our video course, &quot;Deep Dive into Event-Driven Architecture on AWS.&quot; In the course, we delve into some of the core fundamentals of event-driven architecture\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Refactoring with Event-Driven Architecture on AWS\">\n    \n        <meta property=\"og:description\" content=\"Event-driven architecture is a software design pattern where components or services perform actions in response to events, often asynchronously. This post serves as a companion to our video course, &quot;Deep Dive into Event-Driven Architecture on AWS.&quot; In the course, we delve into some of the core fundamentals of event-driven architecture\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/deep-dive-into-event-driven-architecture-on-aws/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2023/12/eda-title-macguffin.png\">\n    <meta property=\"article:published_time\" content=\"2024-01-23T15:03:06.000Z\">\n    <meta property=\"article:modified_time\" content=\"2024-01-23T15:03:06.000Z\">\n    \n        <meta property=\"article:tag\" content=\"AWS\">\n    \n        <meta property=\"article:tag\" content=\"YouTube\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Refactoring with Event-Driven Architecture on AWS\">\n    \n        <meta name=\"twitter:description\" content=\"Event-driven architecture is a software design pattern where components or services perform actions in response to events, often asynchronously. This post serves as a companion to our video course, &quot;Deep Dive into Event-Driven Architecture on AWS.&quot; In the course, we delve into some of the core fundamentals of event-driven architecture\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/deep-dive-into-event-driven-architecture-on-aws/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2023/12/eda-title-macguffin.png\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Matt Morgan\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"AWS, YouTube\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@NullishCoalesce\">\n    \n\n    <meta property=\"og:image:width\" content=\"960\">\n    <meta property=\"og:image:height\" content=\"540\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2023/12/eda-title-macguffin.png\",\n\t\t\"width\": 960,\n\t\t\"height\": 540\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/deep-dive-into-event-driven-architecture-on-aws/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2024-01-23T15:03:06.000Z\",\n\t\"dateModified\": \"2024-01-23T15:03:06.000Z\",\n\t\"keywords\": \"AWS, YouTube\",\n\t\"description\": \"Event-driven architecture is a software design pattern where components or\\nservices perform actions in response to events, often asynchronously.\\n\\nThis post serves as a companion to our video course, &quot;Deep Dive into\\nEvent-Driven Architecture on AWS.&quot; In the course, we delve into some of the core\\nfundamentals of event-driven architecture on AWS in detail.\\n\\nThis blog post complements the video course by closely examining a practical\\nexample: modernizing our Warehouse Inventory Management System (WI\",\n\t\"headline\": \"Refactoring with Event-Driven Architecture on AWS\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Matt Morgan\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/matt-morgan/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://mattmorgan.cloud\",\n\t\t\t\"https://twitter.com/NullishCoalesce\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg\",\n\t\t\t\"width\": 577,\n\t\t\t\"height\": 800\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Tue Jan 23 2024 15:03:06 GMT+0000 (Coordinated Universal Time)\">\n                            January 23, 2024\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/aws/\">\n                                #AWS\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Refactoring with Event-Driven Architecture on AWS</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg\" class=\"author-profile-image\" alt=\"Matt Morgan\" width=\"577\" height=\"800\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/matt-morgan/\" data-test-label=\"profile-link\">\n                    \n                        Matt Morgan\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2023/12/eda-title-macguffin.png 300w, https://www.freecodecamp.org/news/content/images/size/w600/2023/12/eda-title-macguffin.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2023/12/eda-title-macguffin.png 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2023/12/eda-title-macguffin.png 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2023/12/eda-title-macguffin.png\" alt=\"Refactoring with Event-Driven Architecture on AWS\" ,=\"\" width=\"960\" height=\"540\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>Event-driven architecture is a software design pattern where components or services perform actions in response to events, often asynchronously.<br><br>This post serves as a companion to our video course, \"Deep Dive into Event-Driven Architecture on AWS.\" In the course, we delve into some of the core fundamentals of event-driven architecture on AWS in detail.</p><p>This blog post complements the video course by closely examining a practical example: modernizing our Warehouse Inventory Management System (WIMS) application. Learn more about Matt Martz and his work at <a href=\"https://martz.codes\">martz.codes</a> and explore Matt Morgan's insights at <a href=\"https://mattmorgan.cloud\">mattmorgan.cloud</a>.</p><p>You can watch the <a href=\"https://youtu.be/Zr6fnhvJKlw\">full video course on the freeCodeCamp.org YouTube channel</a> (1.5-hour watch).</p><figure class=\"kg-card kg-embed-card\" data-test-label=\"fitted\">\n        <div class=\"fluid-width-video-container\">\n          <div style=\"padding-top: 56.17977528089888%;\" class=\"fluid-width-video-wrapper\">\n            <iframe width=\"356\" height=\"200\" src=\"https://www.youtube.com/embed/Zr6fnhvJKlw?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen=\"\" title=\"Event Driven Architecture on AWS – Course for Beginners\" name=\"fitvid0\"></iframe>\n          </div>\n        </div>\n      </figure><h2 id=\"why-refactor\">Why refactor?</h2><p>Most builders understand that nothing beats speed to market. All of us can think of applications that found success in spite of, not because of, their system architectures. Once the system gains momentum and users, imperfections can really stand out, and then it's time to refactor. Sometimes the system is replatformed to something more scalable and performant. Sometimes it's rebuilt from the ground up. This blog post will demonstrate how to adopt event-driven architecture, the problems it can solve, and some of the great tools that AWS has to offer in this space. Let's get started!</p><h2 id=\"wims-v1\">WIMS v1</h2><p>Our fictitious business application manages a warehouse full of MacGuffins. We're going to focus on a part of the system that handles order intake. It can be represented with this architecture diagram:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lh7-us.googleusercontent.com/yUWou0B9NJZsrVu8-Ra0EPHnAvalZjatdHvV2zdnwfFFHpf9j1o2yBpFaeq_K3qEIXHahfMRoMnuNKfeUQyUtRPVw9hwWf_o3IXAGmYGkcyiWYUeul4ics3qpn_DISwwdSYMXIJAlSXoPe1pHDAf4Iu5Ig=s2048\" class=\"kg-image\" alt=\"yUWou0B9NJZsrVu8-Ra0EPHnAvalZjatdHvV2zdnwfFFHpf9j1o2yBpFaeq_K3qEIXHahfMRoMnuNKfeUQyUtRPVw9hwWf_o3IXAGmYGkcyiWYUeul4ics3qpn_DISwwdSYMXIJAlSXoPe1pHDAf4Iu5Ig=s2048\" width=\"600\" height=\"400\" loading=\"lazy\"><figcaption>WIMS version 1 architecture diagram</figcaption></figure><p>This system was built with AWS serverless technologies, but focuses mostly on API Gateway, Lambda, and DynamoDB. These services are great, but limiting ourselves to them brings in some technical challenges as well soon discover.</p><p>Our main flow is that we receive the order through our API Gateway which triggers a Lambda function to handle the order creation. The Lambda function will do three things:</p><ol><li>Save the order in our database.</li><li>Reduce the current inventory level by the number of units in the order.</li><li>Restfully notify our Payments API to handle the payment.</li></ol><p>A Lambda function is certainly capable of performing these tasks, but as our business grows, we discover some weaknesses in our architecture:</p><h3 id=\"payment-throttles\">Payment throttles</h3><p>Our Payments API unfortunately seems to throttle during busy periods. Because our architecture requires the CreateOrder Lambda function to complete before the API Gateway timeout of 29 seconds, that gives us only limited time to retry the requests.</p><p>Our payment processing is already asynchronous, so there's no concern if this processing is delayed, but we don't have a good way to throttle ourselves and avoid overcoming the Payments API with requests during busy periods.</p><p>We're scraping by with a manual process for now, but we need a technical solution to handle our scaling business!</p><h3 id=\"low-inventory-notifications\">Low inventory notifications</h3><p>MacGuffins are selling like crazy, so much so that we've missed some opportunities by selling out a couple of times and then seeing a lull in our business while we restock.</p><p>We want to add a low stock notification that will let us know it's time to reorder. We thought about creating an SNS Topic with an email subscription. We could check inventory and trigger the event immediately after making the inventory adjustment.</p><p>This could work, but is it the best solution? Our Lambda function now does five things instead of three, so there's more that could go wrong. But worse than that, what if some other process adjusted the inventory below the warning level? If that logic only exists in our CreateOrder Lambda function, then we'd never send the notification.</p><h3 id=\"fulfillment-operations\">Fulfillment operations</h3><p>Our fulfillment process is largely manual, driven off a dashboard that queries for pending orders. We have a plan to automate more of it, but how do we know it's time to kick off the fulfillment process? We need to have some way to wait and confirm the payment was successful and we have the desired inventory on hand. To do so, it's clear that we need some kind of event-driven system.</p><h2 id=\"design-considerations\">Design considerations</h2><p>Most of us are aware of the challenges associated with refactoring. For one, there's always a trade-off between refactoring and building new features. We can argue that refactoring is necessary to support new features, but the fact is we'll be doing some work that is invisible to customers and stakeholders. In order to have a chance at success and meet expectations, we need to be clear about our design considerations and desired outcomes of the refactor.</p><h3 id=\"scalability-and-eventual-consistency\">Scalability and eventual consistency</h3><p>WIMS v1 works fine in our test environment and when under a light load, but it degrades under heavy workloads. We know this is because we're trying to do too much work in a customer-facing request. To resolve this issue, we want to design WIMS v2 to simply register customer intent: \"We have received your order!\" Our system will process that intent in an eventually consistent manner and notify the customer via email if there's a problem with payment or if an item is on backorder.</p><p>Eventual consistency is part of the scalability story. We need to ask ourselves \"What happens if we get a 10x day or a 100x day?\" Building with serverless is a great start, but the v1 version of our system was already serverless and yet had scaling problems. By making our system eventually consistent, we can control the throughput of our events to protect downstream services. We know that some events (such as registering customer intent) must be immediately consistent. We want to make those as responsive and lightweight as possible and offload the heavy lifting to other services.</p><h3 id=\"idempotency-fault-tolerance-and-replay\">Idempotency, fault tolerance, and replay</h3><p>No system can expect to be 100% error-free. We may push a bug. We may discover an edge case or hit a service limit. Our customers will do things we don't anticipate! The managed services we build with can have their own bugs and operational issues. To mitigate these risks, we need a system that can replay events and we need the system to be tolerant to redelivery of events as well as handle the case when events are delivered an order that's different from what we expect.</p><p>Yes, it's possible to use <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues-understanding-logic.html\">FIFO</a> queues, and DynamoDB Streams <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/streamsmain.html\">guarantee ordering and will not contain duplicate events</a>, but these guarantees can be deceiving when other parts of the system may use an <a href=\"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-service-event.html#eb-service-event-delivery-level\">at-least-once</a> delivery model. Designing for idempotency not only allows us to mitigate the risk that events may be redelivered, it allows us to replay events should the system suffer a failure. We can have the confidence to replay all events that should've been sent during an incident, rather than having to determine exactly which events need to be replayed.</p><h3 id=\"modularization\">Modularization</h3><p>We know from experience that not long after we ship WIMS v2, we'll find a new requirement that wasn't considered during our design. For example, we could find that we have notification requirements that can't be satisfied with an SNS email subscription. If our notification implementation lives in the CreateOrder Lambda function, it could be challenging to add a new and more complex implementation in place, but since we are embracing event-driven architecture, we can simply pipe the event somewhere else.</p><h3 id=\"observability\">Observability</h3><p>Many developers feel distributed systems can be harder to observe. This is definitely true for systems that rely on customer complaints, server metrics, and HTTP status codes to determine system health. If WIMS v1 replies 200 OK, we're reasonably confident in thinking everything worked well. That won't be true for WIMS 2. So how do we know the system did what we wanted it to do?</p><p>First of all we need to deconstruct that HTTP 200 OK response a bit. Does a 200 response mean we've received payment and the customer received a MacGuffin? No, of course not. We're really just using that status code as a proxy for a business outcome. </p><p>A better solution is to emit business events upon completion (be it success or failure) of critical operations. These events can alert the team to things that need to be addressed (such as low inventory) and can also be used to track things like a successful payment, delivery of an item, and the current status of an order.</p><h3 id=\"change-data-capture-cdc-\">Change Data Capture (CDC)</h3><p>Leveraging CDC events can be one of the best ways to add events to a system. For example, we could wait for a status field to change and fire an event based on that. Instead of writing code like:</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">updateStatus('PENDING');\nsendEvent('PENDING', order);</code></pre><figcaption>Example of using imperative code to send an event</figcaption></figure><p>We simply update the status and let our CDC system handle the rest. This will be a much more reliable and consistent system. What if we had to do a bulk status update to fix a bug? If we're relying on imperative code to send that event, it could be missed in the bulk update. Using CDC will guarantee the next stage of our system is invoked.</p><h3 id=\"cost\">Cost</h3><p>At AWS re:Invent 2023, Amazon CTO, Dr. Werner Vogels, used his <a href=\"https://www.youtube.com/watch?v=UTRBVPvzt9w\">keynote</a> to make an interesting point about using cost as a proxy for good architecture and launched a <a href=\"https://thefrugalarchitect.com/\">website</a> in support of this idea. Even though our MacGuffin business is growing nicely, we still want to maintain operational costs and we know that waste will not only hit our bottom line, it'll also impact operability of this system. We'll run some cost projections to make sure we're exercising frugality in our architecture.</p><h2 id=\"wims-version-2\">WIMS version 2</h2><p>Given our design considerations and what we've learned about event-driven architecture, our new system diagram looks like this. We will leverage CDC events from DynamoDB Streams to enable low inventory notifications and to handle asynchronous order processing. We'll use SQS to enqueue payments, leveraging redelivery mechanisms and a dead-letter queue to handle exceptions.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lh7-us.googleusercontent.com/y6mBcKye93AWbTihybXMF5RWfsJPaAkMR7sz1C12nAAgARvkp94D56OxpjTXbF7-58KGBPYZnBdV_A3S-7wDos1MIq6ubfRqmTvx14NgIlRklyQ3_BZVdffAH5_9wag_I9uWWJaxD0B6LfAHKypXYWGEeA=s2048\" class=\"kg-image\" alt=\"y6mBcKye93AWbTihybXMF5RWfsJPaAkMR7sz1C12nAAgARvkp94D56OxpjTXbF7-58KGBPYZnBdV_A3S-7wDos1MIq6ubfRqmTvx14NgIlRklyQ3_BZVdffAH5_9wag_I9uWWJaxD0B6LfAHKypXYWGEeA=s2048\" width=\"600\" height=\"400\" loading=\"lazy\"><figcaption>WIMS version 2 architecture diagram</figcaption></figure><h2 id=\"refactoring-cdk\">Refactoring CDK</h2><p>As we start to refactor, we should think about how we're going to construct our code. It's possible to write CDK applications as a single \"my-stack.ts\" file, but doing so can lead to readability problems. Since a CDK application is a collection of resources, creating one very large class for all your resources can create maintainability issues. It's a best practice to give a logical organization to your resources. If we think about the domains we want to focus on here, they include:</p><ul><li>Orders</li><li>Inventory</li><li>Payments</li></ul><p>Additionally, there are some technical considerations that need to be included in the application. These are not business domains, but they are important features that need to be included in the new architecture:</p><ul><li>Change Data Capture (CDC)</li><li>Observability</li></ul><p>Because CDK applications utilize imperative code there are a lot of different ways we can achieve this logical organization. One such tool is <a href=\"https://docs.aws.amazon.com/cdk/v2/guide/constructs.html#constructs_author\">CDK's L3 construct</a>. L3 constructs (also called \"patterns\") are often used to create, share, and publish new constructs, but they can also be simple organizational tools within an application, to allow developers to interact with part of the application as an API instead of as a collection of resources.</p><p>In this example, we'll create several L3 constructs to organize our application:</p><ul><li>CDC (or Change Data Capture), for capturing and routing change events</li><li>InventoryMonitor, for checking inventory levels and sending appropriate notifications</li><li>Observability, to add additional logging and set up an EventBridge Schema Registry</li><li>OrdersAPI, to group our existing API for orders</li><li>OrdersProcessor, to handle an order once it's created</li><li>PaymentsAPI, representing our troublesome payments system</li><li>PaymentsProcessor, wherein we attempt to solve our throughput problem</li></ul><p>Note that while we're thinking about the critical business domains, these L3 constructs do not have a 1:1 mapping with our domains. Instead our constructs correspond to capabilities our application needs to implement those domains. domain-driven design and how that relates to event-driven architecture is a topic beyond this blogpost.</p><p>We can create L3 constructs by creating a new Typescript file with our construct's name. We'll put them in a folder under ./src/constructs, but they could go anywhere as TypeScript can import them from whatever directory structure makes sense for our team. We define the construct as a class that implements <code>Construct</code>.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">import { TableV2 } from 'aws-cdk-lib/aws-dynamodb';\nimport { Construct } from 'constructs';\n\nexport interface CDCProps {\n  table: TableV2;\n}\n\nexport class CDC extends Construct {\n  constructor(scope: Construct, id: string, props: CDCProps) {\n    super(scope, id);\n\n    // create resources\n    // Do something with the table prop\n  }\n}\n</code></pre><figcaption>Example of an L3 construct declaration</figcaption></figure><p>We can expose resources and pass them from one construct to another using standard TypeScript class syntax. To gain a reference to our Payments API RestAPI construct, we can create an accessor called <code>getApi()</code>.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">import { Stack } from 'aws-cdk-lib';\nimport {\n  RestApi,\n  MockIntegration,\n  PassthroughBehavior,\n} from 'aws-cdk-lib/aws-apigateway';\nimport { Construct } from 'constructs';\n\nexport class PaymentsApi extends Construct {\n  private api: RestApi;\n  constructor(scope: Stack, id: string) {\n    super(scope, id);\n\n    // Payments is an external system so mocked here.\n    this.api = new RestApi(this, 'WIMSPayments', {\n      deployOptions: { throttlingBurstLimit: 5, throttlingRateLimit: 5 },\n    });\n  }\n\n  getApi() {\n    return this.api;\n  }\n}</code></pre><figcaption>Example of a class accessor in CDK</figcaption></figure><p>This can then be used to pass the api from one L3 construct to another.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    const paymentsApi = new PaymentsApi(this, 'PaymentsApi');\n    const paymentsProcessor = new PaymentsProcessor(this, 'PaymentsProcessor', {\n      api: paymentsApi.getApi(),\n    });</code></pre><figcaption>Example of passing resources from one L3 construct to another</figcaption></figure><p>You can find the original <a href=\"https://github.com/elthrasher/wims/blob/legacy/src/stacks/wims-stack.ts\">wims-stack.ts</a> in the project's <a href=\"https://github.com/elthrasher/wims\">GitHub Repository</a> on the <a href=\"https://github.com/elthrasher/wims/tree/legacy\">legacy</a> branch. It's just over 100 lines of code, so not too terrible. However by the time we're done refactoring and moving all our resources to L3 constructs, we'll cut that down by half. Our stack now creates the same DynamoDB table and then adds in our new L3 constructs.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">import { CfnOutput, RemovalPolicy, Stack, StackProps } from 'aws-cdk-lib';\nimport {\n  AttributeType,\n  StreamViewType,\n  TableV2,\n} from 'aws-cdk-lib/aws-dynamodb';\nimport { Construct } from 'constructs';\n\nimport { TABLE_PK, TABLE_SK } from '../constants';\nimport { CDC } from '../constructs/cdc';\nimport { InventoryMonitor } from '../constructs/inventory-monitor';\nimport { ObservabilityConstruct } from '../constructs/observability';\nimport { OrdersApi } from '../constructs/orders-api';\nimport { OrdersProcessor } from '../constructs/orders-processor';\nimport { PaymentsApi } from '../constructs/payments-api';\nimport { PaymentsProcessor } from '../constructs/payments-processor';\n\nexport class WimsStack extends Stack {\n  constructor(scope: Construct, id: string, props?: StackProps) {\n    super(scope, id, props);\n\n    const table = new TableV2(this, 'WIMSTable', {\n      dynamoStream: StreamViewType.NEW_AND_OLD_IMAGES,\n      partitionKey: { name: TABLE_PK, type: AttributeType.STRING },\n      removalPolicy: RemovalPolicy.DESTROY,\n      sortKey: { name: TABLE_SK, type: AttributeType.STRING },\n      tableName: 'WIMS',\n    });\n\n    new CDC(this, 'CDC', { table });\n    new InventoryMonitor(this, 'InventoryMonitor');\n    new ObservabilityConstruct(this, 'Observability');\n    const paymentsApi = new PaymentsApi(this, 'PaymentsApi');\n    const paymentsProcessor = new PaymentsProcessor(this, 'PaymentsProcessor', {\n      api: paymentsApi.getApi(),\n    });\n    const ordersApi = new OrdersApi(this, 'OrdersApi', { table });\n    new OrdersProcessor(this, 'OrdersProcessor', {\n      queue: paymentsProcessor.getQueue(),\n      table,\n    });\n\n    new CfnOutput(this, 'InventoryUrl', {\n      value: ordersApi.getApi().deploymentStage.urlForPath('/inventory'),\n    });\n    new CfnOutput(this, 'OrdersUrl', {\n      value: ordersApi.getApi().deploymentStage.urlForPath('/orders'),\n    });\n  }\n}\n</code></pre><figcaption>WimsStack, now primarily built from L3 constructs</figcaption></figure><p>Now let's delve into the capabilities of these L3 constructs and how they'll solve our business and technical needs.</p><h2 id=\"ordersapi\">OrdersApi</h2><p>This existed in V1 of our application, but had the drawback of trying to do too much. <code>create-order.ts</code> perhaps should've been called <code>create-order-then-update-inventory-and-finally-call-payments-api.ts</code>. Rather than give it a more descriptive name, let's strip it down to the core capability that we care most about - creating an order. This L3 construct will do that simple thing and defer the rest to other constructs. We could achieve this aim by removing code from our Lambda function.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">import { DynamoDBClient } from '@aws-sdk/client-dynamodb';\nimport { DynamoDBDocumentClient, PutCommand } from '@aws-sdk/lib-dynamodb';\nimport { APIGatewayProxyEvent, APIGatewayProxyResult } from 'aws-lambda';\n\nimport { TABLE_PK, TABLE_SK } from '../constants';\n\nconst client = DynamoDBDocumentClient.from(new DynamoDBClient({}));\n\nconst api = process.env.API_URL;\nconst table = process.env.TABLE_NAME;\n\nif (!api || !table) {\n  throw new Error('Missing required env var!');\n}\n\nexport const handler = async (\n  event: APIGatewayProxyEvent\n): Promise&lt;APIGatewayProxyResult&gt; =&gt; {\n  if (!event.body) {\n    throw new Error('Missing event body!');\n  }\n\n  const order = JSON.parse(event.body);\n\n  if (!order.customerId || !order.quantity) {\n    throw new Error('Invalid order!');\n  }\n\n  const timestamp = new Date().getTime();\n\n  // First create the order\n  const createOrderCommand = new PutCommand({\n    Item: {\n      ...order,\n      status: 'PENDING',\n      timestamp,\n      [TABLE_PK]: `CUSTOMER#${order.customerId}`,\n      [TABLE_SK]: `TIMESTAMP#${timestamp}`,\n    },\n    TableName: table,\n  });\n  await client.send(createOrderCommand);\n\n  return {\n    body: 'Order created!',\n    statusCode: 200,\n  };\n};\n</code></pre><figcaption>Simplified Lambda function, now with a single responsibility</figcaption></figure><p>We've deleted a bunch of code and now we have a nice, single-purpose Lambda function! But at this point, we don't really have much in the way of custom code or logic. API Gateway has the ability to integrate directly with DynamoDB. Doing this has some advantages:</p><ul><li>No cold starts.</li><li>No Lambda functions to maintain, bundle, deploy, upgrade, ignore deprecation warnings of, etc.</li><li>No Lambda charges or concurrency use.</li><li>Forces us to keep it simple as VTL is not a great place for complex logic.</li></ul><p>On the other hand, there are some disadvantages to consider:</p><ul><li>There may be a learning curve or challenge adopting this pattern.</li><li>We're changing something that doesn't necessarily need to be changed (our stated problem is the Lambda function is trying to do too much, not that it exists).</li><li>As our business grows, complexity may be unavoidable and we may have to return to Lambda, so we'd face more rework.</li></ul><p>All that considered, let's try the direct integration. To do so we'll delete the create-orders Lambda function and replace our <code>LambdaIntegration</code> with <code>AwsIntegration</code>.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    orders.addMethod(\n      'POST',\n      new AwsIntegration({\n        action: 'PutItem',\n        options: {\n          credentialsRole: role,\n          integrationResponses: [\n            {\n              responseTemplates: {\n                'application/json': JSON.stringify({\n                  message: 'Order created!',\n                }),\n              },\n              statusCode: '200',\n            },\n          ],\n          requestTemplates: {\n            'application/json': JSON.stringify({\n              Item: {\n                [TABLE_PK]: {\n                  S: \"CUSTOMER#$input.path('$.customerId')\",\n                },\n                [TABLE_SK]: {\n                  S: 'TIMESTAMP#$context.requestTimeEpoch',\n                },\n                customerId: {\n                  S: \"$input.path('$.customerId')\",\n                },\n                quantity: {\n                  N: \"$input.path('$.quantity')\",\n                },\n                status: {\n                  S: 'PENDING',\n                },\n                timestamp: {\n                  N: '$context.requestTimeEpoch',\n                },\n              },\n              TableName: table.tableName,\n            }),\n          },\n        },\n        service: 'dynamodb',\n      }),\n      {\n        methodResponses: [{ statusCode: '200' }],\n      }\n    );</code></pre><figcaption>CDK declaration of an API Gateway integration with DynamoDB to put new orders to the table</figcaption></figure><p>Because our OrdersApi creates an order and immediately responds to the client, it's an example of a synchronous event. View the construct in our <a href=\"https://github.com/elthrasher/wims/blob/main/src/constructs/orders-api.ts\">repo</a>.</p><h2 id=\"cdc\">CDC</h2><p>While it's possible to implement CDC patterns on any kind of database, DynamoDB is a stand-out choice for this pattern due to it's streaming capabilities. The DynamoDB developer guide event has a section on <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.html\">change data capture</a>.</p><p>To leverage DynamoDB Streams for CDC, we first need to enable streams on our table. This is very simple to do using AWS CDK.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    const table = new TableV2(this, 'WIMSTable', {\n      dynamoStream: StreamViewType.NEW_AND_OLD_IMAGES,\n      partitionKey: { name: TABLE_PK, type: AttributeType.STRING },\n      removalPolicy: RemovalPolicy.DESTROY,\n      sortKey: { name: TABLE_SK, type: AttributeType.STRING },\n      tableName: 'WIMS',\n    });</code></pre><figcaption>CDK declaration of a DynamoDB table with streams enabled</figcaption></figure><p>Adding a <code>dynamoStream</code> key with the value of <code>NEW_AND_OLD_IMAGES</code> will give us all the information we need to start capturing create, update, and delete events and routing them to appropriate handlers.</p><p>We can subscribe one or more Lambda functions to the stream, but it's not recommended to have more than two subscribers to a stream as it can result in <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.html#Streams.Processing\">throttling</a>.</p><p>Instead of using Lambda handlers for the stream, we'll use an EventBridge Pipe. The Pipe will allow us to subscribe to the stream, enrich and transform the stream data, and then send the event back to our event bus where we can define rules to route the events to appropriate handlers.</p><p>At the time of this writing, the EventBridge Pipes L2 construct is still in <a href=\"https://github.com/aws/aws-cdk-rfcs/blob/main/text/0473-eventbridge-pipes.md\">RFC status</a>. It's possible to use the <a href=\"https://github.com/RaphaelManke/aws-cdk-pipes-rfc-473\">proposed construct</a>, but it is unstable and subject to change. We'll stick with the L1 <a href=\"https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_pipes.CfnPipe.html\">CfnPipe</a> construct for now and hope to update to L2 when that's ready.</p><p>Our Pipe is going to read from the DynamoDB stream, use a Lambda function to unmarshall the DynamoDB record to plain JSON, then send the event to our default event bus.</p><p>Because this construct is an L1, we'll need to explicitly define a role as well as grants.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    const cdcPipeRole = new Role(this, 'CDCPipeRole', {\n      assumedBy: new ServicePrincipal('pipes.amazonaws.com'),\n    });\n    \n    table.grantStreamRead(cdcPipeRole);</code></pre><figcaption>CDK declaration of a Pipes service role with a grant to a DynamoDB stream</figcaption></figure><p>Now we can define the Pipe.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    new CfnPipe(this, 'CDCStreamPipe', {\n      name: 'CDCStreamPipe',\n      roleArn: cdcPipeRole.roleArn,\n      source: table.tableStreamArn!,\n      sourceParameters: {\n        dynamoDbStreamParameters: { batchSize: 10, startingPosition: 'LATEST' },\n      },\n      target: bus.eventBusArn,\n      targetParameters: {\n        eventBridgeEventBusParameters: {\n          source: PROJECT_SOURCE,\n          detailType: CDC_EVENT,\n        },\n      },\n    });</code></pre><figcaption>CDK L1 CfnPipe declaration with a DynamoDB stream as the source and EventBridge as the target</figcaption></figure><p>In order to target our default event bus, we'll need to grab a reference to it and grant our role access to send events to it.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">const bus = EventBus.fromEventBusName(this, 'DefaultBus', 'default');\n\nbus.grantPutEventsTo(cdcPipeRole);</code></pre><figcaption>CDK import of the default event bus for purposes of creating a grant to the CDC Pipe role</figcaption></figure><p>Finally, we'll define a Lambda function to enrich and transform our data and grant invoke <code>cdcEnrichmentFn.grantInvoke(cdcPipeRole);</code> to our role.</p><p>Our cdc-enrichment Lambda function leverages the unmarshall function from <code>@aws-sdk/lib-dynamodb</code> to transform the DynamoDB records into JavaScript objects that then can be consumed as JSON. We also add <code>data</code> and <code>meta</code> keys to our payload and clearly label the type of event to make it easier for downstream consumers. We could perform any sort of transformation that makes sense for our business here. The purpose of this function is to prep our data for the many consumers in our system.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">import { unmarshall } from '@aws-sdk/util-dynamodb';\n\nimport type { AttributeValue } from '@aws-sdk/client-dynamodb';\nimport type { DynamoDBRecord } from 'aws-lambda';\nimport { TABLE_PK, TABLE_SK } from '../constants';\n\nexport const handler = async (records: DynamoDBRecord[]) =&gt; {\n  return records.map((r) =&gt; {\n    const oldImage = r.dynamodb?.OldImage\n      ? unmarshall(r.dynamodb?.OldImage as Record&lt;string, AttributeValue&gt;)\n      : undefined;\n    const newImage = r.dynamodb?.NewImage\n      ? unmarshall(r.dynamodb?.NewImage as Record&lt;string, AttributeValue&gt;)\n      : undefined;\n    const result: {\n      meta: Record&lt;string, string&gt;;\n      data: {\n        pk: string;\n        sk: string;\n        eventName: string;\n        eventType: string;\n        NewImage?: Record&lt;string, unknown&gt;;\n        OldImage?: Record&lt;string, unknown&gt;;\n      }\n    } = {\n      meta: {\n        fn: process.env.AWS_LAMBDA_FUNCTION_NAME!,\n      },\n      data: {\n        pk: oldImage?.[TABLE_PK] || newImage?.[TABLE_PK] || '',\n        sk: oldImage?.[TABLE_SK] || newImage?.[TABLE_SK] || '',\n        eventName: r.eventName || 'UNKNOWN',\n        eventType:\n          oldImage &amp;&amp; newImage ? 'UPDATE' : oldImage ? 'REMOVE' : 'INSERT',\n      },\n    };\n    if (newImage) result.data.NewImage = newImage;\n    if (oldImage) result.data.OldImage = oldImage;\n    return result;\n  });\n};</code></pre><figcaption>Source for the cdc-enrichment Lambda function that leverages the sdk unmarshall function to transform DynamoDB records into plain JavaScript</figcaption></figure><p>Our <a href=\"https://github.com/elthrasher/wims/blob/main/src/constructs/cdc.ts\">complete construct</a> includes the enrichment as well as additional logging which may be helpful in understanding how our Pipe is operating.</p><h2 id=\"ordersprocessor\">OrdersProcessor</h2><p>This L3 construct will consist of an EventBridge Rule that triggers a Step Function whenever a new order is created. The Step Function will make inventory adjustments based on the order and put enqueue messages for SQS to be sent to our payments system.</p><p>The Step Function consists of two steps that are executed in parallel. To make inventory adjustments, we could use a Lambda Function or we can use the <a href=\"https://docs.aws.amazon.com/step-functions/latest/dg/connect-ddb.html\">direct integration</a>.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    const adjustInventory = new DynamoUpdateItem(this, 'AdjustInventory', {\n      expressionAttributeNames: { '#quantity': 'quantity' },\n      expressionAttributeValues: {\n        ':quantity': DynamoAttributeValue.numberFromString(\n          JsonPath.format(\n            '{}',\n            JsonPath.stringAt('$.detail.data.NewImage.quantity')\n          )\n        ),\n      },\n      conditionExpression: '#quantity &gt;= :quantity',\n      key: {\n        [TABLE_PK]: DynamoAttributeValue.fromString('INVENTORY#MACGUFFIN'),\n        [TABLE_SK]: DynamoAttributeValue.fromString('MODEL#LX'),\n      },\n      resultPath: JsonPath.DISCARD,\n      table,\n      updateExpression: 'set #quantity = #quantity - :quantity',\n    });</code></pre><figcaption>CDK declaration of a Step Functions DynamoDB integration with a condition expression which will cause the step to fail if the condition evaluates false</figcaption></figure><p>This statement contains a <code>conditionExpression</code> that will ensure we don't decrement the inventory below zero. This should trigger another event that could then notify the customer that they'll need to wait for us to resupply.</p><p>Another direct integration with SQS passes those messages along to be queued for payment.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    const enqueuePayment = new SqsSendMessage(this, 'EnqueuePayment', {\n      messageBody: TaskInput.fromJsonPathAt('$.detail.data.NewImage'),\n      queue,\n    });</code></pre><figcaption>CDK declaration of a Step Functions SQS integration</figcaption></figure><p>We wrap all of this up in an Express Workflow because we know it'll execute very quickly and Express Workflows are more cost-efficient for short workflows. An alternate implementation of this workflow could involve sending a <a href=\"https://docs.aws.amazon.com/step-functions/latest/dg/connect-to-resource.html#connect-wait-token\">Task Token</a> to the payment system and pausing until it's returned. In that case a Standard Workflow is required as we know our payment system is not fast.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    const sm = new StateMachine(this, 'OrdersStateMachine', {\n      definitionBody: DefinitionBody.fromChainable(parallel),\n      logs: {\n        destination: new LogGroup(this, 'SMLogs', {\n          logGroupName: '/aws/vendedlogs/states/OrdersSMLogs',\n          removalPolicy: RemovalPolicy.DESTROY,\n          retention: RetentionDays.ONE_DAY,\n        }),\n        includeExecutionData: true,\n        level: LogLevel.ALL,\n      },\n      stateMachineName: 'orders-state-machine',\n      stateMachineType: StateMachineType.EXPRESS,\n      tracingEnabled: true,\n    });</code></pre><figcaption>CDK Express State Machine declaration including logging and XRay tracing</figcaption></figure><p>Unlike Standard Workflows, Express Workflows require logging to be set up in order to have dashboard visibility. If we omit the logging, we may have a frustrating time observing the state machine.</p><p>Our EventBridge Rule includes some filters so that we'll only trigger the workflow on an order creation event.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    new Rule(this, 'OrderStateMachineRule', {\n      eventBus: bus,\n      eventPattern: {\n        source: [PROJECT_SOURCE],\n        detailType: [CDC_EVENT],\n        detail: {\n          data: {\n            eventType: ['INSERT'],\n            pk: [{ prefix: 'CUSTOMER#' }],\n          },\n        },\n      },\n      ruleName: 'OrdersStateMachine',\n      targets: [new SfnStateMachine(sm)],\n    });\n  }</code></pre><figcaption>EventBridge Rule that takes a CDC insert event with \"CUSTOMER#\" leading the partition key that triggers the OrdersStateMachine</figcaption></figure><p>Check out the full source of the <a href=\"https://github.com/elthrasher/wims/blob/main/src/constructs/orders-processor.ts\">OrdersProcessor</a>. This construct uses an EventBridge Rule to implement an async bus pattern as a consumer of an event that could potentially have other consumers.</p><h2 id=\"paymentsqueue\">PaymentsQueue</h2><p>Our PaymentsQueue construct consists of an SQS Queue, a corresponding <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-dead-letter-queues.html\">dead-letter queue</a>, and another Pipe resource that routes our events to the Payments API. Using SQS in this way gives us the ability to store and redeliver events when we face throttles. We can configure our queue to allow as many retries as make sense for our system before finally delivering to our dead-letter queue</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    const dlq = new Queue(this, 'PaymentsDlq', { queueName: 'payments-dlq' });\n    \n    new Queue(this, 'PaymentsQueue', {\n      deadLetterQueue: { maxReceiveCount: 10, queue: dlq },\n      queueName: 'payments-queue',\n    });</code></pre><figcaption>CDK declaration for an SQS queue and corresponding dead-letter queue</figcaption></figure><p>Our CfnPipe construct using our queue as a source and pipes those events to the Payments API using an ARN (Amazon Resource Name) comprised of the RestAPI id, the stage, the HTTP method, and the resource.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    new CfnPipe(this, 'PaymentsPipe', {\n      name: 'PaymentsPipe',\n      roleArn: paymentsPipeRole.roleArn,\n      source: this.paymentsQueue.queueArn,\n      target: Arn.format(\n        {\n          service: 'execute-api',\n          resource: `${api.restApiId}/prod/POST/payments`,\n        },\n        Stack.of(this)\n      ),\n      targetParameters: {\n        inputTemplate: `{\n          \"body\": &lt;$.body&gt;\n        }`,\n      },\n    });</code></pre><figcaption>CDK CfnPipe declaration showing an API Gateway target and SQS source</figcaption></figure><p>In this simple example, we're just pushing the same event along as the POST body, but there could be good reason to use another enrichment function here.</p><p>See the <a href=\"https://github.com/elthrasher/wims/blob/main/src/constructs/payments-queue.ts\">full source</a> of this construct. It implements an async queue pattern where events are enqueued until they can be successfully delivered.</p><h2 id=\"inventorymonitor\">InventoryMonitor</h2><p>This construct really demonstrates the power of EDA. We will define an SNS Topic with an email subscription and then a rule to invoke it.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    const inventoryStockTopic = new Topic(this, 'InventoryStockTopic');\n    inventoryStockTopic.addSubscription(new EmailSubscription('theteam@ourcompany.com'));</code></pre><figcaption>CDK declaration of an SNS topic with an email subscription</figcaption></figure><p>These two lines of code are all we need to create the topic and subscribe our team to it. Then we define the EventBridge Rule.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-typescript\">    new Rule(this, 'InventoryStockRule', {\n      eventBus: bus,\n      eventPattern: {\n        source: [PROJECT_SOURCE],\n        detailType: [CDC_EVENT],\n        detail: {\n          data: {\n            eventType: ['UPDATE'],\n            pk: [{ prefix: 'INVENTORY#' }],\n            NewImage: {\n              quantity: [{ numeric: ['&lt;=', 100] }],\n            },\n          },\n        },\n      },\n      targets: [new SnsTopic(inventoryStockTopic)],\n    });</code></pre><figcaption>EventBridge Rule triggered off a CDC event, filtering on updates with a partition key beginning with \"INVENTORY#\" and a quantity value of less than or equal to 100</figcaption></figure><p>EventBridge Rules allow <a href=\"https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns-content-based-filtering.html#filtering-numeric-matching\">numeric matching</a> on filters so we can easily implement our business logic here so the rule is only triggered when our inventory level falls to 100 units or fewer. Note that this construct does not need to be concerned with dispatching the event. That is managed by the CDC construct.</p><p>The source is available <a href=\"https://github.com/elthrasher/wims/blob/main/src/constructs/inventory-monitor.ts\">here</a>. This construct is triggered by an async bus event which is converted to a broadcast event using SNS.</p><h2 id=\"benchmarking-v1-vs-v2\">Benchmarking v1 vs. v2</h2><h3 id=\"v1\">v1</h3><p>We can use a <a href=\"https://github.com/elthrasher/wims/blob/legacy/benchmark.mjs\">simple script</a> to do some benchmarking. This script will attempt to fire off 10 concurrent events, wait for them to complete and then loop until we've created 1000 orders. A tool running on NodeJS isn't going to give us true concurrency (requests are initiated sequentially), but it's good enough for our purposes.</p><p>Running the script against the v1 system a few times gives fairly consistent results.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">Time for 1000 orders.: 2:04.980 (m:ss.mmm)\n{ '200': 613, '429': 387 }</code></pre><figcaption>WIMS v1 benchmark results: time taken for 1000 orders and status codes returned</figcaption></figure><p>It took over 2 minutes to get through 1000 orders. Since we were running ten at a time, that means it took about 1.25 seconds for each iteration. That's not bad, but we have a big problem in that when our Payments API throttles, that error is returned back to the user. In this case, the order and inventory adjustment were both captured successfully, but the payment failed. An error rate of 38.7% is way too high! We might want to improve latency, but the error rate is a critical problem. Can this be solved with the new architecture?</p><h3 id=\"v2\">v2</h3><p>Running the same script agianst the v2 system, we see immediate improvement!</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">Time for 1000 orders.: 39.588s\n{ '200': 1000 }</code></pre><figcaption>WIMS v2 benchmark results: time taken for 1000 orders and status codes returned</figcaption></figure><p>Our iterations are taking less than 1/3 the time and we have no errors! But that's not really fair, since the entire point of this architecture is that we're doing less up front when we create the order. Does everything else happen as it should? How eventual is the consistency?</p><p>To check on our inventory adjustments, we can query inventory levels before and after the script runs and see if they all happened. The script makes a variable number of units per orders so we'll keep a running total and see if they all reconcile.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">Starting Inventory: 1000000\nInventory at next tick: 994536\nInventory reduced by: 5464 of sales total 5536.\nTime for 1000 orders.: 39.396s\n{ '200': 1000 }</code></pre><figcaption>WIMS v2 benchmark results: time taken for 1000 orders, status codes returned and inventory adjustments made vs expected immediately after the last request is completed (next tick)</figcaption></figure><p>Querying immediately after finishing our orders, we can see that some of the adjustments are still in flight. How long does it take for them to settle?</p><p>Adding an additional wait of 500ms produces the desired result.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">Starting Inventory: 994464\nInventory at next tick: 988938\nInventory reduced by: 5526 of sales total 5628.\nTime for 1000 orders.: 31.332s\n{ '200': 1000 }\nInventory after 500ms: 988836\nInventory reduced by: 5628 of sales total 5628.\nWaited 500 ms.</code></pre><figcaption>WIMS v2 benchmark results: time taken for 1000 orders, status codes returned and inventory adjustments made vs expected immediately after the last request is completed (next tick), then another check on inventory 500ms later showing all expected updates had completed</figcaption></figure><p>All our adjustments were completed in less time than it took the original system to do synchronously!</p><p>Note that DynamoDB reads can be <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ReadConsistency.html\">eventually consistent</a> themselves, so we won't actually know if that's the cause of the slight latency in updates or if our events are still in flight. In the end it doesn't matter if we've embraced the idea of eventual consistency.</p><p>One more thing we're ignoring is whether or not the payments all went through successfully. Since our example Payments API is just a RestAPI with a rate limit and a mock response, it won't be possible for it to tell us if it got all the payments like it would be in a real system. We can look to our queuing architecture to determine whether or not delivery was successful.</p><p>We've configured SQS to attempt 10 deliveries after which it'll fail over to our dead-letter queue. When running the benchmark, we can use the \"Poll for messages\" functionality on the AWS console and see the messages in flight waiting for redelivery.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2023/12/Screenshot-2023-12-31-at-1.08.16-PM.png\" class=\"kg-image\" alt=\"Screenshot-2023-12-31-at-1.08.16-PM\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-1.08.16-PM.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-1.08.16-PM.png 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2023/12/Screenshot-2023-12-31-at-1.08.16-PM.png 1600w, https://www.freecodecamp.org/news/content/images/2023/12/Screenshot-2023-12-31-at-1.08.16-PM.png 1646w\" sizes=\"(min-width: 720px) 720px\" width=\"1646\" height=\"512\" loading=\"lazy\"><figcaption>AWS SQS console showing messages queued for redelivery</figcaption></figure><p>As long as \"Receive count\" is below 10, we can expect these messages to keep trying. We'll want to switch over to our dead-letter queue to check for messages there at the end. If there are none, then everything eventually was processed!</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2023/12/Screenshot-2023-12-31-at-1.12.46-PM.png\" class=\"kg-image\" alt=\"Screenshot-2023-12-31-at-1.12.46-PM\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-1.12.46-PM.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2023/12/Screenshot-2023-12-31-at-1.12.46-PM.png 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2023/12/Screenshot-2023-12-31-at-1.12.46-PM.png 1600w, https://www.freecodecamp.org/news/content/images/2023/12/Screenshot-2023-12-31-at-1.12.46-PM.png 1619w\" sizes=\"(min-width: 720px) 720px\" width=\"1619\" height=\"256\" loading=\"lazy\"><figcaption>AWS SQS console showing the dead-letter queue has no messages</figcaption></figure><p>Our Payments API has a rate limit of 5 requests per second so it should take at least 200 seconds to handle 1000 requests.</p><h3 id=\"results-are-in-\">Results are in!</h3><p>The v1 system processed 1000 orders in about 125 seconds with a miserable 61.3% success rate. The v2 system responds in 30-40 seconds with 500ms additional latency on completing inventory adjustments. Payments lag behind for a couple more minutes, but that's just a limitation of the payments system. We've solved the error rate problem and now 100% of our requests succeed!</p><h2 id=\"cost-1\">Cost</h2><p>Let's run the numbers on what this system will actually cost to operate. We know based on experience that there's no cost for running 1000 orders. Everything is well within the free tier at that level. What about a million orders?</p><p>Here's a stab at estimating that with the <a href=\"https://calculator.aws/#/estimate?id=7de8847e4b38ce17027a2b1cecba9ef2f58d4d15\">AWS Pricing Calculator</a>.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2023/12/Screenshot-2023-12-31-at-1.47.10-PM.png\" class=\"kg-image\" alt=\"Screenshot-2023-12-31-at-1.47.10-PM\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2023/12/Screenshot-2023-12-31-at-1.47.10-PM.png 600w, https://www.freecodecamp.org/news/content/images/2023/12/Screenshot-2023-12-31-at-1.47.10-PM.png 984w\" sizes=\"(min-width: 720px) 720px\" width=\"984\" height=\"802\" loading=\"lazy\"><figcaption>Cost estimate for 12 months of the WIMS 2.0 system showing a total of $222.84</figcaption></figure><p>This is assuming 1 million units moved every month. Hopefully our margins are good enough to afford $222.84 on 12 million sold. Of course this is an incomplete system so it's easy to imagine the full system costing 10x or 100x of this, but even at those levels this remains fairly affordable (again assuming we've got reasonable margins per MacGuffin). The best part is that our costs will ebb and flow with sales numbers, so any time our AWS bill is higher than normal, that should be accompanied with some great revenues and likewise if sales are down, we should be able to console ourselves with lower-than-usual bills.</p><h2 id=\"conclusion\">Conclusion</h2><p>We started with an API-driven system that had problems scaling up and adding new features and broke down some of the parts to create an event-driven, eventually consistent system that is still quite responsive, observable, extensible, and cheap to operate.</p><p>We explored different event patterns including synchronous, async queue, async bus and broadcast events. We discussed design principles like eventual consistency and idempotency as well as techniques that can lead to stated outcomes.</p><p>I hope you enjoyed this journey and are inspired to build better, more scalable, more observable, and more cost-efficient systems as a result. I'd love to hear from you and happy building!</p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg\" class=\"author-profile-image\" alt=\"Matt Morgan\" width=\"577\" height=\"800\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/matt-morgan/\" data-test-label=\"profile-link\">\n                    \n                        Matt Morgan\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Director of Engineering, CommentSold - co-author The TypeScript Workshop https://www.amazon.com/gp/product/B093Y29GW3 - AWS Community Builder</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Refactoring%20with%20Event-Driven%20Architecture%20on%20AWS\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"@NullishCoalesce\",r=Boolean(\"\");let c;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Matt Morgan\"};c=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(c=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const a=`window.open(\\n    '${c?`https://twitter.com/intent/tweet?text=${c}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",a)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac07f973ad86032\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"/news/aws-cdk-v2-three-tier-serverless-application/":{"metadata":[{"tagName":"meta","attributes":{"charset":"utf-8"},"content":""},{"tagName":"meta","attributes":{"http-equiv":"X-UA-Compatible","content":"IE=edge"},"content":""},{"tagName":"title","attributes":{},"content":"AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application"},{"tagName":"meta","attributes":{"name":"HandheldFriendly","content":"True"},"content":""},{"tagName":"meta","attributes":{"name":"viewport","content":"width=device-width, initial-scale=1.0"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.googleapis.com"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com","crossorigin":""},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n"},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n"},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"/news/assets/css/global-26e2f3cde9.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/screen-926fddfac2.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/search-bar-124f5f949c.css"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js"},"content":""},{"tagName":"script","attributes":{},"content":"let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));"},{"tagName":"script","attributes":{"data-ad-client":"ca-pub-9482786369113753","src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","crossorigin":"anonymous","async":""},"content":""},{"tagName":"link","attributes":{"rel":"icon","href":"https://cdn.freecodecamp.org/universal/favicons/favicon.ico","type":"image/png"},"content":""},{"tagName":"link","attributes":{"rel":"canonical","href":"https://www.freecodecamp.org/news/aws-cdk-v2-three-tier-serverless-application/"},"content":""},{"tagName":"meta","attributes":{"name":"referrer","content":"no-referrer-when-downgrade"},"content":""},{"tagName":"meta","attributes":{"name":"description","content":"A three-tier web application has a presentation layer, an application layer, and a database layer. This familiar pattern is fertile ground for learning new technologies like the AWS Cloud Development Kit (CDK). In this tutorial, we will create a simple note-taking application using a DynamoDB table, HTTP API endpoints, Lambda"},"content":""},{"tagName":"meta","attributes":{"property":"og:site_name","content":"freeCodeCamp.org"},"content":""},{"tagName":"meta","attributes":{"property":"og:type","content":"article"},"content":""},{"tagName":"meta","attributes":{"property":"og:title","content":"AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application"},"content":""},{"tagName":"meta","attributes":{"property":"og:description","content":"A three-tier web application has a presentation layer, an application layer, and a database layer. This familiar pattern is fertile ground for learning new technologies like the AWS Cloud Development Kit (CDK). In this tutorial, we will create a simple note-taking application using a DynamoDB table, HTTP API endpoints, Lambda"},"content":""},{"tagName":"meta","attributes":{"property":"og:url","content":"https://www.freecodecamp.org/news/aws-cdk-v2-three-tier-serverless-application/"},"content":""},{"tagName":"meta","attributes":{"property":"og:image","content":"https://www.freecodecamp.org/news/content/images/2021/12/three-tier-1.jpeg"},"content":""},{"tagName":"meta","attributes":{"property":"article:published_time","content":"2021-12-25T21:32:22.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:modified_time","content":"2021-12-28T23:47:00.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"AWS"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Serverless"},"content":""},{"tagName":"meta","attributes":{"property":"article:publisher","content":"https://www.facebook.com/freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:card","content":"summary_large_image"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:title","content":"AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:description","content":"A three-tier web application has a presentation layer, an application layer, and a database layer. This familiar pattern is fertile ground for learning new technologies like the AWS Cloud Development Kit (CDK). In this tutorial, we will create a simple note-taking application using a DynamoDB table, HTTP API endpoints, Lambda"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:url","content":"https://www.freecodecamp.org/news/aws-cdk-v2-three-tier-serverless-application/"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:image","content":"https://www.freecodecamp.org/news/content/images/2021/12/three-tier-1.jpeg"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label1","content":"Written by"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data1","content":"Matt Morgan"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label2","content":"Filed under"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data2","content":"AWS, Serverless"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:site","content":"@freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:creator","content":"@NullishCoalesce"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:width","content":"611"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:height","content":"325"},"content":""},{"tagName":"script","attributes":{"type":"application/ld+json"},"content":"{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/12/three-tier-1.jpeg\",\n\t\t\"width\": 611,\n\t\t\"height\": 325\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/aws-cdk-v2-three-tier-serverless-application/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2021-12-25T21:32:22.000Z\",\n\t\"dateModified\": \"2021-12-28T23:47:00.000Z\",\n\t\"keywords\": \"AWS, Serverless\",\n\t\"description\": \"A three-tier web application has a presentation layer, an application layer, and\\na database layer.\\n\\nThis familiar pattern is fertile ground for learning new technologies like the\\nAWS Cloud Development Kit (CDK).\\n\\nIn this tutorial, we will create a simple note-taking application using a\\nDynamoDB table, HTTP API endpoints, Lambda handlers, and a frontend React\\napplication with the CloudFront Content Delivery Network (CDN).\\n\\nAll of this can be deployed to an AWS account using a single command. And \",\n\t\"headline\": \"AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Matt Morgan\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/matt-morgan/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://mattmorgan.cloud\",\n\t\t\t\"https://twitter.com/NullishCoalesce\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg\",\n\t\t\t\"width\": 577,\n\t\t\t\"height\": 800\n\t\t}\n\t}\n}"},{"tagName":"meta","attributes":{"name":"generator","content":"Eleventy"},"content":""},{"tagName":"link","attributes":{"rel":"alternate","type":"application/rss+xml","title":"freeCodeCamp.org","href":"https://www.freecodecamp.org/news/rss/"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com"},"content":""},{"tagName":"script","attributes":{},"content":"\nwindow.dataLayer = window.dataLayer || [];\n"},{"tagName":"script","attributes":{},"content":"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');"},{"tagName":"meta","attributes":{"name":"google-site-verification","content":"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E"},"content":""},{"tagName":"meta","attributes":{"name":"x-fcc-source","data-test-label":"x-fcc-source","content":"Ghost"},"content":""}],"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/aws-cdk-v2-three-tier-serverless-application/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"A three-tier web application has a presentation layer, an application layer, and a database layer. This familiar pattern is fertile ground for learning new technologies like the AWS Cloud Development Kit (CDK). In this tutorial, we will create a simple note-taking application using a DynamoDB table, HTTP API endpoints, Lambda\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application\">\n    \n        <meta property=\"og:description\" content=\"A three-tier web application has a presentation layer, an application layer, and a database layer. This familiar pattern is fertile ground for learning new technologies like the AWS Cloud Development Kit (CDK). In this tutorial, we will create a simple note-taking application using a DynamoDB table, HTTP API endpoints, Lambda\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/aws-cdk-v2-three-tier-serverless-application/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2021/12/three-tier-1.jpeg\">\n    <meta property=\"article:published_time\" content=\"2021-12-25T21:32:22.000Z\">\n    <meta property=\"article:modified_time\" content=\"2021-12-28T23:47:00.000Z\">\n    \n        <meta property=\"article:tag\" content=\"AWS\">\n    \n        <meta property=\"article:tag\" content=\"Serverless\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application\">\n    \n        <meta name=\"twitter:description\" content=\"A three-tier web application has a presentation layer, an application layer, and a database layer. This familiar pattern is fertile ground for learning new technologies like the AWS Cloud Development Kit (CDK). In this tutorial, we will create a simple note-taking application using a DynamoDB table, HTTP API endpoints, Lambda\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/aws-cdk-v2-three-tier-serverless-application/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2021/12/three-tier-1.jpeg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Matt Morgan\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"AWS, Serverless\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@NullishCoalesce\">\n    \n\n    <meta property=\"og:image:width\" content=\"611\">\n    <meta property=\"og:image:height\" content=\"325\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/12/three-tier-1.jpeg\",\n\t\t\"width\": 611,\n\t\t\"height\": 325\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/aws-cdk-v2-three-tier-serverless-application/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2021-12-25T21:32:22.000Z\",\n\t\"dateModified\": \"2021-12-28T23:47:00.000Z\",\n\t\"keywords\": \"AWS, Serverless\",\n\t\"description\": \"A three-tier web application has a presentation layer, an application layer, and\\na database layer.\\n\\nThis familiar pattern is fertile ground for learning new technologies like the\\nAWS Cloud Development Kit (CDK).\\n\\nIn this tutorial, we will create a simple note-taking application using a\\nDynamoDB table, HTTP API endpoints, Lambda handlers, and a frontend React\\napplication with the CloudFront Content Delivery Network (CDN).\\n\\nAll of this can be deployed to an AWS account using a single command. And \",\n\t\"headline\": \"AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Matt Morgan\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/matt-morgan/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://mattmorgan.cloud\",\n\t\t\t\"https://twitter.com/NullishCoalesce\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg\",\n\t\t\t\"width\": 577,\n\t\t\t\"height\": 800\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Sat Dec 25 2021 21:32:22 GMT+0000 (Coordinated Universal Time)\">\n                            December 25, 2021\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/aws/\">\n                                #AWS\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg\" class=\"author-profile-image\" alt=\"Matt Morgan\" width=\"577\" height=\"800\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/matt-morgan/\" data-test-label=\"profile-link\">\n                    \n                        Matt Morgan\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2021/12/three-tier-1.jpeg 300w, https://www.freecodecamp.org/news/content/images/size/w600/2021/12/three-tier-1.jpeg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/12/three-tier-1.jpeg 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2021/12/three-tier-1.jpeg 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2021/12/three-tier-1.jpeg\" alt=\"AWS CDK v2 Tutorial – How to Create a Three-Tier Serverless Application\" ,=\"\" width=\"611\" height=\"325\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>A three-tier web application has a presentation layer, an application layer, and a database layer.</p>\n<p>This familiar pattern is fertile ground for learning new technologies like the AWS Cloud Development Kit (CDK).</p>\n<p>In this tutorial, we will create a simple note-taking application using a DynamoDB table, HTTP API endpoints, Lambda handlers, and a frontend React application with the CloudFront Content Delivery Network (CDN).</p>\n<p>All of this can be deployed to an AWS account using a single command. And all of it will be written in TypeScript.</p>\n<p>The source code for this tutorial is available on <a href=\"https://github.com/elthrasher/cdk-three-tier-serverless\">GitHub</a>.</p>\n<h3 id=\"howtogetawsaccountcredentials\">How to get AWS Account Credentials</h3>\n<p>To begin with, we will need an AWS account and credentials available in our command line. All the resources deployed in this tutorial should remain in the free tier of use, however a credit card is still required to sign up for an AWS account.</p>\n<p>If you don't yet have an AWS account, <a href=\"https://acloudguru.com/videos/acg-fundamentals/how-to-create-an-aws-account\">here</a> is a good resource for doing so safely and with best practices in mind.</p>\n<p>Newcomers to AWS may also wish to check out the <a href=\"https://cdkworkshop.com/\">CDK Workshop</a>, in particular, the part about creating an <a href=\"https://cdkworkshop.com/15-prerequisites/200-account.html\">AWS account and user</a>.</p>\n<h3 id=\"otherprerequisites\">Other Prerequisites</h3>\n<p>When working with AWS, it is a good idea to install the <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html\">AWS CLI</a>. You will also need to have a recent version of <a href=\"https://nodejs.org/en/\">Node.js</a> installed.</p>\n<h2 id=\"howtoinitializetheapplication\">How to Initialize the Application</h2>\n<p>To get started, we can use the cdk command-line utility to scaffold an application.</p>\n<ol>\n<li><code>mkdir cdk-three-tier-serverless &amp;&amp; cd cdk-three-tier-serverless</code></li>\n<li><code>npx cdk init app --language=typescript</code></li>\n</ol>\n<p>This will create some files to get us started and download the necessary dependencies.</p>\n<h3 id=\"cdkv1vsv2whatisthedifference\">CDK v1 vs v2 – What is the Difference?</h3>\n<p>AWS CDK v2 was made <a href=\"https://aws.amazon.com/about-aws/whats-new/2021/12/aws-cloud-development-kit-cdk-generally-available/\">generally available</a> in December 2021. AWS has announced that v1 will <a href=\"https://docs.aws.amazon.com/cdk/v1/guide/home.html\">enter a maintenance phase and eventually end support for v1</a> in June of 2023. The primary difference between v1 and v2 is that v2 does a better job of managing dependencies. Published constructs built for v1 will need to be updated before they can work in v2 applications.</p>\n<h3 id=\"whatisprojenoptional\">What is Projen? (Optional)</h3>\n<p><a href=\"https://github.com/projen/projen\">Projen</a> is popular in the CDK community as an alternative to <code>cdk init</code>. To avoid introducing too many concepts, this tutorial doesn't use projen but you could create a very similar application by starting with <code>npx projen new awscdk-app-ts</code>.</p>\n<h2 id=\"howtobootstrapyourawsaccount\">How to Bootstrap Your AWS Account</h2>\n<p>In order to use our AWS account with AWS CDK, we must first bootstrap the account by deploying a simple stack to manage our assets in the account.</p>\n<p>You can do this by entering <code>npx cdk bootstrap</code> at the command line. It's best to do this <em>after</em> initializing a project or the bootstrap will ask for additional information. If the bootstrap is successful, we are ready to continue building our application, otherwise, we should refer to the <a href=\"https://docs.aws.amazon.com/cdk/v2/guide/bootstrapping.html\">official documentation</a> for troubleshooting advice.</p>\n<h3 id=\"howtobootstrapawsrolesoptional\">How to Bootstrap AWS Roles (optional)</h3>\n<p>The bootstrap will create several roles that can be used to deploy, manage assets and look up resource Amazon Resource Names (ARNs). Although you can complete this tutorial with a user that has the AdministratorAccess policy, that is not a best practice.</p>\n<p>If we look up the ARNs of the roles created by the bootstrap, we can construct a fine-grained policy and apply it to a new user.</p>\n<p>The policy we create might look something like this. See the <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html\">official docs</a> on creating IAM users.</p>\n<pre><code class=\"language-json\">{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"assumecdkroles\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"sts:AssumeRole\",\n                \"iam:PassRole\"\n            ],\n            \"Resource\": [\n                \"arn:aws:iam::1234567890:role/cdk-abc123-deploy-role-1234567890-us-east-1\",\n                \"arn:aws:iam::1234567890:role/cdk-abc123-file-publishing-role-1234567890-us-east-1\",\n                \"arn:aws:iam::1234567890:role/cdk-abc123-image-publishing-role-1234567890-us-east-1\",\n                \"arn:aws:iam::1234567890:role/cdk-abc123-lookup-role-1234567890-us-east-1\"\n            ]\n        }\n    ]\n}\n</code></pre>\n<p>A policy like that in an account that also has MFA and root access locked down should provide a reasonable degree of safety for learners. Enterprise users will want to think about setting up <a href=\"https://aws.amazon.com/single-sign-on/\">AWS SSO</a> and an <a href=\"https://github.com/aws-samples/aws-bootstrap-kit-examples/blob/main/source/1-SDLC-organization/README.md\">AWS Organization</a>.</p>\n<h2 id=\"howtobuildoutthedatatier\">How to Build Out The Data Tier</h2>\n<p>We'll start by building out the data tier. We'll be able to deploy our application each step of the way and check our progress in the AWS Console.</p>\n<h3 id=\"howtocreateadynamodbtable\">How to Create a DynamoDB Table</h3>\n<p>The init operation will have created a file called cdk-three-tier-serverless-stack.ts. We can start there to build out our application. First let's remove the commented code and add a Table declaration. Note that, unlike CDK v1 applications, there's no need to install additional packages to start using DynamoDB.</p>\n<pre><code class=\"language-TypeScript\">import { RemovalPolicy, Stack, StackProps } from 'aws-cdk-lib';\nimport { AttributeType, BillingMode, Table } from 'aws-cdk-lib/aws-dynamodb';\nimport { Construct } from 'constructs';\n\nexport class CdkThreeTierServerlessStack extends Stack {\n  constructor(scope: Construct, id: string, props?: StackProps) {\n    super(scope, id, props);\n\n    const table = new Table(this, 'NotesTable', {\n      billingMode: BillingMode.PAY_PER_REQUEST,\n      partitionKey: { name: 'pk', type: AttributeType.STRING },\n      removalPolicy: RemovalPolicy.DESTROY,\n      sortKey: { name: 'sk', type: AttributeType.STRING },\n      tableName: 'NotesTable',\n    });\n  }\n}\n</code></pre>\n<p>We can immediately deploy this table using <code>npx cdk deploy</code> and then inspect it in the console.</p>\n<p><img src=\"https://www.freecodecamp.org/news/content/images/2021/12/Screen-Shot-2021-12-23-at-2.30.20-PM.png\" alt=\"NotesTable\" width=\"1079\" height=\"387\" loading=\"lazy\"></p>\n<h3 id=\"howtomodeldatausingawsdynamodbonetable\">How to Model Data using AWS DynamoDB OneTable</h3>\n<p><a href=\"https://github.com/sensedeep/dynamodb-onetable\">OneTable</a> is a tool for managing DynamoDB queries. The concept behind it is that several different entities can be modeled in the same DynamoDB table, a practice endorsed by many experts in the field.</p>\n<p>In our simple application, we'll just have the single entity notes, but we'll use OneTable anyway because it will help manage our schema. Since DynamoDB is a NoSQL database, the schema isn't defined at table creation and instead, we'll define it in application code.</p>\n<p>To begin, we need to install dependencies.</p>\n<pre><code class=\"language-bash\">npm i @aws-sdk/client-dynamodb dynamodb-onetable\n</code></pre>\n<p>We're going to create two Lambda functions in a moment and we'll want to share a model between them. We can organize the code any way we like. Let's create a \"fns\" folder under lib and create files called notesTable.ts, readFunction.ts and writeFunction.ts.</p>\n<p><img src=\"https://www.freecodecamp.org/news/content/images/2021/12/Screen-Shot-2021-12-12-at-11.00.58-AM-2.png\" alt=\"project layout\" width=\"174\" height=\"117\" loading=\"lazy\"></p>\n<p>We can define a schema in notesTable.ts.</p>\n<pre><code class=\"language-TypeScript\">import { DynamoDBClient } from '@aws-sdk/client-dynamodb';\nimport { Entity, Table } from 'dynamodb-onetable';\nimport Dynamo from 'dynamodb-onetable/Dynamo';\n\nconst client = new Dynamo({ client: new DynamoDBClient({}) });\n\nconst schema = {\n  indexes: {\n    primary: {\n      hash: 'pk',\n      sort: 'sk',\n    },\n  },\n  models: {\n    note: {\n      type: {\n        required: true,\n        type: 'string',\n        value: 'note',\n      },\n      pk: {\n        type: 'string',\n        value: 'note',\n      },\n      sk: {\n        type: 'string',\n        value: '${date}',\n      },\n      note: {\n        required: true,\n        type: 'string',\n      },\n      date: {\n        required: true,\n        type: 'string',\n      },\n      subject: {\n        required: true,\n        type: 'string',\n      },\n    },\n  },\n  version: '0.1.0',\n  params: {\n    typeField: 'type',\n  },\n  format: 'onetable:1.0.0',\n} as const;\n\nexport type NoteType = Entity&lt;typeof schema.models.note&gt;;\n\nconst table = new Table({\n  client,\n  name: 'NotesTable',\n  schema,\n  timestamps: true,\n});\n\nexport const Notes = table.getModel&lt;NoteType&gt;('note');\n</code></pre>\n<p>We're defining the properties of \"type\", \"subject\", \"note\" and \"date\" for the model. All of these will have the string type. We're also going to indicate that the partition key will be always set to \"note\". This is fine for a small sample application, but for something larger, it would make sense to use a value like a user id or account id based on the kinds of queries or access patterns the application requires.</p>\n<p>The sort key and date field will have exactly the same data in them. This data duplication is a best practice because it will allow us to have different kinds of entities in our table and some of them may not be sorted by date.</p>\n<h2 id=\"theapplicationtier\">The Application Tier</h2>\n<p>Our application tier will consist of some Lambda functions and an API Gateway to connect them to the Internet.</p>\n<h3 id=\"lambdahandlers\">Lambda Handlers</h3>\n<p>We will now fill in our Lambda handlers. We can add extra typings to make it easier to work in a TypeScript environment.</p>\n<pre><code class=\"language-bash\">npm i -D @types/aws-lambda\n</code></pre>\n<p>Thanks to OneTable extracting away a lot of the complexity of dealing with DynamoDB, our Lambda handlers are quite simple. Our read function executes a find operation and returns the result.</p>\n<pre><code class=\"language-TypeScript\">import type { APIGatewayProxyResultV2 } from 'aws-lambda';\n\nimport { Notes } from './notesTable';\n\nexport const handler = async (): Promise&lt;APIGatewayProxyResultV2&gt; =&gt; {\n  const notes = await Notes.find({ pk: 'note' }, { limit: 10, reverse: true });\n  return { body: JSON.stringify(notes), statusCode: 200 };\n};\n</code></pre>\n<p>Adding the limit and reverse parameters means the query will return the ten most recent notes, automatically sorted by the sort key.</p>\n<p>Our write function is similarly quite simple.</p>\n<pre><code class=\"language-TypeScript\">import type {\n  APIGatewayProxyEventV2,\n  APIGatewayProxyResultV2,\n} from 'aws-lambda';\n\nimport { Notes } from './notesTable';\n\nexport const handler = async (\n  event: APIGatewayProxyEventV2\n): Promise&lt;APIGatewayProxyResultV2&gt; =&gt; {\n  const body = event.body;\n  if (body) {\n    const notes = await Notes.create(JSON.parse(body));\n    return { body: JSON.stringify(notes), statusCode: 200 };\n  }\n  return { body: 'Error, invalid input!', statusCode: 400 };\n};\n</code></pre>\n<h3 id=\"thenodejsfunctionconstruct\">The NodejsFunction Construct</h3>\n<p>Returning to our stack, we now need to create the function constructs. Our Lambda functions will be written in TypeScript and thus will require a transpilation step before they can run in the Lambda runtime.</p>\n<p>Fortunately, the CDK provides a NodejsFunction construct that will take care of this for us. NodejsFunction uses <a href=\"https://esbuild.github.io/\">esbuild</a>, a very fast transpiler. esbuild is not a direct dependency of CDK, so we'll need to install it to avoid the slower fallback, which builds in Docker.</p>\n<p>npm i -D esbuild</p>\n<p>Now we can add the constructs to our stack.</p>\n<pre><code class=\"language-TypeScript\">import { RemovalPolicy, Stack, StackProps } from 'aws-cdk-lib';\nimport { AttributeType, BillingMode, Table } from 'aws-cdk-lib/aws-dynamodb';\nimport { Architecture } from 'aws-cdk-lib/aws-lambda';\nimport { NodejsFunction } from 'aws-cdk-lib/aws-lambda-nodejs';\nimport { RetentionDays } from 'aws-cdk-lib/aws-logs';\nimport { Construct } from 'constructs';\n\nexport class CdkThreeTierServerlessStack extends Stack {\n  constructor(scope: Construct, id: string, props?: StackProps) {\n    super(scope, id, props);\n\n    const table = new Table(this, 'NotesTable', {\n      billingMode: BillingMode.PAY_PER_REQUEST,\n      partitionKey: { name: 'pk', type: AttributeType.STRING },\n      removalPolicy: RemovalPolicy.DESTROY,\n      sortKey: { name: 'sk', type: AttributeType.STRING },\n      tableName: 'NotesTable',\n    });\n\n    const readFunction = new NodejsFunction(this, 'ReadNotesFn', {\n      architecture: Architecture.ARM_64,\n      entry: `${__dirname}/fns/readFunction.ts`,\n      logRetention: RetentionDays.ONE_WEEK,\n    });\n\n    const writeFunction = new NodejsFunction(this, 'WriteNoteFn', {\n      architecture: Architecture.ARM_64,\n      entry: `${__dirname}/fns/writeFunction.ts`,\n      logRetention: RetentionDays.ONE_WEEK,\n    });\n  }\n}\n</code></pre>\n<p>Our list of imports is growing, but all of them were installed along with aws-cdk-lib, so there's no worry about versioning. One more thing we'll need is to grant permissions to our functions to access the table.</p>\n<pre><code class=\"language-TypeScript\">    table.grantReadData(readFunction);\n\n    table.grantWriteData(writeFunction);\n</code></pre>\n<p>All of this can be deployed at this stage. While our functions won't be accessible over the Internet, they could be executed from the AWS Console.</p>\n<p>Lambda functions should be unit tested! Writing tests will be beyond the scope of this tutorial, but you can see some tests in the <a href=\"https://github.com/elthrasher/cdk-three-tier-serverless/tree/main/lib/fns\">source repo</a>.</p>\n<h3 id=\"httpapi\">HTTP API</h3>\n<p>We'll build our user-facing API using AWS API Gateway HTTP API. HTTP API is a lower-cost alternative to REST API. The CDK construct for HTTP API is still experimental, so we'll need to install additional modules to use it.</p>\n<pre><code class=\"language-bash\">npm i @aws-cdk/aws-apigatewayv2-alpha @aws-cdk/aws-apigatewayv2-integrations-alpha\n</code></pre>\n<p>Then we can import the necessary classes into our stack.</p>\n<pre><code class=\"language-TypeScript\">import {\n  CorsHttpMethod,\n  HttpApi,\n  HttpMethod,\n} from '@aws-cdk/aws-apigatewayv2-alpha';\nimport { HttpLambdaIntegration } from '@aws-cdk/aws-apigatewayv2-integrations-alpha';\n</code></pre>\n<p>To create the HTTP API, we will need the base construct with a CORS configuration, since our view will be served from a CloudFront domain. Then we create integration constructs and finally add the routes.</p>\n<pre><code class=\"language-TypeScript\">    const api = new HttpApi(this, 'NotesApi', {\n      corsPreflight: {\n        allowHeaders: ['Content-Type'],\n        allowMethods: [CorsHttpMethod.GET, CorsHttpMethod.POST],\n        allowOrigins: ['*'],\n      },\n    });\n\n    const readIntegration = new HttpLambdaIntegration(\n      'ReadIntegration',\n      readFunction\n    );\n\n    const writeIntegration = new HttpLambdaIntegration(\n      'WriteIntegration',\n      writeFunction\n    );\n\n    api.addRoutes({\n      integration: readIntegration,\n      methods: [HttpMethod.GET],\n      path: '/notes',\n    });\n\n    api.addRoutes({\n      integration: writeIntegration,\n      methods: [HttpMethod.POST],\n      path: '/notes',\n    });\n</code></pre>\n<p>API Gateway will automatically generate a URL for our endpoint. We could apply a custom domain, but that would cost something, so we'll use the generated URL for now. It's desirable to output that from our stack so we don't need to look it up on the console. We can add CfnOutput to our aws-cdk-lib imports and one more line to our stack.</p>\n<pre><code class=\"language-TypeScript\">new CfnOutput(this, 'HttpApiUrl', { value: api.apiEndpoint });\n</code></pre>\n<p>Now let's deploy it again with <code>npx cdk deploy</code>. We'll be rewarded with output that looks something like this.</p>\n<p>Outputs:</p>\n<p>CdkThreeTierServerlessStack.HttpApiUrl = <a href=\"https://g50qzchav1.execute-api.us-east-1.amazonaws.com\">https://g50qzchav1.execute-api.us-east-1.amazonaws.com</a></p>\n<p>We can immediately open <a href=\"https://g50qzchav1.execute-api.us-east-1.amazonaws.com/notes\">https://g50qzchav1.execute-api.us-east-1.amazonaws.com/notes</a> in a web browser and see the working API. Since nothing is in the database yet, we'll just get an empty array back. We could use a REST client and start posting data, but instead, let's build out our user interface.</p>\n<h3 id=\"capturetheapiurl\">Capture the API URL</h3>\n<p>In order to have a nicer developer experience, we can actually store that url in a local config file for use in our project. This can be done by adding the –outputs-file argument to our deploy command. We can add this to our npm scripts to output a config.json.</p>\n<p><img src=\"https://www.freecodecamp.org/news/content/images/2021/12/Screen-Shot-2021-12-12-at-12.20.35-PM.png\" alt=\"npm scripts\" width=\"802\" height=\"166\" loading=\"lazy\"></p>\n<p>It's probably a good idea to add that config.json file to our .gitignore. We won't need it in source control and we'll manage our deployed web application in another way.</p>\n<h2 id=\"thepresentationtier\">The Presentation Tier</h2>\n<p>Lastly let's build out the presentation layer. We'll use React in this tutorial. The presentation layer will be served via a CloudFront Distribution, but it can be built and deployed as part of our CDK application.</p>\n<h3 id=\"reactapp\">React App</h3>\n<p>A cool thing about full-stack TypeScript applications is we can manage all our dependencies in one place. We're going to build a React application in TypeScript. We'll bundle it with esbuild and use <a href=\"https://vitejs.dev/\">vitejs</a>, a nice tool that adds live reload and a few other quality-of-life capabilities to esbuild. Let's add our dependencies and devDependencies. Note that the distinction here is more by convention and this app will probably work just the same whether these are in dependencies or devDependencies.</p>\n<pre><code class=\"language-bash\">npm i react react-dom\nnpm i -D @types/react @types/react-dom @vitejs/plugin-react-refresh vite\n</code></pre>\n<p>By convention, vitejs wants an index.html in the root of the project, so let's add that.</p>\n<pre><code class=\"language-html\">&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta\n      name=\"description\"\n      content=\"Sample Three-tier Serverless Web Application\"\n    /&gt;\n    &lt;meta\n      http-equiv=\"Cache-Control\"\n      content=\"no-cache, no-store, must-revalidate\"\n    /&gt;\n    &lt;meta http-equiv=\"Pragma\" content=\"no-cache\" /&gt;\n    &lt;meta http-equiv=\"Expires\" content=\"0\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;title&gt;Three-tier Serverless Web App&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"root\"&gt;&lt;/div&gt;\n    &lt;script type=\"module\" src=\"/lib/web/main.tsx\"&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The index.html directly refers to a main.tsx. Let's create a new directory under lib called web and add App.tsx, index.css, main.tsx, and utils.ts in that subdirectory.</p>\n<p>Since we're adding React to the project, we need to modify our tsconfig.json adding the following keys and values:</p>\n<pre><code class=\"language-json\">    \"jsx\": \"react\",\n    \"esModuleInterop\": true,\n    \"allowSyntheticDefaultImports\": true\n</code></pre>\n<p>We will also need to add another value to the \"lib\" key in tsconfig.json.</p>\n<pre><code class=\"language-json\">    \"lib\": [\"DOM\", \"es2018\"],\n</code></pre>\n<p>Now let's write that main.tsx. This is the entrypoint for the React application and only needs to invoke another component.</p>\n<pre><code class=\"language-TypeScript\">import './index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  &lt;React.StrictMode&gt;\n    &lt;App /&gt;\n  &lt;/React.StrictMode&gt;,\n  document.getElementById('root')\n);\n</code></pre>\n<p>We can throw together a little css in index.css to get the app started.</p>\n<pre><code class=\"language-css\">body {\n  background-color: darkslategray;\n  color: antiquewhite;\n  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande',\n    'Lucida Sans Unicode', Geneva, Verdana, sans-serif;\n  font-size: 16pt;\n}\n\nbutton {\n  background-color: forestgreen;\n  color: white;\n}\n\ninput,\ntextarea {\n  width: 200px;\n}\n\ntable {\n  border: 1px solid;\n  margin: 20px;\n}\n\ntd {\n  font-size: 12pt;\n  padding: 10px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n</code></pre>\n<p>App.tsx starts to get a bit long and might be better broken into individual components, but React state management is well beyond the scope of this tutorial, so let's keep it simple.</p>\n<pre><code class=\"language-TypeScript\">import React, { useEffect, useState } from 'react';\n\nimport { NoteType } from '../fns/notesTable';\nimport { getNotes, saveNote } from './utils';\n\nconst App = () =&gt; {\n  const [body, setBody] = useState('');\n  const [notes, setNotes] = useState([]);\n  const [subject, setSubject] = useState('');\n  useEffect(() =&gt; {\n    getNotes().then((n) =&gt; setNotes(n));\n  }, []);\n  const clickHandler = async () =&gt; {\n    if (body &amp;&amp; subject) {\n      setBody('');\n      setSubject('');\n      await saveNote({\n        date: new Date().toISOString(),\n        note: body,\n        subject,\n        type: 'note',\n      });\n      const n = await getNotes();\n      setNotes(n);\n    }\n  };\n  return (\n    &lt;div&gt;\n      &lt;div&gt;\n        &lt;div&gt;\n          &lt;input\n            onChange={(e) =&gt; setSubject(e.target.value)}\n            placeholder=\"Note Subject\"\n            type=\"text\"\n            value={subject}\n          /&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n          &lt;textarea\n            onChange={(e) =&gt; setBody(e.target.value)}\n            placeholder=\"Note Body\"\n            value={body}\n          &gt;&lt;/textarea&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n          &lt;button onClick={clickHandler}&gt;save&lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div&gt;\n        &lt;table&gt;\n          &lt;thead&gt;\n            &lt;tr&gt;\n              &lt;th&gt;Subject&lt;/th&gt;\n              &lt;th&gt;Note&lt;/th&gt;\n              &lt;th&gt;Date&lt;/th&gt;\n            &lt;/tr&gt;\n          &lt;/thead&gt;\n          &lt;tbody&gt;\n            {notes.map((note: NoteType) =&gt; (\n              &lt;tr key={note.date}&gt;\n                &lt;td&gt;{note.subject}&lt;/td&gt;\n                &lt;td&gt;{note.note}&lt;/td&gt;\n                &lt;td&gt;{new Date(note.date).toLocaleString()}&lt;/td&gt;\n              &lt;/tr&gt;\n            ))}\n          &lt;/tbody&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default App;\n</code></pre>\n<p>We need to build out our http client in utils.ts. Here we have an extra step where we will fetch that HTTP API url from the config.json file we created earlier. This way we can have a local development environment without needing to copy-paste URLs.</p>\n<pre><code class=\"language-TypeScript\">import { NoteType } from '../fns/notesTable';\n\nlet url = '';\n\nconst getUrl = async () =&gt; {\n  if (url) {\n    return url;\n  }\n  const response = await fetch('./config.json');\n  url = `${(await response.json()).CdkThreeTierServerlessStack.HttpApiUrl}/notes`;\n  return url;\n};\n\nexport const getNotes = async () =&gt; {\n  const result = await fetch(await getUrl());\n\n  return await result.json();\n};\n\nexport const saveNote = async (note: NoteType) =&gt; {\n  await fetch(await getUrl(), {\n    body: JSON.stringify(note),\n    headers: { 'Content-Type': 'application/json' },\n    method: 'POST',\n    mode: 'cors',\n  });\n};\n</code></pre>\n<p>To enable the react-refresh plugin, we can optionally add a vite.config.ts file in the root of our project with the following code.</p>\n<pre><code class=\"language-TypeScript\">import { defineConfig } from 'vite';\nimport reactRefresh from '@vitejs/plugin-react-refresh';\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [reactRefresh()],\n});\n</code></pre>\n<p>All that done, we can start our development server using <code>npx vite</code>, then view the web application on <a href=\"http://localhost:3000\">http://localhost:3000</a>. The server will detect changes and reload if we make changes. We can try saving a few notes and see how that works.</p>\n<p><img src=\"https://www.freecodecamp.org/news/content/images/2021/12/Screen-Shot-2021-12-12-at-1.11.48-PM.png\" alt=\"Note App\" width=\"1422\" height=\"808\" loading=\"lazy\"></p>\n<p>Could perhaps use some styling help, but otherwise, this is working pretty well.</p>\n<h3 id=\"cloudfrontdistribution\">CloudFront Distribution</h3>\n<p>In this section, we'll add several more constructs to cdk-three-tier-serverless-stack.ts. We'll only need one additional dependency. Our stack is starting to get kind of big at this point, but for the sake of this tutorial, we'll keep it all in one module. It's generally a good practice at this point to start thinking about how to break down large modules or stacks, but this deep topic would be best covered in another tutorial or blogpost.</p>\n<p>Our web application will consist of an S3 Bucket for storage, a CloudFront Distribution and build step for the React application and a Custom Resource that will provide our API url to the web application.</p>\n<p>Creating an S3 Bucket in CDK is easy. Note that while S3 websites are possible, this will <strong>not</strong> be an S3 website because we want to use CloudFront for global CDN and https. If we had a custom domain, we'd also want to attach it to our CloudFront Distribution.</p>\n<pre><code class=\"language-TypeScript\">import { BlockPublicAccess, Bucket } from 'aws-cdk-lib/aws-s3';\n\n    const websiteBucket = new Bucket(this, 'WebsiteBucket', {\n      autoDeleteObjects: true,\n      blockPublicAccess: BlockPublicAccess.BLOCK_ALL,\n      removalPolicy: RemovalPolicy.DESTROY,\n    });\n</code></pre>\n<p>We're using <code>autoDeleteObjects</code> and <code>RemovalPolicy.DESTROY</code> here just because this is a tutorial. If you are building a production application, you may want to be more protective of your assets.</p>\n<p>This S3 Bucket has no public access. Instead, we're going to give access via CloudFront Distribution. To do that, we'll need to use the OriginAccessIdentity construct to grant the read access CloudFront will need.</p>\n<pre><code class=\"language-TypeScript\">import {\n  Distribution,\n  OriginAccessIdentity,\n  ViewerProtocolPolicy,\n} from 'aws-cdk-lib/aws-cloudfront';\n\n    const originAccessIdentity = new OriginAccessIdentity(\n      this,\n      'OriginAccessIdentity'\n    );\n    websiteBucket.grantRead(originAccessIdentity);\n</code></pre>\n<p>Then we create the actual Distribution.</p>\n<pre><code class=\"language-TypeScript\">import {\n  Distribution,\n  OriginAccessIdentity,\n  ViewerProtocolPolicy,\n} from 'aws-cdk-lib/aws-cloudfront';\nimport { S3Origin } from 'aws-cdk-lib/aws-cloudfront-origins';\n\n    const distribution = new Distribution(this, 'Distribution', {\n      defaultBehavior: {\n        origin: new S3Origin(websiteBucket, { originAccessIdentity }),\n        viewerProtocolPolicy: ViewerProtocolPolicy.REDIRECT_TO_HTTPS,\n      },\n      defaultRootObject: 'index.html',\n      errorResponses: [\n        {\n          httpStatus: 404,\n          responseHttpStatus: 200,\n          responsePagePath: '/index.html',\n        },\n      ],\n    });\n</code></pre>\n<p>This Distribution is designed for a single-page application like React and will upgrade all traffic to https.</p>\n<p>For the next part, we're going to add one new helper library, fs-extra. This will make it easier to copy our build files around in the application.</p>\n<pre><code class=\"language-bash\">npm i -D @types/fs-extra fs-extra\n</code></pre>\n<p>We're going to use the CDK asset bundling capabilities to build our React application with vitejs and esbuild as part of our stack synthesis process. By default, CDK asset bundling wants to use Docker. Since we are already in a NodeJS runtime, we'll prefer to bypass the slower Docker build and instead use local bundling.</p>\n<pre><code class=\"language-TypeScript\">import {\n  CfnOutput,\n  DockerImage,\n  RemovalPolicy,\n  Stack,\n  StackProps,\n} from 'aws-cdk-lib';\nimport { execSync, ExecSyncOptions } from 'child_process';\nimport { join } from 'path';\nimport { copySync } from 'fs-extra';\n\n    const execOptions: ExecSyncOptions = {\n      stdio: ['ignore', process.stderr, 'inherit'],\n    };\n\n    const bundle = Source.asset(join(__dirname, 'web'), {\n      bundling: {\n        command: [\n          'sh',\n          '-c',\n          'echo \"Docker build not supported. Please install esbuild.\"',\n        ],\n        image: DockerImage.fromRegistry('alpine'),\n        local: {\n          tryBundle(outputDir: string) {\n            try {\n              execSync('esbuild --version', execOptions);\n            } catch {\n              return false;\n            }\n            execSync('npx vite build', execOptions);\n            copySync(join(__dirname, '../dist'), outputDir, {\n              ...execOptions,\n              recursive: true,\n            });\n            return true;\n          },\n        },\n      },\n    });\n</code></pre>\n<p>The bundler will run vite build which puts our transpiled web application under <code>/dist</code>, then it'll copy those files into the CDK staging directory (usually cdk.out).</p>\n<p>We'll round all this out with a BucketDeployment that actually handles shipping our changes to the target S3 Bucket.</p>\n<pre><code class=\"language-TypeScript\">import { BucketDeployment, Source } from 'aws-cdk-lib/aws-s3-deployment';\n\n    new BucketDeployment(this, 'DeployWebsite', {\n      destinationBucket: websiteBucket,\n      distribution,\n      logRetention: RetentionDays.ONE_DAY,\n      prune: false,\n      sources: [bundle],\n    });\n</code></pre>\n<h3 id=\"awscustomresource\">AwsCustomResource</h3>\n<p>All this is pretty good, but we'll still be lacking a config.json file that will help the React application know our HTTP API URL. We could deploy the stack once, generating the file, then bundle it up and ship it, but that means we'd have to deploy twice to stand up our application. It would be better to generate this file on the fly the first time we deploy. We can do that with AwsCustomResource. The Custom Resource will implicitly create a Lambda Function that can receive the generated URL, then make an AWS SDK call to store it in S3 where our Web Application can find it. All of this can be done with just a few lines of code!</p>\n<pre><code class=\"language-TypeScript\">import { AwsCustomResource, AwsCustomResourcePolicy, PhysicalResourceId } from 'aws-cdk-lib/custom-resources';\nimport { PolicyStatement } from 'aws-cdk-lib/aws-iam';\n\n    new AwsCustomResource(this, 'ApiUrlResource', {\n      logRetention: RetentionDays.ONE_DAY,\n      onUpdate: {\n        action: 'putObject',\n        parameters: {\n          Body: Stack.of(this).toJsonString({\n            [this.stackName]: { HttpApiUrl: api.apiEndpoint },\n          }),\n          Bucket: websiteBucket.bucketName,\n          CacheControl: 'max-age=0, no-cache, no-store, must-revalidate',\n          ContentType: 'application/json',\n          Key: 'config.json',\n        },\n        physicalResourceId: PhysicalResourceId.of('config'),\n        service: 'S3',\n      },\n      policy: AwsCustomResourcePolicy.fromStatements([\n        new PolicyStatement({\n          actions: ['s3:PutObject'],\n          resources: [websiteBucket.arnForObjects('config.json')],\n        }),\n      ]),\n    });\n</code></pre>\n<p>One more thing before we deploy again. Now that we have a CloudFront distribution to host our React application, let's add another CfnOutput so we can easily get the URL of that distribution.</p>\n<pre><code class=\"language-TypeScript\">    new CfnOutput(this, 'DistributionDomain', {\n      value: distribution.distributionDomainName,\n    });\n</code></pre>\n<p>Now we can visit the Distribution URL and see our working application! We'll see our existing notes and can add new ones as well!</p>\n<p><img src=\"https://www.freecodecamp.org/news/content/images/2021/12/Screen-Shot-2021-12-12-at-1.51.05-PM.png\" alt=\"Note App\" width=\"1766\" height=\"836\" loading=\"lazy\"></p>\n<h2 id=\"conclusionandnextsteps\">Conclusion and Next Steps</h2>\n<p>If you've come this far and gotten your application working, congratulations! You may wish to add additional functionality such as pagination, authorization, or allow users to update or delete notes. When you're done experimenting, it's a good idea to take the advice given above and execute <code>npx cdk delete</code> to remove the stack and resources to avoid incurring bills.</p>\n<p>We've covered all the steps needed to create a three-tier web application using AWS CDK. Want to learn more about the CDK? Join the community and slack channel on <a href=\"https://cdk.dev/\">https://cdk.dev/</a> and check out <a href=\"https://thecdkbook.com/\">https://thecdkbook.com/</a>, written by CDK community members.</p>\n<p>Like full-stack TypeScript but want to sharpen your skills? Then check out my book <a href=\"https://www.amazon.com/gp/product/B093Y29GW3\">The TypeScript Workshop</a>. Questions or comments about this tutorial, about the CDK, or about TypeScript? Find me on Twitter <a href=\"https://twitter.com/NullishCoalesce\">https://twitter.com/NullishCoalesce</a> or at <a href=\"https://mattmorgan.cloud\">https://mattmorgan.cloud</a>.</p>\n<!--kg-card-end: markdown-->\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/12/PXL_20201015_012709783.PORTRAIT-01.COVER--1-.jpg\" class=\"author-profile-image\" alt=\"Matt Morgan\" width=\"577\" height=\"800\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/matt-morgan/\" data-test-label=\"profile-link\">\n                    \n                        Matt Morgan\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Director of Engineering, CommentSold - co-author The TypeScript Workshop https://www.amazon.com/gp/product/B093Y29GW3 - AWS Community Builder</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"AWS%20CDK%20v2%20Tutorial%20%E2%80%93%20How%20to%20Create%20a%20Three-Tier%20Serverless%20Application\".replace(/&#39;/g,\"%27\"),o=\"\",r=\"@NullishCoalesce\",i=Boolean(\"\");let a;if(i&&(o||r)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Matt Morgan\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${r||t.currentPostAuthor} for translating it.`)}else!i&&r&&(a=encodeURIComponent(`Thank you ${r} for writing this helpful article.`));const l=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",l)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac07f973adc6032\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"}}}