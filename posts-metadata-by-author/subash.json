{"https://www.freecodecamp.org/news/author/subash/":{"https://www.freecodecamp.org//news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/":{"metadata":[{"tagName":"meta","attributes":{"charset":"utf-8"},"content":""},{"tagName":"meta","attributes":{"http-equiv":"X-UA-Compatible","content":"IE=edge"},"content":""},{"tagName":"title","attributes":{},"content":"How to Set Up Continuous Integration for a Monorepo Using Buildkite"},{"tagName":"meta","attributes":{"name":"HandheldFriendly","content":"True"},"content":""},{"tagName":"meta","attributes":{"name":"viewport","content":"width=device-width, initial-scale=1.0"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.googleapis.com"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com","crossorigin":""},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n"},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n"},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"/news/assets/css/global-26e2f3cde9.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/screen-926fddfac2.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/search-bar-124f5f949c.css"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js"},"content":""},{"tagName":"script","attributes":{},"content":"let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));"},{"tagName":"script","attributes":{"data-ad-client":"ca-pub-9482786369113753","src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","crossorigin":"anonymous","async":""},"content":""},{"tagName":"link","attributes":{"rel":"icon","href":"https://cdn.freecodecamp.org/universal/favicons/favicon.ico","type":"image/png"},"content":""},{"tagName":"link","attributes":{"rel":"canonical","href":"https://www.freecodecamp.org/news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/"},"content":""},{"tagName":"meta","attributes":{"name":"referrer","content":"no-referrer-when-downgrade"},"content":""},{"tagName":"meta","attributes":{"name":"description","content":"A monorepo is a single repository that holds all the code and multiple projects in a single Git repository.  This setup is quite nice to work with because of its flexibility and ability to manage various services and frontends in one single repository. It also eliminates the hassle of"},"content":""},{"tagName":"meta","attributes":{"property":"og:site_name","content":"freeCodeCamp.org"},"content":""},{"tagName":"meta","attributes":{"property":"og:type","content":"article"},"content":""},{"tagName":"meta","attributes":{"property":"og:title","content":"How to Set Up Continuous Integration for a Monorepo Using Buildkite"},"content":""},{"tagName":"meta","attributes":{"property":"og:description","content":"A monorepo is a single repository that holds all the code and multiple projects in a single Git repository.  This setup is quite nice to work with because of its flexibility and ability to manage various services and frontends in one single repository. It also eliminates the hassle of"},"content":""},{"tagName":"meta","attributes":{"property":"og:url","content":"https://www.freecodecamp.org/news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/"},"content":""},{"tagName":"meta","attributes":{"property":"og:image","content":"https://www.freecodecamp.org/news/content/images/2021/03/cover-1.jpeg"},"content":""},{"tagName":"meta","attributes":{"property":"article:published_time","content":"2021-04-02T20:33:51.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:modified_time","content":"2021-04-02T20:33:51.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Continuous Integration"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"monorepo"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"AWS"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Github"},"content":""},{"tagName":"meta","attributes":{"property":"article:publisher","content":"https://www.facebook.com/freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:card","content":"summary_large_image"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:title","content":"How to Set Up Continuous Integration for a Monorepo Using Buildkite"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:description","content":"A monorepo is a single repository that holds all the code and multiple projects in a single Git repository.  This setup is quite nice to work with because of its flexibility and ability to manage various services and frontends in one single repository. It also eliminates the hassle of"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:url","content":"https://www.freecodecamp.org/news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:image","content":"https://www.freecodecamp.org/news/content/images/2021/03/cover-1.jpeg"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label1","content":"Written by"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data1","content":"subash adhikari"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label2","content":"Filed under"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data2","content":"Continuous Integration, monorepo, AWS, Github"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:site","content":"@freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:creator","content":"@adikari"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:width","content":"1400"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:height","content":"830"},"content":""},{"tagName":"script","attributes":{"type":"application/ld+json"},"content":"{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/03/cover-1.jpeg\",\n\t\t\"width\": 1400,\n\t\t\"height\": 830\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2021-04-02T20:33:51.000Z\",\n\t\"dateModified\": \"2021-04-02T20:33:51.000Z\",\n\t\"keywords\": \"Continuous Integration, monorepo, AWS, Github\",\n\t\"description\": \"A monorepo is a single repository that holds all the code and multiple projects\\nin a single Git repository. \\n\\nThis setup is quite nice to work with because of its flexibility and ability to\\nmanage various services and frontends in one single repository. It also\\neliminates the hassle of tracking changes in multiple repositories and updating\\ndependencies as projects change.\\n\\nOn the other hand, monorepos also come with their challenges, specifically as\\nrelates to Continuous Integration. As individu\",\n\t\"headline\": \"How to Set Up Continuous Integration for a Monorepo Using Buildkite\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"subash adhikari\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/subash/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://subash.tech\",\n\t\t\t\"https://twitter.com/adikari\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/05/subash-adhikari-gravatar.jpeg\",\n\t\t\t\"width\": 250,\n\t\t\t\"height\": 250\n\t\t}\n\t}\n}"},{"tagName":"meta","attributes":{"name":"generator","content":"Eleventy"},"content":""},{"tagName":"link","attributes":{"rel":"alternate","type":"application/rss+xml","title":"freeCodeCamp.org","href":"https://www.freecodecamp.org/news/rss/"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com"},"content":""},{"tagName":"script","attributes":{},"content":"\nwindow.dataLayer = window.dataLayer || [];\n"},{"tagName":"script","attributes":{},"content":"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');"},{"tagName":"meta","attributes":{"name":"google-site-verification","content":"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E"},"content":""},{"tagName":"meta","attributes":{"name":"x-fcc-source","data-test-label":"x-fcc-source","content":"Ghost"},"content":""}],"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>How to Set Up Continuous Integration for a Monorepo Using Buildkite</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"A monorepo is a single repository that holds all the code and multiple projects in a single Git repository.  This setup is quite nice to work with because of its flexibility and ability to manage various services and frontends in one single repository. It also eliminates the hassle of\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"How to Set Up Continuous Integration for a Monorepo Using Buildkite\">\n    \n        <meta property=\"og:description\" content=\"A monorepo is a single repository that holds all the code and multiple projects in a single Git repository.  This setup is quite nice to work with because of its flexibility and ability to manage various services and frontends in one single repository. It also eliminates the hassle of\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2021/03/cover-1.jpeg\">\n    <meta property=\"article:published_time\" content=\"2021-04-02T20:33:51.000Z\">\n    <meta property=\"article:modified_time\" content=\"2021-04-02T20:33:51.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Continuous Integration\">\n    \n        <meta property=\"article:tag\" content=\"monorepo\">\n    \n        <meta property=\"article:tag\" content=\"AWS\">\n    \n        <meta property=\"article:tag\" content=\"Github\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"How to Set Up Continuous Integration for a Monorepo Using Buildkite\">\n    \n        <meta name=\"twitter:description\" content=\"A monorepo is a single repository that holds all the code and multiple projects in a single Git repository.  This setup is quite nice to work with because of its flexibility and ability to manage various services and frontends in one single repository. It also eliminates the hassle of\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2021/03/cover-1.jpeg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"subash adhikari\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Continuous Integration, monorepo, AWS, Github\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@adikari\">\n    \n\n    <meta property=\"og:image:width\" content=\"1400\">\n    <meta property=\"og:image:height\" content=\"830\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/03/cover-1.jpeg\",\n\t\t\"width\": 1400,\n\t\t\"height\": 830\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-set-up-continuous-integration-for-monorepo-using-buildkite/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2021-04-02T20:33:51.000Z\",\n\t\"dateModified\": \"2021-04-02T20:33:51.000Z\",\n\t\"keywords\": \"Continuous Integration, monorepo, AWS, Github\",\n\t\"description\": \"A monorepo is a single repository that holds all the code and multiple projects\\nin a single Git repository. \\n\\nThis setup is quite nice to work with because of its flexibility and ability to\\nmanage various services and frontends in one single repository. It also\\neliminates the hassle of tracking changes in multiple repositories and updating\\ndependencies as projects change.\\n\\nOn the other hand, monorepos also come with their challenges, specifically as\\nrelates to Continuous Integration. As individu\",\n\t\"headline\": \"How to Set Up Continuous Integration for a Monorepo Using Buildkite\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"subash adhikari\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/subash/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://subash.tech\",\n\t\t\t\"https://twitter.com/adikari\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/05/subash-adhikari-gravatar.jpeg\",\n\t\t\t\"width\": 250,\n\t\t\t\"height\": 250\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Fri Apr 02 2021 20:33:51 GMT+0000 (Coordinated Universal Time)\">\n                            April 2, 2021\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/continuous-integration/\">\n                                #Continuous Integration\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">How to Set Up Continuous Integration for a Monorepo Using Buildkite</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/05/subash-adhikari-gravatar.jpeg 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/05/subash-adhikari-gravatar.jpeg\" class=\"author-profile-image\" alt=\"subash adhikari\" width=\"250\" height=\"250\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/subash/\" data-test-label=\"profile-link\">\n                    \n                        subash adhikari\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2021/03/cover-1.jpeg 300w, https://www.freecodecamp.org/news/content/images/size/w600/2021/03/cover-1.jpeg 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/cover-1.jpeg 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2021/03/cover-1.jpeg 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2021/03/cover-1.jpeg\" alt=\"How to Set Up Continuous Integration for a Monorepo Using Buildkite\" ,=\"\" width=\"1400\" height=\"830\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>A monorepo is a single repository that holds all the code and multiple projects in a single Git repository. </p><p>This setup is quite nice to work with because of its flexibility and ability to manage various services and frontends in one single repository. It also eliminates the hassle of tracking changes in multiple repositories and updating dependencies as projects change.</p><p>On the other hand, monorepos also come with their challenges, specifically as relates to Continuous Integration. As individual sub-projects within the monorepo change, we need to identify which sub-projects changed to build and deploy them. </p><p>This post will serve as a step by step guide to:</p><ol><li>Configure Continuous Integration for monorepos in Bulidkite.</li><li>Deploy Buildkite Agents to AWS EC2 instances with autoscaling.</li><li>Configure GitHub to trigger Bulidkite CI pipelines.</li><li>Configure Buildkite to trigger appropriate pipelines when sub-projects within a monorepo change.</li><li>Automate all of the above using bash scripts.</li></ol><h3 id=\"pre-requisites\">Pre-requisites</h3><ol><li><a href=\"https://aws.amazon.com/free/\" rel=\"noopener\"><strong>AWS</strong></a><strong> </strong>account to deploy the Buildkite agents.</li><li>Configure <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html\" rel=\"noopener\"><strong>AWS CLI</strong></a> to talk to AWS Account.</li><li><a href=\"https://buildkite.com/\" rel=\"noopener\"><strong>Buildkite</strong></a> account to create continuous integration pipelines.</li><li><a href=\"https://github.com/\" rel=\"noopener\"><strong>GitHub</strong></a><strong> </strong>account to host the monorepo sourcecode.</li></ol><p>The complete source code is available in the <a href=\"https://github.com/adikari/buildkite-monorepo\" rel=\"noopener\"><strong>buildkite-monorepo</strong></a> in GitHub.</p><h2 id=\"project-setup\">Project Setup</h2><p>The Buildkite workflow consists of <a href=\"https://buildkite.com/docs/pipelines\" rel=\"noopener\">Pipelines</a> and Steps. The top-level containers for modeling and defining workflows are called Pipelines. Steps run individual tasks or commands.</p><p>The following diagram lists the pipelines we are setting up, their associated triggers, and each step that the pipeline runs.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-109.png\" class=\"kg-image\" alt=\"image-109\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-109.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-109.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-109.png 1394w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1394\" height=\"326\" loading=\"lazy\"></figure><h3 id=\"pull-request-workflow\">Pull Request Workflow</h3><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-110.png\" class=\"kg-image\" alt=\"image-110\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-110.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-110.png 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2021/03/image-110.png 1600w, https://www.freecodecamp.org/news/content/images/2021/03/image-110.png 2000w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"691\" loading=\"lazy\"></figure><p>The above diagram visualizes the workflow for the Pull Request pipeline. </p><p>Creating a new Pull Request in GitHub triggers the <code>pull-request</code> pipeline in Buildkite. This pipeline then runs <code>git diff</code> to identify which folders (projects) within the monorepo have changed. </p><p>If it detects changes, then it will dynamically trigger the appropriate Pull Request pipeline defined for that project. Buildkite reports the status of each pipeline back to <a href=\"https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/about-status-checks\" rel=\"noopener\">GitHub status check.</a></p><h3 id=\"merge-workflow\">Merge Workflow</h3><p>The Pull Request is merged when all status checks in Github pass. Merging Pull Request triggers the <code>merge</code> pipeline in Buildkite.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-111.png\" class=\"kg-image\" alt=\"image-111\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-111.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-111.png 1000w, https://www.freecodecamp.org/news/content/images/size/w1600/2021/03/image-111.png 1600w, https://www.freecodecamp.org/news/content/images/2021/03/image-111.png 2000w\" sizes=\"(min-width: 1200px) 1200px\" width=\"2000\" height=\"853\" loading=\"lazy\"></figure><p>Similar to the previous pipeline, the merge pipeline identifies the projects that have changed and triggers the corresponding <code>deploy</code> pipeline for it. The Deploy pipeline initially deploys changes to the staging environment. </p><p>Once the deployment to staging is complete, production deployment is manually released.</p><h3 id=\"final-project-structure\">Final project structure</h3><p>├── .buildkite<br>│ &nbsp; ├── diff<br>│ &nbsp; ├── merge.yml<br>│ &nbsp; ├── pipelines<br>│ &nbsp; │ &nbsp; ├── deploy.json<br>│ &nbsp; │ &nbsp; ├── merge.json<br>│ &nbsp; │ &nbsp; └── pull-request.json<br>│ &nbsp; └── pull-request.yml<br>├── bar-service<br>│ &nbsp; ├── .buildkite<br>│ &nbsp; │ &nbsp; ├── deploy.yml<br>│ &nbsp; │ &nbsp; ├── merge.yml<br>│ &nbsp; │ &nbsp; └── pull-request.yml<br>│ &nbsp; └── bin<br>│ &nbsp; &nbsp; &nbsp; └── deploy<br>├── bin<br>│ &nbsp; ├── create-pipeline<br>│ &nbsp; ├── create-secrets-bucket<br>│ &nbsp; ├── deploy-ci-stack<br>│ &nbsp; └── stack-config<br>└── foo-service<br> &nbsp; &nbsp;├── .buildkite<br> &nbsp; &nbsp;│ &nbsp; ├── deploy.yml<br> &nbsp; &nbsp;│ &nbsp; ├── merge.yml<br> &nbsp; &nbsp;│ &nbsp; └── pull-request.yml<br> &nbsp; &nbsp;└── bin<br> &nbsp; &nbsp; &nbsp; &nbsp;└── deploy</p><h3 id=\"set-up-the-project\">Set Up the Project</h3><p>Create a new Git project and push it to GitHub. Run the following commands in the CLI.</p><pre><code class=\"language-bash\">mkdir buildkite-monorepo-example\ncd buildkite-monorepo-example\ngit init\necho node_modules/ &gt; .gitignore\ngit add .\ngit commit -m \"initialize repository\"\ngit remote add origin &lt;YOUR_GITHUB_REPO_URL&gt;\ngit push origin master</code></pre><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-112.png\" class=\"kg-image\" alt=\"image-112\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-112.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-112.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-112.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"788\" loading=\"lazy\"></figure><h3 id=\"set-up-the-buildkite-infrastructure\">Set up the Buildkite infrastructure</h3><ol><li>Create a bin directory with some executable scripts inside it.</li></ol><pre><code class=\"language-bash\">mkdir bin \ncd bin\ntouch create-pipeline create-secrets-bucket deploy-ci-stack\nchmod +x ./*</code></pre><p>2. Copy the following contents into <code>create-secrets-bucket</code>.</p><pre><code class=\"language-bash\">#!/bin/bash\n\nset -eou pipefail\n\nCURRENT_DIR=$(pwd)\nROOT_DIR=\"$( dirname \"${BASH_SOURCE[0]}\" )\"/..\n\nBUCKET_NAME=\"buildkite-secrets-adikari\"\nKEY=\"id_rsa_buildkite\"\n\necho \"creating bucket $BUCKET_NAME..\"\naws s3 mb s3://$BUCKET_NAME\n\n# Generate SSH Key\nssh-keygen -t rsa -b 4096 -f $KEY -N ''\n\n# Copy SSH Keys to S3 bucket\naws s3 cp --acl private --sse aws:kms $KEY \"s3://$BUCKET_NAME/private_ssh_key\"\naws s3 cp --acl private --sse aws:kms $KEY.pub \"s3://$BUCKET_NAME/public_key.pub\"\n\n\nif [[ \"$OSTYPE\" == \"darwin\"* ]]; then\n  pbcopy &lt; id_rsa_buildkite.pub\n  echo \"public key contents copied in clipboard.\"\nelse\n  cat id_rsa_buildkite.pub\nfi\n\n# Move SSH Keys to ~/.ssh directory\nmv ./$KEY* ~/.ssh\nchmod 600 ~/.ssh/$KEY\nchmod 644 ~/.ssh/$KEY.pub\n\ncd $CURRENT_DIR</code></pre><p>The above script creates an S3 bucket that is used to store the ssh keys. Buildkite uses this key to connect to the Github repo. The script also generates an ssh key and sets its permission correctly.</p><h3 id=\"run-the-script\">Run the script</h3><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-113.png\" class=\"kg-image\" alt=\"image-113\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-113.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-113.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-113.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"839\" loading=\"lazy\"></figure><p>The script copies the generated public and private keys to the <code>~/.ssh</code> folder. These keys can be used later to ssh into the EC2 instance, running the Buildkite agent for debugging.</p><p>Next, verify that the bucket exists and the keys are present in the new S3 bucket.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-114.png\" class=\"kg-image\" alt=\"image-114\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-114.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-114.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-114.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"241\" loading=\"lazy\"></figure><p>Navigate to <a href=\"https://github.com/settings/keys\" rel=\"nofollow noopener noopener\">https://github.com/settings/keys</a>, add a new SSH key, then paste in the contents of <code>id_rsa_buildkite.pub</code> .</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-115.png\" class=\"kg-image\" alt=\"image-115\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-115.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-115.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-115.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"886\" loading=\"lazy\"></figure><h3 id=\"deploy-aws-elastic-ci-cloudformation-stack\">Deploy AWS Elastic CI Cloudformation Stack</h3><p>The folks at Buildkite have created the <a href=\"https://github.com/buildkite/elastic-ci-stack-for-aws\" rel=\"noopener\"><strong>Elastic CI Stack for AWS</strong></a><strong>,</strong> which creates a private, autoscaling Buildkite Agent cluster in AWS. Let's deploy the infrastructure to our AWS Account.</p><p>Create a new file <code>bin/deploy-ci-stack</code> and copy the contents of the following script in it.</p><pre><code class=\"language-bash\">#!/bin/bash\n\nset -euo pipefail\n\n[ -z $BUILDKITE_AGENT_TOKEN ] &amp;&amp; { echo \"BUILDKITE_AGENT_TOKEN is not set.\"; exit 1;}\n\nCURRENT_DIR=$(pwd)\nROOT_DIR=\"$( dirname \"${BASH_SOURCE[0]}\" )\"/..\nPARAMETERS=$(cat ./bin/stack-config | envsubst)\n\ncd $ROOT_DIR\n\necho \"downloading elastic ci stack template..\"\ncurl -s https://s3.amazonaws.com/buildkite-aws-stack/latest/aws-stack.yml -O\n\naws cloudformation deploy \\\n  --capabilities CAPABILITY_NAMED_IAM \\\n  --template-file ./aws-stack.yml \\\n  --stack-name \"buildkite-elastic-ci\" \\\n  --parameter-overrides $PARAMETERS\n\nrm -f aws-stack.yml\n\ncd $CURRENT_DIR</code></pre><p>You can get the <code>BUILDKITE_AGENT_TOKEN</code> from the <strong>Agents </strong>tab in Buildkite's Console.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-116.png\" class=\"kg-image\" alt=\"image-116\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-116.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-116.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-116.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"1026\" loading=\"lazy\"></figure><p>Next, create a new file called <code>bin/stack-config</code>. Configuration in this file overrides the Cloudformation parameters. The complete list of parameters is available in the <a href=\"https://s3.amazonaws.com/buildkite-aws-stack/latest/aws-stack.yml\" rel=\"noopener\">Cloudformation template</a> used by Elastic CI.</p><p>On line 2, replace the bucket name with the bucket created earlier.</p><pre><code class=\"language-bash\">BuildkiteAgentToken=$BUILDKITE_AGENT_TOKEN\nSecretsBucket=buildkite-secrets-adikari\nInstanceType=t2.micro\nMinSize=0\nMaxSize=3\nScaleUpAdjustment=2\nScaleDownAdjustment=-1</code></pre><p>Next, run the script in the CLI to deploy the Cloudformation stack.</p><pre><code class=\"language-bash\">./bin/deploy-ci-stack</code></pre><p>The script will take some time to finish. Open up the AWS Cloudformation console to view the progress.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-117.png\" class=\"kg-image\" alt=\"image-117\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-117.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-117.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-117.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"274\" loading=\"lazy\"></figure><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-118.png\" class=\"kg-image\" alt=\"image-118\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-118.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-118.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-118.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"921\" loading=\"lazy\"></figure><p>The Cloudformation stack would have created an Autoscaling Group that Buildkite will use to spawn up EC2 instances. The Buildkite Agents and the builds run inside those EC2 instances.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-119.png\" class=\"kg-image\" alt=\"image-119\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-119.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-119.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-119.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"996\" loading=\"lazy\"></figure><h3 id=\"create-build-pipelines-in-bulidkite\">Create build pipelines in Bulidkite</h3><p>At this point, we have the infrastructure ready that's required to run Buildkite. Next, we configure Buildkite and create some Pipelines.</p><p>Create an nAPI Access Token at <a href=\"https://buildkite.com/user/api-access-tokens\" rel=\"nofollow noopener noopener noopener noopener\">https://buildkite.com/user/api-access-tokens</a> and set the scope to <code>write_builds</code>, <code>read_pipelines</code>, and <code>write_pipelines</code>. More information about agent tokens is in this <a href=\"https://buildkite.com/docs/agent/v3/tokens\" rel=\"noopener\">document</a>.</p><p>Ensure the <code>BUILDKITE_API_TOKEN</code> is set on the environment. Either use <a href=\"https://www.npmjs.com/package/dotenv\" rel=\"noopener\">dotenv</a> or export it to the environment before running the script.</p><p>Copy the contents of the following script to <code>bin/create-pipeline</code>. Pipelines can be created manually in the Buildkite Console, but it is always better to automate and create reproducible infrastructure.</p><pre><code class=\"language-bash\">#!/bin/bash\n\nset -euo pipefail\n\nexport SERVICE=\".\"\nexport PIPELINE_TYPE=\"\"\nexport REPOSITORY=git@github.com:adikari/buildkite-docker-example.git\n\nCURRENT_DIR=$(pwd)\nROOT_DIR=\"$( dirname \"${BASH_SOURCE[0]}\" )\"/..\nSTATUS_CHECK=false\nBUILDKITE_ORG_SLUG=adikari # update to your buildkite org slug\n\nUSAGE=\"USAGE: $(basename \"$0\") [-s|--service] service_name [-t|--type] pipeline_type\nEg: create-pipeline --type pull-request\n    create-pipeline --type merge --service foo-service\n    create-pipeline --type merge --status-checks\nNOTE: BUILDKITE_API_TOKEN must be set in environment\nARGUMENTS:\n    -t | --type           buildkite pipeline type &lt;merge|pull-request|deploy&gt; (required)\n    -s | --service        service name (optional, default: deploy root pipeline)\n    -r | --repository     github repository url (optional, default: buildkite-docker-example)\n    -c | --status-checks      enable github status checks (optional, default: true)\n    -h | --help           show this help text\"\n\n[ -z $BUILDKITE_API_TOKEN ] &amp;&amp; { echo \"BUILDKITE_API_TOKEN is not set.\"; exit 1;}\n\nwhile [ $# -gt 0 ]; do\n    if [[ $1 =~ \"--\"* ]]; then\n        case $1 in\n            --help|-h) echo \"$USAGE\"; exit; ;;\n            --service|-s) SERVICE=$2;;\n            --type|-t) PIPELINE_TYPE=$2;;\n            --repository|-r) REPOSITORY=$2;;\n            --status-check|-c) STATUS_CHECK=${2:-true};;\n        esac\n    fi\n    shift\ndone\n\n[ -z \"$PIPELINE_TYPE\" ] &amp;&amp; { echo \"$USAGE\"; exit 1; }\n\nexport PIPELINE_NAME=$([ $SERVICE == \".\" ] &amp;&amp; echo \"\" || echo \"$SERVICE-\")$PIPELINE_TYPE\n\nBUILDKITE_CONFIG_FILE=.buildkite/pipelines/$PIPELINE_TYPE.json\n[ ! -f \"$BUILDKITE_CONFIG_FILE\" ] &amp;&amp; { echo \"Invalid pipeline type: File not found $BUILDKITE_CONFIG_FILE\"; exit; }\n\nBUILDKITE_CONFIG=$(cat $BUILDKITE_CONFIG_FILE | envsubst)\n\nif [ $STATUS_CHECK == \"false\" ]; then\n  pipeline_settings='{ \"provider_settings\": { \"trigger_mode\": \"none\" } }'\n  BUILDKITE_CONFIG=$((echo $BUILDKITE_CONFIG; echo $pipeline_settings) | jq -s add)\nfi\ncd $ROOT_DIR\necho \"Creating $PIPELINE_TYPE pipeline..\"\nRESPONSE=$(curl -s POST \"https://api.buildkite.com/v2/organizations/$BUILDKITE_ORG_SLUG/pipelines\" \\\n  -H \"Authorization: Bearer $BUILDKITE_API_TOKEN\" \\\n  -d \"$BUILDKITE_CONFIG\"\n)\n[[ \"$RESPONSE\" == *errors* ]] &amp;&amp; { echo $RESPONSE | jq; exit 1; }\necho $RESPONSE | jq\nWEB_URL=$(echo $RESPONSE | jq -r '.web_url')\nWEBHOOK_URL=$(echo $RESPONSE | jq -r '.provider.webhook_url')\necho \"Pipeline url: $WEB_URL\"\necho \"Webhook url: $WEBHOOK_URL\"\necho \"$PIPELINE_NAME pipeline created.\"\ncd $CURRENT_DIR\nunset REPOSITORY\nunset PIPELINE_TYPE\nunset SERVICE\nunset PIPELINE_NAME</code></pre><p>Make the script executable by setting the correct permission (chmod +x). Run <code>./bin/create-pipeline -h</code> in the CLI for help.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-120.png\" class=\"kg-image\" alt=\"image-120\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-120.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-120.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-120.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"573\" loading=\"lazy\"></figure><p>The script uses <a href=\"https://buildkite.com/docs/apis/rest-api\" rel=\"noopener\">Buildkite REST API</a> to create the pipelines with the given configuration. The script uses a pipeline configuration defined as a &nbsp;<code>json</code> document and posts it to the REST API. Pipeline configurations live in the <code>.bulidkite/pipelines</code> folder.</p><p>To define the configuration for the <code>pull-request</code> pipeline, create <code>.buildkite/pipelines/pull-request.json</code> with the following content:</p><pre><code class=\"language-json\">{\n  \"name\": \"$PIPELINE_NAME\",\n  \"description\": \"Pipeline for $PIPELINE_NAME pull requests\",\n  \"repository\": \"$REPOSITORY\",\n  \"default_branch\": \"\",\n  \"steps\": [\n    {\n      \"type\": \"script\",\n      \"name\": \":buildkite: $PIPELINE_TYPE\",\n      \"command\": \"buildkite-agent pipeline upload $SERVICE/.buildkite/$PIPELINE_TYPE.yml\"\n    }\n  ],\n  \"cancel_running_branch_builds\": true,\n  \"skip_queued_branch_builds\": true,\n  \"branch_configuration\": \"!master\",\n  \"provider_settings\": {\n    \"trigger_mode\": \"code\",\n    \"publish_commit_status_per_step\": true,\n    \"publish_blocked_as_pending\": true,\n    \"pull_request_branch_filter_enabled\": true,\n    \"pull_request_branch_filter_configuration\": \"!master\",\n    \"separate_pull_request_statuses\": true\n  }\n}</code></pre><p>Next, create <code>./buildkite/pipelines/merge.json</code> with the following content:</p><pre><code class=\"language-json\">{\n  \"name\": \"$PIPELINE_NAME\",\n  \"description\": \"Pipeline for $PIPELINE_NAME merge\",\n  \"repository\": \"$REPOSITORY\",\n  \"default_branch\": \"master\",\n  \"steps\": [\n    {\n      \"type\": \"script\",\n      \"name\": \":buildkite: $PIPELINE_TYPE\",\n      \"command\": \"buildkite-agent pipeline upload $SERVICE/.buildkite/$PIPELINE_TYPE.yml\"\n    }\n  ],\n  \"cancel_running_branch_builds\": true,\n  \"skip_queued_branch_builds\": true,\n  \"branch_configuration\": \"master\",\n  \"provider_settings\": {\n    \"trigger_mode\": \"code\",\n    \"build_pull_requests\": false,\n    \"publish_blocked_as_pending\": true,\n    \"publish_commit_status_per_step\": true\n  }\n}</code></pre><p>Finally, create <code>.buildkite/pipelines/deploy.yml</code> with the following content:</p><pre><code class=\"language-json\">{\n  \"name\": \"$PIPELINE_NAME\",\n  \"description\": \"Pipeline for $PIPELINE_NAME deploy\",\n  \"repository\": \"$REPOSITORY\",\n  \"default_branch\": \"master\",\n  \"steps\": [\n    {\n      \"type\": \"script\",\n      \"name\": \":buildkite: $PIPELINE_TYPE\",\n      \"command\": \"buildkite-agent pipeline upload $SERVICE/.buildkite/$PIPELINE_TYPE.yml\"\n    }\n  ],\n  \"provider_settings\": {\n    \"trigger_mode\": \"none\"\n  }\n}</code></pre><p>Now, run the <code>./bin/create-pipeline</code> command to create a pull-request pipeline.</p><pre><code class=\"language-bash\">./bin/create-pipeline --type pull-request --status-checks\n./bin/create-pipeline --type merge --status-checks</code></pre><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-121.png\" class=\"kg-image\" alt=\"image-121\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-121.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-121.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-121.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"411\" loading=\"lazy\"></figure><p>Copy the <code>Webhook url</code> from the console output and create a webhook integration in GitHub. The webhook URL is available in the pipeline settings in the Buildkite console if needed in the future. </p><p>We need to configure the webhook only for the <code>pull-request</code> and <code>merge</code> pipelines. All other pipelines are triggered dynamically.</p><p>Navigate to the GitHub repository <code>Settings &gt; Webhooks</code> and add a webhook. Select <code>Just the push event</code>, then add the webhook. Repeat this for both pipelines.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-122.png\" class=\"kg-image\" alt=\"image-122\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-122.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-122.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-122.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"1058\" loading=\"lazy\"></figure><p>Now in the Buildkite Console, there should be two newly created pipelines. 🎉</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-123.png\" class=\"kg-image\" alt=\"image-123\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-123.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-123.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-123.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"995\" loading=\"lazy\"></figure><p>Next, add GitHub integration to allow Buildkite to send status updates to GitHub. You only need to set up this integration once per account. It is available at <code>Setting &gt; Integrations &gt; Github</code> in the Buildkite Console.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-124.png\" class=\"kg-image\" alt=\"image-124\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-124.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-124.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-124.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"987\" loading=\"lazy\"></figure><p>Next, create the remaining pipelines. These pipelines will be dynamically triggered by the <code>pull-request</code> and <code>merge</code> pipelines, so we do not need to create GitHub integration.</p><pre><code class=\"language-bash\"># foo service pipelines\n./bin/create-pipeline --type pull-request --service foo-service\n./bin/create-pipeline --type merge --service foo-service\n./bin/create-pipeline --type deploy --service foo-service\n\n# bar service pipelines\n./bin/create-pipeline --type pull-request --service bar-service\n./bin/create-pipeline --type merge --service bar-service\n./bin/create-pipeline --type deploy --service bar-service</code></pre><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-125.png\" class=\"kg-image\" alt=\"image-125\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-125.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-125.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-125.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"1081\" loading=\"lazy\"></figure><p>The Buildkite Console should now have all the pipelines listed. 🥳</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-126.png\" class=\"kg-image\" alt=\"image-126\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-126.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-126.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-126.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"1023\" loading=\"lazy\"></figure><h3 id=\"set-up-buildkite-steps\">Set up Buildkite Steps</h3><p>Now that the pipelines are ready, let's configure steps to run for each pipeline.</p><p>Add the following script in <code>.buildkite/diff</code>. This script diffs between all the files changed in a commit against the master branch. The output of the script is used to trigger respective pipelines dynamically.</p><pre><code class=\"language-bash\">#!/bin/bash\n\n[ $# -lt 1 ] &amp;&amp; { echo \"argument is missing.\"; exit 1; }\n\nCOMMIT=$1\n\nBRANCH_POINT_COMMIT=$(git merge-base master $COMMIT)\n\necho \"diff between $COMMIT and $BRANCH_POINT_COMMIT\"\ngit --no-pager diff --name-only $COMMIT..$BRANCH_POINT_COMMIT</code></pre><p>Change the permission of the script to make it executable.</p><pre><code class=\"language-bash\">chmod +x .buildkite/diff</code></pre><p>Create a new file <code>.buildkite/pullrequest.yml</code> and add the following step configuration. We use the <a href=\"https://github.com/chronotc/monorepo-diff-buildkite-plugin\" rel=\"noopener\">buildkite-monorepo-diff</a> plugin to run the <code>diff</code> script and automatically upload and trigger the respective pipelines.</p><pre><code class=\"language-yaml\">steps:\n  - label: \"Triggering pull request pipeline\"\n    plugins:\n      chronotc/monorepo-diff#v1.1.1:\n        diff: \".buildkite/diff ${BUILDKITE_COMMIT}\"\n        wait: false\n        watch:\n          - path: \"foo-service\"\n            config:\n              trigger: \"foo-service-pull-request\"\n          - path: \"bar-service\"\n            config:\n              trigger: \"bar-service-pull-request\"</code></pre><p>Now create the configuration for the merge pipeline by adding the following content in <code>.buildkite/merge.yml</code>.</p><pre><code class=\"language-yaml\">steps:\n  - label: \"Triggering merge pipeline\"\n    plugins:\n      chronotc/monorepo-diff#v1.1.1:\n        diff: \"git diff --name-only HEAD~1\"\n        wait: false\n        watch:\n          - path: \"foo-service\"\n            config:\n              trigger: \"foo-service-merge\"\n          - path: \"bar-service\"\n            config:\n              trigger: \"bar-service-merge\"</code></pre><p>At this point, we have configured the topmost level <code>pull-request</code> and <code>merge</code> pipelines. Now we need to configure individual pipelines for each service.</p><p>We'll configure pipelines for <code>foo-service</code> first. Create <code>foo-service/.buildkite/pull-request.yml</code> with the following content. When the <code>pull-request</code> pipeline for foo service runs, specify that the <code>lint</code> and <code>test</code> commands should run. The <code>command</code> option can also trigger other scripts.</p><pre><code class=\"language-yaml\">steps:\n  - label: \"Foo service pull request\"\n    command:\n      - \"echo linting\"\n      - \"echo testing\"</code></pre><p>Next, setup a merge pipeline for the foo service by adding the following content in <code>foo-service/.buildkite/merge.yml</code>:</p><pre><code class=\"language-yaml\">steps:\n  - label: \"Run sanity checks\"\n    command:\n      - \"echo linting\"\n      - \"echo testing\"\n\n  - label: \"Deploy to staging\"\n    trigger: \"foo-deploy\"\n    build:\n      env:\n        STAGE: \"staging\"\n\n  - wait\n\n  - block: \":rocket: Release to Production\"\n\n  - label: \"Deploy to production\"\n    trigger: \"foo-deploy\"\n    build:\n      env:\n        STAGE: \"production\"</code></pre><p>When the <code>foo-service-merge</code> pipeline runs, here is what happens:</p><ol><li>The pipeline runs the sanity check.</li><li>Then <code>foo-deploy</code> pipeline is dynamically triggered. We pass the <code>STAGE</code> environment to identify which environment to run the deployment against.</li><li>Once the deployment to staging is complete, the pipeline is blocked and the following pipeline is not triggered automatically. The pipeline can be resumed by pressing the “Release to Production” button.</li><li>Unblocking the pipeline triggers <code>foo-deploy</code> pipeline again, but this time with <code>production</code> stage.</li></ol><p>Finally, add configuration for the <code>foo-deploy</code> pipeline by adding <code>foo-service/.buildkite/deploy.yml</code>. In the deploy configuration, we trigger a bash script and pass the <code>STAGE</code> variable which was received from the <code>foo-service-merge</code> pipeline.</p><pre><code class=\"language-yaml\">steps:\n  - label: \"Deploying foo service to ${STAGE}\"\n    command: \"./foo-service/bin/deploy ${STAGE}\"</code></pre><p>Now, create the deploy script <code>foo-service/bin/deploy</code> and add the following content:</p><pre><code class=\"language-yaml\">#!/bin/bash\n\nset -euo pipefail\n\nSTAGE=$1\n\necho \"Deploying foo service to $STAGE\"</code></pre><p>Make the deploy script executable like this:</p><pre><code class=\"language-bash\">chmod +x ./foo-service/bin/deploy</code></pre><p>The pipeline and steps configuration for <code>foo-service</code> are now complete. Repeat all the above steps above to configure pipelines for <code>bar service</code>.</p><h3 id=\"test-the-overall-workflow\">Test the overall workflow</h3><p>We have configured Buildkite and GitHub and we've set up the appropriate infrastructure to run the builds. Next, test the entire workflow and see it in action.</p><p>To test the workflow, start by creating a new branch and modifying some file in <code>foo-service</code>. Push the changes to GitHub and create a Pull Request.</p><pre><code class=\"language-bash\">git checkout -b change-foo-service\ncd foo-service &amp;&amp; touch test.txt\necho testing &gt;&gt; test.txt\ngit add .\ngit commit -m 'making some change'\ngit push origin master</code></pre><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-127.png\" class=\"kg-image\" alt=\"image-127\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-127.png 600w, https://www.freecodecamp.org/news/content/images/2021/03/image-127.png 872w\" width=\"872\" height=\"699\" loading=\"lazy\"></figure><p>Pushing changes to GitHub should trigger the <code>pull-request</code> pipeline in Buildkite, which then triggers the <code>foo-service-pull-request</code> pipeline. </p><p>GitHub should report the status in GitHub checks. You can enable GitHub's branch protection to require the checks to pass before merging the Pull Request.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-128.png\" class=\"kg-image\" alt=\"image-128\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-128.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-128.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-128.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"1115\" loading=\"lazy\"></figure><p>Once all the checks have passed in GitHub, merge the Pull Request. This merge will trigger the <code>merge</code> pipeline in Buildkite.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-129.png\" class=\"kg-image\" alt=\"image-129\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-129.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-129.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-129.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"1293\" loading=\"lazy\"></figure><p>The changes in the foo service are detected, and <code>foo-service-merge</code> pipeline is triggered. The pipeline will eventually be blocked when the <code>foo-service-deploy</code> runs against the staging environment. </p><p>Unblock the pipeline by manually clicking the <code>Release to Production</code> button to run deployment against production.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2021/03/image-130.png\" class=\"kg-image\" alt=\"image-130\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2021/03/image-130.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2021/03/image-130.png 1000w, https://www.freecodecamp.org/news/content/images/2021/03/image-130.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"924\" loading=\"lazy\"></figure><h2 id=\"summary\">Summary</h2><p>In this post, we set up a continuous integration pipeline for a monorepo using Buildkite, Github, and AWS. </p><p>The pipeline gets our code from the development machine to staging, then to production. The build agents and steps run in autoscaled AWS EC2 instances. </p><p>We also created a bunch of bash scripts to create easily reproducible versions of this setup. </p><p>As an improvement to the current design, consider using the <a href=\"https://github.com/buildkite-plugins/docker-compose-buildkite-plugin\" rel=\"noopener\">buildkite-docker-compose-plugin</a> to isolate the builds in Docker containers.</p><p><em>Follow me on </em><a href=\"https://twitter.com/adikari\" rel=\"noopener nofollow noopener\"><em>Twitter</em></a><em> or check out my projects on </em><a href=\"https://github.com/adikari\" rel=\"noopener nofollow noopener\"><em>Github</em></a><em>.</em></p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/05/subash-adhikari-gravatar.jpeg 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/05/subash-adhikari-gravatar.jpeg\" class=\"author-profile-image\" alt=\"subash adhikari\" width=\"250\" height=\"250\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/subash/\" data-test-label=\"profile-link\">\n                    \n                        subash adhikari\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Polyglot Software Engineer Specialising in Serverless and AWS. Proud father of twin daughters.</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"How%20to%20Set%20Up%20Continuous%20Integration%20for%20a%20Monorepo%20Using%20Buildkite\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"@adikari\",r=Boolean(\"\");let a;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"subash adhikari\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(a=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const s=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",s)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac22ed7ff4440eb\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"version\":\"2024.7.0\",\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\"}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/":{"metadata":[{"tagName":"meta","attributes":{"charset":"utf-8"},"content":""},{"tagName":"meta","attributes":{"http-equiv":"X-UA-Compatible","content":"IE=edge"},"content":""},{"tagName":"title","attributes":{},"content":"How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation"},{"tagName":"meta","attributes":{"name":"HandheldFriendly","content":"True"},"content":""},{"tagName":"meta","attributes":{"name":"viewport","content":"width=device-width, initial-scale=1.0"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.googleapis.com"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com","crossorigin":""},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n"},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css"},"content":""},{"tagName":"noscript","attributes":{},"content":"\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n"},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"},"content":""},{"tagName":"link","attributes":{"rel":"preload","as":"style","onload":"this.onload=null;this.rel='stylesheet'","href":"/news/assets/css/global-26e2f3cde9.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/screen-926fddfac2.css"},"content":""},{"tagName":"link","attributes":{"rel":"stylesheet","type":"text/css","href":"/news/assets/css/search-bar-124f5f949c.css"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js"},"content":""},{"tagName":"script","attributes":{"defer":"","src":"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js"},"content":""},{"tagName":"script","attributes":{},"content":"let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));"},{"tagName":"script","attributes":{"data-ad-client":"ca-pub-9482786369113753","src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js","crossorigin":"anonymous","async":""},"content":""},{"tagName":"link","attributes":{"rel":"icon","href":"https://cdn.freecodecamp.org/universal/favicons/favicon.ico","type":"image/png"},"content":""},{"tagName":"link","attributes":{"rel":"canonical","href":"https://www.freecodecamp.org/news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/"},"content":""},{"tagName":"meta","attributes":{"name":"referrer","content":"no-referrer-when-downgrade"},"content":""},{"tagName":"meta","attributes":{"name":"description","content":"Introduction I have been building GraphQL APIs in a Serverless environment for over 3 years now. I can't even imagine working with RESTful APIs anymore. Combine the power of GraphQL with the scalability of AWS Lambda, and you have a server that can handle infinite amounts of traffic. In this"},"content":""},{"tagName":"meta","attributes":{"property":"og:site_name","content":"freeCodeCamp.org"},"content":""},{"tagName":"meta","attributes":{"property":"og:type","content":"article"},"content":""},{"tagName":"meta","attributes":{"property":"og:title","content":"How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation"},"content":""},{"tagName":"meta","attributes":{"property":"og:description","content":"Introduction I have been building GraphQL APIs in a Serverless environment for over 3 years now. I can't even imagine working with RESTful APIs anymore. Combine the power of GraphQL with the scalability of AWS Lambda, and you have a server that can handle infinite amounts of traffic. In this"},"content":""},{"tagName":"meta","attributes":{"property":"og:url","content":"https://www.freecodecamp.org/news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/"},"content":""},{"tagName":"meta","attributes":{"property":"og:image","content":"https://www.freecodecamp.org/news/content/images/2020/05/banner.png"},"content":""},{"tagName":"meta","attributes":{"property":"article:published_time","content":"2020-05-19T20:42:16.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:modified_time","content":"2020-05-19T20:42:16.000Z"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"GraphQL"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"AWS Lambda"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"Node"},"content":""},{"tagName":"meta","attributes":{"property":"article:tag","content":"cloudformation"},"content":""},{"tagName":"meta","attributes":{"property":"article:publisher","content":"https://www.facebook.com/freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:card","content":"summary_large_image"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:title","content":"How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:description","content":"Introduction I have been building GraphQL APIs in a Serverless environment for over 3 years now. I can't even imagine working with RESTful APIs anymore. Combine the power of GraphQL with the scalability of AWS Lambda, and you have a server that can handle infinite amounts of traffic. In this"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:url","content":"https://www.freecodecamp.org/news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:image","content":"https://www.freecodecamp.org/news/content/images/2020/05/banner.png"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label1","content":"Written by"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data1","content":"subash adhikari"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:label2","content":"Filed under"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:data2","content":"GraphQL, AWS Lambda, Node, cloudformation"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:site","content":"@freecodecamp"},"content":""},{"tagName":"meta","attributes":{"name":"twitter:creator","content":"@adikari"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:width","content":"1400"},"content":""},{"tagName":"meta","attributes":{"property":"og:image:height","content":"782"},"content":""},{"tagName":"script","attributes":{"type":"application/ld+json"},"content":"{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2020/05/banner.png\",\n\t\t\"width\": 1400,\n\t\t\"height\": 782\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2020-05-19T20:42:16.000Z\",\n\t\"dateModified\": \"2020-05-19T20:42:16.000Z\",\n\t\"keywords\": \"GraphQL, AWS Lambda, Node, cloudformation\",\n\t\"description\": \"Introduction\\nI have been building GraphQL APIs in a Serverless environment for over 3 years\\nnow. I can&#x27;t even imagine working with RESTful APIs anymore. Combine the power\\nof GraphQL with the scalability of AWS Lambda, and you have a server that can\\nhandle infinite amounts of traffic.\\n\\nIn this tutorial, we will build and deploy a GraphQL server to AWS Lambda and\\naccess it via an API Gateway endpoint. We will use CloudFormation and the AWS\\nCLI to deploy all our AWS Resources and application code.\\n\",\n\t\"headline\": \"How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"subash adhikari\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/subash/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://subash.tech\",\n\t\t\t\"https://twitter.com/adikari\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/05/subash-adhikari-gravatar.jpeg\",\n\t\t\t\"width\": 250,\n\t\t\t\"height\": 250\n\t\t}\n\t}\n}"},{"tagName":"meta","attributes":{"name":"generator","content":"Eleventy"},"content":""},{"tagName":"link","attributes":{"rel":"alternate","type":"application/rss+xml","title":"freeCodeCamp.org","href":"https://www.freecodecamp.org/news/rss/"},"content":""},{"tagName":"link","attributes":{"rel":"preconnect","href":"https://fonts.gstatic.com"},"content":""},{"tagName":"script","attributes":{},"content":"\nwindow.dataLayer = window.dataLayer || [];\n"},{"tagName":"script","attributes":{},"content":"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');"},{"tagName":"meta","attributes":{"name":"google-site-verification","content":"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E"},"content":""},{"tagName":"meta","attributes":{"name":"x-fcc-source","data-test-label":"x-fcc-source","content":"Ghost"},"content":""}],"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Introduction I have been building GraphQL APIs in a Serverless environment for over 3 years now. I can&#39;t even imagine working with RESTful APIs anymore. Combine the power of GraphQL with the scalability of AWS Lambda, and you have a server that can handle infinite amounts of traffic. In this\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation\">\n    \n        <meta property=\"og:description\" content=\"Introduction I have been building GraphQL APIs in a Serverless environment for over 3 years now. I can&#39;t even imagine working with RESTful APIs anymore. Combine the power of GraphQL with the scalability of AWS Lambda, and you have a server that can handle infinite amounts of traffic. In this\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2020/05/banner.png\">\n    <meta property=\"article:published_time\" content=\"2020-05-19T20:42:16.000Z\">\n    <meta property=\"article:modified_time\" content=\"2020-05-19T20:42:16.000Z\">\n    \n        <meta property=\"article:tag\" content=\"GraphQL\">\n    \n        <meta property=\"article:tag\" content=\"AWS Lambda\">\n    \n        <meta property=\"article:tag\" content=\"Node\">\n    \n        <meta property=\"article:tag\" content=\"cloudformation\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation\">\n    \n        <meta name=\"twitter:description\" content=\"Introduction I have been building GraphQL APIs in a Serverless environment for over 3 years now. I can&#39;t even imagine working with RESTful APIs anymore. Combine the power of GraphQL with the scalability of AWS Lambda, and you have a server that can handle infinite amounts of traffic. In this\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2020/05/banner.png\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"subash adhikari\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"GraphQL, AWS Lambda, Node, cloudformation\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@adikari\">\n    \n\n    <meta property=\"og:image:width\" content=\"1400\">\n    <meta property=\"og:image:height\" content=\"782\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2020/05/banner.png\",\n\t\t\"width\": 1400,\n\t\t\"height\": 782\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-build-and-deploy-graphql-server-in-aws-lambda-using-nodejs-and-cloudformation/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2020-05-19T20:42:16.000Z\",\n\t\"dateModified\": \"2020-05-19T20:42:16.000Z\",\n\t\"keywords\": \"GraphQL, AWS Lambda, Node, cloudformation\",\n\t\"description\": \"Introduction\\nI have been building GraphQL APIs in a Serverless environment for over 3 years\\nnow. I can&#x27;t even imagine working with RESTful APIs anymore. Combine the power\\nof GraphQL with the scalability of AWS Lambda, and you have a server that can\\nhandle infinite amounts of traffic.\\n\\nIn this tutorial, we will build and deploy a GraphQL server to AWS Lambda and\\naccess it via an API Gateway endpoint. We will use CloudFormation and the AWS\\nCLI to deploy all our AWS Resources and application code.\\n\",\n\t\"headline\": \"How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"subash adhikari\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/subash/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://subash.tech\",\n\t\t\t\"https://twitter.com/adikari\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2021/05/subash-adhikari-gravatar.jpeg\",\n\t\t\t\"width\": 250,\n\t\t\t\"height\": 250\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Tue May 19 2020 20:42:16 GMT+0000 (Coordinated Universal Time)\">\n                            May 19, 2020\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/graphql/\">\n                                #GraphQL\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/05/subash-adhikari-gravatar.jpeg 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/05/subash-adhikari-gravatar.jpeg\" class=\"author-profile-image\" alt=\"subash adhikari\" width=\"250\" height=\"250\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/subash/\" data-test-label=\"profile-link\">\n                    \n                        subash adhikari\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2020/05/banner.png 300w, https://www.freecodecamp.org/news/content/images/size/w600/2020/05/banner.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2020/05/banner.png 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2020/05/banner.png 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2020/05/banner.png\" alt=\"How to Build and Deploy a GraphQL Server in AWS Lambda Using Node.js and CloudFormation\" ,=\"\" width=\"1400\" height=\"782\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<h1 id=\"introduction\">Introduction</h1><p>I have been building GraphQL APIs in a Serverless environment for over 3 years now. I can't even imagine working with RESTful APIs anymore. Combine the power of GraphQL with the scalability of AWS Lambda, and you have a server that can handle infinite amounts of traffic.</p><p>In this tutorial, we will build and deploy a GraphQL server to AWS Lambda and access it via an API Gateway endpoint. We will use CloudFormation and the AWS CLI to deploy all our AWS Resources and application code.</p><h2 id=\"what-we-ll-cover\">What we'll cover</h2><ol><li>Build a GraphQL Server using Apollo</li><li>Deploy that GraphQL Server to Lambda</li><li>Use API Gateway to proxy requests to Lambda</li><li>Use CloudFormation to deploy application stack to AWS</li><li>Set up Lambda for local development.</li></ol><p>TL;DR – You can get the full source code for the application from <a href=\"https://github.com/adikari/apollo-server-lambda-nodejs/tree/server-setup\">Github</a>.</p><h1 id=\"what-is-graphql\">What is GraphQL?</h1><p><a href=\"https://graphql.org/\" rel=\"noopener nofollow\">GraphQL</a> is a query language for describing APIs using a strongly typed schema system. A GraphQL server fulfills those queries using existing data. Following are a few of the main advantages of using GraphQL.</p><h2 id=\"query-only-what-your-application-needs\">Query only what your application needs</h2><p>Unlike REST APIs, GraphQL enables clients to query precisely and only what they need. The server fulfills the client’s request by returning only what the client is asking for.</p><h2 id=\"graphql-uses-a-strongly-typed-system\">GraphQL uses a strongly typed system</h2><p>The strongly typed system of GraphQL enables users to introspect the entire schema. And the GraphQL API serves as clear documentation about the capabilities of the server and notifies you about errors during development.</p><h2 id=\"you-can-compose-your-queries-in-a-single-request\">You can compose your queries in a single request</h2><p>With GraphQL, you can query multiple resources and get combined responses with a single request. With fewer requests, apps using GraphQL perform much faster.</p><h1 id=\"what-is-aws-lambda\">What is AWS Lambda?</h1><p>AWS Lambda is a compute service offered by AWS that lets you run your application code without having to manage any servers. AWS manages all the overhead like infrastructure, security, resources, operating system, and patches so developers can focus on just building the application.</p><p>Let’s get started…</p><h1 id=\"setting-up-the-project\">Setting up the project</h1><p>Let’s start by creating a project folder. Then, change into the directory and initialise a Node project. I am using <code>node 10.x</code> in the examples. You can install the Node version of your choice using <a href=\"https://github.com/asdf-vm/asdf\" rel=\"noopener nofollow\">asdf</a>.</p><pre><code class=\"language-bash\">mkdir apollo-server-lambda-nodejs \ncd apollo-server-lambda-nodejs \nyarn init</code></pre><p>Next, create a folder that houses all our source code.</p><pre><code class=\"language-bash\">mkdir src</code></pre><p>Finally, create an index file inside the <code>src</code> directory that serves as the lambda handler.</p><pre><code class=\"language-bash\">cd src\ntouch index.js</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/initialize.png\" class=\"kg-image\" alt=\"initialize\" width=\"1400\" height=\"783\" loading=\"lazy\"><figcaption>Initialize node project</figcaption></figure><p>Populate the index file with the following code.</p><pre><code class=\"language-javascript\">exports.handler = async () =&gt; {  \n    return { \n        body: 'Hello from Lambda' \n    };\n};</code></pre><p>The above code is a very simple Lambda handler which will return <code>Hello from Lambda</code> when invoked. Let's first deploy our code to AWS Lambda.</p><h1 id=\"package-the-application-code\">Package the application code</h1><p>Before we can deploy our code to Lambda, we need to create a zip of our application and upload it to an S3 bucket. We are using AWS CLI to create the bucket. Set up AWS CLI now by following <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html\" rel=\"noopener nofollow\">this guide</a> if you have not already done so.</p><p>Create an S3 bucket to use for deploying our code to Lambda. Pick a unique name for your S3 bucket. The bucket names are unique globally across all AWS Regions.</p><pre><code class=\"language-bash\">aws s3 mb s3://lambda-deploy-asln</code></pre><p>Create an archive of the application using the zip command and verify the files inside the zip.</p><pre><code class=\"language-bash\">zip -rq dist-latest.zip src package.json \nzipinfo dist-latest.zip</code></pre><p>Copy the zip file to S3 using the AWS CLI command.</p><pre><code class=\"language-bash\">aws s3 cp dist-latest.zip s3://lambda-deploy-asln/dist-latest.zip</code></pre><p>Finally, use the following command to verify that the file exists in S3.</p><pre><code class=\"language-bash\">aws s3 ls s3://lambda-deploy-asln</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/2-1.png\" class=\"kg-image\" alt=\"2-1\" width=\"1400\" height=\"625\" loading=\"lazy\"><figcaption>Copy application package to S3</figcaption></figure><p>Now that we have deployed the packaged application to S3, next we need to set up our Lambda and API Gateway in AWS. In the next section, we'll use CloudFormation to set up all necessary AWS Resources.</p><h1 id=\"set-up-aws-lambda-with-api-gateway-proxy-integration\">Set up AWS lambda with API gateway proxy integration</h1><p>CloudFormation is an AWS service that helps us to write infrastructure as code. CloudFormation makes it very simple to create and manage our application resources. Let’s use CloudFormation to define our stack.</p><p>Create a file named <code>cloudformation.yml</code> at the root of the project.</p><pre><code class=\"language-bash\">touch cloudformation.yml</code></pre><p>Add the following code to the <code>cloudformation.yml</code></p><pre><code class=\"language-yaml\">---\nDescription: GraphQL server on AWS lambda\n\nParameters:\n  Version:\n    Description: Application version number\n    Type: String\n\n  BucketName:\n    Description: S3 bucket name where the source code lives\n    Type: String\n\nResources:\n  LambdaFunction:\n    Type: AWS::Lambda::Function\n    Properties:\n      Code:\n        S3Bucket: !Ref BucketName\n        S3Key: !Sub dist-${Version}.zip\n      Handler: src/index.handler\n      Description: GraphQL Apollo Server\n      Role: !GetAtt LambdaExecutionRole.Arn\n      Runtime: nodejs10.x\n      Timeout: 10\n\n  LambdaExecutionRole:\n    Type: \"AWS::IAM::Role\"\n    Properties:\n      AssumeRolePolicyDocument:\n        Version: \"2012-10-17\"\n        Statement:\n          - Effect: \"Allow\"\n            Principal:\n              Service:\n                - \"lambda.amazonaws.com\"\n            Action:\n              - \"sts:AssumeRole\"\n      Policies:\n        - PolicyName: \"LambdaFunctionPolicy\"\n          PolicyDocument:\n            Version: '2012-10-17'\n            Statement:\n            - Effect: Allow\n              Action:\n              - logs:CreateLogGroup\n              - logs:CreateLogStream\n              - logs:PutLogEvents\n              Resource: \"*\"\n\n  GraphQLApi:\n    Type: 'AWS::ApiGateway::RestApi'\n    Properties:\n      Name: apollo-graphql-api\n\n  GraphQLApiResource:\n    Type: 'AWS::ApiGateway::Resource'\n    Properties:\n      ParentId: !GetAtt GraphQLApi.RootResourceId\n      RestApiId: !Ref GraphQLApi\n      PathPart: 'graphql'\n\n  GraphQLApiMethod:\n    Type: 'AWS::ApiGateway::Method'\n    Properties:\n      RestApiId: !Ref GraphQLApi\n      ResourceId: !Ref GraphQLApiResource\n      AuthorizationType: None\n      HttpMethod: POST\n      Integration:\n        Type: AWS_PROXY\n        IntegrationHttpMethod: POST\n        Uri: !Sub arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${LambdaFunction.Arn}/invocations\n\n  GraphQLApiDeployment:\n    Type: 'AWS::ApiGateway::Deployment'\n    Properties:\n      RestApiId: !Ref GraphQLApi\n      StageName: v1\n    DependsOn:\n      - GraphQLApiResource\n      - GraphQLApiMethod\n\n  GraphQLApiPermission:\n    Type: 'AWS::Lambda::Permission'\n    Properties:\n      Action: lambda:invokeFunction\n      FunctionName: !GetAtt LambdaFunction.Arn\n      Principal: apigateway.amazonaws.com\n      SourceArn: !Sub arn:aws:execute-api:${AWS::Region}:${AWS::AccountId}:${GraphQLApi}/*\n\nOutputs:\n  ApiUrl:\n    Description: Invoke url of API Gateway endpoint\n    Value: !Sub https://${GraphQLApi}.execute-api.${AWS::Region}.amazonaws.com/v1/graphql</code></pre><p>I know a lot is happening in this template. Let’s examine the code step by step.</p><h2 id=\"template-parameters\">Template Parameters</h2><p>Firstly, we define some parameters that we use in the template. We can pass those variables as parameter overrides when deploying the CloudFormation Stack.</p><pre><code class=\"language-yaml\">Description: GraphQL server on AWS lambda\n\nParameters:\n  Version:\n    Description: Application version number\n    Type: String\n\n  BucketName:\n    Description: S3 bucket name where the source code lives\n    Type: String</code></pre><h2 id=\"lambda-function\">Lambda Function</h2><p>We define our lambda function specifying the path from where it should pull the application code. This bucket is the same one we created earlier.</p><pre><code class=\"language-yaml\">LambdaFunction:\n    Type: AWS::Lambda::Function\n    Properties:\n      Code:\n        S3Bucket: !Ref BucketName\n        S3Key: !Sub dist-${Version}.zip\n      Handler: src/index.handler\n      Description: GraphQL Apollo Server\n      Role: !GetAtt LambdaExecutionRole.Arn\n      Runtime: nodejs10.x\n      Timeout: 10</code></pre><p>We want our Lambda function to be able to send application logs to AWS CloudWatch. Lambda requires special permissions to be able to write logs to CloudWatch. So we create a role that enables writing to CloudWatch and assign it to the Lambda function.</p><pre><code class=\"language-yaml\">LambdaExecutionRole:\n    Type: \"AWS::IAM::Role\"\n    Properties:\n      AssumeRolePolicyDocument:\n        Version: \"2012-10-17\"\n        Statement:\n          - Effect: \"Allow\"\n            Principal:\n              Service:\n                - \"lambda.amazonaws.com\"\n            Action:\n              - \"sts:AssumeRole\"\n      Policies:\n        - PolicyName: \"LambdaFunctionPolicy\"\n          PolicyDocument:\n            Version: '2012-10-17'\n            Statement:\n            - Effect: Allow\n              Action:\n              - logs:CreateLogGroup\n              - logs:CreateLogStream\n              - logs:PutLogEvents\n              Resource: \"*\"</code></pre><h2 id=\"api-gateway\">API Gateway</h2><p>We also want an HTTP endpoint to invoke the lambda function. API Gateway can be used to create an HTTP endpoint. We can then configure API Gateway to proxy all incoming requests from the client to the Lambda function and send the response from Lambda back to the client.</p><p>Firstly, we create an API Gateway RestApi.</p><pre><code class=\"language-yaml\">GraphQLApi:\n    Type: 'AWS::ApiGateway::RestApi'\n    Properties:\n      Name: apollo-graphql-api</code></pre><p>Then, we create an API Gateway Resource, which accepts requests at <code>/graphql</code>.</p><pre><code class=\"language-yaml\">GraphQLApiResource:\n    Type: 'AWS::ApiGateway::Resource'\n    Properties:\n      ParentId: !GetAtt GraphQLApi.RootResourceId\n      RestApiId: !Ref GraphQLApi\n      PathPart: 'graphql'</code></pre><p>Next, we configure the Resource to accept POST requests by creating an API Gateway Method and then we integrate it with Lambda.</p><pre><code class=\"language-yaml\">GraphQLApiMethod:\n    Type: 'AWS::ApiGateway::Method'\n    Properties:\n      RestApiId: !Ref GraphQLApi\n      ResourceId: !Ref GraphQLApiResource\n      AuthorizationType: None\n      HttpMethod: POST\n      Integration:\n        Type: AWS_PROXY\n        IntegrationHttpMethod: POST\n        Uri: !Sub arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${LambdaFunction.Arn}/invocations</code></pre><p>Finally, we create an API Gateway Deployment which deploys the API to the specified stage.</p><pre><code class=\"language-yaml\">GraphQLApiDeployment:\n    Type: 'AWS::ApiGateway::Deployment'\n    Properties:\n      RestApiId: !Ref GraphQLApi\n      StageName: v1\n    DependsOn:\n      - GraphQLApiResource\n      - GraphQLApiMethod</code></pre><h2 id=\"lambda-api-gateway-permission\">Lambda / API Gateway permission</h2><p>At this point, we have both the Lambda function and API gateway configured correctly. However, API Gateway needs special permission to invoke a Lambda function. We permit API Gateway to invoke Lambda by creating a Lambda Permission resource.</p><pre><code class=\"language-yaml\">GraphQLApiPermission:\n    Type: 'AWS::Lambda::Permission'\n    Properties:\n      Action: lambda:invokeFunction\n      FunctionName: !GetAtt LambdaFunction.Arn\n      Principal: apigateway.amazonaws.com\n      SourceArn: !Sub arn:aws:execute-api:${AWS::Region}:${AWS::AccountId}:${GraphQLApi}/*</code></pre><p>Finally, we export the API URL at the end of the template. We can use this URL to invoke calls to the Lambda.</p><pre><code class=\"language-yaml\">Outputs:\n  ApiUrl:\n    Description: Invoke url of API Gateway endpoint\n    Value: !Sub https://${GraphQLApi}.execute-api.${AWS::Region}.amazonaws.com/v1/graphql</code></pre><h1 id=\"deploy-cloudformation-stack-to-aws\">Deploy CloudFormation stack to AWS</h1><p>Now that we have the CloudFormation template ready let’s use the AWS CLI command to deploy it to AWS.</p><p>Run the following command in your console. Make sure to update the BucketName to whatever the name of the bucket you created earlier is.</p><pre><code class=\"language-bash\">aws cloudformation deploy \\\n  --template-file ./cloudformation.yml \\\n  --stack-name apollo-server-lambda-nodejs \\\n  --parameter-overrides BucketName=lambda-deploy-asln Version=latest \\\n  --capabilities CAPABILITY_IAM</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/3-1.png\" class=\"kg-image\" alt=\"3-1\" width=\"1400\" height=\"433\" loading=\"lazy\"><figcaption>Deploy CloudFormation stack to AWS</figcaption></figure><p>It might take some time to deploy the stack. Lambda function should be ready to start taking requests when the deployment finishes.</p><h1 id=\"verify-api-gateway-and-lambda-are-working-as-expected\">Verify API Gateway and Lambda are working as expected</h1><p>Now that we have deployed our CloudFormation Stack let us verify if everything is working as expected. We need the API Gateway URL to send a request to our Lambda Function. The API URL we exported in the CloudFormation template comes in handy here.</p><p>Run the following command to print the API URL in the command line.</p><pre><code class=\"language-bash\">aws cloudformation describe-stacks \\\n--stack-name=apollo-server-lambda-nodejs \\\n--query \"Stacks[0].Outputs[?OutputKey=='ApiUrl'].OutputValue\" \\\n--output text\n</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/4-1.png\" class=\"kg-image\" alt=\"4-1\" width=\"1400\" height=\"254\" loading=\"lazy\"><figcaption>Describe CloudFormation Stack</figcaption></figure><p>Now, use the <code>curl</code> command to invoke the API URL. You should get \"Hello from Lambda\" back from the server.</p><pre><code class=\"language-bash\">curl -d '{}' https://o55ybz0sc5.execute-api.us-east-1.amazonaws.com/v1/graphql</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/5.png\" class=\"kg-image\" alt=\"5\" width=\"1400\" height=\"149\" loading=\"lazy\"><figcaption>Invoke AWS Lambda</figcaption></figure><h1 id=\"add-deploy-script-for-easier-deployment\">Add deploy script for easier deployment</h1><p>You might have noticed that we ran a whole bunch of commands to package and deploy our application. It would be very tedious to have to run those commands every time we deploy the application. Let’s add a bash script to simplify this workflow.</p><p>Create a directory called <code>bin</code> at the root of the application and add a file named <code>deploy</code>.</p><pre><code class=\"language-bash\">mkdir bin \ntouch bin/deploy</code></pre><p>Before we can execute the script, we need to set correct file permissions. Let’s do that by running the following command.</p><pre><code class=\"language-bash\">chmod +x bin/deploy</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/6.png\" class=\"kg-image\" alt=\"6\" width=\"1400\" height=\"184\" loading=\"lazy\"><figcaption>Create deploy script</figcaption></figure><p>At this point, our directory structure should look like in the screenshot below.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/7.png\" class=\"kg-image\" alt=\"7\" width=\"1400\" height=\"463\" loading=\"lazy\"><figcaption>Current directory structure</figcaption></figure><p>Add the following code to the file.</p><pre><code class=\"language-bash\">#!/bin/bash\n\nset -euo pipefail\n\nOUTPUT_DIR=dist\nCURRENT_DIR=$(pwd)\nROOT_DIR=\"$( dirname \"${BASH_SOURCE[0]}\" )\"/..\nAPP_VERSION=$(date +%s)\nSTACK_NAME=apollo-server-lambda-nodejs\n\ncd $ROOT_DIR\n\necho \"cleaning up old build..\"\n[ -d $OUTPUT_DIR ] &amp;&amp; rm -rf $OUTPUT_DIR\n\nmkdir dist\n\necho \"zipping source code..\"\nzip -rq $OUTPUT_DIR/dist-$APP_VERSION.zip src node_modules package.json\n\necho \"uploading source code to s3..\"\naws s3 cp $OUTPUT_DIR/dist-$APP_VERSION.zip s3://$S3_BUCKET/dist-$APP_VERSION.zip\n\necho \"deploying application..\"\naws cloudformation deploy \\\n  --template-file $ROOT_DIR/cloudformation.yml \\\n  --stack-name $STACK_NAME \\\n  --parameter-overrides Version=$APP_VERSION BucketName=$S3_BUCKET \\\n  --capabilities CAPABILITY_IAM\n\n# Get the api url from output of cloudformation stack\nAPI_URL=$(\n  aws cloudformation describe-stacks \\\n  --stack-name=$STACK_NAME \\\n  --query \"Stacks[0].Outputs[?OutputKey=='ApiUrl'].OutputValue\" \\\n  --output text\n)\n\necho -e \"\\n$API_URL\"\n\ncd $CURRENT_DIR</code></pre><p>OK, let’s break down what’s going on in this script.</p><p>We start by defining some variables. We generate the archive file inside the <code>dist</code> directory. We set the app version to the current timestamp at which the script runs. Using the timestamp, we can make sure that the version number is always unique and incremental.</p><pre><code class=\"language-bash\">#!/bin/bash\n\nset -euo pipefail\n\nOUTPUT_DIR=dist\nCURRENT_DIR=$(pwd)\nROOT_DIR=\"$( dirname \"${BASH_SOURCE[0]}\" )\"/..\nAPP_VERSION=$(date +%s)\nSTACK_NAME=apollo-server-lambda-nodejs</code></pre><p>We then clean up any old builds and create a new <code>dist</code> directory.</p><pre><code class=\"language-bash\">echo \"cleaning up old build..\"\n[ -d $OUTPUT_DIR ] &amp;&amp; rm -rf $OUTPUT_DIR\n\nmkdir dist</code></pre><p>Then we run the zip command to archive the source code and its dependencies.</p><pre><code class=\"language-bash\">echo \"zipping source code..\"\nzip -rq $OUTPUT_DIR/dist-$APP_VERSION.zip src node_modules package.json</code></pre><p>Next, we copy the zip file to the S3 bucket.</p><pre><code class=\"language-bash\">echo \"uploading source code to s3..\"\naws s3 cp $OUTPUT_DIR/dist-$APP_VERSION.zip s3://$S3_BUCKET/dist-$APP_VERSION.zip</code></pre><p>Then we deploy the CloudFormation stack.</p><pre><code class=\"language-bash\">echo \"deploying application..\"\naws cloudformation deploy \\\n  --template-file $ROOT_DIR/cloudformation.yml \\\n  --stack-name $STACK_NAME \\\n  --parameter-overrides Version=$APP_VERSION BucketName=$S3_BUCKET \\\n  --capabilities CAPABILITY_IAM</code></pre><p>Finally, we query the CloudFormation Stack to get the API URL from the CloudFormation Outputs and print it in the console.</p><pre><code class=\"language-bash\"># Get the api url from output of cloudformation stack\nAPI_URL=$(\n  aws cloudformation describe-stacks \\\n  --stack-name=$STACK_NAME \\\n  --query \"Stacks[0].Outputs[?OutputKey=='ApiUrl'].OutputValue\" \\\n  --output text\n)\n\necho -e \"\\n$API_URL\"</code></pre><h1 id=\"deploy-to-aws-using-the-deploy-script\">Deploy to AWS using the deploy script</h1><p>Let’s try out the deployment using the deploy script. The script expects the S3_Bucket variable to be present in the environment. Run the following command to run the deployment. When the deployment is successful, the script will output the API URL that we can use to invoke the lambda.</p><pre><code class=\"language-bash\">S3_BUCKET=lambda-deploy-asln ./bin/deploy</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/8.png\" class=\"kg-image\" alt=\"8\" width=\"1400\" height=\"548\" loading=\"lazy\"><figcaption>Run the deploy script</figcaption></figure><p>To simplify this even further, let’s invoke it using yarn. Add the following in your <code>package.json</code>.</p><pre><code class=\"language-json\">\"scripts\": {\n  \"deploy\": \"S3_BUCKET=lambda-deploy-asln ./bin/deploy\"\n}</code></pre><p>Hereafter we can simply run <code>yarn deploy</code> to initiate deployments.</p><h1 id=\"improve-workflow-with-local-lambda-and-api-gateway\">Improve workflow with local Lambda and API Gateway</h1><p>We frequently modified the application code while working on our application. Right now, deploying to AWS us-east-1 region takes me around 10 seconds. I am on a 40Mb/s upload speed internet connection.</p><p>Time to deploy becomes more significant as the size of the application grows. Having to wait 10 seconds or more to realize I have made a syntax error is not productive at all.</p><p>Let’s fix this by setting up the lambda function locally and invoke it using a local API Endpoint. AWS SAM CLI enables us to do just that. Follow the instruction on <a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html\" rel=\"noopener nofollow\">this page</a> to install it.</p><p>Once done, from the root of the project, run the following command.</p><pre><code class=\"language-bash\">sam local start-api --template-file cloudformation.yml</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/9.png\" class=\"kg-image\" alt=\"9\" width=\"1400\" height=\"318\" loading=\"lazy\"><figcaption>Start local development server</figcaption></figure><p>The local endpoint is now available at <a href=\"http:/localhost:3000./\" rel=\"noopener nofollow\">http://localhost:3000.</a> We can use this endpoint to send requests to our local Lambda.</p><p>Open another terminal and run the following command to send a request. You should see the response from our local Lambda function.</p><pre><code class=\"language-bash\">curl -d '{}' http://localhost:3000/graphql</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/10.png\" class=\"kg-image\" alt=\"10\" width=\"1400\" height=\"164\" loading=\"lazy\"><figcaption>Invoke local lambda function</figcaption></figure><p>Finally, add the following lines in the <code>scripts</code> section of the <code>package.json</code>.</p><pre><code class=\"language-json\">\"dev\": \"sam local start-api --template-file cloudformation.yml\"</code></pre><p>Hereafter we can run the <code>yarn dev</code> command to start the dev server.</p><h1 id=\"set-up-the-graphql-server-in-lambda\">Set up the GraphQL server in Lambda</h1><p>Without further talking, let’s jump right into the code and build the GraphQL server.</p><p>Start by installing the dependencies. We are using <a href=\"https://www.apollographql.com/docs/apollo-server/\" rel=\"noopener nofollow\">Apollo Server</a> to build our GraphQL server. Apollo Server is an open-source implementation of GraphQL Server.</p><pre><code class=\"language-bash\">yarn add apollo-server-lambda graphql</code></pre><p>Replace the content of <code>src/index.js</code> with the following code.</p><pre><code class=\"language-javascript\">const { ApolloServer, gql } = require('apollo-server-lambda');\n\nconst typeDefs = gql`\n  type Query {\n    user: User\n  }\n\n  type User {\n    id: ID\n    name: String\n  }\n`;\n\nconst resolvers = {\n  Query: {\n    user: () =&gt; ({ id: 123, name: 'John Doe' })\n  }\n};\n\nconst server = new ApolloServer({ typeDefs, resolvers });\n\nexports.handler = server.createHandler();</code></pre><p>Here, we define a schema which consists of a type User and a user query. We then define a resolver for the user query. For the sake of simplicity, the resolver returns a hardcoded user. Finally, we create a GraphQL handler and export it.</p><p>To perform queries to our GraphQL server, we need a GraphQL client. <a href=\"https://insomnia.rest/download/core/\" rel=\"noopener nofollow\">Insomnia</a> is my favourite client. However, any other GraphQL client should be just fine.</p><p>Now, let’s run a query to ensure our server is working as expected.</p><p>Create a new GraphQL request in Insomnia.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/a.png\" class=\"kg-image\" alt=\"a\" width=\"1400\" height=\"693\" loading=\"lazy\"><figcaption>Create new GraphQL request</figcaption></figure><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/b.png\" class=\"kg-image\" alt=\"b\" width=\"1400\" height=\"693\" loading=\"lazy\"><figcaption>Configure GraphQL request</figcaption></figure><p>Add the following query in the body and submit the query to <code>http://localhost:3000</code>. Assuming your dev server is still running, you should see the following response from the GraphQL server.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/c.png\" class=\"kg-image\" alt=\"c\" width=\"1400\" height=\"693\" loading=\"lazy\"><figcaption>Perform GraphQL request to Local Server</figcaption></figure><p>Now that we've verified everything is working fine in the local server let’s run the following command to deploy the GraphQL server to AWS.</p><pre><code class=\"language-bash\">yarn deploy</code></pre><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/d-1.png\" class=\"kg-image\" alt=\"d-1\" width=\"1400\" height=\"663\" loading=\"lazy\"><figcaption>Deploy server to AWS</figcaption></figure><p>The API URL is outputted in the console once the deployment is complete. Replace the URL in Insomnia with the one from API Gateway. Rerun the query to see it resolve.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2020/05/e-1.png\" class=\"kg-image\" alt=\"e-1\" width=\"1400\" height=\"658\" loading=\"lazy\"><figcaption>Perform GraphQL request to AWS Lambda</figcaption></figure><h1 id=\"summary\">Summary</h1><p>Congratulations, you have successfully deployed a GraphQL Server in AWS Lambda purely using CloudFormation. The server can receive GraphQL requests from the client and return the response accordingly. </p><p>We also set up the development environment for local development without adding many dependencies.</p><p>If you liked this tutorial, please share it with your network.</p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/05/subash-adhikari-gravatar.jpeg 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2021/05/subash-adhikari-gravatar.jpeg\" class=\"author-profile-image\" alt=\"subash adhikari\" width=\"250\" height=\"250\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/subash/\" data-test-label=\"profile-link\">\n                    \n                        subash adhikari\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Polyglot Software Engineer Specialising in Serverless and AWS. Proud father of twin daughters.</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"How%20to%20Build%20and%20Deploy%20a%20GraphQL%20Server%20in%20AWS%20Lambda%20Using%20Node.js%20and%20CloudFormation\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"@adikari\",r=Boolean(\"\");let a;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"subash adhikari\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(a=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const d=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",d)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac22ed7ff4840eb\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"version\":\"2024.7.0\",\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\"}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"}}}