{"https://www.freecodecamp.org/news/author/rinormaloku/":{"https://www.freecodecamp.org//news/learn-istio-manage-microservices/":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Learn Istio – How to Manage, Monitor, and Secure Microservices</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/learn-istio-manage-microservices/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Three years ago, I wrote an article titled &quot;Back to Microservices with Istio&quot; [https://medium.com/google-cloud/back-to-microservices-with-istio-p1-827c872daa53]  for Google Cloud Community. I published it there to reach people interested in the latest technologies built on top of Kubernetes.  At that point, Istio was a niche technology. But fast-forward three years, and:\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Learn Istio – How to Manage, Monitor, and Secure Microservices\">\n    \n        <meta property=\"og:description\" content=\"Three years ago, I wrote an article titled &quot;Back to Microservices with Istio&quot; [https://medium.com/google-cloud/back-to-microservices-with-istio-p1-827c872daa53]  for Google Cloud Community. I published it there to reach people interested in the latest technologies built on top of Kubernetes.  At that point, Istio was a niche technology. But fast-forward three years, and:\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/learn-istio-manage-microservices/\">\n    <meta property=\"og:image\" content=\"https://www.freecodecamp.org/news/content/images/2022/05/how-traces-are-generated-1.png\">\n    <meta property=\"article:published_time\" content=\"2022-05-23T14:00:55.000Z\">\n    <meta property=\"article:modified_time\" content=\"2022-05-23T14:00:55.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Microservices\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Learn Istio – How to Manage, Monitor, and Secure Microservices\">\n    \n        <meta name=\"twitter:description\" content=\"Three years ago, I wrote an article titled &quot;Back to Microservices with Istio&quot; [https://medium.com/google-cloud/back-to-microservices-with-istio-p1-827c872daa53]  for Google Cloud Community. I published it there to reach people interested in the latest technologies built on top of Kubernetes.  At that point, Istio was a niche technology. But fast-forward three years, and:\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/learn-istio-manage-microservices/\">\n    <meta name=\"twitter:image\" content=\"https://www.freecodecamp.org/news/content/images/2022/05/how-traces-are-generated-1.png\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Rinor Maloku\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Microservices\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@rinormaloku\">\n    \n\n    <meta property=\"og:image:width\" content=\"810\">\n    <meta property=\"og:image:height\" content=\"387\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2022/05/how-traces-are-generated-1.png\",\n\t\t\"width\": 810,\n\t\t\"height\": 387\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/learn-istio-manage-microservices/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2022-05-23T14:00:55.000Z\",\n\t\"dateModified\": \"2022-05-23T14:00:55.000Z\",\n\t\"keywords\": \"Microservices\",\n\t\"description\": \"Three years ago, I wrote an article titled &quot;Back to Microservices with Istio&quot;\\n[https://medium.com/google-cloud/back-to-microservices-with-istio-p1-827c872daa53] \\nfor Google Cloud Community. I published it there to reach people interested in\\nthe latest technologies built on top of Kubernetes. \\n\\nAt that point, Istio was a niche technology. But fast-forward three years, and:\\n\\n * I&#x27;ve co-authored the book &quot;Istio in Action\\n   [https://www.manning.com/books/istio-in-action?utm_source&#x3D;rinor&amp;utm_medium&#x3D;\",\n\t\"headline\": \"Learn Istio – How to Manage, Monitor, and Secure Microservices\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Rinor Maloku\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/rinormaloku/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://rinormaloku.com\",\n\t\t\t\"https://twitter.com/rinormaloku\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2022/05/rinor-close.png\",\n\t\t\t\"width\": 504,\n\t\t\t\"height\": 483\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Mon May 23 2022 14:00:55 GMT+0000 (Coordinated Universal Time)\">\n                            May 23, 2022\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/microservices/\">\n                                #Microservices\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Learn Istio – How to Manage, Monitor, and Secure Microservices</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2022/05/rinor-close.png 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2022/05/rinor-close.png\" class=\"author-profile-image\" alt=\"Rinor Maloku\" width=\"504\" height=\"483\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/rinormaloku/\" data-test-label=\"profile-link\">\n                    \n                        Rinor Maloku\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w300/2022/05/how-traces-are-generated-1.png 300w, https://www.freecodecamp.org/news/content/images/size/w600/2022/05/how-traces-are-generated-1.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/how-traces-are-generated-1.png 1000w, https://www.freecodecamp.org/news/content/images/size/w2000/2022/05/how-traces-are-generated-1.png 2000w\">\n      <img onerror=\"this.style.display='none'\" src=\"https://www.freecodecamp.org/news/content/images/size/w2000/2022/05/how-traces-are-generated-1.png\" alt=\"Learn Istio – How to Manage, Monitor, and Secure Microservices\" ,=\"\" width=\"810\" height=\"387\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>Three years ago, I wrote an article titled <a href=\"https://medium.com/google-cloud/back-to-microservices-with-istio-p1-827c872daa53\" rel=\"nofollow\">\"Back to Microservices with Istio\"</a> for Google Cloud Community. I published it there to reach people interested in the latest technologies built on top of Kubernetes. </p><p>At that point, Istio was a niche technology. But fast-forward three years, and:</p><ul><li>I've co-authored the book \"<a href=\"https://www.manning.com/books/istio-in-action?utm_source=rinor&amp;utm_medium=affiliate&amp;utm_campaign=book_posta2_istio_9_30_18&amp;a_aid=rinor&amp;a_bid=9f6a70f3\" rel=\"nofollow\">Istio in Action</a>\" together with Christian Posta (<a href=\"https://twitter.com/christianposta\" rel=\"nofollow\">@christianposta</a>), which was recently published by Manning.</li><li>I've joined <a href=\"https://www.solo.io/\" rel=\"nofollow\">Solo.io</a>, where I collaborate daily with clients to best utilize Istio's service mesh capabilities. Whether it's for improving resiliency, reducing the risk of shipping new software, improving the security posture, or any of the myriad capabilities it enables.</li></ul><p>Kubernetes, which even then was reaching wide adoption, has now become a <a href=\"https://www.cncf.io/reports/cncf-annual-survey-2021/#:~:text=Kubernetes%20has%20crossed%20the%20adoption%20chasm%20to%20become%20a%20mainstream%20global%20technology%C2%A0\" rel=\"nofollow\">mainstream global technology</a>. And as the number of services operating on it increases — so will the number of organizations adopting Istio increase, too.</p><p>Further, <strong>Istio is not a niche technology anymore!</strong> After many improvements in the user experience — for example, installation and day-2 operations became way easier — Istio has been adopted by organizations of different sizes and industries. </p><p>At the same time, it is continuously expanding its toolset further by adding support for virtual machines, making the mesh scale into multiple clusters, and much more.</p><p>The last thing you need to know is that the market lacks people with this kind of knowledge. We need <em>you!</em> That’s why I entirely rewrote this article to be a thorough introduction to Istio and show what it does under the hood – because I don’t want you only to know \"what\" it does but also \"how\" it does it.</p><p>Here's the content that we'll cover in this handbook:</p><ul><li><a href=\"#what-does-istio-do\">What Does Istio Do?</a></li><li><a href=\"#introduction-to-istio\">Introduction to Istio</a></li><li><a href=\"#istio-s-architecture\">Istio’s Architecture</a></li><li><a href=\"#how-to-use-istio-in-practice\">How to Use Istio in Practice</a></li><li><a href=\"#how-to-run-the-services-on-the-mesh\">How to Run the Services on the Mesh</a></li><li><a href=\"#ingress-gateway-how-to-admit-traffic-into-the-mesh\">Ingress Gateway – How to Admit Traffic into the Mesh</a></li><li><a href=\"#observability\">Observability</a></li><li><a href=\"#traffic-management-canary-deployments\">Traffic Management – Canary Deployments</a></li><li><a href=\"#istio-security\">Istio Security</a></li></ul><h2 id=\"what-does-istio-do\">What Does Istio Do?</h2><p><strong>Istio</strong> is an open-source project that started in a partnership between teams from Google, IBM, and Lyft. Now, the number of contributors has grown to include many other organizations such as Solo.io, Tetrate, Aspen Mesh, and more.</p><p>It solves many microservice concerns, such as:</p><ul><li><strong>Traffic management:</strong> Resolving network unreliability with timeouts, retries, and load balancing</li><li><strong>Security:</strong> Encrypting traffic in transit, authentication and authorization of end-users and services</li><li><strong>Observability:</strong> Making the system observable with traces, metrics, and logs</li></ul><p>These complexities or concerns can be solved in the application layer, but your services become bloated with libraries that handle traffic management, service discovery, authentication, instrumentation, and everything else that’s not core to your business.</p><p>Let’s illustrate this with a conversation between a product manager and a developer:</p><!--kg-card-begin: markdown--><blockquote>\n<p><strong>PM:</strong> How long will it take to add a feedback feature to the application?</p>\n<p><strong>Dev:</strong> Two sprints.</p>\n<p><strong>PM:</strong> What…?! That’s just a CRUD!</p>\n<p><strong>Dev:</strong> Creating the CRUD is easy, but we need to authenticate and authorize users and services. And because the network is not reliable, we need to implement retries and circuit breakers. We need timeouts and bulkheads to ensure that we don’t take the whole system down. Additionally, to detect issues, we need monitoring and tracing […]</p>\n</blockquote>\n<!--kg-card-end: markdown--><p>You get the idea. All the ceremony and effort that must go in for us to add one simple service is enormous. </p><p>The figure below visualizes all the layers implemented in your application code that sap your team’s resources. Resources that would be better spent focused on core business functionality.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/layers-of-a-microservices.png\" class=\"kg-image\" alt=\"layers-of-a-microservices\" width=\"378\" height=\"289\" loading=\"lazy\"><figcaption>The layers of a microservice in addition to the core business functionality</figcaption></figure><p>Istio removes all the above-mentioned cross-cutting concerns from your services and implements those at the platform layer. Let’s see how that happens.</p><p><strong>NOTE: </strong>This article assumes that you have a working knowledge of Kubernetes. If it’s not the case, I recommend you read <a href=\"https://www.freecodecamp.org/news/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882/\" rel=\"nofollow\">my introduction to Kubernetes</a> and then proceed with this article.</p><h2 id=\"introduction-to-istio\">Introduction to Istio</h2><p>In a world without Istio, one service makes direct requests to another and in case of failures, the service is responsible for handling those. It can do so by retrying, dropping requests that take too long, opening the circuit breaker to protect services from overload, and so on.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/service-to-service-traffic.png\" class=\"kg-image\" alt=\"service-to-service-traffic\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/service-to-service-traffic.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/service-to-service-traffic.png 1000w, https://www.freecodecamp.org/news/content/images/2022/05/service-to-service-traffic.png 1374w\" sizes=\"(min-width: 720px) 720px\" width=\"1374\" height=\"317\" loading=\"lazy\"><figcaption>Service-to-service traffic</figcaption></figure><p>That’s why we have so many libraries for service discovery, resiliency, instrumentation, and so on. Considering that every service has to address these concerns, solving those on the platform layer instead of in the application code makes sense.</p><p>Istio devised an ingenious solution. It intercepts all network communication and redirects it to a capable sidecar proxy that runs alongside every service. <strong>And it is the proxies' responsibility to resolve all the concerns mentioned above.</strong></p><p>The animation below shows how the sidecar proxies intermediate traffic and implement retries, and failovers for failed requests.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/services-in-istio.gif\" class=\"kg-image\" alt=\"services-in-istio\" width=\"800\" height=\"298\" loading=\"lazy\"><figcaption>Service-to-service traffic in Istio</figcaption></figure><p>The sidecar proxy does more than that. We will elaborate on many of its features in this article. But what is key to note is that the application itself is entirely oblivious to the service proxy or even the entire mesh. If asked about the service mesh, your application would say, \"What the heck is a service mesh?!\"</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/fish-in-water.png\" class=\"kg-image\" alt=\"fish-in-water\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/fish-in-water.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/fish-in-water.png 1000w, https://www.freecodecamp.org/news/content/images/2022/05/fish-in-water.png 1400w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1400\" height=\"619\" loading=\"lazy\"><figcaption>Drawing by Victoria Dimitrakopoulos</figcaption></figure><h3 id=\"the-sidecar-proxy\">The sidecar proxy</h3><p>For the sidecar proxy to discern if the request failed or not, it has to understand application layer protocols, such as HTTP. Proxies that act at this layer are <em>application layer proxies</em> or <em>layer 7 proxies</em>. I’ll use those terms interchangeably in the continuation of the article. </p><p>By intercepting all service-to-service traffic, application layer proxies can implement the following:</p><ul><li><strong>Fault tolerance</strong> — Using response status codes, the proxy understands when a request fails and retries it.</li><li><strong>Fine-grained traffic management</strong> — Route requests with specific headers to intended services. Such as sending only beta users to a new beta release of an application</li><li><strong>Metrics</strong> — The count of successful responses and failed ones, the time it took for a service to respond, and so on.</li><li><strong>Tracing</strong> — Adds special headers in every request and traces them throughout the services in the cluster.</li><li><strong>Security</strong> — Authenticates services and end-users using certificates and JWT tokens, respectively.</li></ul><p>These are just a few of the capabilities enabled when managing traffic at the application networking layer.</p><h2 id=\"istio-s-architecture\">Istio’s Architecture </h2><p>Istio is composed of <em>the data plane</em> and <em>the control plane</em>.</p><h3 id=\"the-data-plane\">The data plane</h3><p>The data plane comprises all pods that have the sidecar proxy injected. In the Istio community, we frequently refer to them as mesh workloads or simply <em>workloads</em>.</p><p>Meanwhile, we refer to workloads without sidecar as <em>legacy workloads</em> because they are bad and dangerous, as you will see later on in the security section.</p><p><strong>NOTE:</strong> <em>\"Why don’t we simply call 'em pods?\"</em> — Because mesh workloads are not bound to a cluster and may be running in different ones, or on virtual machines, and actually anywhere you can run and configure the sidecar proxy.</p><h4 id=\"zooming-into-one-workload\">Zooming into one workload</h4><p>Each workload has the following four components:</p><ul><li><strong>The init container</strong> – you don’t have to worry about this. It will suffice to know that it configures traffic redirection to the sidecar proxy.</li><li><strong>The pilot-agent</strong> – you don’t have to worry about this, either. It will suffice to know that it does initial bootstrapping of the sidecar proxy.</li><li><strong>The sidecar proxy</strong> – you also don't need to worry about this. It will suffice to know that it is the concrete component that implements traffic management, security, and observability features.</li><li><strong>The app itself</strong></li></ul><p>Istio uses Envoy as the sidecar proxy. Envoy is a versatile layer 7 proxy that is highly extensible and has a vibrant community behind it.</p><p>Envoy differentiates itself from other proxies by being dynamically configurable through an API that it exposes.</p><p>You may ask, \"<strong>Why is it important?</strong>\" Because Envoy has to be kept up to date with the changes that occur in the environment. </p><p>For example, in Kubernetes, workloads are short-lived. New services are consistently deployed, workloads are rescheduled, and users might define new routing rules or policies. Therefore, we need <em>\"something\"</em> that continuously updates the proxy configuration.</p><p>That \"something\" is the <em>control plane</em>, which uses the Envoy API to synchronize the proxy with the changes occurring in the underlying platform.</p><h3 id=\"the-istio-control-plane\">The Istio control plane</h3><p>Istio’s control plane is a Kubernetes controller that watches the Kubernetes API server to learn about the workloads running in the platform and generates Envoy configuration on how to route the traffic to and from these workloads.</p><p>Additionally, Istio exposes an API in the format of Kubernetes Custom Resource Definitions (CRDs) with which service-operators (<em>you</em>) can configure the data plane.</p><p>With <em>configuring the data plane</em>, it's implied that you configure the workloads with policies, routing rules, retries, and so on.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/istio-control-plane.png\" class=\"kg-image\" alt=\"istio-control-plane\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/istio-control-plane.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/istio-control-plane.png 698w\" width=\"698\" height=\"461\" loading=\"lazy\"><figcaption>The control plane configures the data plane</figcaption></figure><p>We've learned quite a lot about Istio’s architecture. From here onwards, we’ll crank down theory to the bare minimum and crank up practical examples that will help you understand and memorize the content.</p><h2 id=\"how-to-use-istio-in-practice\">How to Use Istio in Practice</h2><h3 id=\"prerequisites-how-to-set-up-a-kubernetes-cluster\">Prerequisites: How to set up a Kubernetes cluster</h3><p>Before learning about Istio and how to use it, you need to get your hands on a Kubernetes cluster with admin access. </p><p>Understandably, you will need <code>kubectl</code> to interact with the cluster. To install <code>kubectl</code>, head over to <a href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl/\" rel=\"nofollow\">the official documentation and follow the instructions for your operating system</a>.</p><p>This article uses <em>Kubernetes In Docker</em>, also known as <code>kind</code>. You may use any other local Kubernetes distribution such as Docker-Desktop (<a href=\"https://docs.docker.com/desktop/\" rel=\"nofollow\">how to install</a> and <a href=\"https://docs.docker.com/desktop/kubernetes/\" rel=\"nofollow\">use it</a>), <a href=\"https://rancherdesktop.io/\" rel=\"nofollow\">Rancher Desktop</a>, or <a href=\"https://minikube.sigs.k8s.io/docs/start/\" rel=\"nofollow\">Minikube</a>. Just make sure to be on at least version 1.23 of Kubernetes.</p><p>To install <code>kind</code>, follow the installation instructions over at <a href=\"https://kind.sigs.k8s.io/docs/user/quick-start/\" rel=\"nofollow\">https://kind.sigs.k8s.io/docs/user/quick-start/</a>.</p><h3 id=\"how-to-create-a-cluster-with-kind\">How to create a cluster with <code>kind</code></h3><p>After installing <code>kind</code>, create a Kubernetes cluster with the command below:</p><p><code>kind create cluster --image=kindest/node:v1.23.1</code></p><p>This command pulls a container image with the Kubernetes version 1.23.1 and runs it on your container runtime. For example, if your runtime is <code>docker</code>, you can see the running container by executing <code>docker ps</code>.</p><p>Your output will show a new container running:</p><pre><code>CONTAINER ID   IMAGE                  COMMAND        NAMES\n2974301ffa31   kindest/node:v1.23.1   \"/usr/loca…\"   kind-control-plane</code></pre><p><strong>NOTE:</strong> Istio 1.13 is compatible with versions 1.20 and onwards of Kubernetes. To learn about the supported releases of Kubernetes, check the official docs at <a href=\"https://istio.io/latest/docs/releases/supported-releases/\" rel=\"nofollow\">Istio: Supported Kubernetes releases.</a></p><h3 id=\"how-to-install-istio-on-the-cluster\">How to install Istio on the cluster</h3><p>You can install Istio either with the <code>istioctl</code> utility or the <code>helm</code> package manager. To get <code>istioctl</code>, download the Istio release artifacts, as shown below.</p><pre><code class=\"language-bash\">curl -L https://istio.io/downloadIstio | \\\n  ISTIO_VERSION=1.13.2 TARGET_ARCH=x86_64 sh -</code></pre><p>In the downloaded directory, you will find the <code>istioctl</code> CLI tool under <code>istio-1.13.2/bin/istioctl</code>. Next, move the binary within your PATH environment variable—​so that you can execute <code>istioctl</code> commands from any directory.</p><p>After that, install Istio with the command below:</p><pre><code class=\"language-bash\">istioctl install --set profile=demo -y</code></pre><p>It might take several minutes for this command to complete as it waits for all Pods to be running. After it finishes, print the deployed Pods in the Istio installation namespace.</p><pre><code class=\"language-bash\">kubectl get pods -n istio-system</code></pre><p>You should see the output below.</p><pre><code>NAME                                   READY   STATUS    RESTARTS\nistio-egressgateway-6cf5fb4756-r569f   1/1     Running   0\nistio-ingressgateway-dc9c8f588-cn2z4   1/1     Running   0\nistiod-7586c7dfd8-2nbsk                1/1     Running   0</code></pre><p>The installed components are:</p><ul><li><strong>Istio egress gateway</strong> – used for securing egress traffic</li><li><strong>Istio ingress gateway</strong> – the entry point of traffic coming into your cluster</li><li><strong>Istiod</strong> – Istio’s control plane that configures the service proxies</li></ul><h3 id=\"how-to-install-the-istio-add-ons\">How to install the Istio add-ons</h3><p>The Istio artifacts downloaded earlier contain sample tools to visualize the generated telemetry. To deploy those into your cluster, execute the command below:</p><pre><code class=\"language-bash\">kubectl apply -f istio-1.13.2/samples/addons/</code></pre><p>This installs the following tools: Prometheus, Grafana, Kiali, and Jaeger. We will take a look at those later on. But, first, we need some services.</p><h3 id=\"the-sample-application-sentiment-analysis\">The sample application: Sentiment Analysis</h3><p>We’ll run the microservice application used in my <a href=\"https://www.freecodecamp.org/news/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882\" rel=\"nofollow\">Kubernetes introductory article</a>. It’s complex enough to showcase Istio’s features in practice.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/sentiment-analysis-app.png\" class=\"kg-image\" alt=\"sentiment-analysis-app\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/sentiment-analysis-app.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/sentiment-analysis-app.png 905w\" width=\"905\" height=\"431\" loading=\"lazy\"><figcaption>The sentiment analysis services</figcaption></figure><p>The figure above shows the services that comprise the app:</p><ul><li>The <strong>SA-Frontend</strong> — service serves the frontend; a React JavaScript application</li><li>The <strong>SA-WebApp</strong> — service handles queries for analyzing the sentiment of sentences</li><li>The <strong>SA-Logic</strong> — service performs sentiment analysis</li><li>The <strong>SA-Feedback</strong> — service records the user feedback about the accuracy of the analysis</li></ul><p>Additionally, the figure shows a layer 7 proxy that reverse-proxies traffic based on the request’s path. Within Istio’s mesh, the <em>Ingress Gateway</em> is the entry point for traffic and routes it to the services.</p><h2 id=\"how-to-run-the-services-on-the-mesh\">How to Run the Services on the Mesh</h2><p>To make services part of the mesh, you have to inject the sidecar proxy into their application pods. You can do this manually or automatically.</p><p>For automatic sidecar injection, you label the namespaces with <code>istio-injection: enabled</code>. After that, any pods deployed into those namespaces will have the sidecar injected (utilizing a Kubernetes feature called mutating webhooks that modifies the pod definition).</p><p>Create a namespace and label it for automatic injection.</p><pre><code class=\"language-bash\">kubectl create ns demo kubectl label ns demo istio-injection=enabled</code></pre><p>Switch the kubectl context to the <code>demo</code> namespace to apply subsequent commands to it.</p><pre><code class=\"language-bash\">kubectl config set-context --current --namespace=demo</code></pre><p>Next, clone the repository containing the services and configuration we need throughout the article:</p><pre><code class=\"language-bash\">git clone https://github.com/rinormaloku/master-istio.git \ncd master-istio</code></pre><p>Proceed to deploy the services:</p><pre><code>kubectl apply -f ./kube</code></pre><p>Next, verify that the sidecar got injected into each of the service pods with the following command:</p><pre><code class=\"language-bash\">$ kubectl get pods -n demo\n\nNAME                           READY     STATUS    RESTARTS   AGE\nsa-feedback-55f5dc4d9c-c9wfv   2/2       Running   0          12m\nsa-frontend-558f8986-hhkj9     2/2       Running   0          12m\nsa-logic-568498cb4d-2sjwj      2/2       Running   0          12m\nsa-logic-568498cb4d-p4f8c      2/2       Running   0          12m\nsa-web-app-599cf47c7c-s7cvd    2/2       Running   0          12m</code></pre><p>Ensure that under the <code>READY</code> column, you see the value “2/2”. This shows that both containers are running: the app container, and the sidecar proxy. Visualized in the figure below, where we zoom into one Pod.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/zoom-into-workload.png\" class=\"kg-image\" alt=\"zoom-into-workload\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/zoom-into-workload.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/zoom-into-workload.png 664w\" width=\"664\" height=\"573\" loading=\"lazy\"><figcaption>Figure 7. Zooming into one Pod: The sidecar container is injected into the pod</figcaption></figure><p>Our services are ready to receive end-user traffic. So for that purpose, we need to expose those next.</p><h2 id=\"ingress-gateway-how-to-admit-traffic-into-the-mesh\">Ingress Gateway – How to Admit Traffic into the Mesh</h2><p>Istio’s ingress gateway is a special proxy at the edge of the mesh that admits traffic from the public network and routes it to the services within the cluster.</p><p>Earlier, when we printed the pods in the Istio installation namespace, we saw it in the <code>Running</code> state. This gateway is exposed by a Kubernetes Service of type <code>LoadBalancer</code>. Which we can query as follows:</p><pre><code class=\"language-bash\">$ kubectl get svc -n istio-system -l istio=ingressgateway\n\nNAME                   TYPE           CLUSTER-IP     EXTERNAL-IP\nistio-ingressgateway   LoadBalancer   10.96.176.88   &lt;pending&gt;</code></pre><p>If you are using <code>kind</code>, the external IP address will be in <code>Pending</code> state. However, in managed Kubernetes clusters, the cloud provider would provision a load balancer with a static IP address that you can use to route traffic to the gateway.</p><p>As a workaround, we can port-forward it to our local environment. Open a second terminal, execute the following command, and leave it running for the entire article.</p><pre><code class=\"language-bash\">kubectl port-forward -n istio-system svc/istio-ingressgateway 8080:80</code></pre><p>Now, traffic to <code>localhost:8080</code> will be forwarded to the ingress gateway. If you open the browser, type that address, and hit enter, you’ll find out that the gateway rejects your request. That’s the default behavior of the gateway.</p><h3 id=\"gateway-api-admit-traffic\">Gateway API: admit traffic</h3><p>Istio defines the <code>Gateway</code> custom resource with which you can configure the type of traffic to admit into the mesh. For example, to accept HTTP traffic on port 80, we’ll use the configuration below:</p><pre><code class=\"language-yaml\">apiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n  name: http-gateway\nspec:\n  selector:\n    istio: ingressgateway\n  servers:\n  - port:\n      number: 80\n      name: http\n      protocol: HTTP\n    hosts:\n    - \"*\"</code></pre><p>Most of the above configuration is self-explanatory, but what might stand out is the selector <code>istio: ingressgateway</code>.</p><p>The question is: <em>\"Why do we need it?\"</em></p><p>A service mesh can have multiple ingress gateways. Usually, you’d use this in multi-tenant environments. In our instance, we’ll apply the <code>Gateway</code> configuration to the default ingress gateway, which is labeled with <code>istio=ingressgateway</code>.</p><p>Apply the <code>Gateway</code> to the cluster:</p><pre><code class=\"language-bash\">kubectl apply -f istio/http-gateway.yaml</code></pre><p>After applying the <code>Gateway</code> configuration, traffic on port 80 will be admitted for all hosts (as indicated by the wildcard host \"*\").</p><p>Next, we need to configure what to do with the admitted traffic.</p><h3 id=\"virtualservice-api-route-traffic\">VirtualService API: Route traffic</h3><p>The <code>VirtualService</code> resource configures traffic routing within the mesh for all proxies and gateways. In our instance, we want to route traffic from the ingress gateway to a set of workloads, as shown below.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/istio-ingress-gateway-routing.png\" class=\"kg-image\" alt=\"istio-ingress-gateway-routing\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/istio-ingress-gateway-routing.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/istio-ingress-gateway-routing.png 905w\" width=\"905\" height=\"427\" loading=\"lazy\"><figcaption>Istio’s ingress gateway routes traffic based on the HTTP location header</figcaption></figure><p>Let’s break down the requests that should be routed to SA-Frontend:</p><ul><li><strong>Paths matching exactly</strong> <code>/</code> should be routed to SA-Frontend to get the Index.html</li><li><strong>Paths prefixed with</strong> <code>/static/*</code> should be routed to SA-Frontend to get any static files needed by the frontend, like Cascading Style Sheets and JavaScript files.</li><li><strong>Paths that match the regex</strong> <code>'^.*\\.(ico|png|jpg)$'</code> should be routed to SA-Frontend.</li></ul><p>That’s achieved with the following configuration:</p><pre><code class=\"language-yaml\">apiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: sa-external-services\nspec:\n  hosts:\n  - \"*\"\n  gateways:\n  - http-gateway                      # 1\n  http:\n  - match:\n    - uri:\n        exact: /\n    - uri:\n        prefix: /static\n    - uri:\n        regex: '^.*\\.(ico|png|jpg)$'\n    route:\n    - destination:\n        host: sa-frontend             # 2\n        port:\n          number: 80</code></pre><ol><li>This <code>VirtualService</code> applies to requests coming through the <code>http-gateway</code> that we defined in the earlier section</li><li>Destination defines the service where to route traffic</li></ol><p><strong>NOTE:</strong> The configuration above is in the file <code>vs-route-ingress.yaml</code>. It also contains the routing rules for traffic to SA-WebApp and SA-Feedback. It’s omitted for brevity in the above listing.</p><p>Apply the <code>VirtualService</code> to the cluster.</p><pre><code class=\"language-bash\">kubectl apply -f istio/vs-route-ingress.yaml</code></pre><p>The control plane propagates the configuration to the gateway within a few seconds. After that, you can access the app on the address <a href=\"http://localhost:8080/\" rel=\"nofollow\">http://localhost:8080/</a>, provided you are still port-forwarding Istio’s ingress gateway to your local environment.</p><p>Open the browser on that address. You’ll see the application, as shown in the image below.</p><figure class=\"kg-card kg-image-card\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/sentiment-analysis.gif\" class=\"kg-image\" alt=\"sentiment-analysis\" width=\"500\" height=\"330\" loading=\"lazy\"></figure><p>The figure below shows how those two resources configure the ingress gateway. The <code>Gateway</code> resource configures it for admitting traffic and the <code>VirtualService</code> configures where to route the admitted traffic.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/gateway-vs-in-context.png\" class=\"kg-image\" alt=\"gateway-vs-in-context\" width=\"573\" height=\"426\" loading=\"lazy\"><figcaption>Configuring Istio’s ingress gateway to admit and route traffic</figcaption></figure><p>Hooray! We got the services up and running. We injected the sidecar and routed end-user traffic to those.</p><p>You might wonder: <em>\"Why this big fuss about running workloads into the mesh? After all, routing traffic to workloads using path-based routing can be done with any layer 7 ingress controller.\"</em></p><p>We'll answer that next, when we show the security and observability benefits you’ve gained. So let’s get started.</p><h2 id=\"observability\">Observability</h2><p>Istio’s sidecar proxy — namely the envoy proxy — generates access logs, metrics, and traces, for all inbound and outbound traffic. The metrics provide insights into the system’s workings and help answer questions such as: Is the system healthy? What’s the success rate of a service? And so on.</p><p>Generating the metrics is half of the story. The other half is collecting and visualizing the information in a way that prompts action. We’re going to use the Istio add-ons that we installed earlier:</p><ul><li><strong>Prometheus</strong> for collecting metrics</li><li><strong>Grafana</strong> for visualizing those</li><li><strong>Jaeger</strong> for snitching traces</li><li><strong>Kiali</strong> brings all telemetry data together</li></ul><p>But what if you already have some observability tools in your organization? Even better, you can integrate Istio with those :)</p><h3 id=\"grafana-visualizing-metrics\">Grafana: Visualizing metrics</h3><p>Grafana visualizes the metrics collected by Prometheus. Open the Grafana dashboard, and let’s see what we get out of the box.</p><pre><code class=\"language-bash\">istioctl dashboard grafana</code></pre><p>The above command will port-forward Grafana to your local environment and open it in your default browser. Next, navigate to \"Istio\" &gt; \"Istio Service Dashboard\" and filter the output by using the \"Service\" dropdown and select \"sa-webapp\" service.</p><p>If the graphs on your side look a little empty, then generate traffic by executing the command below:</p><pre><code class=\"language-bash\">while true; do \\\n  curl -i http://localhost:8080/sentiment \\\n  -H \"Content-type: application/json\" \\\n  -d '{\"sentence\": \"I love yogobella\"}'; \\\n  sleep .$RANDOM; done</code></pre><p>Leave this command running for the remainder of the article, as we will need the traffic inflow in the continuation too.</p><p>Below we visualize the metrics of the <code>sa-webapp</code> service.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/grafana-dashboard.png\" class=\"kg-image\" alt=\"grafana-dashboard\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/grafana-dashboard.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/grafana-dashboard.png 1000w, https://www.freecodecamp.org/news/content/images/2022/05/grafana-dashboard.png 1208w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1208\" height=\"638\" loading=\"lazy\"><figcaption>Grafana: Visualizing metrics for the sa-webapp service</figcaption></figure><p>Prometheus and Grafana enable us to understand our services' health, performance, and improvements or degradations throughout time. It’s up to you to further investigate the graphs and the information they visualize.</p><p>Next, we will investigate tracing requests while those pass throughout services.</p><h3 id=\"jaeger-snitching-the-traces-of-a-request\">Jaeger: Snitching the traces of a request</h3><p>It’s sensible to ask, \"Why do we trace requests <em>nowadays</em>? We weren’t doing that for monoliths?\" — switching to microservices solves some difficulties, though inadvertently, it brings some of the inherent properties of distributed systems that require other solutions. </p><p>For example, the property of being distributed makes localizing failures relatively tricky.</p><p>Imagine that an end-user receives a failed request — \"what was the cause?\" To locate the failure, you’d have to check all the services that participated in serving the request.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/localizing-failures-is-hard.png\" class=\"kg-image\" alt=\"localizing-failures-is-hard\" width=\"574\" height=\"172\" loading=\"lazy\"></figure><p>Without proper tools, the only available option is to take off your <em>Engineers</em> hat and put on your <em>Detectives</em> hat. Then you’d piece together the story of the \"<em>failed request</em>\" by querying all service logs, filtering by timestamp, and trying to make sense of all the data. Then, you would slowly but surely get to the bottom of it and find the culprit!</p><p>Playing detective might be a fun activity the first time — but it will quickly get mundane because failures are a common occurrence. We need efficient tools to locate those in distributed systems.</p><p><strong>Jaeger is such a tool.</strong></p><p>Jaeger comes from the German word for \"hunter\" (written Jäger). It implies \"hunting down failures.\" Though, I prefer my detective analogy way more. Thus strikethrough Jaeger ❌ and replace it with <strong>Inspector Gadget </strong>✅</p><p>To trace requests without Istio, you’d have to instrument all your services to generate traces and push those to <strong>Inspector Gadget</strong>. <em>(yeah…​ I’m rolling with it </em>🤣)</p><p>On the contrary, with Istio, the sidecar proxies generate trace headers (as HTTP headers) and push those to Inspector Gadget (<em>that’s the last time, I promise </em>😜). This is done by every service that has the sidecar proxy.</p><p>You only have to <strong>update your services to propagate the generated trace headers to upstream services</strong>. Otherwise, each proxy generates the headers anew. And when the traces are stitched together, it wouldn’t give us the complete picture of the request.</p><p>The diagram below visualizes the process.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/how-traces-are-generated.png\" class=\"kg-image\" alt=\"how-traces-are-generated\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/how-traces-are-generated.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/how-traces-are-generated.png 810w\" width=\"810\" height=\"387\" loading=\"lazy\"><figcaption>How tracing information is generated and pushed to the Trace Servers</figcaption></figure><p>Pay attention to step 4 in the diagram. It is the application’s responsibility to pass on the tracing headers to the upstream. </p><p>Passing tracing headers is critical, as the next proxy will pick up the existing headers and understand that this is a continuation of a request already being traced. Thus it will reuse the tracing headers (such as the <code>x-request-id</code>), and then it’ll add additional data that it records. The trace headers are used to combine all the information for a request in Jeager.</p><p>Open the Jaeger dashboard and see how traces show the full span of a request.</p><pre><code class=\"language-bash\">istioctl dashboard jaeger</code></pre><p>The above command will port-forward Jeager to your local environment and open it in your default browser.</p><p>Look around in the Jaeger user interface and investigate individual requests. For example, the image below shows the traces for a request to analyze the sentiment of a sentence.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/jaeger-request-trace.png\" class=\"kg-image\" alt=\"jaeger-request-trace\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/jaeger-request-trace.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/jaeger-request-trace.png 1000w, https://www.freecodecamp.org/news/content/images/2022/05/jaeger-request-trace.png 1323w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1323\" height=\"458\" loading=\"lazy\"><figcaption>The full request flow through the mesh</figcaption></figure><p>The image shows how the request started at the ingress gateway (that’s the first contact with a service mesh workload). Then the request was routed to <code>sa-webapp</code>, and <code>sa-logic</code>, respectively.</p><p><strong>NOTE: </strong>To learn about the headers your application needs to propagate and client libraries for that, check out <a href=\"https://istio.io/latest/about/faq/distributed-tracing\">Istio’s Distributed Tracing FAQ</a> and read the answer to <a href=\"https://istio.io/latest/about/faq/distributed-tracing/#how-to-support-tracing\">\"What is required for distributed tracing with Istio</a>?\"</p><p>Traces clarify where the request failed and which service returned the error, and so on. But we learn more about the failure using the proxy access logs and the application logs.</p><h3 id=\"access-logs\">Access logs</h3><p>Envoy records every individual request as access logs. Let’s print out one log entry from the <code>sa-webapp</code> service to see the recorded data.</p><pre><code class=\"language-bash\">$ kubectl logs deploy/sa-webapp -c istio-proxy | tail -n 1\n\n[2022-04-18T12:09:44.091Z] \"POST /sentiment HTTP/1.1\" 200 - via_upstream - \"-\" 32 46 5 5 \"10.244.0.6\" \"curl/7.74.0\" \"bfb9e6e5-2968-9b25-b256-f0917aa6b0bb\" \"localhost:8080\" \"10.244.0.16:8080\" inbound|8080|| 127.0.0.6:51819 10.244.0.16:8080 10.244.0.6:0 outbound_.80_._.sa-webapp.demo.svc.cluster.local default</code></pre><p>It looks a lot like gibberish, doesn’t it? This is the TEXT format, where each piece of information is space-separated. You can learn what each space-separated field stands for by printing the access log format — achieved with the command below:</p><pre><code class=\"language-bash\">$ istioctl pc all deploy/sa-webapp -o json | \\\n    grep log_format -A 2 | tail -n 2\n\n\"text_format_source\": {\n  \"inline_string\": \"[%START_TIME%] \\\"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)% %PROTOCOL%\\\" %RESPONSE_CODE% %RESPONSE_FLAGS% %RESPONSE_CODE_DETAILS% %CONNECTION_TERMINATION_DETAILS% \\\"%UPSTREAM_TRANSPORT_FAILURE_REASON%\\\" %BYTES_RECEIVED% %BYTES_SENT% %DURATION% %RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)% \\\"%REQ(X-FORWARDED-FOR)%\\\" \\\"%REQ(USER-AGENT)%\\\" \\\"%REQ(X-REQUEST-ID)%\\\" \\\"%REQ(:AUTHORITY)%\\\" \\\"%UPSTREAM_HOST%\\\" %UPSTREAM_CLUSTER% %UPSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_LOCAL_ADDRESS% %DOWNSTREAM_REMOTE_ADDRESS% %REQUESTED_SERVER_NAME% %ROUTE_NAME%\\n\"</code></pre><p>So the first entry is the <code>[%START_TIME%]</code> which from the log listed previously is the value <code>[2022-04-18T12:09:44.091Z]</code>, and so on. You can learn more about the access logs in this Istio doc: \"<a href=\"https://istio.io/latest/docs/tasks/observability/logs/access-log/#default-access-log-format\" rel=\"nofollow\">Envoy Access Logs</a>\".</p><h3 id=\"how-to-customize-access-log-format\">How to customize access log format</h3><p>You can customize the access log format. For example, the following command updates the Istio installation to print logs in JSON format.</p><pre><code class=\"language-bash\">istioctl install --set profile=demo \\\n    --set meshConfig.accessLogEncoding=\"JSON\"</code></pre><p>In the JSON format, the log data has values associated with keys which explains the value’s meaning.</p><h3 id=\"kiali-the-console-for-istio-s-service-mesh\">Kiali – The console for Istio’s Service Mesh</h3><p>Kiali is a powerful console for Istio. It uses the telemetry data to visualize service-to-service traffic. It correlates the collected telemetry information, such as metrics, traces, and access and application logs. Thus debugging application issues is a breeze.</p><p><strong>NOTE:</strong> Kiali has a list of validators that uncovers misconfigurations within the mesh too. This, however, is out of the scope of this article. Learn more about <a href=\"https://kiali.io/docs/features/validations/\">Kiali validators</a>.</p><p>Open the Kiali dashboard with the following command:</p><pre><code class=\"language-bash\">istioctl dashboard kiali</code></pre><p>The figure below shows the visualized information within the dashboard.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/kiali-dashboard-annotated.png\" class=\"kg-image\" alt=\"kiali-dashboard-annotated\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/kiali-dashboard-annotated.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/kiali-dashboard-annotated.png 1000w, https://www.freecodecamp.org/news/content/images/2022/05/kiali-dashboard-annotated.png 1461w\" sizes=\"(min-width: 1200px) 1200px\" width=\"1461\" height=\"780\" loading=\"lazy\"></figure><p>And next, we go to my favorite feature: Correlating metrics and traces, as shown below.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/correlation-requests-and-traces.png\" class=\"kg-image\" alt=\"correlation-requests-and-traces\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/correlation-requests-and-traces.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/correlation-requests-and-traces.png 1000w, https://www.freecodecamp.org/news/content/images/2022/05/correlation-requests-and-traces.png 1151w\" width=\"1151\" height=\"643\" loading=\"lazy\"></figure><p>The correlation of metrics and traces makes it straightforward for application teams to find the slowest request and the path it took through the services. This way, it’s easy to discover bottlenecks that the teams can focus on to improve their app performance.</p><p><strong>TIP:</strong> Check the official docs to learn more about <a href=\"https://kiali.io/docs/features/tracing/#metric-correlation\" rel=\"nofollow\">metric correlation</a></p><p>With that, we conclude the observability section of this article. Of course, all of the presented tools have more breadth and depth. However, the coverage here is enough to give you an idea about the observability that you gain over the system when adopting service meshes.</p><h2 id=\"traffic-management-canary-deployments\">Traffic Management – Canary Deployments</h2><p>Having service-to-service traffic intermediated by layer 7 proxies enables complex traffic management capabilities. As an example, we are already using that when we route requests based on the path header in the ingress gateway.</p><p>We can base routing decisions on any other HTTP information. Next, let’s see how traffic management capabilities enable us to make deployments safe.</p><h3 id=\"how-to-make-continuous-delivery-safe\">How to make Continuous Delivery safe</h3><p>In the entire tech industry, we learned empirically that most frequent service outages occur during workdays — and rarely on the weekends. That’s because, during the week, changes are introduced to the system. We cannot avoid changes, but we have to find ways to make their delivery safer.</p><p>Continuous delivery can be thought of in two phases:</p><ol><li><strong>Deployment phase</strong>: Deploy the application</li><li><strong>Release phase</strong>: Send end-user traffic to the application</li></ol><h4 id=\"delivery-patterns\">Delivery Patterns</h4><p>The \"Deployment phase\" is handled by the platform. For example, that’s what we use Kubernetes Deployments for.</p><p>The \"Release phase\" is where Istio’s traffic management capabilities come in handy and allow for the implementation of the following delivery patterns:</p><ul><li><strong>Canary Deployments</strong> — Validate the new deployment by routing only a fraction of the traffic to the latest version. Then validate the changes and only after that release it to all users.</li><li><strong>Progressive Deployments</strong> – A variation on the canary deployments where you gradually increase the percentage of traffic sent to the new version</li><li><strong>Dark launch</strong> – Not precisely about releasing software safely, but about releasing it to a subset of users (such as beta users) and verifying how the changes are received</li><li><strong>Traffic mirroring</strong> – Mirrors real user traffic to the new version of the application and ignore responses.</li></ul><p>In this article, we’ll show the canary deployment pattern to validate the new version of the app before we release it to real traffic. We cover more deployment patterns in the book <a href=\"https://livebook.manning.com/book/istio-in-action/chapter-5/73#:~:text=v1%20of%20catalog-,5.2.5%20Routing%20specific%20requests%20to%20v2,-Maybe%20we%20wish\" rel=\"nofollow\">Istio in Action.</a></p><h3 id=\"canary-deployments-with-istio\">Canary deployments with Istio</h3><p>When deploying another version of an app in Kubernetes, it immediately receives traffic, which means our users are routed to the new service. That’s not what we want!</p><p>We actually want traffic to be routed only to the first version, even after deploying the second version of the application (and later on, we decide to release the second version to end-user traffic).</p><p>In Istio, the distinction between the versions is made using the DestinationRule API. With the destination rule below, we define the following subsets:</p><ul><li>Subset <code>v1</code> — targets pods with the label <code>version: v1</code></li><li>Subset <code>v2</code> — targets pods with the label <code>version: v2</code></li></ul><pre><code class=\"language-yaml\">apiVersion: networking.istio.io/v1alpha3\nkind: DestinationRule\nmetadata:\n  name: sa-logic\nspec:\n  host: sa-logic\n  subsets:\n  - name: v1\n    labels:\n      version: v1\n  - name: v2\n    labels:\n      version: v2</code></pre><p>Let’s apply it to the cluster so that this distinction exists.</p><pre><code class=\"language-bash\">kubectl apply -f istio/sa-logic-dr.yaml</code></pre><p>Next, let’s create a virtual service that configures service proxies to route traffic only to subset <code>v1</code> for any traffic targeting the <code>sa-logic</code> service:</p><pre><code class=\"language-yaml\">apiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: sa-logic\nspec:\n  hosts:\n  - sa-logic\n  http:\n  - route:\n    - destination:\n        host: sa-logic\n        subset: v1\n      weight: 100</code></pre><p>Apply to the cluster by executing the following command:</p><pre><code class=\"language-bash\">kubectl apply -f istio/sa-logic-vs.yaml</code></pre><p>Now, deploying the second version of the service won’t release it to end-user traffic.</p><pre><code class=\"language-bash\">kubectl apply -f kube/canary/sa-logic-v2.yaml</code></pre><p>Verify that all traffic is routed to subset <code>v1</code> using the Kiali Graph dashboard (see figure below).</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/sa-logic-v1-only-kiali.png\" class=\"kg-image\" alt=\"sa-logic-v1-only-kiali\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/sa-logic-v1-only-kiali.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/sa-logic-v1-only-kiali.png 1000w, https://www.freecodecamp.org/news/content/images/2022/05/sa-logic-v1-only-kiali.png 1093w\" width=\"1093\" height=\"602\" loading=\"lazy\"><figcaption>Success rate of subset <em>v1</em></figcaption></figure><p>Next, let’s send only 10 percent of end-user traffic to the new version of <code>sa-logic</code>, as visualized in the image below.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/subsets-istio-config.png\" class=\"kg-image\" alt=\"subsets-istio-config\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/subsets-istio-config.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/subsets-istio-config.png 625w\" width=\"625\" height=\"331\" loading=\"lazy\"><figcaption>How Istio configures the routing to subsets</figcaption></figure><pre><code class=\"language-yaml\">apiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: sa-logic\nspec:\n  hosts:\n  - sa-logic\n  http:\n  - route:\n    - destination:\n        host: sa-logic\n        subset: v1\n      weight: 90\n    - destination:\n        host: sa-logic\n        subset: v2\n      weight: 10</code></pre><p>Apply it to the cluster.</p><pre><code class=\"language-bash\">kubectl apply -f istio/sa-logic-vs-canary.yaml</code></pre><p>After releasing the new version to end-user traffic, you can monitor it and validate it. Utilize the observability tools that we explored earlier. </p><p>For example, after applying the change, we can observe in the Kiali Graph the success and error rate of the subsets.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/sa-logic-v2-errors-kiali.png\" class=\"kg-image\" alt=\"sa-logic-v2-errors-kiali\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/sa-logic-v2-errors-kiali.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2022/05/sa-logic-v2-errors-kiali.png 1000w, https://www.freecodecamp.org/news/content/images/2022/05/sa-logic-v2-errors-kiali.png 1170w\" width=\"1170\" height=\"588\" loading=\"lazy\"></figure><p>Holy mackerel! We do have an increase in the error rate. Let’s update the virtual service to redirect all traffic to <code>v1</code>, which didn’t have any errors.</p><pre><code class=\"language-bash\">kubectl apply -f istio/sa-logic-vs.yaml</code></pre><p>If you recheck the Kiali Graphs, you’ll find that 100 percent of the traffic is routed to version 1, which didn’t have any errors.</p><p><strong>Summary:</strong> Releases in Kubernetes are always big bangs. You have a change that you want to ship, and if it has bugs, it impacts all of your users. </p><p>But Istio utilizes the service proxies to take fine-grained routing decisions that, when used, make releases safe.</p><p>Next, let’s investigate Istio’s security features — this is getting exciting!</p><h2 id=\"istio-security\">Istio Security</h2><p>I would’ve never (ever) believed that security would be a topic that excites me. What on the technological spectrum could Istio possibly do to make this topic entertaining? And more importantly, why should you be excited too?</p><p><strong>The answer is simple:</strong> Istio offloads security responsibilities from our application code and to the platform (specifically, the envoy proxies). Thus when traffic reaches our apps, it is already authenticated and authorized.</p><p>In the following sections, we will show how to authenticate and authorize both service-to-service, and end-user traffic using Istio. </p><p>But first, let’s make sure we have a common understanding of authentication and authorization:</p><ul><li><strong>Authentication</strong> is when a client or server proves identity (that is, answers \"who\" it is) using something it has, such as a certificate and/or a JWT.</li><li><strong>Authorization</strong> is the process of allowing or rejecting actions of authenticated users.</li></ul><h3 id=\"auto-mtls-service-to-service-authentication\">Auto mTLS: service-to-service authentication</h3><p>Istio uses the <em>Secure Production Identity Framework for Everyone</em> — also known as SPIFFE — to issue identity to workloads. </p><p>Elaboration on how SPIFFE works is out of this article’s scope. But it's enough to know that Istio mints the workload’s identity as an x509 certificate.</p><p>Istio uses the Kubernetes <code>serviceaccount</code> assigned to the Kubernetes Pod, by Kubernetes itself as the source of identity. If your deployment doesn’t specify a service account then the <code>default</code> service account is assigned to it.</p><p><strong>NOTE:</strong> For those interested in knowing more about SPIFFE, we dedicated <a href=\"https://livebook.manning.com/book/istio-in-action/appendix-c/\">\"appendix C. Istio security: SPIFFE\"</a> to it.</p><p>The minted certificate has workload metadata encoded, such as the namespace, the service account, and so on. The proxies use this certificate to initiate mutually authenticated connections (mTLS). You can find the certificate in the envoy configuration.</p><p>The following command queries the envoy configuration, filters it to the output we need, and decodes the certificate. You need to install <a href=\"https://smallstep.com/docs/step-cli/installation\" rel=\"nofollow\">step-cli</a> and <a href=\"https://stedolan.github.io/jq/download/\" rel=\"nofollow\">jq</a> to execute it.</p><pre><code class=\"language-bash\">istioctl proxy-config all deploy/sa-webapp -o json | \\\n  jq -r '.. |.\"secret\"? | select(.name == \"default\")' | \\\n  jq -r '.tls_certificate.certificate_chain.inline_bytes' | \\\n  base64 -d - | step certificate inspect</code></pre><p>My output is shown below.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/SVID.png\" class=\"kg-image\" alt=\"SVID\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/SVID.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/SVID.png 801w\" width=\"801\" height=\"349\" loading=\"lazy\"></figure><p>We mentioned that certificates are used to encrypt traffic and protect it from man-in-the-middle attacks. Let’s verify that next.</p><h4 id=\"service-to-service-traffic-is-encrypted\">Service-to-service traffic is encrypted</h4><p>To find out if the traffic is encrypted, we need to capture the traffic going through the pod. For that purpose, we will run a debug container within the pod with the following image <code>nicolaka/netshoot</code> (running debug containers requires Kubernetes version 1.23).</p><p>The <code>netshoot</code> image has many network utilities, including <code>tcpdump</code>, a network capturing utility that we’ll use.</p><p>Run the debug container with the following command:</p><pre><code class=\"language-bash\"># Query the name of the sa-webapp pod\nPOD_NAME=$(kubectl get pods -l app=sa-webapp -o jsonpath={.items..metadata.name} | cut -d ' ' -f1)\n\n# Run a debug container with tcpdump utility\nkubectl debug -q -i $POD_NAME --image=nicolaka/netshoot -- \\\n  tcpdump -l --immediate-mode -vv -s 0 '(((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)'</code></pre><p>It may take a minute or two (<em>or even more</em>) until the debug container is pulled and run. If you are still executing continuous queries to <code>sa-webapp</code>, you’ll see a lot of traffic captured. However, you won’t be able to gain any insights from it. Which is good, because <strong>that’s the idea — it’s encrypted. Tada! </strong>🎉</p><p>Be warned that this benefit doesn’t extend to legacy workloads, as we’ll see next.</p><h4 id=\"traffic-from-legacy-workloads-is-in-clear-text\">Traffic from legacy workloads is in clear-text</h4><p>Begin by running a legacy workload that runs indefinitely. We’ll create a new namespace and won’t label it for automatic sidecar injection. Thus, the workload won’t get the sidecar injected, it won’t have an identity, and it cannot mutually authenticate.</p><pre><code class=\"language-bash\">kubectl create ns legacy\nkubectl -n legacy run workload --image=radial/busyboxplus:curl -- tail -f /dev/null</code></pre><p>When the Pod is running, execute a cURL request from the legacy workload to the <code>sa-web-app</code> workload.</p><pre><code class=\"language-bash\">kubectl -n legacy exec workload -- \\\n  curl -i http://sa-webapp.demo/sentiment \\\n  -H \"Content-type: application/json\" \\\n  -d '{\"sentence\": \"I love yogobella\"}'</code></pre><p>Looking back at the output of the <code>tcpdump</code> command running in the <code>sa-webapp</code> pod, you will see the response in clear-text, as shown below.</p><pre><code class=\"language-bash\">HTTP/1.1 200 OK\ncontent-type: application/json;charset=UTF-8\ndate: Mon, 25 Apr 2022 12:14:02 GMT\nx-envoy-upstream-service-time: 13\nserver: istio-envoy\nx-envoy-decorator-operation: sa-web-app.demo.svc.cluster.local:80/*\ntransfer-encoding: chunked\n\n2e\n{\"sentence\":\"I love yogobella\",\"polarity\":0.5}</code></pre><p>Suppose the data is sensitive, such as passwords, JWT (which can be used in replay attacks), and so on. This represents a dangerous attack vector and is a risk for your organization.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/mtls-and-non-mtls-traffic.png\" class=\"kg-image\" alt=\"mtls-and-non-mtls-traffic\" width=\"516\" height=\"341\" loading=\"lazy\"></figure><p>Istio gives us the tools to prevent workloads in the mesh from receiving clear-text traffic.</p><h3 id=\"peerauthentication-how-to-improve-security-defaults\">PeerAuthentication – how to improve security defaults</h3><p>By default, Istio configures the service proxies to use the <em>mTLS permissive</em> mode, which means that non-authenticated traffic is permitted. </p><p>That’s a sensible default, as it allows for a gradual migration of services into the mesh without causing downtime to your services.</p><p>After workloads have been migrated into the mesh, it is recommended to flip the mTLS mode to require mutually authenticated traffic strictly. You can do that with the following <code>PeerAuthentication</code> configuration.</p><pre><code class=\"language-yaml\">apiVersion: \"security.istio.io/v1beta1\"\nkind: \"PeerAuthentication\"\nmetadata:\n  name: \"default\"\n  namespace: \"istio-system\"\nspec:\n  mtls:\n    mode: STRICT</code></pre><p>This configuration applies to all workloads, beacuse Istio uses a convention that configuration in the Istio installation namespace (in our case <code>istio-system</code>) does so. However, it can be overwritten with a <em>namespace-wide</em> configuration or <em>sidecar-specific</em> configuration.</p><p>Learn more about the <a href=\"https://istio.io/latest/docs/tasks/observability/telemetry/#scope-inheritance-and-overrides\" rel=\"nofollow\">\"Scope, Inheritance, and Overrides\"</a> of Istio configuration. The explanation is about the Telemetry API but applies to the <code>PeerAuthentication</code>, and other Istio API’s the same.</p><p>Apply the peer authentication configuration to the cluster.</p><pre><code class=\"language-bash\">kubectl apply -f istio/security/peer-authentication.yaml</code></pre><p>Verify that traffic from legacy workloads is rejected.</p><pre><code class=\"language-bash\">$ kubectl -n legacy exec workload -- \\\n    curl -i -Ss http://sa-webapp.demo/sentiment \\\n    -H \"Content-type: application/json\" \\\n    -d '{\"sentence\": \"I love yogobella\"}'\n\ncurl: (56) Recv failure: Connection reset by peer\ncommand terminated with exit code 56</code></pre><p>The cURL command fails with the error <code>Recv failure: Connection reset by peer</code> as the service proxy doesn’t accept the unauthenticated connection.</p><h3 id=\"how-to-authorize-service-to-service-traffic\">How to authorize service-to-service traffic</h3><p>Mutually authenticating services and encrypting traffic between them protects our data in transit.</p><p><em>But what happens when a malicious user gets hold of the identity of one of the workloads?</em></p><p><strong>The malicious user could authenticate to every service and query sensitive data.</strong></p><p>However, if we adhere to the principle of least privilege, we reduce each workload’s access to only what is needed for its functions. Thus, we reduce the damage scope when an identity is stolen to only what it was permitted to access.</p><p>In Istio, we control the access using authorization policies. Basically, after workloads mutually authenticate and we know their identity, namely we know \"who\" it is, then we can apply policies, that is specify what actions the identity is allowed to perform.</p><p>I leave this as an optional exercise to you. You should implement authorization policies so that the mesh adheres to the principle of least privilege. </p><p>Istio has a <a href=\"https://istio.io/latest/docs/tasks/security/authorization/authz-http/\" rel=\"nofollow\">quick example</a> to get you on the right path, and you’ll find the detailed descriptions of the <a href=\"https://istio.io/latest/docs/reference/config/security/authorization-policy/\" rel=\"nofollow\">AuthorizationPolicy API reference</a> useful.</p><p><em>Summary of the access each service needs:</em></p><ul><li>The <code>istio-ingressgateway</code> can access <code>sa-frontend</code>, &nbsp;<code>sa-feedback</code>, and <code>sa-web-app</code></li><li>The <code>sa-web-app</code> can access the <code>sa-logic</code> service.</li><li>All other access should be prohibited.</li></ul><h3 id=\"end-user-authentication\">End-user authentication</h3><p>Istio authenticates end-user requests using JWTs as a means of authentication.</p><p>For end-users to receive a JSON web token, we need an identity provider (IdP). We will use Keycloak as an IdP. However, any solution implementing the OpenID Connect Discovery (OIDC) standard will work the same.</p><h4 id=\"run-keycloak-in-the-cluster\">Run Keycloak in the cluster</h4><p>Begin by creating a namespace and deploying <code>keycloak</code> into it.</p><pre><code class=\"language-bash\">kubectl create ns keycloak\nkubectl -n keycloak apply -f kube/idp/keycloak.yaml\n\n# wait for the rollout\nkubectl -n keycloak rollout status deploy/keycloak</code></pre><p>Wait until <em>keycloak</em> is up and running. Next, create a client application to represent the <code>sa-frontend</code> single-page application. Additionally, add the users listed in the table below.</p><!--kg-card-begin: html--><table style=\"box-sizing: border-box; border-spacing: 0px; border-collapse: collapse; margin-top: 0px; margin-bottom: 16px; display: block; width: max-content; max-width: 100%; overflow: auto;\"><thead style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box; background-color: var(--color-canvas-default); border-top: 1px solid var(--color-border-muted);\"><th style=\"box-sizing: border-box; padding: 6px 13px; font-weight: 600; border: 1px solid var(--color-border-default);\">Username</th><th style=\"box-sizing: border-box; padding: 6px 13px; font-weight: 600; border: 1px solid var(--color-border-default);\">Password</th><th style=\"box-sizing: border-box; padding: 6px 13px; font-weight: 600; border: 1px solid var(--color-border-default);\">Group</th><th style=\"box-sizing: border-box; padding: 6px 13px; font-weight: 600; border: 1px solid var(--color-border-default);\">UserType</th></tr></thead><tbody style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box; background-color: var(--color-canvas-default); border-top: 1px solid var(--color-border-muted);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">user</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">password</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">users</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">regular</p></td></tr><tr style=\"box-sizing: border-box; background-color: var(--color-canvas-subtle); border-top: 1px solid var(--color-border-muted);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">beta</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">password</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">users</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">beta</p></td></tr><tr style=\"box-sizing: border-box; background-color: var(--color-canvas-default); border-top: 1px solid var(--color-border-muted);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">moderator</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">password</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">moderator</p></td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid var(--color-border-default);\"><p dir=\"auto\" style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 16px;\">regular</p></td></tr></tbody></table><!--kg-card-end: html--><blockquote>NOTE: The <code>group</code> and <code>usertype</code> attributes are added as claims in the JWT after authentication.</blockquote><p>The creation of the client application and the users is automated with the script below. This spares you the process of going through the Keycloak UI and manually creating those.</p><pre><code class=\"language-bash\"># 1. Port forward to the local environment\nkubectl port-forward svc/keycloak -n keycloak  8081:8080 &amp;\nPID=$!\nsleep 2\n\n# 2. Create client and users\nexport KEYCLOAK_URL=http://localhost:8081/auth\n\nexport KEYCLOAK_TOKEN=$(curl -d \"client_id=admin-cli\" -d \"username=admin\" -d \"password=admin\" -d \"grant_type=password\" \"$KEYCLOAK_URL/realms/master/protocol/openid-connect/token\" | jq -r .access_token)\necho $KEYCLOAK_TOKEN\n\n# Create initial token to register the client\nread -r client token &lt;&lt;&lt;$(curl -H \"Authorization: Bearer ${KEYCLOAK_TOKEN}\" -X POST -H \"Content-Type: application/json\" -d '{\"expiration\": 0, \"count\": 1}' $KEYCLOAK_URL/admin/realms/master/clients-initial-access | jq -r '[.id, .token] | @tsv')\n\n# Register the client\nread -r id secret &lt;&lt;&lt;$(curl -X POST -d \"{ \\\"clientId\\\": \\\"sa-frontend\\\", \\\"implicitFlowEnabled\\\": true }\" -H \"Content-Type:application/json\" -H \"Authorization: bearer ${token}\" ${KEYCLOAK_URL}/realms/master/clients-registrations/default| jq -r '[.id, .secret] | @tsv')\n\n# Add allowed redirect URIs\ncurl -H \"Authorization: Bearer ${KEYCLOAK_TOKEN}\" -X PUT \\\n  -H \"Content-Type: application/json\" -d \"{\\\"serviceAccountsEnabled\\\": true, \\\"directAccessGrantsEnabled\\\": true, \\\"authorizationServicesEnabled\\\": true, \\\"redirectUris\\\": [\\\"http://localhost:8080/\\\"]}\" $KEYCLOAK_URL/admin/realms/master/clients/${id}\n\n# Add the group attribute in the JWT returned by Keycloak\ncurl -H \"Authorization: Bearer ${KEYCLOAK_TOKEN}\" -X POST -H \"Content-Type: application/json\" -d '{\"name\": \"group\", \"protocol\": \"openid-connect\", \"protocolMapper\": \"oidc-usermodel-attribute-mapper\", \"config\": {\"claim.name\": \"group\", \"jsonType.label\": \"String\", \"user.attribute\": \"group\", \"id.token.claim\": \"true\", \"access.token.claim\": \"true\"}}' $KEYCLOAK_URL/admin/realms/master/clients/${id}/protocol-mappers/models\n\n# Add the user type attribute in the JWT returned by Keycloak\ncurl -H \"Authorization: Bearer ${KEYCLOAK_TOKEN}\" -X POST -H \"Content-Type: application/json\" -d '{\"name\": \"usertype\", \"protocol\": \"openid-connect\", \"protocolMapper\": \"oidc-usermodel-attribute-mapper\", \"config\": {\"claim.name\": \"usertype\", \"jsonType.label\": \"String\", \"user.attribute\": \"usertype\", \"id.token.claim\": \"true\", \"access.token.claim\": \"true\"}}' $KEYCLOAK_URL/admin/realms/master/clients/${id}/protocol-mappers/models\n\n# Create regular user\ncurl -H \"Authorization: Bearer ${KEYCLOAK_TOKEN}\" -X POST -H \"Content-Type: application/json\" -d '{\"username\": \"user\", \"email\": \"user@acme.com\", \"enabled\": true, \"attributes\": {\"group\": \"users\", \"usertype\": \"regular\"}, \"credentials\": [{\"type\": \"password\", \"value\": \"password\", \"temporary\": false}]}' $KEYCLOAK_URL/admin/realms/master/users\n\n# Create beta user\ncurl -H \"Authorization: Bearer ${KEYCLOAK_TOKEN}\" -X POST -H \"Content-Type: application/json\" -d '{\"username\": \"beta\", \"email\": \"beta@acme.com\", \"enabled\": true, \"attributes\": {\"group\": \"users\", \"usertype\": \"beta\"}, \"credentials\": [{\"type\": \"password\", \"value\": \"password\", \"temporary\": false}]}' $KEYCLOAK_URL/admin/realms/master/users\n\n# Create moderator user\ncurl -H \"Authorization: Bearer ${KEYCLOAK_TOKEN}\" -X POST -H \"Content-Type: application/json\" -d '{\"username\": \"moderator\", \"email\": \"moderator@acme.com\", \"enabled\": true, \"attributes\": {\"group\": \"moderator\", \"usertype\": \"regular\"}, \"credentials\": [{\"type\": \"password\", \"value\": \"password\", \"temporary\": false}]}' $KEYCLOAK_URL/admin/realms/master/users\n\n# 3. Stop port-forwarding\nkill $PID</code></pre><p>After that completes successfully, you’ll be able to proceed to the next section.</p><h3 id=\"how-to-expose-the-keycloak-service\">How to expose the Keycloak service</h3><p>The OIDC standard enables client applications to identify end-users. The client app starts the process by redirecting users to the authentication server. First, users authenticate themselves, and then the authentication server returns the user to the client application with a token representing their identity.</p><p>The authentication server has to be accessible to end-users. That’s why we must expose <code>keycloak</code> through Istio’s ingress gateway too.</p><p>The updated virtual service that configures traffic routing to keycloak can be applied with the command below. Feel free to check out the file and learn about the changes.</p><pre><code class=\"language-bash\">kubectl apply -f istio/vs-route-ingress-keycloak.yaml</code></pre><p>Next, we need to update the client application — <code>sa-frontend</code> — to redirect the user to the frontend. You can learn about the code <a href=\"https://github.com/rinormaloku/master-istio/blob/main/services/sa-frontend/src/App.js#L80-L83\">here</a>. However, you can spare yourself the details and just apply the prebuilt image with those changes.</p><pre><code class=\"language-bash\">kubectl set image deployment/sa-frontend \\\n    sa-frontend=rinormaloku/sentiment-analysis-frontend:keycloak</code></pre><p>Wait until the Pod is running and then refresh the <code>sa-frontend</code> page.</p><p>The new version redirects you to <code>Keycloak</code> for authentication. Use the credentials <code>user / password</code> to log in. Upon successful log in you’ll receive a JWT and will be redirected back to the client.</p><p>As a result, subsequent requests for sentence analysis will contain the JWT based on which we can authenticate and authorize the end-user.</p><h3 id=\"requestauthentication-how-to-authenticate-end-user-requests\">RequestAuthentication – how to authenticate end-user requests</h3><p>The recommended approach to authenticate end-user traffic is in the ingress gateway. This reduces the amount of processing as unauthenticated and unauthorized traffic is rejected early on. But if you want to propagate the JWT across services you must update your services to pass it on.</p><p>The figure below shows the roles and their access to our services that we will implement next. </p><p>Here's a summary of the access levels:</p><ul><li>All users can access the <code>sa-frontend</code> service (which is important to initiate the authentication flow)</li><li>Authenticated users can access <code>sa-webapp</code> in addition to the <code>sa-frontend</code> access</li><li>Moderators can access all services</li></ul><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/different-access-levels.png\" class=\"kg-image\" alt=\"different-access-levels\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/different-access-levels.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/different-access-levels.png 905w\" width=\"905\" height=\"532\" loading=\"lazy\"></figure><p>The <code>RequestAuthentication</code> API is used to configure authentication of end-user JWTs. For example, with the configuration below we authenticate JWTs issued by <code>keycloak</code>.</p><pre><code>apiVersion: \"security.istio.io/v1beta1\"\nkind: \"RequestAuthentication\"\nmetadata:\n  name: \"keycloak-request-authn\"\n  namespace: istio-system\nspec:\n  selector:\n    matchLabels:\n      app: istio-ingressgateway\n  jwtRules:\n  - issuer: \"http://localhost:8080/auth/realms/master\" (1)\n    jwksUri: http://keycloak.keycloak.svc:8080/auth/realms/master/protocol/openid-connect/certs (2)</code></pre><p>Elaborating the JWT Rule attributes seen in the above listing:</p><ol><li>Tokens that match this issuer are authenticated with this JWT rule</li><li>Matched tokens are validated against the JSON Web Key Sets (JWKS) found at this URI</li></ol><p>Apply it to the cluster.</p><pre><code class=\"language-bash\">kubectl apply -f istio/security/request-authentication.yaml</code></pre><p>You might expect that requests without JWTs are rejected from now on, but that's not correct. The <code>RequestAuthentication</code> resource only authenticates requests containing the JWT. Other requests are passed as is.</p><p>Verify that by triggering a request without a token, it is admitted and served, as shown below:</p><pre><code class=\"language-bash\">$ curl -S http://localhost:8080/sentiment \\\n    -H \"Content-type: application/json\" \\\n    -d '{\"sentence\": \"I love yogobella\"}'\n\n{\"sentence\":\"I love yogobella\",\"polarity\":0.5}</code></pre><p>However, there is a difference between requests that contain a JWT and ones without a token. </p><p>The former will have the identity data stored in the connection metadata. Meanwhile, the latter lacks the identity data in the connection metadata. The connection metadata are referred to as connection identity or request identity.</p><p><strong>NOTE:</strong> The request identity is composed of the authenticated data through <code>RequestAuthentication</code> and <code>PeerAuthentication</code>. Thus you can control access based on both the end-user and the service making the request.</p><p>The policies make decisions to admit or reject traffic based on the request identity.</p><h3 id=\"authorizationpolicy-how-to-admit-and-reject-requests\">AuthorizationPolicy – How to admit and reject requests</h3><p>Using the <code>AuthorizationPolicy</code> API, you can configure the proxies to accept or reject traffic.</p><p>We want <em><em>all users</em></em>, even unauthenticated ones, to access the <code>sa-frontend</code>, and <code>keycloak</code> services (so that users can authenticate themselves in the first place). And only after that do we know \"who\" the user is, and we can apply policies to determine \"what\" actions they are allowed to perform.</p><p>We achieve that with the policy below. It allows any traffic to the listed paths (the paths are for the <code>sa-frontend</code> and <code>keycloak</code> services).</p><pre><code class=\"language-yaml\">apiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: allow-view\n  namespace: istio-system\nspec:\n  selector:\n    matchLabels:\n      app: istio-ingressgateway\n  action: ALLOW\n  rules:\n  - to:\n    - operation:\n        paths: [\"/\", \"/static*\", \"/auth*\"]</code></pre><p>Apply it to the cluster.</p><pre><code class=\"language-bash\">kubectl apply -f istio/security/allow-view.yaml</code></pre><p>Now users can authenticate and receive a JWT, which is used in subsequent requests to the cluster services. The <code>RequestAuthentication</code> configuration authenticates the JWT, and as a result, claims from the token are stored as connection metadata.</p><p>The key metadata that we use in the next section is the <code>requestPrincipals</code> which Istio constructs by combining the <code>iss</code> and <code>sub</code> claims of the JWT.</p><h4 id=\"how-to-admit-requests-based-on-the-connection-metadata\">How to admit requests based on the connection metadata</h4><p>With the policy below, we allow requests from any of the matching <code>requestPrincipals</code> for all paths prefixed with <code>/sentiment</code>.</p><pre><code class=\"language-yaml\">apiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: allow-analysis\n  namespace: istio-system\nspec:\n  selector:\n    matchLabels:\n      app: istio-ingressgateway\n  action: ALLOW\n  rules:\n  - from:\n    - source:\n        requestPrincipals: [\"*\"]\n    to:\n    - operation:\n        paths: [\"/sentiment*\"]</code></pre><p>For a policy to apply to incoming traffic, it must match both the <code>source</code> and the <code>operation</code>. For example, the above policy will apply and allow traffic only if:</p><ul><li><strong>source</strong> matches all requestPrincipals because of the wildcard. However, it won’t match if the request lacks any request principal. The request principal for a request is assigned only after a <code>RequestAuthentication</code> validates the JWT.</li><li><strong>operation</strong> matches all requests whose paths are prefixed with <code>/sentiment</code></li></ul><p>Apply it to the cluster.</p><pre><code class=\"language-bash\">kubectl apply -f istio/security/allow-analysis.yaml</code></pre><p>Verify that you can analyze sentences. If everything is fine, proceed to the next section.</p><h4 id=\"different-levels-of-access\">Different levels of access</h4><p>The <code>sa-frontend</code> allows users to send feedback after analyzing a sentence. But currently, if you try sending feedback, the request will fail with \"Not authorized.\"</p><figure class=\"kg-card kg-image-card\"><img src=\"https://www.freecodecamp.org/news/content/images/2022/05/frontend-unauthorized-1.png\" class=\"kg-image\" alt=\"frontend-unauthorized-1\" srcset=\"https://www.freecodecamp.org/news/content/images/size/w600/2022/05/frontend-unauthorized-1.png 600w, https://www.freecodecamp.org/news/content/images/2022/05/frontend-unauthorized-1.png 709w\" width=\"709\" height=\"368\" loading=\"lazy\"></figure><p>This happens because no policy explicitly allowed the request. So it will deny it by default. Next, we want to allow this action only for moderators.</p><p>We make the distinction between moderators and users using the <code>group</code> claim. We can achieve that with the following policy:</p><pre><code class=\"language-yaml\">apiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: allow-feedback-for-mods\n  namespace: istio-system\nspec:\n  selector:\n    matchLabels:\n      app: istio-ingressgateway\n  action: ALLOW\n  rules:\n  - from:\n    - source:\n        requestPrincipals: [\"*\"]\n    when:\n    - key: request.auth.claims[group]\n      values: [\"moderator\"]</code></pre><p>Apply it to the cluster.</p><pre><code class=\"language-bash\">kubectl apply -f istio/security/allow-feedback.yaml</code></pre><p>To verify that moderators can send feedback, follow these steps: open an incognito window, log in with the credentials <code>moderator / password</code>, type a sentence, and submit feedback. It will succeed!</p><p>In the security section, we learned three custom resources:</p><ul><li><code>PeerAuthentication</code> — for authentication of peers</li><li><code>RequestAuthentication</code> — for authentication of end-users</li><li><code>AuthorizationPolicy</code> — for allowing or rejecting requests based on the authenticated data.</li></ul><h2 id=\"summary\">Summary</h2><p>Hey! You got to the bottom of this article. Congrats, and well done! It was a rather long one, but after investing a few hours into it and on yourself — you have a clear idea of what <code>Istio</code> is and what it can do for you and your business.</p><p>A summary of what we covered:</p><!--kg-card-begin: markdown--><ul>\n<li>Service meshes are implemented by adding a proxy alongside the application and intercepting all network traffic to and from it.</li>\n<li>The proxy enables:\n<ul>\n<li><strong>Advanced traffic management</strong>\n<ul>\n<li>Using <code>Gateways</code>, we define the traffic that is accepted into a service proxy (including the ingress gateway)</li>\n<li>Using <code>VirtualServices</code>, we define how to route traffic to a destination.</li>\n<li>Using <code>DestinationRules</code>, we define policies after routing has occurred. In our instance, we only used it to define subsets.</li>\n</ul>\n</li>\n<li><strong>Making an observable system by generating telemetry</strong>\n<ul>\n<li>Access logs record the results of individual requests.</li>\n<li>Traces show the flow of a request through services. Visualized by Inspector Gadget (<em>I couldn't resist, but you know that I mean Jaeger ;P</em>) and Kiali</li>\n<li>Metrics measure properties of the system, success rate, operations per second, and so on.</li>\n</ul>\n</li>\n<li><strong>Security</strong>\n<ul>\n<li>The <code>PeerAuthenticaiton</code> resource enforces only mutually authenticated traffic, ensuring that all service-to-service traffic is encrypted and that clear-text traffic is rejected.</li>\n<li>The <code>RequestAuthentication</code> resource authenticates JWTs against the configured JWKS.</li>\n<li>The <code>AuthorizationPolicy</code> resource enables us to make decisions on whether to accept or reject traffic.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<!--kg-card-end: markdown--><h3 id=\"additional-reading\">Additional reading</h3><p>After reading until here, you know more about Istio than many folks out there, even some that run services on production with it. </p><p>However, some of Istio’s quirks might catch you by surprise. Sometimes, your application and the proxy might misbehave. And you will have other questions such as:</p><ul><li>How to troubleshoot the service proxy or the ingress gateway?</li><li>How to make sense of the Envoy configuration that is applied?</li><li>How to use fault injection?</li><li>Securing traffic at the edge</li><li>How to set up multi-cluster service meshes? What is happening behind the scenes?</li><li>Is the integration of machine-based workloads possible? If yes, how?</li><li>How to use external authorization servers?</li><li>Day 2 operations</li></ul><p>We answer these and many other questions in the book <a href=\"https://www.manning.com/books/istio-in-action?utm_source=rinor&amp;utm_medium=affiliate&amp;utm_campaign=book_posta2_istio_9_30_18&amp;a_aid=rinor&amp;a_bid=9f6a70f3\" rel=\"nofollow\">\"Istio in Action.\"</a> What really makes me proud of the book — besides it being the most in-depth elaboration of Istio — is how much reference value it has. </p><p>It’s crazy. I find myself and other Field Engineers here at Solo going back to it whenever we solve some tricky issue, such as DNS resolution, troubleshooting cross-cluster traffic, and so on.</p><p>Here are some other useful resources:</p><ul><li><a href=\"https://istio.io/latest/docs/reference/config/\" rel=\"nofollow\">Istio configuration reference</a></li><li><a href=\"https://istio.io/latest/blog/\" rel=\"nofollow\">Istio’s blog</a></li><li>Solo’s <a href=\"https://www.solo.io/blog/\" rel=\"nofollow\">blog</a> and <a href=\"https://www.youtube.com/channel/UCuketWAG3WqYjjxtQ9Q8ApQ\" rel=\"nofollow\">YouTube channel</a></li><li><a href=\"https://blog.christianposta.com/\" rel=\"nofollow\">Christian Posta’s blog</a></li><li><a href=\"https://karlstoney.com/tag/istio/\" rel=\"nofollow\">Karl Stoney’s blog</a></li></ul><p>I seize the opportunity to say thanks for joining me on this voyage. It wasn’t easy, and you are amazing for sticking with it. </p><p>I would love to hear your thoughts, so feel free to reach out to me on Twitter (<a href=\"https://twitter.com/rinormaloku\" rel=\"nofollow\">@rinormaloku</a>) or on my page <a href=\"https://rinormaloku.com/\" rel=\"nofollow\">rinormaloku.com</a>.</p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2022/05/rinor-close.png 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2022/05/rinor-close.png\" class=\"author-profile-image\" alt=\"Rinor Maloku\" width=\"504\" height=\"483\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/rinormaloku/\" data-test-label=\"profile-link\">\n                    \n                        Rinor Maloku\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Rinor Maloku is an engineer working on application-aware networking solutions at Solo.io. He co-authored the book &quot;Istio in Action&quot; published by Manning. \n\nEx: Red Hatter</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Learn%20Istio%20%E2%80%93%20How%20to%20Manage%2C%20Monitor%2C%20and%20Secure%20Microservices\".replace(/&#39;/g,\"%27\"),o=\"\",r=\"@rinormaloku\",i=Boolean(\"\");let a;if(i&&(o||r)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Rinor Maloku\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${r||t.currentPostAuthor} for translating it.`)}else!i&&r&&(a=encodeURIComponent(`Thank you ${r} for writing this helpful article.`));const c=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",c)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac961c5b9a4ce19\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882/":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Learn Kubernetes in Under 3 Hours: A Detailed Guide to Orchestrating Containers</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Why are banks paying me big bucks for something as simple as Kubernetes? When anybody — anybody can learn in under three hours? If you doubt me, I challenge you to give it a try! By the end of this article, you will be able to run a Microservice based\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Learn Kubernetes in Under 3 Hours: A Detailed Guide to Orchestrating Containers\">\n    \n        <meta property=\"og:description\" content=\"Why are banks paying me big bucks for something as simple as Kubernetes? When anybody — anybody can learn in under three hours? If you doubt me, I challenge you to give it a try! By the end of this article, you will be able to run a Microservice based\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882/\">\n    <meta property=\"og:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*0ju9JOPACF90yXSi-s2gwQ.jpeg\">\n    <meta property=\"article:published_time\" content=\"2018-04-14T19:10:07.000Z\">\n    <meta property=\"article:modified_time\" content=\"2019-10-03T14:12:18.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Kubernetes\">\n    \n        <meta property=\"article:tag\" content=\"Docker\">\n    \n        <meta property=\"article:tag\" content=\"Java\">\n    \n        <meta property=\"article:tag\" content=\"DevOps\">\n    \n        <meta property=\"article:tag\" content=\"Web Development\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Learn Kubernetes in Under 3 Hours: A Detailed Guide to Orchestrating Containers\">\n    \n        <meta name=\"twitter:description\" content=\"Why are banks paying me big bucks for something as simple as Kubernetes? When anybody — anybody can learn in under three hours? If you doubt me, I challenge you to give it a try! By the end of this article, you will be able to run a Microservice based\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882/\">\n    <meta name=\"twitter:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*0ju9JOPACF90yXSi-s2gwQ.jpeg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Rinor Maloku\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Kubernetes, Docker, Java, DevOps, Web Development\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n        <meta name=\"twitter:creator\" content=\"@rinormaloku\">\n    \n\n    <meta property=\"og:image:width\" content=\"800\">\n    <meta property=\"og:image:height\" content=\"533\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://cdn-media-1.freecodecamp.org/images/1*0ju9JOPACF90yXSi-s2gwQ.jpeg\",\n\t\t\"width\": 800,\n\t\t\"height\": 533\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2018-04-14T19:10:07.000Z\",\n\t\"dateModified\": \"2019-10-03T14:12:18.000Z\",\n\t\"keywords\": \"Kubernetes, Docker, Java, DevOps, Web Development\",\n\t\"description\": \"Why are banks paying me big bucks for something as simple as Kubernetes? When\\nanybody — anybody can learn in under three hours?\\n\\nIf you doubt me, I challenge you to give it a try! By the end of this article,\\nyou will be able to run a Microservice based application on a Kubernetes\\nCluster. And I guarantee this because it’s how I introduce our clients to\\nKubernetes.\\n\\nWhat does this guide do differently from the other resources, Rinor?\\n\\nQuite a lot! Most guides start with the simple stuff: Kubernet\",\n\t\"headline\": \"Learn Kubernetes in Under 3 Hours: A Detailed Guide to Orchestrating Containers\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Rinor Maloku\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/rinormaloku/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://rinormaloku.com\",\n\t\t\t\"https://twitter.com/rinormaloku\"\n\t\t],\n\t\t\"image\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://www.freecodecamp.org/news/content/images/2022/05/rinor-close.png\",\n\t\t\t\"width\": 600,\n\t\t\t\"height\": 400\n\t\t}\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Sat Apr 14 2018 19:10:07 GMT+0000 (Coordinated Universal Time)\">\n                            April 14, 2018\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/kubernetes/\">\n                                #Kubernetes\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Learn Kubernetes in Under 3 Hours: A Detailed Guide to Orchestrating Containers</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2022/05/rinor-close.png 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2022/05/rinor-close.png\" class=\"author-profile-image\" alt=\"Rinor Maloku\" width=\"600\" height=\"400\" onerror=\"this.style.display='none'\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/rinormaloku/\" data-test-label=\"profile-link\">\n                    \n                        Rinor Maloku\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://cdn-media-1.freecodecamp.org/images/1*0ju9JOPACF90yXSi-s2gwQ.jpeg\">\n      <img onerror=\"this.style.display='none'\" src=\"https://cdn-media-1.freecodecamp.org/images/1*0ju9JOPACF90yXSi-s2gwQ.jpeg\" alt=\"Learn Kubernetes in Under 3 Hours: A Detailed Guide to Orchestrating Containers\" ,=\"\" width=\"800\" height=\"533\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>Why are banks paying me big bucks for something as simple as Kubernetes? When anybody — anybody can learn in under three hours?</p><p>If you doubt me, I challenge you to give it a try! By the end of this article, you will be able to run a Microservice based application on a Kubernetes Cluster. And I guarantee this because it’s how I introduce our clients to Kubernetes.</p><p><em>What does this guide do differently from the other resources, Rinor?</em></p><p>Quite a lot! Most guides start with the simple stuff: Kubernetes concepts and and kubectl commands. These guides assume the reader knows about application development, Microservices, and Docker containers.</p><p>In this Article we will go from :</p><ol><li>Running a Microservice based application on your computer.</li><li>Building container images for each service of the Microservice application.</li><li>Introduction to Kubernetes. Deploying a Microservice based application into a Kubernetes Managed Cluster.</li></ol><p>The gradual build up provides the depth required for a mere mortal being to grasp the <em>simplicity</em> of Kubernetes. Yes Kubernetes is simple when you know the context it is used in. Without further ado lets see what we will build.</p><h3 id=\"application-demo\">Application Demo</h3><p>The application has one functionality. It takes one sentence as input. Using Text Analysis, calculates the emotion of the sentence.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/Rl5B3SRE5U5IiIM-8-1HnZdnwMx1TzegzV3D\" class=\"kg-image\" alt=\"Rl5B3SRE5U5IiIM-8-1HnZdnwMx1TzegzV3D\" width=\"513\" height=\"256\" loading=\"lazy\"><figcaption>Fig. 1. Sentiment Analysis Web App</figcaption></figure><p>From the technical perspective, the application consists of three microservices. Each has one specific functionality:</p><ul><li><strong>SA-Frontend:</strong> a Nginx web server that <strong>serves our ReactJS </strong>static<strong> </strong>files.</li><li><strong>SA-WebApp: </strong>a Java Web Application that <strong>handles requests </strong>from the frontend.</li><li><strong>SA-Logic: </strong>a python application that <strong>performs Sentiment Analysis</strong>.</li></ul><p>It’s important to know that Microservices don’t live in isolation, they enable “separation of concerns” but they still <strong>have to </strong>interact with each other.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/JwIBwPsTfBmelKgSrCCkEZuTzC5Ty1pZi3K7\" class=\"kg-image\" alt=\"JwIBwPsTfBmelKgSrCCkEZuTzC5Ty1pZi3K7\" width=\"600\" height=\"551\" loading=\"lazy\"><figcaption>Fig. 2. Data flow in the Sentiment Analysis WebApp</figcaption></figure><p>This interaction is best illustrated by showing how the data flows between them:</p><ol><li>A client application requests the index.html (which in turn requests bundled scripts of ReactJS application)</li><li>The user interacting with the application triggers requests to the Spring WebApp.</li><li>Spring WebApp forwards the requests for sentiment analysis to the Python app.</li><li>Python Application calculates the sentiment and returns the result as a response.</li><li>The Spring WebApp returns the response to the React app. (Which then represents the information to the user.)</li></ol><p>The code for all of these applications can be found in <a href=\"https://github.com/rinormaloku/k8s-mastery\" rel=\"noopener\">this repository.</a> I recommend cloning it immediately because we are going to build amazing things together.</p><h3 id=\"1-running-a-microservice-based-application-on-your-computer\">1. Running a Microservice based application on your computer</h3><p>We need to start up all three services. Let’s get started with the most attractive one, the front-end application.</p><h4 id=\"setting-up-react-for-local-development\">Setting up React for Local Development</h4><p>To start the React application you need to have NodeJS and NPM installed on your computer. After installing those navigate with your Terminal to the directory <strong>sa-frontend. </strong>Type the following command:</p><pre><code class=\"language-bash\">npm install</code></pre><p>This downloads all the Javascript dependencies of the React application and places them in the folder <strong>node_modules. </strong>(Dependencies are defined in the package.json file). After all dependencies are resolved execute the next command:</p><pre><code class=\"language-bash\">npm start</code></pre><p>That’s it! We started our react application and by default you can access it on <strong>localhost:3000. </strong>Feel free to modify the code and see the effects immediately on the browser. That is made possible using <strong>Hot Module Replacement. </strong>This makes front end development a breeze!</p><h4 id=\"making-our-react-app-production-ready\">Making Our React App Production Ready</h4><p>For production we need to build our application into static files and serve them using a web server.</p><p>To build the React application navigate in your terminal to the <strong>sa-frontend </strong>directory. Then execute the following command:</p><pre><code class=\"language-bash\">npm run build</code></pre><p>This generates a folder named <strong>build</strong> in your project tree. This folder contains all the static files needed for our ReactJS application.</p><h4 id=\"serving-static-files-with-nginx\">Serving static files with Nginx</h4><p>Install and start the Nginx WebServer (<a href=\"https://www.nginx.com/resources/wiki/start/topics/tutorials/install/\" rel=\"noopener\">how to</a>). Then move the contents of the sa-frontend/build folder to [<em>your_nginx_installation_dir</em>]/<strong>html.</strong></p><p>This way the generated index.html file will be accessible in [<em>your_nginx_installation_dir</em>]/html/index.html. T<strong>his is the default file that Nginx serves</strong>.</p><p>By default the Nginx WebServer listens on port 80. You can specify a different port by updating server.listen property in the file [<em>your_nginx_installation_dir</em>]/conf/nginx.conf.</p><p>Open your browser and hit the endpoint localhost:80, see the ReactJS application appear.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/EOcacd0QABnXiFAXVHPpWcD9scHzvr7jq0Fp\" class=\"kg-image\" alt=\"EOcacd0QABnXiFAXVHPpWcD9scHzvr7jq0Fp\" width=\"800\" height=\"530\" loading=\"lazy\"><figcaption>Fig. 3. React app served from Nginx</figcaption></figure><p>Typing in the field: “Type your sentence.” and pressing the button Send will fail with a 404 error (You can check it in your browser console). But why that? Let’s inspect the code.</p><h4 id=\"inspecting-the-code\">Inspecting the Code</h4><p>In the file <strong>App.js </strong>we can see that pressing the Send button triggers the analyzeSentence method. The code for this method is shown below. (Each line that is commented with #Number will be explained below the script):</p><pre><code class=\"language-js\">analyzeSentence() {\n    fetch('http://localhost:8080/sentiment', {  // #1\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n                       sentence: this.textField.getValue()})// #2\n    })\n        .then(response =&gt; response.json())\n        .then(data =&gt; this.setState(data));  // #3\n}</code></pre><p>#1: URL at which a POST call is made. (An application should be listening for calls at that URL).</p><p>#2: The Request body sent to that application as displayed below:</p><pre><code>{\n    sentence: “I like yogobella!”\n}</code></pre><p>#3: The response updates the component state. This triggers a re-render of the component. If we received the data, (i.e. the JSON object containing the typed sentence and the polarity) we would display the component polarityComponent because the condition would be fulfilled and we would define the component:</p><pre><code class=\"language-js\">const polarityComponent = this.state.polarity !== undefined ?\n    &lt;Polarity sentence={this.state.sentence} \n              polarity={this.state.polarity}/&gt; :\n    null;</code></pre><p>Everything seems correct. But what are we missing? If you guessed that we didn’t set up anything to listen on localhost:8080, then you are correct! We must start our Spring Web application to listen on that port!</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/KNFf142A66wPteChS7IQmcZA8ohQTZRA8U7E\" class=\"kg-image\" alt=\"KNFf142A66wPteChS7IQmcZA8ohQTZRA8U7E\" width=\"695\" height=\"376\" loading=\"lazy\"><figcaption>Fig. 4. Microservice Spring WebApp missing</figcaption></figure><h4 id=\"setting-up-the-spring-web-application\">Setting up the Spring Web Application</h4><p>To start up the Spring application you need to have JDK8 and Maven installed. (their environment variables need to be set up as well). After installing those you can continue to the next part.</p><h4 id=\"packaging-the-application-into-a-jar\">Packaging the Application into a Jar</h4><p>Navigate in your Terminal to the directory <strong>sa-webapp </strong>and type the following command:</p><pre><code>mvn install</code></pre><p>This will generate a folder named <strong>target,</strong> in the directory <strong>sa-webapp. </strong>In the folder <strong>target</strong> we have our Java application packaged as a jar: ‘<strong>sentiment-analysis-web-0.0.1-SNAPSHOT.jar</strong>’</p><h4 id=\"starting-our-java-application\">Starting our Java Application</h4><p>Navigate to the target directory and start the application with the command:</p><pre><code class=\"language-bash\">java -jar sentiment-analysis-web-0.0.1-SNAPSHOT.jar</code></pre><p>Darn.. We got an error. Our application fails on startup and our only lead is the exception in the stack trace:</p><pre><code class=\"language-bash\">Error creating bean with name 'sentimentController': Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'sa.logic.api.url' in value \"${sa.logic.api.url}\"</code></pre><p>The important information here is the placeholder sa.logic.api.url in the <strong>SentimentController</strong>. Let’s check that out!</p><h3 id=\"inspecting-the-code-1\">Inspecting the Code</h3><pre><code class=\"language-java\">@CrossOrigin(origins = \"*\")\n@RestController\npublic class SentimentController {\n\n    @Value(\"${sa.logic.api.url}\")    // #1\n    private String saLogicApiUrl;\n    \n    @PostMapping(\"/sentiment\")\n    public SentimentDto sentimentAnalysis(\n        @RequestBody SentenceDto sentenceDto) \n    {\n        RestTemplate restTemplate = new RestTemplate();\n        \n        return restTemplate.postForEntity(\n                saLogicApiUrl + \"/analyse/sentiment\",    // #2\n                sentenceDto, SentimentDto.class)\n                .getBody();\n    }\n}</code></pre><ol><li>The <strong>SentimentController</strong> has a field named saLogicApiUrl. The field get’s defined by the property <code>sa.logic.api.url</code> .</li><li>The String saLogicApiUrl is concatenated with the value “/analyse/sentiment”. Together they form the URL to make the request for Sentiment Analysis.</li></ol><p><strong>Defining the Property</strong></p><p>In Spring the default property source is <strong>application.properties.</strong> (Located in <em>sa-webapp/src/main/resources</em>). But that’s not the only means to define a property, it can be done with the earlier command as well:</p><pre><code class=\"language-bash\">java -jar sentiment-analysis-web-0.0.1-SNAPSHOT.jar \n     --sa.logic.api.url=WHAT.IS.THE.SA.LOGIC.API.URL</code></pre><p>The property should be initialized with the value that defines where our Python application is running, this way we will let our Spring Web Application know where to forward messages on run time.</p><p>To make things simpler let’s decide that we will run the python application on <code>localhost:5000.</code> Lets just not forget it!</p><p>Run the below command and we are ready to move to the last service the python application.</p><pre><code>java -jar sentiment-analysis-web-0.0.1-SNAPSHOT.jar \n     --sa.logic.api.url=http://localhost:5000</code></pre><figure class=\"kg-card kg-image-card\"><img src=\"https://cdn-media-1.freecodecamp.org/images/gRyXOa3fibWNB7s1DJiu31nB0ziy38FjCWe5\" class=\"kg-image\" alt=\"gRyXOa3fibWNB7s1DJiu31nB0ziy38FjCWe5\" width=\"695\" height=\"552\" loading=\"lazy\"></figure><h4 id=\"setting-up-the-python-application\">Setting up the Python Application</h4><p>To start the Python application, we need to have Python3 and Pip installed. (Their environment variables need to be set up as well).</p><h4 id=\"installing-dependencies\">Installing Dependencies</h4><p>Navigate in the Terminal to the directory <strong>sa-logic/sa </strong>(<a href=\"https://github.com/rinormaloku/k8s-mastery\" rel=\"noopener\">repo</a>)<strong> </strong>and type the following command:</p><pre><code class=\"language-bash\">python -m pip install -r requirements.txt\npython -m textblob.download_corpora</code></pre><h4 id=\"starting-the-app\">Starting the app</h4><p>After using Pip to install the dependencies we are ready to start the application by executing the following command:</p><pre><code class=\"language-bash\">python sentiment_analysis.py\n* Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)</code></pre><p>This means that our application is running and listening for HTTP Requests on port 5000 on localhost.</p><h4 id=\"inspecting-the-code-2\">Inspecting the Code</h4><p>Let’s investigate the code to understand what is happening in the <strong>SA Logic </strong>python application.</p><pre><code class=\"language-py\">from textblob import TextBlob\nfrom flask import Flask, request, jsonify\n\napp = Flask(__name__)                                   #1\n\n@app.route(\"/analyse/sentiment\", methods=['POST'])      #2\ndef analyse_sentiment():\n    sentence = request.get_json()['sentence']           #3\n    polarity = TextBlob(sentence).sentences[0].polarity #4\n    return jsonify(                                     #5\n        sentence=sentence,\n        polarity=polarity\n    )\n    \nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)                #6</code></pre><ol><li>Instantiate a Flask object.</li><li>Defines the path at which a POST request can be made.</li><li>Extract the “sentence” property from the request body.</li><li>Instantiate an anonymous TextBlob object and get the polarity from the first sentence. (We have only one).</li><li>Return the response with the body containing the sentence and the polarity to the caller.</li><li>Run the flask object <strong>app </strong>to listen for requests on 0.0.0.0:5000 (calls to localhost:5000 will reach this app aswell).</li></ol><p><strong>The services are set up to communicate with each other. Re-open the frontend in localhost:80 and give them a try before continuing on!</strong></p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/Wfr68VDVe8eOlB0Z9sM8sunj60L7UZD1Hu9v\" class=\"kg-image\" alt=\"Wfr68VDVe8eOlB0Z9sM8sunj60L7UZD1Hu9v\" width=\"695\" height=\"552\" loading=\"lazy\"><figcaption>Fig. 6. Microservice architecture completed</figcaption></figure><p>In the next section, we will go over how to start the services in Docker Containers, as it is a prerequisite to being able to run them in a Kubernetes Cluster.</p><h3 id=\"2-building-container-images-for-each-service\">2. Building container images for each service</h3><p>Kubernetes is a container orchestrator. Understandably we need containers to be able to orchestrate them. But what are containers? This is best answered from the Documentation at docker.</p><blockquote><em>A container image is a lightweight, stand-alone, executable package of a piece of software that includes everything needed to run it: code, runtime, system tools, system libraries, settings. Available for both Linux and Windows based apps, containerized software will always run the same, regardless of the environment.</em></blockquote><p>It means that containers can run on any computer — even in the production server — <strong>with no differences</strong>.</p><p>For illustration purposes let’s compare how our React Application would be served using a Virtual Machine vs. a Container.</p><h4 id=\"serving-react-static-files-from-a-vm\">Serving React static files from a VM</h4><p>The cons of using a Virtual Machine:</p><ol><li>Resource inefficient, each VM has the overhead of a fully-fledged OS.</li><li>It is platform dependent. What worked on your computer might not work on the production server.</li><li>Heavyweight and slow scaling when compared to Containers.</li></ol><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/vP3JZyOygXDzTh7I650wZHtHWkv56ioduUJS\" class=\"kg-image\" alt=\"vP3JZyOygXDzTh7I650wZHtHWkv56ioduUJS\" width=\"558\" height=\"424\" loading=\"lazy\"><figcaption>Fig. 7. Nginx web server with static files on a VM</figcaption></figure><h4 id=\"serving-react-static-files-from-a-container\">Serving React static files from a Container</h4><p>The pros of using a Container.</p><ol><li>Resource efficient, use the Host OS with the help of Docker.</li><li>Platform independent. The container that you run on your computer will work anywhere.</li><li>Lightweight using image layers.</li></ol><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/6I9ZEnnQNMqeTCK8kRWoOjDucfLCJqjAUGWd\" class=\"kg-image\" alt=\"6I9ZEnnQNMqeTCK8kRWoOjDucfLCJqjAUGWd\" width=\"558\" height=\"436\" loading=\"lazy\"><figcaption>Fig. 8. Nginx web server serving static files in a Container</figcaption></figure><p>Those are the most prominent features and benefits of using containers. For more information continue reading on the <a href=\"https://www.docker.com/what-container\" rel=\"noopener\">Docker documentation</a>.</p><h4 id=\"building-the-container-image-for-the-react-app-docker-intro-\">Building the container image for the React App (Docker intro)</h4><p>The basic building block for a Docker container is the .dockerfile. The <strong>Dockerfile</strong> starts with a base container image and follows up with a sequence of instructions on how to build a new container image that meets the needs of your application.</p><p>Before we get started defining the Dockerfile, let’s remember the steps we took to serve the react static files using nginx:</p><ol><li>Build the static files (npm run build)</li><li>Startup the nginx server</li><li>Copy the contents of the <strong>build</strong> folder from your sa-frontend project to nginx<strong>/</strong>html.</li></ol><p>In the next section, you will notice parallels on how creating a Container is similar to what we did during local React setup.</p><h4 id=\"defining-the-dockerfile-for-sa-frontend\">Defining the Dockerfile for SA-Frontend</h4><p>The instructions in the Dockerfile for the SA-Frontend is only a two-step task. That is because the Nginx Team provided us with <a href=\"https://hub.docker.com/_/nginx/\" rel=\"noopener\">a base image</a> for Nginx, which we will use to build on top of. The two steps are:</p><ol><li>Start from the base <strong>Nginx Image</strong></li><li>Copy the <strong>sa-frontend/build</strong> directory to the containers nginx<strong>/</strong>html directory.</li></ol><p>Converted into a Dockerfile it looks like:</p><pre><code class=\"language-docker\">FROM nginx\nCOPY build /usr/share/nginx/html</code></pre><p>Isn’t it amazing, it’s even humanly readable, let’s recapitulate:</p><p>Start from the nginx image. (Whatever the guys did over there). Copy the <strong>build </strong>directory to the <strong>nginx/html</strong> directory in the image. That’s it!</p><p>You may be wondering, how did I know where to copy the build files? i.e. <code>/usr/share/nginx/html</code>. Quite simple: It was documented in the nginx <a href=\"https://hub.docker.com/_/nginx/\" rel=\"noopener\">image</a> in Docker Hub.</p><h4 id=\"building-and-pushing-the-container\">Building and Pushing the container</h4><p>Before we can push our image, we need a Container Registry to host our images. Docker Hub is a free cloud container service that we will use for this demonstration. You have three tasks before continuing:</p><ol><li><a href=\"https://www.docker.com/community-edition\" rel=\"noopener\">Install Docker CE</a></li><li>Register to the Docker Hub.</li><li>Login by executing the below command in your Terminal:</li></ol><pre><code class=\"language-bash\">docker login -u=\"$DOCKER_USERNAME\" -p=\"$DOCKER_PASSWORD\"</code></pre><p>After completing the above tasks navigate to the directory <strong>sa-frontend.</strong> Then execute the below command (replace $DOCKER_USER_ID with your docker hub username. For e.g. rinormaloku/sentiment-analysis-frontend)</p><pre><code>docker build -f Dockerfile -t $DOCKER_USER_ID/sentiment-analysis-frontend .</code></pre><p>We can drop <code>-f Dockerfile</code> because we are already in the directory containing the Dockerfile.</p><p>To push the image, use the docker push command:</p><pre><code>docker push $DOCKER_USER_ID/sentiment-analysis-frontend</code></pre><p>Verify in your docker hub repository that the image was pushed successfully.</p><h4 id=\"running-the-container\">Running the container</h4><p>Now the image in <code>$DOCKER_USER_ID/sentiment-analysis-frontend</code> can be pulled and run by anyone:</p><pre><code class=\"language-bash\">docker pull $DOCKER_USER_ID/sentiment-analysis-frontend\ndocker run -d -p 80:80 $DOCKER_USER_ID/sentiment-analysis-frontend</code></pre><p>Our Docker container is running!</p><p>Before we continue lets elaborate the 80:80 which I find confusing:</p><ul><li>The first 80 is the port of the host (i.e. my computer)</li><li>The second 80 stands for the container port to which the calls should be forwarded.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/uUv5pZc6QErqJVcacC0vU-QEvjDjVF1VlQ9l\" class=\"kg-image\" alt=\"uUv5pZc6QErqJVcacC0vU-QEvjDjVF1VlQ9l\" width=\"484\" height=\"447\" loading=\"lazy\"><figcaption>Fig. 9. Port Mapping of Host to Container</figcaption></figure><p>It maps from &lt;hostPort&gt; to &lt;containerPort&gt;. Meaning that calls to host port 80 should be mapped to the port 80 of the container, as shown in figure 9.</p><p>Because the port was run in the host (your computer) in port 80 it should be accessible on the localhost:80. If you do not have native docker support, you can open the application in &lt;docker-machine ip&gt;:80. To find your docker-machine ip ex<code>ecute docker-mach</code>ine ip</p><p>Give it a try! You should be able to access the react application in that endpoint.</p><h4 id=\"the-dockerignore\">The Dockerignore</h4><p>We saw earlier that building the image for SA-Frontend was slow, pardon me, <strong>Extremely slow</strong>. That was the case because of the <strong>build context </strong>that had to be sent to the Docker Deamon. In more detail, the <strong>build context</strong> directory is defined by the last argument in the docker build command (the trailing dot), which specifies the build context. And in our case, it included the following folders:</p><pre><code class=\"language-bash\">sa-frontend:\n|   .dockerignore\n|   Dockerfile\n|   package.json\n|   README.md\n+---build\n+---node_modules\n+---public\n\\---src</code></pre><p>But the only data we need is in the <strong>build</strong> folder. Uploading anything else will be a waste of time. We can improve our build time by dropping the other directories. That’s where <code>.dockerignore</code> comes into play. For you it will be familiar because it’s like <code>.gitignore</code>, i.e. add all directories that you want to ignore in the <code>.dockerignore</code> file, as shown below:</p><pre><code class=\"language-bash\">node_modules\nsrc\npublic</code></pre><p>The <code>.dockerignore</code> file should be in the same folder as the Dockerfile. Now building the image takes only seconds.</p><p>Let’s continue with the Java Application.</p><h4 id=\"building-the-container-image-for-the-java-application\">Building the container image for the Java Application</h4><p>Guess what! You learned almost everything about creating container images! That’s why this part is extremely short.</p><p>Open the Dockerfile in <strong>sa-webapp</strong>, and you will find only two new keywords:</p><pre><code class=\"language-docker\">ENV SA_LOGIC_API_URL http://localhost:5000\n…\nEXPOSE 8080</code></pre><p>The keyword <strong>ENV</strong> declares an Environment Variable inside the docker container. This will enable us to provide the URL for the Sentiment Analysis API when starting the Container.</p><p>Additionally, the keyword <strong>EXPOSE</strong> exposes a port that we want to access later on. <strong>But hey!!!</strong> We didn’t do that in the Dockerfile in SA-Frontend, good catch! This is for documentation purposes only, in other words it will serve as information to the person reading the Dockerfile.</p><p>You should be familiar with building and pushing the container image. If any difficulties arise read the README.md file in <strong>sa-webapp</strong> directory.</p><h4 id=\"building-the-container-image-for-the-python-application\">Building the container image for the Python Application</h4><p>In the Dockerfile in <strong>sa-logic</strong> there are no new keywords. Now you can call yourself a Docker-Master ?.</p><p>For building and pushing the container image read the the README.md in <strong>sa-logic </strong>directory.</p><h4 id=\"testing-the-container-ized-application\">Testing the Container-ized Application</h4><p>Can you trust something that you didn’t test? Neither can I. Let’s give these containers a test.</p><ol><li>Run the <strong>sa-logic</strong> container and configure to listen on port 5050:</li></ol><pre><code>docker run -d -p 5050:5000 $DOCKER_USER_ID/sentiment-analysis-logic</code></pre><p>2. Run <strong>sa-webapp container </strong>and configure to listen on port 8080, and additionally we need to change the port in which the python app listens by overriding the environment variable SA_LOGIC_API_URL.</p><pre><code>$ docker run -d -p 8080:8080 -e SA_LOGIC_API_URL='http://&lt;container_ip or docker machine ip&gt;:5000' $DOCKER_USER_ID/sentiment-analysis-web-app</code></pre><p>Checkout the <a href=\"https://github.com/rinormaloku/k8s-mastery/blob/master/sa-webapp/README.md\" rel=\"noopener\">README</a> on how to get the container ip or docker machine ip.</p><p>3. Run <strong>sa-frontend</strong> container:</p><pre><code class=\"language-bash\">docker run -d -p 80:80 $DOCKER_USER_ID/sentiment-analysis-frontend</code></pre><p>We are done. Open your browser on <strong>localhost:80.</strong></p><p><strong>Attention:</strong> If you changed the port for the sa-webapp, or if you are using docker-machine ip, you need to update App.js file in <strong>sa-frontend</strong> in the method analyzeSentence to fetch from the new IP or Port. Afterwards you need to build, and use the updated image.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/gdDm95hkRv-AnNmuHUFDIONucxEWcvXN1p34\" class=\"kg-image\" alt=\"gdDm95hkRv-AnNmuHUFDIONucxEWcvXN1p34\" width=\"500\" height=\"375\" loading=\"lazy\"><figcaption>Fig. 10. Microservices running in Containers</figcaption></figure><h4 id=\"brain-teaser-why-kubernetes\">Brain Teaser — Why Kubernetes?</h4><p>In this section, we learned about the Dockerfile, how to use it to build an image, and the commands to push it to the Docker registry. Additionally, we investigated how to reduce the number of files sent to the build context by ignoring useless files. And in the end, we got the application running from containers. So why Kubernetes? We will investigate deeper into that in the next article, but I want to leave you a brainteaser.</p><ul><li>Our Sentiment Analysis web app became a world hit and we suddenly have a million requests per minute to analyze sentiments and we experience huge load on <strong>sa-webapp</strong> and <strong>sa-logic</strong>. How can we scale the containers?</li></ul><h3 id=\"introduction-to-kubernetes\">Introduction to Kubernetes</h3><p>I promise and I am not exaggerating that by the end of the article you will ask yourself “Why don’t we call it Supernetes?”.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/6z5-sOpVzRF1YeB2kQzrXakp2kBiGDBlMx4t\" class=\"kg-image\" alt=\"6z5-sOpVzRF1YeB2kQzrXakp2kBiGDBlMx4t\" width=\"320\" height=\"320\" loading=\"lazy\"><figcaption>Fig. 11. Supernetes</figcaption></figure><p>If you followed this article from the beginning we covered so much ground and so much knowledge. You might worry that this will be the hardest part, but, it is the simplest. The only reason why learning Kubernetes is daunting is because of the “everything else” and we covered that one so well.</p><h3 id=\"what-is-kubernetes\">What is Kubernetes</h3><p>After we started our Microservices from containers we had one question, let’s elaborate it further in a Q&amp;A format:<br><strong>Q:</strong> How do we scale containers?<br><strong>A:</strong> We spin up another one.<br><strong>Q:</strong> How do we share the load between them? What if the Server is already used to the maximum and we need another server for our container? How do we calculate the best hardware utilization?<br><strong>A:</strong> Ahm… Ermm… (Let me google).<br><strong>Q:</strong> Rolling out updates without breaking anything? And if we do, how can we go back to the working version.</p><p>Kubernetes solves all these questions (and more!). My attempt to reduce Kubernetes in one sentence would be: “Kubernetes is a Container Orchestrator, that abstracts the underlying infrastructure. (Where the containers are run)”.</p><p>We have a faint idea about Container Orchestration. We will see it in practice in the continuation of this article, but it’s the first time that we are reading about “abstracts the underlying infrastructure”. So let’s take a close-up shot, at this one.</p><h4 id=\"abstracting-the-underlying-infrastructure\">Abstracting the underlying infrastructure</h4><p>Kubernetes abstracts the underlying infrastructure by providing us with a simple API to which we can send requests. Those requests prompt Kubernetes to meet them at its best of capabilities. For example, it is as simple as requesting “Kubernetes spin up 4 containers of the image x”. Then Kubernetes will find under-utilized nodes in which it will spin up the new containers (see Fig. 12.).</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/oRhjNBu9XyT74V6dxJVs1YJhgoC2eMU8TsCX\" class=\"kg-image\" alt=\"oRhjNBu9XyT74V6dxJVs1YJhgoC2eMU8TsCX\" width=\"800\" height=\"494\" loading=\"lazy\"><figcaption>Fig. 12. Request to the API Server</figcaption></figure><p>What does this mean for the developer? That he doesn’t have to care about the number of nodes, where containers are started and how they communicate. He doesn’t deal with hardware optimization or worry about nodes going down (and they will go down <em>Murphy’s Law</em>), because new nodes can be added to the Kubernetes cluster. In the meantime Kubernetes will spin up the containers in the other nodes that are still running. It does this at the best possible capabilities.</p><p>In figure 12 we can see a couple of new things:</p><ul><li><strong>API Server</strong>: Our only way to interact with the Cluster. Be it starting or stopping another container (err *pods) or checking current state, logs, etc.</li><li><strong>Kubelet</strong>: monitors the containers (err *pods) inside a node and communicates with the master node.</li><li><strong>*Pods</strong>: Initially just think of pods as containers.</li></ul><p>And we will stop here, as diving deeper will just loosen our focus and we can always do that later, there are useful resources to learn from, like the official documentation (the hard way) or reading the amazing book <a href=\"https://www.amazon.com/Kubernetes-Action-Marko-Luksa/dp/1617293725\" rel=\"noopener\">Kubernetes in Action</a>, by <a href=\"https://twitter.com/markoluksa\" rel=\"noopener\">Marko Lukša</a>.</p><h4 id=\"standardizing-the-cloud-service-providers\">Standardizing the Cloud Service Providers</h4><p>Another strong point that Kubernetes drives home, is that it standardizes the Cloud Service Providers (CSPs). This is a bold statement, but let’s elaborate with an example:</p><p>– An expert in Azure, Google Cloud Platform or some other CSP ends up working on a project in an entirely new CSP, and he has no experience working with it. This can have many consequences, to name a few: he can miss the deadline; the company might need to hire more resources, and so on.</p><p>In contrast, with Kubernetes this isn’t a problem at all. Because you would be executing the same commands to the API Server no matter what CSP. You on a declarative manner request from the API Server <strong>what you want. </strong>Kubernetes abstracts away and implements the <strong>how </strong>for the CSP in question.</p><p>Give it a second to sink in — this is extremely powerful feature. For the company it means that they are not tied up to a CSP. They calculate their expenses on another CSP, and they move on. They still will have the expertise, they still will have the resources, and they can do that for <em>cheaper!</em></p><p>All that said, in the next section we will put Kubernetes in Practice.</p><h3 id=\"kubernetes-in-practice-pods\">Kubernetes in Practice — Pods</h3><p>We set up the Microservices to run in containers and it was a cumbersome process, but it worked. We also mentioned that this solution is not scalable or resilient and that Kubernetes resolves these issues. In continuation of this article, we will migrate our services toward the end result as shown in figure 13, where the Containers are orchestrated by Kubernetes.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/mrA3VBYh2pbG7qH9wnsMj-QxRxZ2MAqA5oTt\" class=\"kg-image\" alt=\"mrA3VBYh2pbG7qH9wnsMj-QxRxZ2MAqA5oTt\" width=\"724\" height=\"930\" loading=\"lazy\"><figcaption>Fig. 13. Microservices running in a Kubernetes Managed Cluster</figcaption></figure><p>In this article, we will use Minikube for debugging locally, though everything that will be presented works as well in Azure and in Google Cloud Platform.</p><h3 id=\"installing-and-starting-minikube\">Installing and Starting Minikube</h3><p>Follow official documentation for installing <a href=\"https://kubernetes.io/docs/tasks/tools/install-minikube/\" rel=\"noopener\">Minikube</a>. During Minikube installation, you will also install <strong>Kubectl. </strong>This is a client to make requests to the Kubernetes API Server.</p><p>To start Minikube execute the command <code>minikube start</code> and after it is completed, execute kubectl get nodes and you should get the following output</p><pre><code>kubectl get nodes\nNAME       STATUS    ROLES     AGE       VERSION\nminikube   Ready     &lt;none&gt;    11m       v1.9.0</code></pre><p>Minikube provides us with a Kubernetes Cluster that has only one node, but remember we do not care how many Nodes there are, Kubernetes abstracts that away, and for us to learn Kubernetes that is of no importance. In the next section, we will start with our first Kubernetes resource [DRUM ROLLS] <strong>the Pod</strong>.</p><h4 id=\"pods\">Pods</h4><p>I love containers, and by now you love containers too. So why did Kubernetes decide to give us Pods as the smallest deployable compute unit? What does a pod do? Pods can be composed of one or even a group of containers that share the same execution environment.</p><p>But do we really need to run two containers in one pod? Erm.. Usually, you run only one container and that’s what we will do in our examples. But for cases when for e.g. two containers need to share volumes, or they communicate with each other using inter-process communication or are otherwise tightly coupled, then that’s made possible using <strong>Pods</strong>. Another feature that Pods make possible is that we are not tied to Docker containers, if desired we can use other technologies for e.g. <a href=\"https://coreos.com/rkt/\" rel=\"noopener\">Rkt</a>.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/DiiFgshSEsYe9Rj2AHAUtJUI90CVH53VdioW\" class=\"kg-image\" alt=\"DiiFgshSEsYe9Rj2AHAUtJUI90CVH53VdioW\" width=\"800\" height=\"416\" loading=\"lazy\"><figcaption><strong>Fig. 14. Pod properties</strong></figcaption></figure><p>To summarize, the main properties of Pods are (also shown in figure 14):</p><ol><li>Each pod has a unique IP address in the Kubernetes cluster</li><li>Pod can have multiple containers. The containers share the same port space, as such they can communicate via localhost (understandably they cannot use the same port), and communicating with containers of the other pods has to be done in conjunction with the pod ip.</li><li>Containers in a pod share the same volume*, same ip, port space, IPC namespace.</li></ol><p>*Containers have their own isolated filesystems, though they are able to share data using the Kubernetes resource <strong>Volumes.</strong></p><p>This is more than enough information for us to continue, but to satisfy your curiosity check out the <a href=\"https://kubernetes.io/docs/concepts/workloads/pods/pod/\" rel=\"noopener\">official documentation</a>.</p><h3 id=\"pod-definition\">Pod definition</h3><p>Below we have the manifest file for our first pod <strong>sa-frontend</strong>, and then below we explain all the points.</p><pre><code class=\"language-bash\">apiVersion: v1\nkind: Pod                                            # 1\nmetadata:\n  name: sa-frontend                                  # 2\nspec:                                                # 3\n  containers:\n    - image: rinormaloku/sentiment-analysis-frontend # 4\n      name: sa-frontend                              # 5\n      ports:\n        - containerPort: 80                          # 6</code></pre><ol><li><strong>Kind: </strong>specifies the kind of the Kubernetes Resource that we want to create. In our case, a <strong>Pod</strong>.</li><li><strong>Name:</strong> defines the name for the resource. We named it <strong>sa-frontend</strong>.</li><li><strong>Spec </strong>is the object that defines the desired state for the resource. The most important property of a Pods Spec is the Array of containers.</li><li><strong>Image </strong>is the container image we want to start in this pod.</li><li><strong>Name</strong> is the unique name for a container in a pod.</li><li><strong>Container Port:</strong>is the port at which the container is listening. This is just an indicator for the reader (dropping the port doesn’t restrict access).</li></ol><h3 id=\"creating-the-sa-frontend-pod\">Creating the SA Frontend pod</h3><p>You can find the file for the above pod definition in <code>resource-manifests/<strong>sa-frontend-pod.yaml.</strong></code> You either navigate in your terminal to that folder or you would have to provide the full location in the command line. Then execute the command:</p><pre><code class=\"language-yaml\">kubectl create -f sa-frontend-pod.yaml\npod \"sa-frontend\" created</code></pre><p>To check if the Pod is running execute the following command:</p><pre><code class=\"language-bash\">kubectl get pods\nNAME                          READY     STATUS    RESTARTS   AGE\nsa-frontend                   1/1       Running   0          7s</code></pre><p>If it is still in <strong>ContainerCreating</strong> you can execute the above command with the argument <code>--watch</code> to update the information when the Pod is in Running State.</p><h4 id=\"accessing-the-application-externally\">Accessing the application externally</h4><p>To access the application externally we create a Kubernetes resource of type <strong>Service</strong>, that will be our next article, which is the proper implementation, but for quick debugging we have another option, and that is port-forwarding:</p><pre><code class=\"language-bash\">kubectl port-forward sa-frontend 88:80\nForwarding from 127.0.0.1:88 -&gt; 80</code></pre><p>Open your browser in <strong>127.0.0.1:88</strong> and you will get to the react application.</p><h4 id=\"the-wrong-way-to-scale-up\">The wrong way to scale up</h4><p>We said that one of the Kubernetes main features was scalability, to prove this let’s get another pod running. To do so create another pod resource, with the following definition:</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: Pod                                            \nmetadata:\n  name: sa-frontend2      # The only change\nspec:                                                \n  containers:\n    - image: rinormaloku/sentiment-analysis-frontend \n      name: sa-frontend                              \n      ports:\n        - containerPort: 80</code></pre><p>Create the new pod by executing the following command:</p><pre><code class=\"language-bash\">kubectl create -f sa-frontend-pod2.yaml\npod \"sa-frontend2\" created</code></pre><p>Verify that the second pod is running by executing:</p><pre><code class=\"language-bash\">kubectl get pods\nNAME                          READY     STATUS    RESTARTS   AGE\nsa-frontend                   1/1       Running   0          7s\nsa-frontend2                  1/1       Running   0          7s</code></pre><p>Now we have two pods running!</p><p><strong>Attention:</strong> this is not the final solution, and it has many flaws. We will improve this in the section for another Kubernetes resource <strong>Deployments</strong>.</p><h4 id=\"pod-summary\">Pod Summary</h4><p>The Nginx web server with the static files is running inside two different pods. Now we have two questions:</p><ul><li>How do we expose it externally to make it accessible via URL, and</li><li>How do we load balance between them?</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/I4Xjozhym548e8iBKMcPJ5DnUXZojwrnmQpT\" class=\"kg-image\" alt=\"I4Xjozhym548e8iBKMcPJ5DnUXZojwrnmQpT\" width=\"599\" height=\"260\" loading=\"lazy\"><figcaption>Fig. 15. Load balancing between pods</figcaption></figure><p>Kubernetes provides us the <strong>Services</strong> resource. Let’s jump right into it, in the next section.</p><h3 id=\"kubernetes-in-practice-services\">Kubernetes in Practice — Services</h3><p>The Kubernetes <strong>Service</strong> resource acts as the entry point to a set of pods that provide the same functional service. This resource does the heavy lifting, of discovering services and load balancing between them as shown in figure 16.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/vUV2hIHJnOtiiMKgw9GiExUShzlYB3hwUeWu\" class=\"kg-image\" alt=\"vUV2hIHJnOtiiMKgw9GiExUShzlYB3hwUeWu\" width=\"800\" height=\"259\" loading=\"lazy\"><figcaption>Fig. 16. Kubernetes Service maintaining IP addresses</figcaption></figure><p>In our Kubernetes cluster, we will have pods with different functional services. (The frontend, the Spring WebApp and the Flask Python application). So the question arises how does a service know which pods to target? I.e. how does it generate the list of the endpoints for the pods?</p><p>This is done using <strong>Labels</strong>, and it is a two-step process:</p><ol><li>Applying a label to all the pods that we want our Service to target and</li><li>Applying a “selector” to our service so that defines which labeled pods to target.</li></ol><p>This is much simpler visually:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/q-Eg301b9pZA7xpZ1hc2Tqj59cDQ2H18iRKp\" class=\"kg-image\" alt=\"q-Eg301b9pZA7xpZ1hc2Tqj59cDQ2H18iRKp\" width=\"800\" height=\"370\" loading=\"lazy\"><figcaption>Fig. 17. Pods with labels and their manifests</figcaption></figure><p>We can see that pods are labeled with “app: sa-frontend” and the service is targeting pods with that label.</p><h4 id=\"labels\">Labels</h4><p>Labels provide a simple method for organizing your Kubernetes Resources. They represent a key-value pair and can be applied to every resource. Modify the manifests for the pods to match the example shown earlier in figure 17.</p><p>Save the files after completing the changes, and apply them with the following command:</p><pre><code class=\"language-bash\">kubectl apply -f sa-frontend-pod.yaml\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\npod \"sa-frontend\" configured\nkubectl apply -f sa-frontend-pod2.yaml \nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\npod \"sa-frontend2\" configured</code></pre><p>We got a warning (apply instead of create, roger that). In the second line, we see that the pods “sa-frontend” and “sa-frontend2” are configured. We can verify that the pods were labeled by filtering the pods that we want to display:</p><pre><code class=\"language-bash\">kubectl get pod -l app=sa-frontend\nNAME           READY     STATUS    RESTARTS   AGE\nsa-frontend    1/1       Running   0          2h\nsa-frontend2   1/1       Running   0          2h</code></pre><p>Another way to verify that our pods are labeled is by appending the flag <code>--show-labels</code> to the above command. This will display all the labels for each pod.<br>Great! Our pods are labeled and we are ready to target them with our Service. Lets get started defining the Service of type LoadBalancer shown in Fig. 18.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/xXXbN86FdMJitJZ0ueRT1DwBecqO4u681uVY\" class=\"kg-image\" alt=\"xXXbN86FdMJitJZ0ueRT1DwBecqO4u681uVY\" width=\"600\" height=\"229\" loading=\"lazy\"><figcaption>Fig. 18. Load balancing with the LoadBalancer Service</figcaption></figure><h3 id=\"service-definition\">Service definition</h3><p>The YAML definition of the Loadbalancer Service is shown below:</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: Service              # 1\nmetadata:\n  name: sa-frontend-lb\nspec:\n  type: LoadBalancer       # 2\n  ports:\n  - port: 80               # 3\n    protocol: TCP          # 4\n    targetPort: 80         # 5\n  selector:                # 6\n    app: sa-frontend       # 7</code></pre><ol><li><strong>Kind: </strong>A service.</li><li><strong>Type: </strong>Specification type, we choose LoadBalancer because we want to balance the load between the pods.</li><li><strong>Port: </strong>Specifies the port in which the service gets requests.</li><li><strong>Protocol:</strong> Defines the communication.</li><li><strong>TargetPort:</strong> The port at which incomming requests are forwarded.</li><li><strong>Selector:</strong> Object that contains properties for selecting pods.</li><li><strong>app:</strong> sa-frontend Defines which pods to target, only pods that are labeled with “app: sa-frontend”</li></ol><p>To create the service execute the following command:</p><pre><code>kubectl create -f service-sa-frontend-lb.yaml\nservice \"sa-frontend-lb\" created</code></pre><p>You can check out the state of the service by executing the following command:</p><pre><code>kubectl get svc\nNAME             TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE\nsa-frontend-lb   LoadBalancer   10.101.244.40   &lt;pending&gt;     80:30708/TCP   7m</code></pre><p>The <strong>External-IP </strong>is in pending state (and don’t wait, as it’s not going to change). This is only because we are using <strong>Minikube</strong>. If we would have executed this in a cloud provider like Azure or GCP, we would get a Public IP, which makes our services worldwide accessible.</p><p>Despite that, Minikube doesn’t let us hanging it provides a useful command for local debugging, execute the following command:</p><pre><code class=\"language-bash\">minikube service sa-frontend-lb\nOpening kubernetes service default/sa-frontend-lb in default browser...</code></pre><p>This opens your browser pointing to the services IP. After the Service receives the request, it will forward the call to one of the pods (which one doesn’t matter). This abstraction enables us to see and act with the numerous pods as one unit, using the Service as an entry point.</p><h4 id=\"service-summary\">Service Summary</h4><p>In this section, we covered labeling resources, using those as selectors in Services, and we defined and created a LoadBalancer service. This fulfills our requirements to scale the application (just add new labeled pods) and to Load balance between the pods, using the service as an entry point.</p><h3 id=\"kubernetes-in-practice-deployments\">Kubernetes in Practice — Deployments</h3><p>Kubernetes Deployments help us with one constant in the life of every application, and that is <strong>change</strong>. Moreover, the only applications that do not change are the ones that are already dead, and while not, new requirements will come in, more code will be shipped, it will be packaged, and deployed. And on each step of this process, mistakes can be made.</p><p>The Deployment resource automates the process of moving from one version of the application to the next, with zero downtime and in case of failures, it enables us to quickly roll back to the previous version.</p><h4 id=\"deployments-in-practice\">Deployments in Practice</h4><p>Currently, we have <strong>two pods</strong> and <strong>a service</strong> exposing them and load balancing between them (see Fig. 19.). We mentioned that deploying the pods separately is far from perfect. It requires separately managing each (create, update, delete and monitoring their health). Quick updates and fast rollbacks are out of the question! This is not acceptable and the <strong>Deployments </strong>Kubernetes resource solves each of these issues.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/81V1N8qcLyWZi4t69mWSgYbQWjQrqRD2Ye3W\" class=\"kg-image\" alt=\"81V1N8qcLyWZi4t69mWSgYbQWjQrqRD2Ye3W\" width=\"800\" height=\"268\" loading=\"lazy\"><figcaption>Fig. 19. Current state</figcaption></figure><p>Before we continue let’s state what we want to achieve, as it will provide us with the overview that enables us to understand the manifest definition for the deployment resource. What we want is:</p><ol><li>Two pods of the image rinormaloku/sentiment-analysis-frontend</li><li>Zero Downtime deployments,</li><li>Pods labeled with <code><strong>app:</strong> sa-frontend</code> so that the services get discovered by the Service <strong>sa-frontend-lb.</strong></li></ol><p>In the next section, we will translate the requirements into a Deployment definition.</p><h3 id=\"deployment-definition\">Deployment definition</h3><p>The YAML resource definition that achieves all the above-mentioned points:</p><pre><code class=\"language-yaml\">apiVersion: apps/v1\nkind: Deployment                                          # 1\nmetadata:\n  name: sa-frontend\nspec:\n  selector:                                               # 2\n    matchLabels:\n      app: sa-frontend                                    \n  replicas: 2                                             # 3\n  minReadySeconds: 15\n  strategy:\n    type: RollingUpdate                                   # 4\n    rollingUpdate: \n      maxUnavailable: 1                                   # 5\n      maxSurge: 1                                         # 6\n  template:                                               # 7\n    metadata:\n      labels:\n        app: sa-frontend                                  # 8\n    spec:\n      containers:\n        - image: rinormaloku/sentiment-analysis-frontend\n          imagePullPolicy: Always                         # 9\n          name: sa-frontend\n          ports:\n            - containerPort: 80</code></pre><ol><li><strong>Kind: </strong>A deployment.</li><li><strong>Selector: </strong>Pods matching the selector will be taken under the management of this deployment.</li><li><strong>Replicas </strong>is a property of the deployments Spec object that defines how many pods we want to run. So only 2.</li><li><strong>Type </strong>specifies the strategy used in this deployment when moving from the current version to the next. The strategy <strong>RollingUpdate</strong> ensures Zero Downtime deployments.</li><li><strong>MaxUnavailable </strong>is a property of the RollingUpdate object that specifies the maximum unavailable pods allowed (compared to the desired state) when doing a rolling update. For our deployment which has 2 replicas this means that after terminating one Pod, we would still have one pod running, this way keeping our application accessible.</li><li><strong>MaxSurge </strong>is another property of the RollingUpdate object that defines the maximum amount of pods added to a deployment (compared to the desired state). For our deployment, this means that when moving to a new version we can add one pod, which adds up to 3 pods at the same time.</li><li><strong>Template: </strong>specifies the pod template that the Deployment will use to create new pods. Most likely the resemblance with Pods struck you immediately.</li><li><code><strong>app:</strong> sa-frontend</code> the label to use for the pods created by this template.</li><li><strong>ImagePullPolicy</strong> when set to <strong>Always</strong>, it<strong> </strong>will pull the container images on each redeployment.</li></ol><p>Honestly, that wall of text got even me confused, let’s just get started with the example:</p><pre><code class=\"language-bash\">kubectl apply -f sa-frontend-deployment.yaml\ndeployment \"sa-frontend\" created</code></pre><p>As always let’s verify that everything went as planned:</p><pre><code class=\"language-bash\">kubectl get pods\nNAME                           READY     STATUS    RESTARTS   AGE\nsa-frontend                    1/1       Running   0          2d\nsa-frontend-5d5987746c-ml6m4   1/1       Running   0          1m\nsa-frontend-5d5987746c-mzsgg   1/1       Running   0          1m\nsa-frontend2                   1/1       Running   0          2d</code></pre><p>We got 4 running pods, two pods created by the Deployment and the other two are the ones we created manually. Delete the ones we created manually using the command <code>kubectl delete pod &lt;pod-name&gt;</code>.</p><p><strong>Exercise:</strong> Delete one of the pods of the deployment as well and see what happens. Think for the reason before reading the explanation below.</p><p><strong>Explanation: </strong>Deleting one pod made the Deployment notice that the current state (1 pod running) is different from the desired state (2 pods running) so it started another pod.</p><p>So what was so good about Deployments, besides keeping the desired state? Let’s get started with the benefits.</p><h4 id=\"benefit-1-rolling-a-zero-downtime-deployment\">Benefit #1: Rolling a Zero-Downtime deployment</h4><p>Our Product manager came to us with a new requirement, our clients want to have a green button in the frontend. The developers shipped their code and provided us with the only thing we need, the container image <code>rinormaloku/sentiment-analysis-frontend:green</code>. Now it’s our turn, we the DevOps have to roll a Zero-Downtime deployment, Will the hard work pay off? Let’s see that!</p><p>Edit the file <code>sa-frontend-deployment.yaml</code> by changing the container image to refer to the new image: <code>rinormaloku/sentiment-analysis-frontend:green</code>. Save the changes as <code>sa-frontend-deployment-green.yaml</code> and execute the following command:</p><pre><code class=\"language-bash\">kubectl apply -f sa-frontend-deployment-green.yaml --record\ndeployment \"sa-frontend\" configured</code></pre><p>We can check the status of the rollout using the following command:</p><pre><code class=\"language-bash\">kubectl rollout status deployment sa-frontend\nWaiting for rollout to finish: 1 old replicas are pending termination...\nWaiting for rollout to finish: 1 old replicas are pending termination...\nWaiting for rollout to finish: 1 old replicas are pending termination...\nWaiting for rollout to finish: 1 old replicas are pending termination...\nWaiting for rollout to finish: 1 old replicas are pending termination...\nWaiting for rollout to finish: 1 of 2 updated replicas are available...\ndeployment \"sa-frontend\" successfully rolled out</code></pre><p>According to the output the deployment was rolled out. It was done in such a fashion that the replicas were replaced one by one. Meaning that our application was always on. Before we move on let’s verify that the update is live.</p><h4 id=\"verifying-the-deployment\">Verifying the deployment</h4><p>Let’s see the update live on our browsers. Execute the same command that we used before <code>minikube service sa-frontend-lb</code>, which opens up the browser. We can see that the button was updated.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/aRxOGkn2bSeCWdsuMPFAPRgbR7ZTQ59RX3uw\" class=\"kg-image\" alt=\"aRxOGkn2bSeCWdsuMPFAPRgbR7ZTQ59RX3uw\" width=\"506\" height=\"209\" loading=\"lazy\"><figcaption>Fig. 20. The Green button</figcaption></figure><h4 id=\"behind-the-scenes-of-the-rollingupdate-\">Behind the scenes of “The RollingUpdate”</h4><p>After we applied the new deployment, Kubernetes compares the new state with the old one. In our case, the new state requests two pods with the image <code>rinormaloku/sentiment-analysis-frontend:green.</code> This is different from the current state running so it kicks in the <strong>RollingUpdate</strong>.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/I86XgWQFhpFLolvA8v0eHmZSKGilmlTaevTa\" class=\"kg-image\" alt=\"I86XgWQFhpFLolvA8v0eHmZSKGilmlTaevTa\" width=\"524\" height=\"195\" loading=\"lazy\"><figcaption>Fig. 21. RollingUpdate replacing pods</figcaption></figure><p>The RollingUpdate acts according to the rules we specified, those being “<strong>maxUnavailable: </strong>1″ and “<strong>maxSurge:</strong> 1″. This means that the deployment can terminate only one pod, and can start only one new pod. This process is repeated until all pods are replaced (see Fig. 21).</p><p>Let’s continue with the benefit number 2.</p><p><strong>Disclaimer:</strong><em> For entertainment purposes, the next part is written as a novella.</em></p><h4 id=\"benefit-2-rolling-back-to-a-previous-state\">Benefit #2: Rolling back to a previous state</h4><p>The Product Manager runs into your office and he is having a <strong>crisis!</strong></p><p>“The application has a critical bug, in PRODUCTION!! Revert back to the previous version immediately” — yells the product manager.</p><p>He sees the coolness in you, not twitching one eye. You turn to your beloved terminal and type:</p><pre><code class=\"language-bash\">kubectl rollout history deployment sa-frontend\ndeployments \"sa-frontend\"\nREVISION  CHANGE-CAUSE\n1         &lt;none&gt;         \n2         kubectl.exe apply --filename=sa-frontend-deployment-green.yaml --record=true</code></pre><p>You take a short look at the previous deployments. “The last version is buggy, meanwhile the previous version worked perfectly?” — you ask the Product Manager.</p><p>“Yes, are you even listening to me!” — screams the product manager.</p><p>You ignore him, you know what you have to do, you start typing:</p><pre><code class=\"language-bash\">kubectl rollout undo deployment sa-frontend --to-revision=1\ndeployment \"sa-frontend\" rolled back</code></pre><p>You refresh the page and the change is undone!</p><p>The product managers jaw drops open.</p><p>You saved the day!</p><p><em>The end!</em></p><p>Yeah… it was a boring novella. Before Kubernetes existed it was so much better, we had more drama, higher intensity, and that for a longer period of time. Ohh good old times!</p><p>Most of the commands are self-explanatory, besides one detail that you had to work out yourself. Why the first revision has a <strong>CHANGE-CAUSE </strong>of &lt;none&gt; meanwhile the second revision <strong>has a CHANGE-</strong>CAUS<em>E of “kubectl.exe apply –filename=sa-frontend-deployment-gree<strong>n</strong>.yaml –recor</em>d=true“.</p><p>If you concluded that it’s because of the <code>--record</code> flag that we used when we applied the new image then you are totally correct!</p><p>In the next section, we will use the concepts learned thus far to complete the whole architecture.</p><h3 id=\"kubernetes-and-everything-else-in-practice\">Kubernetes and everything else in Practice</h3><p>We learned all the resources that we need to complete the architecture that’s why this part is going to be quick. In figure 22 we have greyed out everything that we still have to do. Lets start from the bottom: <strong>Deploying the sa-logic deployment</strong>.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/CwBGmdNtPUeZwsTSL9inGx8xikkNEejnEeVQ\" class=\"kg-image\" alt=\"CwBGmdNtPUeZwsTSL9inGx8xikkNEejnEeVQ\" width=\"724\" height=\"930\" loading=\"lazy\"><figcaption>Fig. 22. Current Application State</figcaption></figure><h4 id=\"deployment-sa-logic\">Deployment SA-Logic</h4><p>Navigate in your terminal to the folder resource-manifests and execute the following command:</p><pre><code class=\"language-bash\">kubectl apply -f sa-logic-deployment.yaml --record\ndeployment \"sa-logic\" created</code></pre><p>The deployment SA-Logic created three pods. (Running the container of our python application). It labeled them with <code><strong>app:</strong> sa-logic.</code> This labeling enables us to target them using a selector from the SA-Logic service. Please take time to open the file <code>sa-logic-deployment.yaml</code> and check out the contents.</p><p>It’s the same concepts used all over again, let’s jump right into the next resource: <strong>the service SA-Logic</strong>.</p><h4 id=\"service-sa-logic\">Service SA Logic</h4><p>Lets elaborate why we need this Service. Our Java application (running in the pods of SA — WebApp deployment) depends on the sentiment analysis done by the Python Application. But now, in contrast to when we were running everything locally, we don’t have one single python application listening to one port, we have 2 pods and if needed we could have more.</p><p>That’s why we need a <strong>Service</strong> that “acts as the entry point to a set of pods that provide the same functional service”. This means that we can use the Service SA-Logic as the entry point to all the SA-Logic pods.</p><p>Let’s do that:</p><pre><code>kubectl apply -f service-sa-logic.yaml\nservice \"sa-logic\" created</code></pre><p><strong>Updated Application State: </strong>We have 2 pods (containing the Python Application) running and we have the SA-Logic service acting as an entry point that we will use in the SA-WebApp pods.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/fYibPnq4frpa7jf4aq9Htc3sT0OxtgOTZ52x\" class=\"kg-image\" alt=\"fYibPnq4frpa7jf4aq9Htc3sT0OxtgOTZ52x\" width=\"724\" height=\"930\" loading=\"lazy\"><figcaption>Fig. 23. Updated Application State</figcaption></figure><p>Now we need to deploy the SA-WebApp pods, using a deployment resource.</p><h4 id=\"deployment-sa-webapp\">Deployment SA-WebApp</h4><p>We are getting the hang out of deployments, though this one has one more feature. If you open the file <code>sa-web-app-deployment.yaml</code> you will find this part new:</p><pre><code class=\"language-yaml\">- image: rinormaloku/sentiment-analysis-web-app\n  imagePullPolicy: Always\n  name: sa-web-app\n  env:\n    - name: SA_LOGIC_API_URL\n      value: \"http://sa-logic\"\n  ports:\n    - containerPort: 8080</code></pre><p>The first thing that interests us is what does the <strong>env </strong>property do? And we surmise that it is declaring the environment variable SA_LOGIC_API_URL with the value “<a href=\"http://sa-logic/\" rel=\"noopener\">http://sa-logic</a>” inside our pods. But why are we initializing it to <a href=\"http://sa-logic/\" rel=\"noopener\"><strong>http://sa-logic</strong></a>, what is <strong>sa-logic</strong>?</p><p>Lets get introduced to <strong>kube-dns</strong>.</p><h4 id=\"kube-dns\">KUBE-DNS</h4><p>Kubernetes has a special pod the <strong>kube-dns</strong>. And by default, all Pods use it as the DNS Server. One important property of <strong>kube-dns </strong>is that it creates a DNS record for each created service.</p><p>This means that when we created the service <strong>sa-logic </strong>it got an IP address. Its name was added as a record (in conjunction with the IP) in kube-dns. This enables all the pods to translate the <strong>sa-logic </strong>to the SA-Logic services IP address.</p><p>Good, now we can continue with:</p><h4 id=\"deployment-sa-webapp-continued-\">Deployment SA WebApp (continued)</h4><p>Execute the command:</p><pre><code class=\"language-bash\">kubectl apply -f sa-web-app-deployment.yaml --record\ndeployment \"sa-web-app\" created</code></pre><p>Done. We are left to expose the SA-WebApp pods externally using a LoadBalancer Service. This enables our react application to make http requests to the service which acts as an entry point to the SA-WebApp pods.</p><h4 id=\"service-sa-webapp\">Service SA-WebApp</h4><p>Open the file <code>service-sa-web-app-lb.yaml</code>, as you can see everything is familiar to you.<br>So without further adoexecute the command:</p><pre><code class=\"language-bash\">kubectl apply -f service-sa-web-app-lb.yaml\nservice \"sa-web-app-lb\" created</code></pre><p>The architecture is complete. But we have one single dissonance. When we deployed the SA-Frontend pods our container image was pointing to our SA-WebApp in <a href=\"http://localhost:8080/sentiment\" rel=\"noopener\">http://localhost:8080/sentiment</a>. But now we need to update it to point to the IP Address of the SA-WebApp Loadbalancer. (Which acts as an entry point to the SA-WebApp pods).</p><p>Fixing this dissonance provides us with the opportunity to succinctly encompass once more everything from code to deployment. (It’s even more effective if you do this alone instead of following the guide below). Let’s get started:</p><ol><li>Get the SA-WebApp Loadbalancer IP by executing the following command:</li></ol><pre><code class=\"language-bash\">minikube service list\n|-------------|----------------------|-----------------------------|\n|  NAMESPACE  |         NAME         |             URL             |\n|-------------|----------------------|-----------------------------|\n| default     | kubernetes           | No node port                |\n| default     | sa-frontend-lb       | http://192.168.99.100:30708 |\n| default     | sa-logic             | No node port                |\n| default     | sa-web-app-lb        | http://192.168.99.100:31691 |\n| kube-system | kube-dns             | No node port                |\n| kube-system | kubernetes-dashboard | http://192.168.99.100:30000 |\n|-------------|----------------------|-----------------------------|</code></pre><p>2. Use the SA-WebApp LoadBalancer IP in the file <code>sa-frontend/src/App.js</code>, as shown below:</p><pre><code class=\"language-js\">analyzeSentence() {\n        fetch('http://192.168.99.100:31691/sentiment', { /* shortened for brevity */})\n            .then(response =&gt; response.json())\n            .then(data =&gt; this.setState(data));\n    }</code></pre><p>3. Build the static files <code>npm run build</code> (you need to navigate to the folder <strong>sa-frontend</strong>)</p><p>4. Build the container image:</p><pre><code class=\"language-bash\">docker build -f Dockerfile -t $DOCKER_USER_ID/sentiment-analysis-frontend:minikube .</code></pre><p>5. Push the image to Docker hub.</p><pre><code class=\"language-bash\">docker push $DOCKER_USER_ID/sentiment-analysis-frontend:minikube</code></pre><p>6. Edit the sa-frontend-deployment.yaml to use the new image and</p><p>7. Execute the command kubectl apply -f sa-frontend-deployment.yaml</p><p>Refresh the browser or if you closed the window execute <code>minikube service sa-frontend-lb</code>. Give it a try by typing a sentence!</p><figure class=\"kg-card kg-image-card\"><img src=\"https://cdn-media-1.freecodecamp.org/images/GkLNiTbXMvnaTdwnH0DjS-Lhq7mizlAnl9Mm\" class=\"kg-image\" alt=\"GkLNiTbXMvnaTdwnH0DjS-Lhq7mizlAnl9Mm\" width=\"724\" height=\"930\" loading=\"lazy\"></figure><h3 id=\"article-summary\">Article summary</h3><p>Kubernetes is beneficial for the team, for the project, simplifies deployments, scalability, resilience, it enables us to consume any underlying infrastructure and you know what? From now on, let’s call it Supernetes!</p><p>What we covered in this series:</p><ul><li>Building / Packaging / Running ReactJS, Java and Python Applications</li><li>Docker Containers; how to define and build them using Dockerfiles,</li><li>Container Registries; we used the Docker Hub as a repository for our containers.</li><li>We covered the most important parts of Kubernetes.</li><li>Pods</li><li>Services</li><li>Deployments</li><li>New concepts like Zero-Downtime deployments</li><li>Creating scalable apps</li><li>And in the process, we migrated the whole microservice application to a Kubernetes Cluster.</li></ul><p>I am Rinor Maloku and I want to thank you for joining me on this voyage. Since you read this far I know that you loved this article and would be interested in more. I write articles that go into this depth of detail for new technologies every 3 months. You can always expect an example application, hands-on practice, and a guide that provides you with the right tools and knowledge to tackle any real-world project.</p><p>To stay in touch and not miss any of my articles subscribe to my <a href=\"https://tinyletter.com/rinormaloku\" rel=\"noopener\">newsletter</a>, follow me on <a href=\"https://twitter.com/rinormaloku\" rel=\"noopener\">Twitter</a>, and check out my page <a href=\"https://rinormaloku.com/\" rel=\"noopener\">rinormaloku.com</a>.</p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            \n    <img srcset=\"https://www.freecodecamp.org/news/content/images/size/w60/2022/05/rinor-close.png 60w\" sizes=\"60px\" src=\"https://www.freecodecamp.org/news/content/images/size/w60/2022/05/rinor-close.png\" class=\"author-profile-image\" alt=\"Rinor Maloku\" width=\"600\" height=\"400\" onerror=\"this.style.display='none'\" loading=\"lazy\" data-test-label=\"profile-image\">\n  \n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/rinormaloku/\" data-test-label=\"profile-link\">\n                    \n                        Rinor Maloku\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"author-bio\">Rinor Maloku is an engineer working on application-aware networking solutions at Solo.io. He co-authored the book &quot;Istio in Action&quot; published by Manning. \n\nEx: Red Hatter</p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If you read this far, thank the author to show them you care. <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">Say Thanks</button>\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Learn%20Kubernetes%20in%20Under%203%20Hours%3A%20A%20Detailed%20Guide%20to%20Orchestrating%20Containers\".replace(/&#39;/g,\"%27\"),o=\"\",r=\"@rinormaloku\",i=Boolean(\"\");let a;if(i&&(o||r)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Rinor Maloku\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${r||t.currentPostAuthor} for translating it.`)}else!i&&r&&(a=encodeURIComponent(`Thank you ${r} for writing this helpful article.`));const s=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",s)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac961c5ba598962\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"version\":\"2024.7.0\",\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\"}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"}}}