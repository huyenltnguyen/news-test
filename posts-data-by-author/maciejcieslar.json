{"https://www.freecodecamp.org/news/author/maciejcieslar/":{"https://www.freecodecamp.org//news/how-to-add-socket-io-to-multi-threaded-node-js-df404b424276/":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Adding Socket.io to multi-threaded Node.js</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/how-to-add-socket-io-to-multi-threaded-node-js-df404b424276/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"One of the disadvantages of Node is that it is single-threaded. Of course, there is a way around it — namely a module called cluster. Cluster enables us to spread our application over multiple threads. Now, however, a new problem presents itself. See, our code being run across multiple instances\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Adding Socket.io to multi-threaded Node.js\">\n    \n        <meta property=\"og:description\" content=\"One of the disadvantages of Node is that it is single-threaded. Of course, there is a way around it — namely a module called cluster. Cluster enables us to spread our application over multiple threads. Now, however, a new problem presents itself. See, our code being run across multiple instances\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/how-to-add-socket-io-to-multi-threaded-node-js-df404b424276/\">\n    <meta property=\"og:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*iCeTauiYBnC5UTzlOIKmyw.jpeg\">\n    <meta property=\"article:published_time\" content=\"2018-09-10T20:47:04.000Z\">\n    <meta property=\"article:modified_time\" content=\"2019-07-31T22:21:47.000Z\">\n    \n        <meta property=\"article:tag\" content=\"javascript\">\n    \n        <meta property=\"article:tag\" content=\"Nodejs\">\n    \n        <meta property=\"article:tag\" content=\"Tech\">\n    \n        <meta property=\"article:tag\" content=\"Programming\">\n    \n        <meta property=\"article:tag\" content=\"Productivity\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Adding Socket.io to multi-threaded Node.js\">\n    \n        <meta name=\"twitter:description\" content=\"One of the disadvantages of Node is that it is single-threaded. Of course, there is a way around it — namely a module called cluster. Cluster enables us to spread our application over multiple threads. Now, however, a new problem presents itself. See, our code being run across multiple instances\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/how-to-add-socket-io-to-multi-threaded-node-js-df404b424276/\">\n    <meta name=\"twitter:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*iCeTauiYBnC5UTzlOIKmyw.jpeg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Maciej Cieślar\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"javascript, Nodejs, Tech, Programming, Productivity\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n\n    <meta property=\"og:image:width\" content=\"800\">\n    <meta property=\"og:image:height\" content=\"507\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://cdn-media-1.freecodecamp.org/images/1*iCeTauiYBnC5UTzlOIKmyw.jpeg\",\n\t\t\"width\": 800,\n\t\t\"height\": 507\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-add-socket-io-to-multi-threaded-node-js-df404b424276/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2018-09-10T20:47:04.000Z\",\n\t\"dateModified\": \"2019-07-31T22:21:47.000Z\",\n\t\"keywords\": \"javascript, Nodejs, Tech, Programming, Productivity\",\n\t\"description\": \"One of the disadvantages of Node is that it is single-threaded. Of course, there\\nis a way around it — namely a module called cluster. Cluster enables us to\\nspread our application over multiple threads.\\n\\nNow, however, a new problem presents itself. See, our code being run across\\nmultiple instances actually has some significant downsides. One of them is not\\nhaving global states.\\n\\nNormally, in a single-threaded instance, this would not be much of a worry. For\\nus now it changes everything.\\n\\nLet’s se\",\n\t\"headline\": \"Adding Socket.io to multi-threaded Node.js\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Maciej Cieślar\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/maciejcieslar/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://www.mcieslar.com\"\n\t\t]\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Mon Sep 10 2018 20:47:04 GMT+0000 (Coordinated Universal Time)\">\n                            September 10, 2018\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/javascript/\">\n                                #javascript\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Adding Socket.io to multi-threaded Node.js</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://cdn-media-1.freecodecamp.org/images/1*iCeTauiYBnC5UTzlOIKmyw.jpeg\">\n      <img onerror=\"this.style.display='none'\" src=\"https://cdn-media-1.freecodecamp.org/images/1*iCeTauiYBnC5UTzlOIKmyw.jpeg\" alt=\"Adding Socket.io to multi-threaded Node.js\" ,=\"\" width=\"800\" height=\"507\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>One of the disadvantages of Node is that it is single-threaded. Of course, there is a way around it — namely a module called <strong>cluster</strong><em>.</em> Cluster enables us to spread our application over multiple threads.</p><p>Now, however, a new problem presents itself. See, our code being run across multiple instances actually has some significant downsides. One of them is not having global states.</p><p>Normally, in a single-threaded instance, this would not be much of a worry. For us now it changes everything.</p><p>Let’s see why.</p><h3 id=\"so-what-is-the-problem\">So, what is the problem?</h3><p>Our application is a simple online chat running on four threads. This enables a user to be logged in at the same time on their phone and computer.</p><p>Imagine that we have sockets set up exactly the way we would have set them for one thread. In other words we now have one big global state with sockets.</p><p>When the user logs in on their computer, the website opens up the connection with a Socket.io instance on our server. The socket is stored in the state of thread #3.</p><p>Now, imagine the user goes to the kitchen to grab a snack and takes their phone with them — naturally wanting to keep texting with their friends online.</p><p>Their phone connects to thread #4, and the socket is saved in the thread’s state.</p><p>Sending a message from their phone will do the user no good. Only people from thread #3 are going to be able to see the message. That is because the sockets saved on thread #3 are not somehow magically stored on threads #1, #2 and #4 as well.</p><p>Funny enough, even the user themself is not going to see their messages on their computer once they come back from the kitchen.</p><p>Of course, when they refresh the website, we could send a GET request and fetch the last 50 messages, but we cannot really say it is the ‘dynamic’ way, can we?</p><h3 id=\"why-is-this-happening\">Why is this happening?</h3><p>Spreading our server over multiple threads is in some way tantamount to having several separate servers. They do not know about each other’s existence and certainly do not share any memory. This means that an object on one instance does not exist on the other.</p><p>Sockets saved in thread #3 are not necessarily all the sockets that the user is using at the moment. If the user’s friends are on different threads, they are not going to see the user’s messages unless they refresh the website.</p><p>Ideally, we would like to notify other instances about an event for the user. This way we can be sure that every connected device is receiving live updates.</p><h3 id=\"a-solution\">A solution</h3><p>We can notify other threads by using <a href=\"https://redis.io/\" rel=\"noopener\">Redis</a>’ publish/subscribe <a href=\"https://redis.io/topics/pubsub\" rel=\"noopener\">messaging paradigm</a> (<strong>pubsub</strong>).</p><p><strong>Redis</strong> is an open source (<strong>BSD</strong>-licensed) in-memory data structure<strong> </strong>store. It can be used as a database, cache and message broker.</p><p>This means that we can use Redis to have events distributed between our instances.</p><p>Note that normally we would probably store our entire structure inside Redis. However, since the structure is not serializable and needs to be kept “alive” inside the memory, we are going to store part of it on each instance.</p><h3 id=\"the-flow\">The flow</h3><p>Let’s now think about the steps in which we are going to handle an incoming event.</p><ol><li>The event called <strong>message</strong> comes to one of our sockets — this way, we do not have to listen for every possible event.</li><li>Inside the object passed to the handler of this event as an argument, we can find the name of the event. For example, <strong>sendMessage</strong> — <code>.on('message', ({ event }) =&gt;{})</code>.</li><li>If there is a handler for this name, we are going execute it.</li><li>The handler may execute <strong>dispatch</strong> with a response.</li><li>The dispatch sends the response event to our Redis pubsub<em>. </em>From there it gets <strong>emitted</strong> to each one of our instances.</li><li>Each instance emits it to their socketsState, ensuring every connected client is going to receive the event.</li></ol><p>Seems complicated, I know, but bear with me.</p><h3 id=\"implementation\">Implementation</h3><p>Here is the <a href=\"https://github.com/maciejcieslar/multithreaded-socket\" rel=\"noopener\">repository</a> with the environment ready, so that we do not have to install and set everything up ourselves.</p><p>First, we are going to set up a server with <strong>Express</strong>.</p><pre><code class=\"language-javascript\">import * as moduleAlias from 'module-alias';\n\nmoduleAlias.addAliases({\n  src: __dirname,\n});\n\nimport * as express from 'express';\nimport * as http from 'http';\nimport * as socketio from 'socket.io';\n\nconst port = 7999;\n\nconst app = express();\nconst server = http.createServer(app);\nconst io = initSocket(socketio(server).of('/socket'));\n\nserver.listen(port, () =&gt; {\n  console.log(`Listening on port ${port}.`);\n});</code></pre><p>We create an Express app, HTTP server and init sockets.</p><p>Now we can focus on adding sockets.</p><p>We pass the<em> </em>Socket.io’s server instance to our function in which we set the middlewares.</p><pre><code class=\"language-javascript\">const initSocket = (instance: socketio.Namespace): socketio.Namespace =&gt;\n  instance.use(onAuth).use(onConnection);</code></pre><h3 id=\"onauth\">onAuth</h3><p>The <strong>onAuth</strong> function simply imitates a mock authorization. In our case it is token-based.</p><p>Personally, I would probably replace it with <a href=\"https://jwt.io/\" rel=\"noopener\">JWT</a> in the future, but it is not enforced in any way.</p><pre><code class=\"language-javascript\">const onAuth: SocketMiddleware = (socket, next) =&gt; {\n  const { token, id }: { token: string; id: string } =\n    socket.request._query || socket.request.headers;\n\n  if (!token) {\n    return next(new Error('Authorization failed, no token has been provided!'));\n  }\n\n  // mock\n  const user = checkToken(token, id);\n\n  socket.user = user;\n\n  return next();\n};</code></pre><p>Now, let’s move on to the <strong>onConnection</strong> middleware.</p><h3 id=\"onconnection\">onConnection</h3><pre><code class=\"language-javascript\">const onConnection: SocketMiddleware = (socket, next) =&gt; {\n  if (!socket.user) {\n    return next(new Error('Something went wrong.'));\n  }\n\n  const { id } = socket.user;\n\n  socketsState.add(id, socket);\n\n  socket.on('message', ({ event, args }) =&gt; {\n    const handler = handlers[event];\n\n    if (!handler) {\n      return null;\n    }\n\n    return handler &amp;&amp; handler({ id, args });\n  });\n\n  socket.on('disconnect', () =&gt; {\n    return socketsState.remove(id, socket);\n  });\n\n  return next();\n};</code></pre><p>Here we see that we retrieve the user’s <strong>id</strong>, which was set in the previous middleware, and save it in our socketsState, with the key being the id and the value being an array of sockets.</p><p>Next, we listen for the <strong>message</strong> event. Our entire logic is based on that — every event the frontend sends us is going to be called: <strong>message</strong>.</p><p>The name of the event will be sent inside the arguments object — as stated above.</p><h3 id=\"handlers\">Handlers</h3><p>As you can see in onConnection, specifically in the listener for the message event, we are looking for a handler based on the event’s name.</p><p>Our <strong>handlers</strong> is simply an object in which the key is the event name and the value is the function. We will use it to listen for events and respond accordingly.</p><pre><code class=\"language-javascript\">const dispatchTypes = {\n  MESSAGE_SENT: 'message_sent',\n  POST_UPDATED_NOTIFICATION: 'post_updated_notification',\n};\n\ninterface Handlers {\n  [key: string]: ({ id, args }: { id: string; args: any }) =&gt; any;\n}\n\nconst handlers: Handlers = {\n  sendMessage: async ({ id, args }) =&gt; {\n    // await sendMessageToUser();\n\n    dispatch({\n      id,\n      event: dispatchTypes.MESSAGE_SENT,\n      args: {\n        message: `A message from user with id: ${id} has been send`,\n      },\n    });\n  },\n  postUpdated: async ({ id, args }) =&gt; {\n    dispatch({\n      id,\n      event: dispatchTypes.POST_UPDATED_NOTIFICATION,\n      args: {\n        message: 'A post you have been mentioned in has been updated',\n      },\n    });\n  },\n};\n\nexport = handlers;</code></pre><p>Also, later on, we are going to add the <strong>dispatch</strong> function and use it to send the event across the instances.</p><h3 id=\"socketsstate\">SocketsState</h3><p>We know the interface of our state, but we have yet to implement it.</p><p>We add methods for adding and removing a socket, as well as for emitting an event.</p><pre><code class=\"language-javascript\">import * as socketio from 'socket.io';\n\ninterface SocketsState {\n  [id: string]: socketio.Socket[];\n}\n\nconst socketsState: SocketsState = {};\n\nconst add = (id: string, socket: socketio.Socket) =&gt; {\n  if (!socketsState[id]) {\n    socketsState[id] = [];\n  }\n\n  socketsState[id] = [...socketsState[id], socket];\n\n  return socketsState[id];\n};\n\nconst remove = (id: string, socket: socketio.Socket) =&gt; {\n  if (!socketsState[id]) {\n    return null;\n  }\n\n  socketsState[id] = socketsState[id].filter((s) =&gt; s !== socket);\n\n  if (!socketsState[id].length) {\n    socketsState[id] = undefined;\n  }\n\n  return null;\n};\n\nconst emit = ({\n  event,\n  id,\n  args,\n}: {\n  event: string;\n  id: string;\n  args: any;\n}) =&gt; {\n  if (!socketsState[id]) {\n    return null;\n  }\n\n  socketsState[id].forEach((socket) =&gt;\n    socket.emit('message', { event, id, args }),\n  );\n\n  return null;\n};\n\nexport { add, remove, emit };\n</code></pre><p>The <strong>add</strong> function checks whether the state has a property which is equal to the user’s id. If that is the case, then we simply add it to our already existing array. Otherwise, we create a new array first.</p><p>The <strong>remove</strong> function also checks if the state has the user’s id in its properties. If not — it does nothing. Otherwise, it filters the array to remove the socket from the array. Then if the array is empty it removes it from the state, setting the property to <strong>undefined</strong>.</p><h3 id=\"redis-pubsub\">Redis’ pubsub</h3><p>For creating our <strong>pubsub</strong> we are going to use the package called <strong>node-redis-pubsub</strong>.</p><pre><code class=\"language-javascript\">import * as NRP from 'node-redis-pubsub';\n\nconst client = new NRP({\n  port: 6379,\n  scope: 'message',\n});\n\nexport = client;</code></pre><h3 id=\"adding-dispatch\">Adding dispatch</h3><p>Ok, now all that’s left to do is to add the dispatch function…</p><pre><code class=\"language-javascript\">const dispatch = ({\n  event,\n  id,\n  args,\n}: {\n  event: string;\n  id: string;\n  args: any;\n}) =&gt; pubsub.emit('outgoing_socket_message', { event, id, args });</code></pre><p>…and add a listener for <strong>outgoing_socket_message</strong>. This way, each instance receives the event and sends it to the user’s sockets.</p><pre><code class=\"language-javascript\">pubsub.on('outgoing_socket_message', ({ event, id, args }) =&gt;\n  socketsState.emit({ event, id, args }),\n);</code></pre><h3 id=\"making-it-all-multi-threaded\">Making it all multi-threaded</h3><p>Finally, let’s add the code needed for our server to be multi-threaded.</p><pre><code class=\"language-javascript\">import * as os from 'os';\nimport * as cluster from 'cluster';\n\nconst spawn = () =&gt; {\n  const numWorkes = os.cpus().length;\n\n  for (let i = 0; i &lt; numWorkes; i += 1) {\n    cluster.fork();\n  }\n\n  cluster.on('online', () =&gt; {\n    console.log('Worker spawned');\n  });\n\n  cluster.on('exit', (worker, code, status) =&gt; {\n    if (code === 0 || worker.exitedAfterDisconnect) {\n      console.log(`Worker ${worker.process.pid} finished his job.`);\n      return null;\n    }\n\n    console.log(\n      `Worker ${\n        worker.process.pid\n      } crashed with code ${code} and status ${status}.`,\n    );\n    return cluster.fork();\n  });\n};\n\nexport { spawn };</code></pre><pre><code class=\"language-javascript\">import * as moduleAlias from 'module-alias';\n\nmoduleAlias.addAliases({\n  src: __dirname,\n});\n\nimport * as express from 'express';\nimport * as http from 'http';\nimport * as cluster from 'cluster';\nimport * as socketio from 'socket.io';\nimport * as killPort from 'kill-port';\nimport { initSocket } from 'src/common/socket';\nimport { spawn } from 'src/clusters';\n\nconst port = 7999;\n\nif (cluster.isMaster) {\n  killPort(port).then(spawn);\n} else {\n  const app = express();\n  const server = http.createServer(app);\n  const io = initSocket(socketio(server).of('/socket'));\n\n  server.listen(port, () =&gt; {\n    console.log(`Listening on port ${port}.`);\n  });\n}\n</code></pre><p>Note: We have to kill the port, because after quitting our <strong>Nodemon</strong> process with Ctrl + c it just hangs there.</p><p>With a little tweaking, we now have working sockets across all instances. As a result: a much more efficient server.</p><p>Thank you very much for reading!</p><p>I appreciate that it all might seem overwhelming at first and strenuous to take it all in at once. With that in mind, I highly encourage you to read the code again in its entirety and ponder it as a whole.</p><p>If you have any questions or comments feel free to put them in the comment section below or send me a <a href=\"https://www.mcieslar.com/contact\" rel=\"noopener\">message</a>.</p><p>Check out my <a href=\"https://www.maciejcieslar.com/about/\" rel=\"noopener\">social media</a>!</p><p><a href=\"http://eepurl.com/dAKhxb\" rel=\"noopener\">Join my newsletter</a>!</p><p><em>Originally published at <a href=\"https://www.mcieslar.com/adding-socket-io-to-multithreaded-node\" rel=\"noopener\">www.mcieslar.com</a> on September 10, 2018.</em></p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"default-bio\">\n                        Read <a href=\"/news/author/maciejcieslar/\">more posts</a>.\n                    </p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If this article was helpful, <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">share it</button>.\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Adding%20Socket.io%20to%20multi-threaded%20Node.js\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"\",r=Boolean(\"\");let a;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Maciej Cieślar\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(a=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const c=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",c)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac95b6c99e6ce19\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/how-to-limit-concurrent-operations-in-javascript-b57d7b80d573/":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Limiting concurrent operations in JavaScript</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/how-to-limit-concurrent-operations-in-javascript-b57d7b80d573/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Usually, the machine that executes our code has limited resources. Doing everything at once might not only hurt, but can also hang our process and make it stop responding altogether. When we want to crawl 100 websites, we should crawl, for example, 5 at once, so that we don’t take\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Limiting concurrent operations in JavaScript\">\n    \n        <meta property=\"og:description\" content=\"Usually, the machine that executes our code has limited resources. Doing everything at once might not only hurt, but can also hang our process and make it stop responding altogether. When we want to crawl 100 websites, we should crawl, for example, 5 at once, so that we don’t take\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/how-to-limit-concurrent-operations-in-javascript-b57d7b80d573/\">\n    <meta property=\"og:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*7F50Qc-ysFgy6tCjUyruTA.jpeg\">\n    <meta property=\"article:published_time\" content=\"2018-08-28T20:37:51.000Z\">\n    <meta property=\"article:modified_time\" content=\"2019-07-31T22:23:14.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Programming\">\n    \n        <meta property=\"article:tag\" content=\"Concurrency\">\n    \n        <meta property=\"article:tag\" content=\"javascript\">\n    \n        <meta property=\"article:tag\" content=\"Tech\">\n    \n        <meta property=\"article:tag\" content=\"Productivity\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Limiting concurrent operations in JavaScript\">\n    \n        <meta name=\"twitter:description\" content=\"Usually, the machine that executes our code has limited resources. Doing everything at once might not only hurt, but can also hang our process and make it stop responding altogether. When we want to crawl 100 websites, we should crawl, for example, 5 at once, so that we don’t take\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/how-to-limit-concurrent-operations-in-javascript-b57d7b80d573/\">\n    <meta name=\"twitter:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*7F50Qc-ysFgy6tCjUyruTA.jpeg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Maciej Cieślar\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Programming, Concurrency, javascript, Tech, Productivity\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n\n    <meta property=\"og:image:width\" content=\"800\">\n    <meta property=\"og:image:height\" content=\"566\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://cdn-media-1.freecodecamp.org/images/1*7F50Qc-ysFgy6tCjUyruTA.jpeg\",\n\t\t\"width\": 800,\n\t\t\"height\": 566\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-limit-concurrent-operations-in-javascript-b57d7b80d573/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2018-08-28T20:37:51.000Z\",\n\t\"dateModified\": \"2019-07-31T22:23:14.000Z\",\n\t\"keywords\": \"Programming, Concurrency, javascript, Tech, Productivity\",\n\t\"description\": \"Usually, the machine that executes our code has limited resources. Doing\\neverything at once might not only hurt, but can also hang our process and make\\nit stop responding altogether.\\n\\nWhen we want to crawl 100 websites, we should crawl, for example, 5 at once, so\\nthat we don’t take up all the available bandwidth. As soon as one website is\\ncrawled, the next one is ready to go.\\n\\nGenerally speaking, all “heavy” operations should be laid out in time. They\\nshould not be executed all-at-once, for bett\",\n\t\"headline\": \"Limiting concurrent operations in JavaScript\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Maciej Cieślar\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/maciejcieslar/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://www.mcieslar.com\"\n\t\t]\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Tue Aug 28 2018 20:37:51 GMT+0000 (Coordinated Universal Time)\">\n                            August 28, 2018\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/programming/\">\n                                #Programming\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Limiting concurrent operations in JavaScript</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://cdn-media-1.freecodecamp.org/images/1*7F50Qc-ysFgy6tCjUyruTA.jpeg\">\n      <img onerror=\"this.style.display='none'\" src=\"https://cdn-media-1.freecodecamp.org/images/1*7F50Qc-ysFgy6tCjUyruTA.jpeg\" alt=\"Limiting concurrent operations in JavaScript\" ,=\"\" width=\"800\" height=\"566\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>Usually, the machine that executes our code has limited resources. Doing everything at once might not only hurt, but can also hang our process and make it stop responding altogether.</p><p>When we want to crawl 100 websites, we should crawl, for example, 5 at once, so that we don’t take up all the available bandwidth. As soon as one website is crawled, the next one is ready to go.</p><p>Generally speaking, all “heavy” operations should be laid out in time. They should not be executed all-at-once, for better performance and to save resources.</p><h3 id=\"implementation\">Implementation</h3><p>If you are familiar with my previous post about <a href=\"https://medium.freecodecamp.org/how-to-implement-promises-in-javascript-1ce2680a7f51\" rel=\"noopener\">implementing promises</a>, then you are going to notice many similarities.</p><pre><code class=\"language-typescript\">class Concurrently&lt;T = any&gt; {\n  private tasksQueue: (() =&gt; Promise&lt;T&gt;)[] = [];\n  private tasksActiveCount: number = 0;\n  private tasksLimit: number;\n\n  public constructor(tasksLimit: number) {\n    if (tasksLimit &lt; 0) {\n      throw new Error('Limit cant be lower than 0.');\n    }\n\n    this.tasksLimit = tasksLimit;\n  }\n\n  private registerTask(handler) {\n    this.tasksQueue = [...this.tasksQueue, handler];\n    this.executeTasks();\n  }\n\n  private executeTasks() {\n    while (this.tasksQueue.length &amp;&amp; this.tasksActiveCount &lt; this.tasksLimit) {\n      const task = this.tasksQueue[0];\n      this.tasksQueue = this.tasksQueue.slice(1);\n      this.tasksActiveCount += 1;\n\n      task()\n        .then((result) =&gt; {\n          this.tasksActiveCount -= 1;\n          this.executeTasks();\n\n          return result;\n        })\n        .catch((err) =&gt; {\n          this.tasksActiveCount -= 1;\n          this.executeTasks();\n\n          throw err;\n        });\n    }\n  }\n\n  public task(handler: () =&gt; Promise&lt;T&gt;): Promise&lt;T&gt; {\n    return new Promise((resolve, reject) =&gt;\n      this.registerTask(() =&gt;\n        handler()\n          .then(resolve)\n          .catch(reject),\n      ),\n    );\n  }\n}\n\nexport default Concurrently;</code></pre><p>We register a given task by adding it to our <em>tasksQueue</em> and then we call <em>executeTasks</em>.</p><p>Now we execute as many tasks as our limit allows us — one by one. Each time adding 1 to our counter called <em>tasksActiveCount</em>.</p><p>When the executed task finishes, we remove 1 from <em>tasksActiveCount</em> and again call <em>executeTasks</em>.</p><p>Below we can see an example of how it works.</p><p>The limit is set to 3. The first two tasks are taking very long to process. We can see the third “slot” getting opened from time to time, allowing the next task in the queue to be executed.</p><p>Always there are three, no more, no less.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn-media-1.freecodecamp.org/images/1*MxACL9-7TXYJTpUTQdJIHQ.gif\" class=\"kg-image\" alt=\"1*MxACL9-7TXYJTpUTQdJIHQ\" width=\"428\" height=\"612\" loading=\"lazy\"><figcaption>Executing heavy and light tasks with the limit of 3.</figcaption></figure><p>You can see the code in the <a href=\"https://github.com/maciejcieslar/concurrently\" rel=\"noopener\">repository</a>.</p><p>Thank you very much for reading! Can you think of any other way of achieving the same effect? Share them down below.</p><p>If you have any questions or comments feel free to put them in the comment section below or send me a <a href=\"https://www.mcieslar.com/contact\" rel=\"noopener\">message</a>.</p><p>Check out my <a href=\"https://www.maciejcieslar.com/about/\" rel=\"noopener\">social media</a>!</p><p><a href=\"http://eepurl.com/dAKhxb\" rel=\"noopener\">Join my newsletter</a>!</p><p><em>Originally published at <a href=\"https://www.mcieslar.com/limiting-concurrent-operations-in-javascript\" rel=\"noopener\">www.mcieslar.com</a> on August 28, 2018.</em></p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"default-bio\">\n                        Read <a href=\"/news/author/maciejcieslar/\">more posts</a>.\n                    </p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If this article was helpful, <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">share it</button>.\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Limiting%20concurrent%20operations%20in%20JavaScript\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"\",r=Boolean(\"\");let a;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Maciej Cieślar\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(a=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const c=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",c)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac95b6c99e9ce19\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/how-to-write-os-specific-code-in-electron-bf6379c62ff6/":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Writing OS-specific code in Electron</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/how-to-write-os-specific-code-in-electron-bf6379c62ff6/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"One of the advantages of using Electron is that — since it’s cross-platform — we don’t have to worry about the operating system on which our application is going to be run. However, sometimes we need our code to be OS-specific if, for example, we are going to be using\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Writing OS-specific code in Electron\">\n    \n        <meta property=\"og:description\" content=\"One of the advantages of using Electron is that — since it’s cross-platform — we don’t have to worry about the operating system on which our application is going to be run. However, sometimes we need our code to be OS-specific if, for example, we are going to be using\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/how-to-write-os-specific-code-in-electron-bf6379c62ff6/\">\n    <meta property=\"og:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*285GZjmJQbn-VF6J-qKD3A.jpeg\">\n    <meta property=\"article:published_time\" content=\"2018-08-28T17:38:38.000Z\">\n    <meta property=\"article:modified_time\" content=\"2019-07-31T22:24:14.000Z\">\n    \n        <meta property=\"article:tag\" content=\"Tech\">\n    \n        <meta property=\"article:tag\" content=\"Programming\">\n    \n        <meta property=\"article:tag\" content=\"Technology\">\n    \n        <meta property=\"article:tag\" content=\"Electron\">\n    \n        <meta property=\"article:tag\" content=\"Productivity\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Writing OS-specific code in Electron\">\n    \n        <meta name=\"twitter:description\" content=\"One of the advantages of using Electron is that — since it’s cross-platform — we don’t have to worry about the operating system on which our application is going to be run. However, sometimes we need our code to be OS-specific if, for example, we are going to be using\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/how-to-write-os-specific-code-in-electron-bf6379c62ff6/\">\n    <meta name=\"twitter:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*285GZjmJQbn-VF6J-qKD3A.jpeg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Maciej Cieślar\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"Tech, Programming, Technology, Electron, Productivity\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n\n    <meta property=\"og:image:width\" content=\"800\">\n    <meta property=\"og:image:height\" content=\"533\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://cdn-media-1.freecodecamp.org/images/1*285GZjmJQbn-VF6J-qKD3A.jpeg\",\n\t\t\"width\": 800,\n\t\t\"height\": 533\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-write-os-specific-code-in-electron-bf6379c62ff6/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2018-08-28T17:38:38.000Z\",\n\t\"dateModified\": \"2019-07-31T22:24:14.000Z\",\n\t\"keywords\": \"Tech, Programming, Technology, Electron, Productivity\",\n\t\"description\": \"One of the advantages of using Electron is that — since it’s cross-platform — we\\ndon’t have to worry about the operating system on which our application is going\\nto be run.\\n\\nHowever, sometimes we need our code to be OS-specific if, for example, we are\\ngoing to be using the command console or need to retrieve some information about\\nthe system.\\n\\nHaving to write multiple ifs each time we want to have some functionality on a\\ngiven OS seems like excess work. It quickly obfuscates the code, making it\\n\",\n\t\"headline\": \"Writing OS-specific code in Electron\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Maciej Cieślar\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/maciejcieslar/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://www.mcieslar.com\"\n\t\t]\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Tue Aug 28 2018 17:38:38 GMT+0000 (Coordinated Universal Time)\">\n                            August 28, 2018\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/tech/\">\n                                #Tech\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Writing OS-specific code in Electron</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://cdn-media-1.freecodecamp.org/images/1*285GZjmJQbn-VF6J-qKD3A.jpeg\">\n      <img onerror=\"this.style.display='none'\" src=\"https://cdn-media-1.freecodecamp.org/images/1*285GZjmJQbn-VF6J-qKD3A.jpeg\" alt=\"Writing OS-specific code in Electron\" ,=\"\" width=\"800\" height=\"533\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>One of the advantages of using Electron is that — since it’s cross-platform — we don’t have to worry about the operating system on which our application is going to be run.</p><p>However, sometimes we need our code to be OS-specific if, for example, we are going to be using the command console or need to retrieve some information about the system.</p><p>Having to write multiple <em>ifs</em> each time we want to have some functionality on a given OS seems like excess work. It quickly obfuscates the code, making it difficult to be understood and analyzed.</p><p>In order to keep the code clean and readable, we can create a little helper and remove the <em>ifs </em>and any “OS-related” logic altogether.</p><h3 id=\"implementing-platforms\">Implementing Platforms</h3><pre><code class=\"language-javascript\">const os = require('os');\n\nconst platforms = {\n  WINDOWS: 'WINDOWS',\n  MAC: 'MAC',\n  LINUX: 'LINUX',\n  SUN: 'SUN',\n  OPENBSD: 'OPENBSD',\n  ANDROID: 'ANDROID',\n  AIX: 'AIX',\n};\n\nconst platformsNames = {\n  win32: platforms.WINDOWS,\n  darwin: platforms.MAC,\n  linux: platforms.LINUX,\n  sunos: platforms.SUN,\n  openbsd: platforms.OPENBSD,\n  android: platforms.ANDROID,\n  aix: platforms.AIX,\n};\n\nconst currentPlatform = platformsNames[os.platform()];\n\nconst findHandlerOrDefault = (handlerName, dictionary) =&gt; {\n  const handler = dictionary[handlerName];\n\n  if (handler) {\n    return handler;\n  }\n\n  if (dictionary.default) {\n    return dictionary.default;\n  }\n\n  return () =&gt; null;\n};\n\nconst byOS = findHandlerOrDefault.bind(null, currentPlatform);\n\n// usage\nconst whatIsHeUsing = byOS({\n  [MAC]: username =&gt; `Hi ${username}! You are using Mac.`,\n  [WINDOWS]: username =&gt; `Hi ${username}! You are using Windows.`,\n  [LINUX]: username =&gt; `Hi ${username}! You are using Linux.`,\n  default: username =&gt; `Hi ${username}! You are using something different.`,\n});\n\nconsole.log(whatIsHeUsing('Maciej Cieslar')); // =&gt; Hi Maciej Cieslar! You are using Mac.</code></pre><p>First, we see the <em>platforms</em> object which contains names of all supported operating systems. It is made only for convenience. We can then use <em>platforms.WINDOWS</em> instead of typing <em>‘WINDOWS’</em> each time into our object with handlers we pass to the <em>byOS</em> function.</p><p>Next, notice the <em>platformsNames</em> object. The keys are the result of calling <a href=\"https://nodejs.org/api/os.html#os_os_platform\" rel=\"noopener\"><em>os.platform()</em></a><em>. </em>The<em> </em>values are the keys from the <em>platforms</em> object. We simply map it to a more user-friendly name.</p><p>For example, when <em>os.platform()</em> returns <em>win32,</em> we map it to <em>platforms.WINDOWS</em> by calling <em>platformsNames[os.platform()]</em>.</p><p>In <em>currentPlatform,</em> we save the platform that we are using right now, so then we can match it against a given object with handlers.</p><h3 id=\"implementing-releases\">Implementing Releases</h3><p>One might go even further and try to differentiate between releases of a given OS, for example, Windows 7, 8 and 10.</p><pre><code class=\"language-javascript\">const os = require('os');\n\nconst releaseTest = {\n  [platforms.WINDOWS]: (version) =&gt; {\n    const [majorVersion, minorVersion] = version.split('.');\n\n    // Windows 10 (10,0)\n    if (majorVersion === '10') {\n      return releases.WIN10;\n    }\n\n    // Windows 8.1 (6,3)\n    // Windows 8 (6,2)\n    // Windows 7 (6,1)\n    if (majorVersion === '6') {\n      if (minorVersion === '3' || minorVersion === '2') {\n        return releases.WIN8;\n      }\n\n      return releases.WIN7;\n    }\n\n    return releases.WIN7;\n  },\n  [platforms.MAC]: () =&gt; releases.ANY,\n  [platforms.LINUX]: () =&gt; releases.ANY,\n};\n\nconst currentRelease = releaseTest[currentPlatform](os.release());\n\nconst byRelease = findHandlerOrDefault.bind(null, currentRelease);\n\n// usage\nconst whatWindowsIsHeUsing = byOS({\n  [WINDOWS]: byRelease({\n    [WIN7]: username =&gt; `Hi ${username}! You are using Windows 7.`,\n    [WIN8]: username =&gt; `Hi ${username}! You are using Windows 8.`,\n    [WIN10]: username =&gt; `Hi ${username}! You are using Windows 10.`,\n  }),\n});\n\nconsole.log(whatWindowsIsHeUsing('Maciej Cieslar')); // =&gt; Hi Maciej Cieslar! You are using Windows 7.\n</code></pre><p>Now we can use <a href=\"https://nodejs.org/api/os.html#os_os_release\" rel=\"noopener\"><em>os.release()</em></a> to check for the system’s release.</p><p>We can split the resulting string and check the Windows version. A complete list can be found <a href=\"https://stackoverflow.com/a/44916050/6569856\" rel=\"noopener\">here</a>. As for Linux/Mac, I didn’t really see how that could be useful, so I left it at <em>releases.ANY</em>.</p><p>In <em>whatWindowsIsHeUsing</em> you can see that we are only checking for different Windows’ releases if we are running the app on Windows.</p><p>You can see the code in the <a href=\"https://github.com/maciejcieslar/os-specific-electron\" rel=\"noopener\">repository</a>.</p><p>Thank you very much for reading! If you have better ideas on how to write OS specific code, share them down below!</p><p>If you have any questions or comments feel free to put them in the comment section below or send me a <a href=\"https://www.mcieslar.com/contact\" rel=\"noopener\">message</a>.</p><p>Check out my <a href=\"https://www.maciejcieslar.com/about/\" rel=\"noopener\">social media</a>!</p><p><a href=\"http://eepurl.com/dAKhxb\" rel=\"noopener\">Join my newsletter</a>!</p><p><em>Originally published at <a href=\"https://www.mcieslar.com/writing-os-specific-code-in-electron\" rel=\"noopener\">www.mcieslar.com</a> on August 28, 2018.</em></p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"default-bio\">\n                        Read <a href=\"/news/author/maciejcieslar/\">more posts</a>.\n                    </p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If this article was helpful, <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">share it</button>.\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Writing%20OS-specific%20code%20in%20Electron\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"\",r=Boolean(\"\");let c;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Maciej Cieślar\"};c=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(c=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const l=`window.open(\\n    '${c?`https://twitter.com/intent/tweet?text=${c}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",l)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac95b6c99ebce19\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/how-to-implement-async-and-await-with-generators-11ab0859010f/":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Implementing Async And Await With Generators</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/how-to-implement-async-and-await-with-generators-11ab0859010f/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"Nowadays we can write our asynchronous code in a synchronous way thanks to the  async and await keywords. This makes it easier to read and understand. Recently I wondered, however, how the same effect could be achieved without using these keywords. It turns out to be quite simple, since\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Implementing Async And Await With Generators\">\n    \n        <meta property=\"og:description\" content=\"Nowadays we can write our asynchronous code in a synchronous way thanks to the  async and await keywords. This makes it easier to read and understand. Recently I wondered, however, how the same effect could be achieved without using these keywords. It turns out to be quite simple, since\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/how-to-implement-async-and-await-with-generators-11ab0859010f/\">\n    <meta property=\"og:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*9wHrewC1Dyf2Au_qEqwWcg.jpeg\">\n    <meta property=\"article:published_time\" content=\"2018-08-06T10:54:21.000Z\">\n    <meta property=\"article:modified_time\" content=\"2019-07-31T22:26:06.000Z\">\n    \n        <meta property=\"article:tag\" content=\"javascript\">\n    \n        <meta property=\"article:tag\" content=\"Tech\">\n    \n        <meta property=\"article:tag\" content=\"Programming\">\n    \n        <meta property=\"article:tag\" content=\"Technology\">\n    \n        <meta property=\"article:tag\" content=\"Tutorial\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Implementing Async And Await With Generators\">\n    \n        <meta name=\"twitter:description\" content=\"Nowadays we can write our asynchronous code in a synchronous way thanks to the  async and await keywords. This makes it easier to read and understand. Recently I wondered, however, how the same effect could be achieved without using these keywords. It turns out to be quite simple, since\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/how-to-implement-async-and-await-with-generators-11ab0859010f/\">\n    <meta name=\"twitter:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*9wHrewC1Dyf2Au_qEqwWcg.jpeg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Maciej Cieślar\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"javascript, Tech, Programming, Technology, Tutorial\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n\n    <meta property=\"og:image:width\" content=\"800\">\n    <meta property=\"og:image:height\" content=\"533\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://cdn-media-1.freecodecamp.org/images/1*9wHrewC1Dyf2Au_qEqwWcg.jpeg\",\n\t\t\"width\": 800,\n\t\t\"height\": 533\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-implement-async-and-await-with-generators-11ab0859010f/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2018-08-06T10:54:21.000Z\",\n\t\"dateModified\": \"2019-07-31T22:26:06.000Z\",\n\t\"keywords\": \"javascript, Tech, Programming, Technology, Tutorial\",\n\t\"description\": \"Nowadays we can write our asynchronous code in a synchronous way thanks to the \\nasync and await keywords. This makes it easier to read and understand. Recently\\nI wondered, however, how the same effect could be achieved without using these\\nkeywords.\\n\\nIt turns out to be quite simple, since the behavior of async and await can\\neasily be emulated using generators. Let’s have a look!\\n\\nGo ahead, clone the repository [https://github.com/maciejcieslar/asynq] and\\nlet’s get started.\\n\\nGenerators\\nI am going \",\n\t\"headline\": \"Implementing Async And Await With Generators\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Maciej Cieślar\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/maciejcieslar/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://www.mcieslar.com\"\n\t\t]\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Mon Aug 06 2018 10:54:21 GMT+0000 (Coordinated Universal Time)\">\n                            August 6, 2018\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/javascript/\">\n                                #javascript\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Implementing Async And Await With Generators</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://cdn-media-1.freecodecamp.org/images/1*9wHrewC1Dyf2Au_qEqwWcg.jpeg\">\n      <img onerror=\"this.style.display='none'\" src=\"https://cdn-media-1.freecodecamp.org/images/1*9wHrewC1Dyf2Au_qEqwWcg.jpeg\" alt=\"Implementing Async And Await With Generators\" ,=\"\" width=\"800\" height=\"533\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>Nowadays we can write our asynchronous code in a synchronous way thanks to the <strong>async</strong> and <strong>await</strong> keywords. This makes it easier to read and understand. Recently I wondered, however, how the same effect could be achieved without using these keywords.</p><p>It turns out to be quite simple, since the behavior of <strong>async</strong> and <strong>await</strong> can easily be emulated using generators. Let’s have a look!</p><p>Go ahead, clone the <a href=\"https://github.com/maciejcieslar/asynq\" rel=\"noopener\">repository</a> and let’s get started.</p><h3 id=\"generators\">Generators</h3><p>I am going to assume you have little to no experience with generators since, honestly, most of the time they aren’t particularly useful and you can easily manage without them. So don’t worry — we’ll start with a quick reminder.</p><p>Generators are objects created by <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*\" rel=\"noopener\">generator functions</a> — functions with an <em>*</em> (asterisk) next to their name.</p><p>These generators have an amazing ability that lets us stop the execution of code — whenever we want — by using the keyword <strong>yield</strong>.</p><p>Consider this example:</p><pre><code class=\"language-javascript\">const generator = (function*() {\n  // waiting for .next()\n  const a = yield 5;\n  // waiting for .next()\n  console.log(a); // =&gt; 15\n})();\n\nconsole.log(generator.next()); // =&gt; { done: false, value: 5 }\nconsole.log(generator.next(15)); // =&gt; { done: true, value: undefined }</code></pre><p>Given that these are absolute basics, I would recommend that, before you scroll any further, you read <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators\" rel=\"noopener\">this article</a> to get a grasp on what is really going on here.</p><p>If you feel like you have a strong understanding of the underlying ideas, we can move on.</p><h3 id=\"hold-on-await-a-minute\">Hold on, await a minute</h3><p>Haven’t you ever wondered how <strong>await</strong> really works?</p><p>Somehow it just waits for our promise to return a value and proceed with the execution. For me, that seems like something a generator would be able to do after a little tweaking.</p><p>What we could do is just take every yielded value, put it into a promise, and then wait for the promise to be resolved. Afterwards, we just return it to the generator by calling <em>generator.next(resolvedValue).</em></p><p>Sounds like a plan. But first, let’s write some tests just to be sure that everything is working as expected.</p><p>What our <strong>asynq</strong> function should do:</p><ul><li>wait for asynchronous code before continuing the execution</li><li>return a <strong>promise</strong> with the returned value from the function</li><li>make <strong>try/catch</strong> work on asynchronous code</li></ul><p>Note: because we are using generators, our <strong>await</strong> becomes <strong>yield</strong>.</p><pre><code class=\"language-typescript\">import { asynq } from '../src';\n\ndescribe('asynq core', () =&gt; {\n  test('Waits for values (like await does)', () =&gt; {\n    return asynq(function*() {\n      const a = yield Promise.resolve('a');\n      expect(a).toBe('a');\n    });\n  });\n\n  test('Catches the errors', () =&gt; {\n    return asynq(function*() {\n      const err = new Error('Hello there');\n\n      try {\n        const a = yield Promise.resolve('a');\n        expect(a).toBe('a');\n\n        const b = yield Promise.resolve('b');\n        expect(b).toBe('b');\n\n        const c = yield Promise.reject(err);\n      } catch (error) {\n        expect(error).toBe(err);\n      }\n\n      const a = yield Promise.resolve(123);\n      expect(a).toBe(123);\n    });\n  });\n\n  test('Ends the function if the error is not captured', () =&gt; {\n    const err = new Error('General Kenobi!');\n\n    return asynq(function*() {\n      const a = yield Promise.reject(err);\n      const b = yield Promise.resolve('b');\n    }).catch((error) =&gt; {\n      expect(error).toBe(err);\n    });\n  });\n\n  test('Returns a promise with the returned value', () =&gt; {\n    return asynq(function*() {\n      const value = yield Promise.resolve(5);\n      expect(value).toBe(5);\n\n      return value;\n    }).then((value) =&gt; {\n      expect(value).toBe(5);\n    });\n  });\n});</code></pre><p>Alright, great! Now we can talk about the implementation.</p><p>Our <strong>asynq</strong> function takes as a parameter a function generator — by calling it, we create a generator.</p><p>Just to be sure, we call <a href=\"https://github.com/maciejcieslar/asynq/blob/master/src/utils.ts\" rel=\"noopener\"><em>isGeneratorLike</em></a> which checks if the received value is an object and has methods <strong>next</strong> and <strong>throw</strong>.</p><p>Then, recursively, we consume each <strong>yield</strong><em> </em>keyword by calling <em>generator.next(ensuredValue).</em> We wait for the returned promise to be settled, and then return its result back to the generator by repeating the whole process.</p><p>We must also attach the<em> </em><strong>catch</strong> handler, so that, should the function throw an exception, we can catch it and return the exception inside the function by calling <em>generator.throw(error)</em>.</p><p>Now, any potential errors will be handled by <strong>catch</strong>. If there wasn’t a <strong>try/catch</strong> block in place, an error<strong> </strong>would simply stop the execution altogether — like any unhandled exception would — and our function would return a rejected promise.</p><p>When the generator is done, we return the generator’s return value in a promise.</p><pre><code class=\"language-typescript\">import { isGeneratorLike } from './utils';\n\ntype GeneratorFactory = () =&gt; IterableIterator&lt;any&gt;;\n\nfunction asynq(generatorFactory: GeneratorFactory): Promise&lt;any&gt; {\n  const generator = generatorFactory();\n\n  if (!isGeneratorLike(generator)) {\n    return Promise.reject(\n      new Error('Provided function must return a generator.'),\n    );\n  }\n\n  return (function resolve(result) {\n    if (result.done) {\n      return Promise.resolve(result.value);\n    }\n\n    return Promise.resolve(result.value)\n      .then((ensuredValue) =&gt; resolve(generator.next(ensuredValue)))\n      .catch((error) =&gt; resolve(generator.throw(error)));\n  })(generator.next());\n}</code></pre><p>Now, having run our tests, we can see that everything is working as expected.</p><h3 id=\"wrapping-up\">Wrapping up</h3><p>While this implementation is probably not the one used inside the JavaScript engines, it sure feels good to be able to do something like this on our own.</p><p>Feel free to go over the code again. The better your understanding of the underlying ideas, the more you will be able to appreciate the brilliance of the creators of the <strong>async</strong> and <strong>await</strong> keywords.</p><p>Thank you very much for reading! I hope you found this article informative. I also hope it helped you see there is no magic involved in the <strong>async</strong> and <strong>await</strong> keywords, and that they can be easily replaced with generators.</p><p>If you have any questions or comments, feel free to put them in the comments section below or send me a <a href=\"https://www.mcieslar.com/contact\" rel=\"noopener\">message</a>.</p><p>Check out my <a href=\"https://www.maciejcieslar.com/about/\" rel=\"noopener\">social media</a>!</p><p><a href=\"http://eepurl.com/dAKhxb\" rel=\"noopener\">Join my newsletter</a>!</p><p><em>Originally published at <a href=\"https://www.mcieslar.com/implementing-async-and-await-with-generators\" rel=\"noopener\">www.mcieslar.com</a> on August 6, 2018.</em></p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"default-bio\">\n                        Read <a href=\"/news/author/maciejcieslar/\">more posts</a>.\n                    </p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If this article was helpful, <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">share it</button>.\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Implementing%20Async%20And%20Await%20With%20Generators\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"\",r=Boolean(\"\");let a;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Maciej Cieślar\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(a=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const c=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",c)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac95b6c99ecce19\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"},"https://www.freecodecamp.org//news/how-to-implement-promises-in-javascript-1ce2680a7f51/":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        \n        \n            <title>Implementing Promises In JavaScript</title>\n        \n        <meta name=\"HandheldFriendly\" content=\"True\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\">\n        \n            <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap\">\n        \n\n        \n        \n    <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/themes/prism.min.css\">\n</noscript>\n<link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n<noscript>\n  <link rel=\"stylesheet\" href=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css\">\n</noscript>\n\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/components/prism-core.min.js\"></script>\n<script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\"></script>\n\n\n\n        \n        <link rel=\"preload\" as=\"style\" onload=\"this.onload=null;this.rel='stylesheet'\" href=\"/news/assets/css/global-26e2f3cde9.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/screen-926fddfac2.css\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/news/assets/css/search-bar-124f5f949c.css\">\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/algoliasearch-3-33-0/algoliasearch.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/algolia/autocomplete-0-36-0/autocomplete.min.js\"></script>\n\n        \n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/dayjs.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/localizedFormat.min.js\"></script>\n        <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/relativeTime.min.js\"></script>\n\n        \n        \n            <script defer=\"\" src=\"https://cdn.freecodecamp.org/news-assets/dayjs/1.10.4/locale/en.min.js\"></script>\n        \n\n        \n        <script>let client,index;document.addEventListener(\"DOMContentLoaded\",(()=>{client=algoliasearch(\"QMJYL5WYTI\",\"89770b24481654192d7a5c402c6ad9a0\"),index=client.initIndex(\"news\")})),document.addEventListener(\"DOMContentLoaded\",(()=>{const e=window.screen.width,t=window.screen.height,n=e>=767&&t>=768?8:5,o=document.getElementById(\"search-form\"),s=document.getElementById(\"search-input\"),a=document.getElementById(\"dropdown-container\");let i,d,c;s.addEventListener(\"input\",(e=>{i=e.target.value})),o.addEventListener(\"submit\",(e=>{e.preventDefault(),function(){if(d=document.getElementsByClassName(\"aa-cursor\")[0],d&&i){const e=d.querySelector(\"a\").href;window.location.assign(e)}else!d&&i&&c&&window.location.assign(`https://www.freecodecamp.org/news/search?query=${i}`)}()}));const l=autocomplete(\"#search-input\",{hint:!1,keyboardShortcuts:[\"s\",191],openOnFocus:!0,appendTo:a,debug:!0},[{source:autocomplete.sources.hits(index,{hitsPerPage:n}),debounce:250,templates:{suggestion:e=>(c=!0,`\\n            <a href=\"${e.url}\">\\n              <div class=\"algolia-result\">\\n                <span>${e._highlightResult.title.value}</span>\\n              </div>\\n            </a>\\n          `),empty:()=>(c=!1,'\\n            <div class=\"aa-suggestion footer-suggestion no-hits-footer\">\\n              <div class=\"algolia-result\">\\n                <span>\\n                  No tutorials found\\n                </span>\\n              </div>\\n            </div>\\n          '),footer:e=>{if(!e.isEmpty)return`\\n              <div class=\"aa-suggestion footer-suggestion\">\\n                <a id=\"algolia-footer-selector\" href=\"https://www.freecodecamp.org/news/search?query=${i}\">\\n                  <div class=\"algolia-result algolia-footer\">\\n                    See all results for ${i}\\n                  </div>\\n                </a>\\n              </div>\\n            `}}}]).on(\"autocomplete:selected\",((e,t,n,o)=>{d=t?t.url:`https://www.freecodecamp.org/news/search?query=${i}`,\"click\"!==o.selectionMethod&&\"tabKey\"!==o.selectionMethod&&c&&window.location.assign(d)}));document.addEventListener(\"click\",(e=>{e.target!==s&&l.autocomplete.close()}))})),document.addEventListener(\"DOMContentLoaded\",(()=>{dayjs.extend(dayjs_plugin_localizedFormat),dayjs.extend(dayjs_plugin_relativeTime),dayjs.locale(\"en\")}));const isAuthenticated=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"jwt_access_token=\"))),isDonor=document.cookie.split(\";\").some((e=>e.trim().startsWith(\"isDonor=true\")));</script>\n\n        \n        \n    \n        \n            <script data-ad-client=\"ca-pub-9482786369113753\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\" crossorigin=\"anonymous\" async=\"\"></script>\n        \n    \n\n\n        \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n        \n    \n\n\n        \n        \n        \n\n        \n        \n\n        <link rel=\"icon\" href=\"https://cdn.freecodecamp.org/universal/favicons/favicon.ico\" type=\"image/png\">\n        \n        \n            <link rel=\"canonical\" href=\"https://www.freecodecamp.org/news/how-to-implement-promises-in-javascript-1ce2680a7f51/\">\n        \n        <meta name=\"referrer\" content=\"no-referrer-when-downgrade\">\n\n        \n\n        \n    <meta name=\"description\" content=\"The thing I love most about programming is the aha! moment when you start to fully understand a concept. Even though it might take a long time and no small amount of effort to get there, it sure is worth it. I think that the most effective way to assess\">\n\n    \n    <meta property=\"og:site_name\" content=\"freeCodeCamp.org\">\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:title\" content=\"Implementing Promises In JavaScript\">\n    \n        <meta property=\"og:description\" content=\"The thing I love most about programming is the aha! moment when you start to fully understand a concept. Even though it might take a long time and no small amount of effort to get there, it sure is worth it. I think that the most effective way to assess\">\n    \n    <meta property=\"og:url\" content=\"https://www.freecodecamp.org/news/how-to-implement-promises-in-javascript-1ce2680a7f51/\">\n    <meta property=\"og:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*tZ9F-CYdCHLmK9Xsvg0FgA.jpeg\">\n    <meta property=\"article:published_time\" content=\"2018-08-04T19:10:41.000Z\">\n    <meta property=\"article:modified_time\" content=\"2019-07-31T23:05:55.000Z\">\n    \n        <meta property=\"article:tag\" content=\"javascript\">\n    \n        <meta property=\"article:tag\" content=\"Promises\">\n    \n        <meta property=\"article:tag\" content=\"Tech\">\n    \n        <meta property=\"article:tag\" content=\"Programming\">\n    \n        <meta property=\"article:tag\" content=\"Coding\">\n    \n    <meta property=\"article:publisher\" content=\"https://www.facebook.com/freecodecamp\">\n    \n\n    \n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:title\" content=\"Implementing Promises In JavaScript\">\n    \n        <meta name=\"twitter:description\" content=\"The thing I love most about programming is the aha! moment when you start to fully understand a concept. Even though it might take a long time and no small amount of effort to get there, it sure is worth it. I think that the most effective way to assess\">\n    \n    <meta name=\"twitter:url\" content=\"https://www.freecodecamp.org/news/how-to-implement-promises-in-javascript-1ce2680a7f51/\">\n    <meta name=\"twitter:image\" content=\"https://cdn-media-1.freecodecamp.org/images/1*tZ9F-CYdCHLmK9Xsvg0FgA.jpeg\">\n    <meta name=\"twitter:label1\" content=\"Written by\">\n    <meta name=\"twitter:data1\" content=\"Maciej Cieślar\">\n    <meta name=\"twitter:label2\" content=\"Filed under\">\n    <meta name=\"twitter:data2\" content=\"javascript, Promises, Tech, Programming, Coding\">\n    <meta name=\"twitter:site\" content=\"@freecodecamp\">\n    \n\n    <meta property=\"og:image:width\" content=\"800\">\n    <meta property=\"og:image:height\" content=\"533\">\n\n\n        \n    <script type=\"application/ld+json\">{\n\t\"@context\": \"https://schema.org\",\n\t\"@type\": \"Article\",\n\t\"publisher\": {\n\t\t\"@type\": \"Organization\",\n\t\t\"name\": \"freeCodeCamp.org\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/\",\n\t\t\"logo\": {\n\t\t\t\"@type\": \"ImageObject\",\n\t\t\t\"url\": \"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\",\n\t\t\t\"width\": 2100,\n\t\t\t\"height\": 240\n\t\t}\n\t},\n\t\"image\": {\n\t\t\"@type\": \"ImageObject\",\n\t\t\"url\": \"https://cdn-media-1.freecodecamp.org/images/1*tZ9F-CYdCHLmK9Xsvg0FgA.jpeg\",\n\t\t\"width\": 800,\n\t\t\"height\": 533\n\t},\n\t\"url\": \"https://www.freecodecamp.org/news/how-to-implement-promises-in-javascript-1ce2680a7f51/\",\n\t\"mainEntityOfPage\": {\n\t\t\"@type\": \"WebPage\",\n\t\t\"@id\": \"https://www.freecodecamp.org/news/\"\n\t},\n\t\"datePublished\": \"2018-08-04T19:10:41.000Z\",\n\t\"dateModified\": \"2019-07-31T23:05:55.000Z\",\n\t\"keywords\": \"javascript, Promises, Tech, Programming, Coding\",\n\t\"description\": \"The thing I love most about programming is the aha! moment when you start to\\nfully understand a concept. Even though it might take a long time and no small\\namount of effort to get there, it sure is worth it.\\n\\nI think that the most effective way to assess (and help improve) our degree of\\ncomprehension of a given subject is to try and apply the knowledge to the real\\nworld. Not only does this let us identify and ultimately address our weaknesses,\\nbut it can also shed some light on the way things wo\",\n\t\"headline\": \"Implementing Promises In JavaScript\",\n\t\"author\": {\n\t\t\"@type\": \"Person\",\n\t\t\"name\": \"Maciej Cieślar\",\n\t\t\"url\": \"https://www.freecodecamp.org/news/author/maciejcieslar/\",\n\t\t\"sameAs\": [\n\t\t\t\"https://www.mcieslar.com\"\n\t\t]\n\t}\n}</script>\n\n\n        <meta name=\"generator\" content=\"Eleventy\">\n        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"freeCodeCamp.org\" href=\"https://www.freecodecamp.org/news/rss/\">\n\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n\n<!-- dataLayer setup -->\n<script>\nwindow.dataLayer = window.dataLayer || [];\n</script>\n<!-- End dataLayer setup -->\n\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-5D6RKKP');</script>\n<!-- End Google Tag Manager -->\n\n\n<meta name=\"google-site-verification\" content=\"b4tITLzEeeZGEpvD4mGNf3khKM4fvqejQaz9SYBQP8E\">\n\n        \n        \n\n        \n  <meta name=\"x-fcc-source\" data-test-label=\"x-fcc-source\" content=\"Ghost\">\n\n    </head>\n\n    \n        <body class=\"home-template\">\n    \n        <div class=\"site-wrapper\">\n            <nav class=\"site-nav nav-padding\">\n    <div class=\"site-nav-left\">\n        \n<form id=\"search-form\" data-test-label=\"search-bar\">\n    <div role=\"search\" class=\"searchbox__wrapper\">\n        <label class=\"fcc_sr_only\" for=\"search-input\">\n            Search\n        </label>\n        <input type=\"search\" placeholder=\"\n    Search 11,200+ tutorials\n\" id=\"search-input\">\n        <button type=\"submit\" class=\"ais-SearchBox-submit\">\n            <svg class=\"ais-SearchBox-submitIcon\" xmlns=\"https://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 40 40\">\n    <path d=\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"></path>\n</svg>\n\n            <span class=\"fcc_sr_only\">Submit your search query</span>\n        </button>\n        <div id=\"dropdown-container\"></div>\n    </div>\n</form>\n\n    </div>\n    <div class=\"site-nav-middle\">\n        <a class=\"site-nav-logo\" href=\"https://www.freecodecamp.org/news/\" data-test-label=\"site-nav-logo\"><img src=\"https://cdn.freecodecamp.org/platform/universal/fcc_primary.svg\" alt=\"freeCodeCamp.org\"></a>\n    </div>\n    <div class=\"site-nav-right\">\n        <div class=\"nav-group\">\n            <a class=\"nav-forum\" id=\"nav-forum\" rel=\"noopener noreferrer\" href=\"https://forum.freecodecamp.org/\" target=\"_blank\" data-test-label=\"forum-button\">Forum</a>\n            <a class=\"toggle-button-nav\" id=\"nav-donate\" rel=\"noopener noreferrer\" href=\"https://www.freecodecamp.org/donate/\" target=\"_blank\" data-test-label=\"donate-button\">Donate</a>\n        </div>\n    </div>\n</nav>\n\n\n            \n            <a class=\"banner\" id=\"banner\" data-test-label=\"banner\" rel=\"noopener noreferrer\" target=\"_blank\">\n    <p id=\"banner-text\"></p>\n</a>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const e=document.getElementById(\"banner\"),t=document.getElementById(\"banner-text\");isAuthenticated?(t.innerHTML=\"Support our charity and our mission. <span>Donate to freeCodeCamp.org</span>.\",e.href=\"https://www.freecodecamp.org/donate\",e.setAttribute(\"text-variation\",\"authenticated\")):isDonor?(t.innerHTML=\"Thank you for supporting freeCodeCamp through <span>your donations</span>.\",e.href=\"https://www.freecodecamp.org/news/how-to-donate-to-free-code-camp/\",e.setAttribute(\"text-variation\",\"donor\")):(t.innerHTML=\"Learn to code — <span>free 3,000-hour curriculum</span>\",e.href=\"https://www.freecodecamp.org/\",e.setAttribute(\"text-variation\",\"default\"))}));</script>\n\n\n            <div id=\"error-message\"></div>\n\n            \n    <main id=\"site-main\" class=\"post-template site-main outer\">\n        <div class=\"inner ad-layout\">\n            <article class=\"post-full post\">\n                <header class=\"post-full-header\">\n                    <section class=\"post-full-meta\">\n                        <time class=\"post-full-meta-date\" data-test-label=\"post-full-meta-date\" datetime=\"Sat Aug 04 2018 19:10:41 GMT+0000 (Coordinated Universal Time)\">\n                            August 4, 2018\n                        </time>\n                        \n                            <span class=\"date-divider\">/</span>\n                            <a dir=\"ltr\" href=\"/news/tag/javascript/\">\n                                #javascript\n                            </a>\n                        \n                    </section>\n                    <h1 class=\"post-full-title\" data-test-label=\"post-full-title\">Implementing Promises In JavaScript</h1>\n                </header>\n                <div class=\"post-full-author-header\" data-test-label=\"author-header-no-bio\">\n                    \n                        \n                            \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content author-card-content-no-bio\">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n        </section>\n    </section>\n\n                        \n                    \n                </div>\n                <figure class=\"post-full-image\">\n                    \n    <picture>\n      <source media=\"(max-width: 700px)\" sizes=\"1px\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 1w\">\n      <source media=\"(min-width: 701px)\" sizes=\"(max-width: 800px) 400px, (max-width: 1170px) 700px, 1400px\" srcset=\"https://cdn-media-1.freecodecamp.org/images/1*tZ9F-CYdCHLmK9Xsvg0FgA.jpeg\">\n      <img onerror=\"this.style.display='none'\" src=\"https://cdn-media-1.freecodecamp.org/images/1*tZ9F-CYdCHLmK9Xsvg0FgA.jpeg\" alt=\"Implementing Promises In JavaScript\" ,=\"\" width=\"800\" height=\"533\" data-test-label=\"feature-image\">\n    </picture>\n  \n                </figure>\n                <section class=\"post-full-content\">\n                    <div class=\"post-and-sidebar\">\n                        <section class=\"post-content \" data-test-label=\"post-content\">\n                            \n<p>The thing I love most about programming is the <em>aha!</em> moment when you start to fully understand a concept. Even though it might take a long time and no small amount of effort to get there, it sure is worth it.</p><p>I think that the most effective way to assess (and help improve) our degree of comprehension of a given subject is to try and apply the knowledge to the real world. Not only does this let us identify and ultimately address our weaknesses, but it can also shed some light on the way things work. A simple <em>trial and</em> <em>error </em>approach often reveals those details that had remained elusive previously.</p><p>With that in mind, I believe that learning how to implement <strong>promises</strong> was one of the most important moments in my programming journey — it has given me invaluable insight into how asynchronous code works and has made me a better programmer overall.</p><p>I hope that this article will help you come to grips with implementing promises in JavaScript as well.</p><p>We shall focus on how to implement the promise core according to <a href=\"https://promisesaplus.com/\" rel=\"noopener\">the Promises/A+ specification</a> with a few methods of <a href=\"http://bluebirdjs.com/docs/api-reference.html\" rel=\"noopener\">the Bluebird API</a>. We are also going to be using <a href=\"https://en.wikipedia.org/wiki/Test-driven_development\" rel=\"noopener\">the TDD approach</a> with <a href=\"https://jestjs.io/\" rel=\"noopener\">Jest</a>.</p><p><a href=\"https://www.typescriptlang.org/\" rel=\"noopener\">TypeScript</a> is going to come in handy, too.</p><p>Given that we are going to be working on the skills of implementation here, I am going to assume you have some basic understanding of what promises are and and a vague sense of how they work. If you don’t, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises\" rel=\"noopener\">here</a> is a great place to start.</p><p>Now that we have that out of the way, go ahead and clone the <a href=\"https://github.com/maciejcieslar/promiseq\" rel=\"noopener\">repository</a> and let’s get started.</p><h3 id=\"the-core-of-a-promise\">The core of a promise</h3><p>As you know, a promise is an object with the following properties:</p><h4 id=\"then\">Then</h4><p>A method that attaches a handler to our promise. It returns a new promise with the value from the previous one mapped by one of the handler’s methods.</p><h4 id=\"handlers\">Handlers</h4><p>An array of handlers attached by <strong>then</strong>. A handler is an object containing two methods <strong>onSuccess</strong> and <strong>onFail</strong>, both of which are passed as arguments to <strong>then</strong>(<strong>onSuccess</strong>, <strong>onFail</strong>)<em>.</em></p><pre><code class=\"language-typescript\">type HandlerOnSuccess&lt;T, U = any&gt; = (value: T) =&gt; U | Thenable&lt;U&gt;;\ntype HandlerOnFail&lt;U = any&gt; = (reason: any) =&gt; U | Thenable&lt;U&gt;;\n\ninterface Handler&lt;T, U&gt; {\n  onSuccess: HandlerOnSuccess&lt;T, U&gt;;\n  onFail: HandlerOnFail&lt;U&gt;;\n}</code></pre><h4 id=\"state\">State</h4><p>A promise can be in one of three states: <strong>resolved,</strong><em> </em><strong>rejected,</strong><em> </em>or<em> </em><strong>pending</strong>.</p><p><strong>Resolved</strong> means that either everything went smoothly and we received our value, or we caught and handled the error.</p><p><strong>Rejected</strong> means that either we rejected the promise, or an error was thrown and we didn’t catch it.</p><p><strong>Pending</strong> means that neither the <strong>resolve</strong> nor the <strong>reject</strong> method has been called yet and we are still waiting for the value.</p><p>The term “the promise is settled” means that the promise is either resolved or rejected.</p><h4 id=\"value\">Value</h4><p>A value that we have either resolved or rejected.</p><p>Once the value is set, there is no way of changing it.</p><h3 id=\"testing\">Testing</h3><p>According to the TDD approach, we want to write our tests before the actual code comes along, so let’s do just that.</p><p>Here are the tests for our core:</p><pre><code class=\"language-typescript\">describe('PQ &lt;constructor&gt;', () =&gt; {\n  test('resolves like a promise', () =&gt; {\n    return new PQ&lt;number&gt;((resolve) =&gt; {\n      setTimeout(() =&gt; {\n        resolve(1);\n      }, 30);\n    }).then((val) =&gt; {\n      expect(val).toBe(1);\n    });\n  });\n\n  test('is always asynchronous', () =&gt; {\n    const p = new PQ((resolve) =&gt; resolve(5));\n\n    expect((p as any).value).not.toBe(5);\n  });\n\n  test('resolves with the expected value', () =&gt; {\n    return new PQ&lt;number&gt;((resolve) =&gt; resolve(30)).then((val) =&gt; {\n      expect(val).toBe(30);\n    });\n  });\n\n  test('resolves a thenable before calling then', () =&gt; {\n    return new PQ&lt;number&gt;((resolve) =&gt;\n      resolve(new PQ((resolve) =&gt; resolve(30))),\n    ).then((val) =&gt; expect(val).toBe(30));\n  });\n\n  test('catches errors (reject)', () =&gt; {\n    const error = new Error('Hello there');\n\n    return new PQ((resolve, reject) =&gt; {\n      return reject(error);\n    }).catch((err: Error) =&gt; {\n      expect(err).toBe(error);\n    });\n  });\n\n  test('catches errors (throw)', () =&gt; {\n    const error = new Error('General Kenobi!');\n\n    return new PQ(() =&gt; {\n      throw error;\n    }).catch((err) =&gt; {\n      expect(err).toBe(error);\n    });\n  });\n\n  test('is not mutable - then returns a new promise', () =&gt; {\n    const start = new PQ&lt;number&gt;((resolve) =&gt; resolve(20));\n\n    return PQ.all([\n      start\n        .then((val) =&gt; {\n          expect(val).toBe(20);\n          return 30;\n        })\n        .then((val) =&gt; expect(val).toBe(30)),\n      start.then((val) =&gt; expect(val).toBe(20)),\n    ]);\n  });\n});</code></pre><h4 id=\"running-our-tests\">Running our tests</h4><p>I highly recommend using the <a href=\"https://marketplace.visualstudio.com/items?itemName=Orta.vscode-jest\" rel=\"noopener\">Jest extension for Visual Studio Code</a>. It runs our tests in the background for us and shows us the result right there between the lines of our code as green and red dots for passed and failed tests, respectively.</p><p>To see the results, open the “Output” console and choose the “Jest” tab.</p><figure class=\"kg-card kg-image-card\"><img src=\"https://cdn-media-1.freecodecamp.org/images/0*dr7riPl5ZRkUF8lo\" class=\"kg-image\" alt=\"0*dr7riPl5ZRkUF8lo\" width=\"800\" height=\"155\" loading=\"lazy\"></figure><p>We can also run our tests by executing the following command:</p><pre><code class=\"language-bash\">npm run test</code></pre><p>Regardless of how we run the tests, we can see that all of them come back negative.</p><p>Let’s change that.</p><h3 id=\"implementing-the-promise-core\">Implementing the Promise core</h3><h4 id=\"constructor-function Array() { [native code] }1\">constructor</h4><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n  private state: States = States.PENDING;\n  private handlers: Handler&lt;T, any&gt;[] = [];\n  private value: T | any;\n  public static errors = errors;\n\n  public constructor(callback: (resolve: Resolve&lt;T&gt;, reject: Reject) =&gt; void) {\n    try {\n      callback(this.resolve, this.reject);\n    } catch (e) {\n      this.reject(e);\n    }\n  }\n}</code></pre><p>Our constructor takes a <strong>callback</strong> as a parameter.</p><p>We call this callback with <strong>this.resolve</strong> and <strong>this.reject</strong> as arguments.</p><p>Note that normally we would have bound <strong>this.resolve</strong> and <strong>this.reject</strong> to <strong>this</strong>, but here we have used the class arrow method instead.</p><h4 id=\"setresult\">setResult</h4><p>Now we have to set the result. Please remember that we must handle the result correctly, which means that, should it return a promise, we must resolve it first.</p><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  private setResult = (value: T | any, state: States) =&gt; {\n    const set = () =&gt; {\n      if (this.state !== States.PENDING) {\n        return null;\n      }\n\n      if (isThenable(value)) {\n        return (value as Thenable&lt;T&gt;).then(this.resolve, this.reject);\n      }\n\n      this.value = value;\n      this.state = state;\n\n      return this.executeHandlers();\n    };\n\n    setTimeout(set, 0);\n  };\n}</code></pre><p>First, we check if the state is not <strong>pending</strong> — if it is, then the promise is already settled and we can’t assign any new value to it.</p><p>Then we need to check if a value is a <strong>thenable</strong>. To put it simply, a <strong>thenable</strong> is an object with <strong>then</strong> as a method.</p><p>By convention, a <strong>thenable</strong> should behave like a promise. So in order to get the result, we will call <strong>then</strong> and pass as arguments <strong>this.resolve</strong> and <strong>this.reject</strong>.</p><p>Once the <strong>thenable</strong> settles, it will call one of our methods and give us the expected non-promise value.</p><p>So now we have to check if an object is a <strong>thenable</strong>.</p><pre><code class=\"language-typescript\">describe('isThenable', () =&gt; {\n  test('detects objects with a then method', () =&gt; {\n    expect(isThenable({ then: () =&gt; null })).toBe(true);\n    expect(isThenable(null)).toBe(false);\n    expect(isThenable({})).toBe(false);\n  });\n});</code></pre><pre><code class=\"language-typescript\">const isFunction = (func: any) =&gt; typeof func === 'function';\n\nconst isObject = (supposedObject: any) =&gt;\n  typeof supposedObject === 'object' &amp;&amp;\n  supposedObject !== null &amp;&amp;\n  !Array.isArray(supposedObject);\n\nconst isThenable = (obj: any) =&gt; isObject(obj) &amp;&amp; isFunction(obj.then);</code></pre><p>It is important to realize that our promise will never be synchronous, even if the code inside the <strong>callback</strong> is.</p><p>We are going to delay the execution until the next iteration of the event loop by using <strong>setTimeout</strong>.</p><p>Now the only thing left to do is to set our value and status and then execute the registered handlers.</p><h4 id=\"executehandlers\">executeHandlers</h4><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  private executeHandlers = () =&gt; {\n    if (this.state === States.PENDING) {\n      return null;\n    }\n\n    this.handlers.forEach((handler) =&gt; {\n      if (this.state === States.REJECTED) {\n        return handler.onFail(this.value);\n      }\n\n      return handler.onSuccess(this.value);\n    });\n\n    this.handlers = [];\n  };\n}</code></pre><p>Again, make sure the state is not <strong>pending</strong>.</p><p>The state of the promise dictates which function we are going to use.</p><p>If it’s <strong>resolved</strong>, we should execute <strong>onSuccess</strong>, otherwise — <strong>onFail</strong>.</p><p>Let’s now clear our array of handlers just to be safe and not to execute anything accidentally in the future. A handler can be attached and executed later anyways.</p><p>And that’s what we must discuss next: a way to attach our handler.</p><h4 id=\"attachhandler\">attachHandler</h4><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  private attachHandler = (handler: Handler&lt;T, any&gt;) =&gt; {\n    this.handlers = [...this.handlers, handler];\n\n    this.executeHandlers();\n  };\n}</code></pre><p>It really is as simple as it seems. We just add a handler to our handlers array and execute it. That’s it.</p><p>Now, to put it all together we need to implement the <strong>then</strong> method.</p><h4 id=\"then-1\">then</h4><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public then&lt;U&gt;(\n    onSuccess?: HandlerOnSuccess&lt;T, U&gt;,\n    onFail?: HandlerOnFail&lt;U&gt;,\n  ) {\n    return new PQ&lt;U | T&gt;((resolve, reject) =&gt; {\n      return this.attachHandler({\n        onSuccess: (result) =&gt; {\n          if (!onSuccess) {\n            return resolve(result);\n          }\n\n          try {\n            return resolve(onSuccess(result));\n          } catch (e) {\n            return reject(e);\n          }\n        },\n        onFail: (reason) =&gt; {\n          if (!onFail) {\n            return reject(reason);\n          }\n\n          try {\n            return resolve(onFail(reason));\n          } catch (e) {\n            return reject(e);\n          }\n        },\n      });\n    });\n  }\n}</code></pre><p>In <strong>then,</strong> we return a promise, and in the <strong>callback</strong> we attach a handler that is then used to wait for the current promise to be settled.</p><p>When that happens, either handler’s <strong>onSuccess</strong> or <strong>onFail</strong> will be executed and we will proceed accordingly.</p><p>One thing to remember here is that neither of the handlers passed to <strong>then</strong> is required. It is important, however, that we don’t try to execute something that might be <strong>undefined</strong>.</p><p>Also, in <strong>onFail</strong> when the handler is passed, we actually resolve the returned promise, because the error has been handled.</p><h4 id=\"catch\">catch</h4><p><strong>Catch</strong> is actually just an abstraction over the <strong>then</strong> method.</p><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public catch&lt;U&gt;(onFail: HandlerOnFail&lt;U&gt;) {\n    return this.then&lt;U&gt;(identity, onFail);\n  }\n}</code></pre><p>That’s it.</p><h4 id=\"finally\"><strong><em>Finally</em></strong></h4><p><strong>Finally</strong> is also just an abstraction over doing <strong>then</strong>(<strong>finallyCb</strong>, <strong>finallyCb</strong>), because it doesn’t really care about the result of the promise.</p><p>Actually, it also preserves the result of the previous promise and returns it. So whatever is being returned by the <strong>finallyCb</strong> doesn’t really matter.</p><pre><code class=\"language-typescript\">describe('PQ.prototype.finally', () =&gt; {\n  test('it is called regardless of the promise state', () =&gt; {\n    let counter = 0;\n    return PQ.resolve(15)\n      .finally(() =&gt; {\n        counter += 1;\n      })\n      .then(() =&gt; {\n        return PQ.reject(15);\n      })\n      .then(() =&gt; {\n        // wont be called\n        counter = 1000;\n      })\n      .finally(() =&gt; {\n        counter += 1;\n      })\n      .catch((reason) =&gt; {\n        expect(reason).toBe(15);\n        expect(counter).toBe(2);\n      });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n\n  public finally&lt;U&gt;(cb: Finally&lt;U&gt;) {\n    return new PQ&lt;U&gt;((resolve, reject) =&gt; {\n      let val: U | any;\n      let isRejected: boolean;\n\n      return this.then(\n        (value) =&gt; {\n          isRejected = false;\n          val = value;\n          return cb();\n        },\n        (reason) =&gt; {\n          isRejected = true;\n          val = reason;\n          return cb();\n        },\n      ).then(() =&gt; {\n        if (isRejected) {\n          return reject(val);\n        }\n\n        return resolve(val);\n      });\n    });\n  }\n}</code></pre><h4 id=\"tostring\">toString</h4><pre><code class=\"language-typescript\">describe('PQ.prototype.toString', () =&gt; {\n  test('returns [object PQ]', () =&gt; {\n    expect(new PQ&lt;undefined&gt;((resolve) =&gt; resolve()).toString()).toBe(\n      '[object PQ]',\n    );\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public toString() {\n    return `[object PQ]`;\n  }\n}</code></pre><p>It will just return a string <code>[object PQ]</code>.</p><p>Having implemented the core of our promises, we can now implement some of the previously mentioned Bluebird methods, which will make operating on promises easier for us.</p><h3 id=\"additional-methods\">Additional methods</h3><h4 id=\"promise-resolve\">Promise.resolve</h4><p><a href=\"http://bluebirdjs.com/docs/api/promise.resolve.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.resolve', () =&gt; {\n  test('resolves a value', () =&gt; {\n    return PQ.resolve(5).then((value) =&gt; {\n      expect(value).toBe(5);\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public static resolve&lt;U = any&gt;(value?: U | Thenable&lt;U&gt;) {\n    return new PQ&lt;U&gt;((resolve) =&gt; {\n      return resolve(value);\n    });\n  }\n}</code></pre><h4 id=\"promise-reject\">Promise.reject</h4><p><a href=\"http://bluebirdjs.com/docs/api/promise.reject.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.reject', () =&gt; {\n  test('rejects a value', () =&gt; {\n    return PQ.reject(5).catch((value) =&gt; {\n      expect(value).toBe(5);\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public static reject&lt;U&gt;(reason?: any) {\n    return new PQ&lt;U&gt;((resolve, reject) =&gt; {\n      return reject(reason);\n    });\n  }\n}</code></pre><h4 id=\"promise-all\">Promise.all</h4><p><a href=\"http://bluebirdjs.com/docs/api/promise.all.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.all', () =&gt; {\n  test('resolves a collection of promises', () =&gt; {\n    return PQ.all([PQ.resolve(1), PQ.resolve(2), 3]).then((collection) =&gt; {\n      expect(collection).toEqual([1, 2, 3]);\n    });\n  });\n\n  test('rejects if one item rejects', () =&gt; {\n    return PQ.all([PQ.resolve(1), PQ.reject(2)]).catch((reason) =&gt; {\n      expect(reason).toBe(2);\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public static all&lt;U = any&gt;(collection: (U | Thenable&lt;U&gt;)[]) {\n    return new PQ&lt;U[]&gt;((resolve, reject) =&gt; {\n      if (!Array.isArray(collection)) {\n        return reject(new TypeError('An array must be provided.'));\n      }\n\n      let counter = collection.length;\n      const resolvedCollection: U[] = [];\n\n      const tryResolve = (value: U, index: number) =&gt; {\n        counter -= 1;\n        resolvedCollection[index] = value;\n\n        if (counter !== 0) {\n          return null;\n        }\n\n        return resolve(resolvedCollection);\n      };\n\n      return collection.forEach((item, index) =&gt; {\n        return PQ.resolve(item)\n          .then((value) =&gt; {\n            return tryResolve(value, index);\n          })\n          .catch(reject);\n      });\n    });\n  }\n}</code></pre><p>I believe the implementation is pretty straightforward.</p><p>Starting at <strong>collection.length,</strong> we count down with each <strong>tryResolve</strong> until we get to 0, which means that every item of the collection has been resolved. We then resolve the newly created collection.</p><h4 id=\"promise-any\">Promise.any</h4><p><a href=\"http://bluebirdjs.com/docs/api/promise.any.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.any', () =&gt; {\n  test('resolves the first value', () =&gt; {\n    return PQ.any&lt;number&gt;([\n      PQ.resolve(1),\n      new PQ((resolve) =&gt; setTimeout(resolve, 15)),\n    ]).then((val) =&gt; expect(val).toBe(1));\n  });\n\n  test('rejects if the first value rejects', () =&gt; {\n    return PQ.any([\n      new PQ((resolve) =&gt; setTimeout(resolve, 15)),\n      PQ.reject(1),\n    ]).catch((reason) =&gt; {\n      expect(reason).toBe(1);\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n\n  public static any&lt;U = any&gt;(collection: (U | Thenable&lt;U&gt;)[]) {\n    return new PQ&lt;U&gt;((resolve, reject) =&gt; {\n      return collection.forEach((item) =&gt; {\n        return PQ.resolve(item)\n          .then(resolve)\n          .catch(reject);\n      });\n    });\n  }\n}</code></pre><p>We simply wait for the first value to resolve and return it in a promise.</p><h4 id=\"promise-props\">Promise.props</h4><p><a href=\"http://bluebirdjs.com/docs/api/promise.props.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.props', () =&gt; {\n  test('resolves object correctly', () =&gt; {\n    return PQ.props&lt;{ test: number; test2: number }&gt;({\n      test: PQ.resolve(1),\n      test2: PQ.resolve(2),\n    }).then((obj) =&gt; {\n      return expect(obj).toEqual({ test: 1, test2: 2 });\n    });\n  });\n\n  test('rejects non objects', () =&gt; {\n    return PQ.props([]).catch((reason) =&gt; {\n      expect(reason).toBeInstanceOf(TypeError);\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public static props&lt;U = any&gt;(obj: object) {\n    return new PQ&lt;U&gt;((resolve, reject) =&gt; {\n      if (!isObject(obj)) {\n        return reject(new TypeError('An object must be provided.'));\n      }\n\n      const resolvedObject = {};\n\n      const keys = Object.keys(obj);\n      const resolvedValues = PQ.all&lt;string&gt;(keys.map((key) =&gt; obj[key]));\n\n      return resolvedValues\n        .then((collection) =&gt; {\n          return collection.map((value, index) =&gt; {\n            resolvedObject[keys[index]] = value;\n          });\n        })\n        .then(() =&gt; resolve(resolvedObject as U))\n        .catch(reject);\n    });\n  }\n}</code></pre><p>We iterate over keys of the passed object, resolving every value. We then assign the values to the new object and resolve a promise with it.</p><h4 id=\"promise-prototype-spread\">Promise.prototype.spread</h4><p><a href=\"http://bluebirdjs.com/docs/api/spread.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.protoype.spread', () =&gt; {\n  test('spreads arguments', () =&gt; {\n    return PQ.all&lt;number&gt;([1, 2, 3]).spread((...args) =&gt; {\n      expect(args).toEqual([1, 2, 3]);\n      return 5;\n    });\n  });\n\n  test('accepts normal value (non collection)', () =&gt; {\n    return PQ.resolve(1).spread((one) =&gt; {\n      expect(one).toBe(1);\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public spread&lt;U&gt;(handler: (...args: any[]) =&gt; U) {\n    return this.then&lt;U&gt;((collection) =&gt; {\n      if (Array.isArray(collection)) {\n        return handler(...collection);\n      }\n\n      return handler(collection);\n    });\n  }\n}</code></pre><h4 id=\"promise-delay\">Promise.delay</h4><p><a href=\"http://bluebirdjs.com/docs/api/delay.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.delay', () =&gt; {\n  test('waits for the given amount of miliseconds before resolving', () =&gt; {\n    return new PQ&lt;string&gt;((resolve) =&gt; {\n      setTimeout(() =&gt; {\n        resolve('timeout');\n      }, 50);\n\n      return PQ.delay(40).then(() =&gt; resolve('delay'));\n    }).then((val) =&gt; {\n      expect(val).toBe('delay');\n    });\n  });\n\n  test('waits for the given amount of miliseconds before resolving 2', () =&gt; {\n    return new PQ&lt;string&gt;((resolve) =&gt; {\n      setTimeout(() =&gt; {\n        resolve('timeout');\n      }, 50);\n\n      return PQ.delay(60).then(() =&gt; resolve('delay'));\n    }).then((val) =&gt; {\n      expect(val).toBe('timeout');\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public static delay(timeInMs: number) {\n    return new PQ((resolve) =&gt; {\n      return setTimeout(resolve, timeInMs);\n    });\n  }\n}</code></pre><p>By using <strong>setTimeout,</strong> we simply delay the execution of the <strong>resolve</strong> function by the given number of milliseconds.</p><h4 id=\"promise-prototype-timeout\">Promise.prototype.timeout</h4><p><a href=\"http://bluebirdjs.com/docs/api/timeout.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.prototype.timeout', () =&gt; {\n  test('rejects after given timeout', () =&gt; {\n    return new PQ&lt;number&gt;((resolve) =&gt; {\n      setTimeout(resolve, 50);\n    })\n      .timeout(40)\n      .catch((reason) =&gt; {\n        expect(reason).toBeInstanceOf(PQ.errors.TimeoutError);\n      });\n  });\n\n  test('resolves before given timeout', () =&gt; {\n    return new PQ&lt;number&gt;((resolve) =&gt; {\n      setTimeout(() =&gt; resolve(500), 500);\n    })\n      .timeout(600)\n      .then((value) =&gt; {\n        expect(value).toBe(500);\n      });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public timeout(timeInMs: number) {\n    return new PQ&lt;T&gt;((resolve, reject) =&gt; {\n      const timeoutCb = () =&gt; {\n        return reject(new PQ.errors.TimeoutError());\n      };\n\n      setTimeout(timeoutCb, timeInMs);\n\n      return this.then(resolve);\n    });\n  }\n}</code></pre><p>This one is a bit tricky.</p><p>If the <strong>setTimeout</strong> executes faster than <strong>then</strong> in our promise, it will reject the promise with our special error.</p><h4 id=\"promise-promisify\">Promise.promisify</h4><p><a href=\"http://bluebirdjs.com/docs/api/promise.promisify.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.promisify', () =&gt; {\n  test('works', () =&gt; {\n    const getName = (firstName, lastName, callback) =&gt; {\n      return callback(null, `${firstName} ${lastName}`);\n    };\n\n    const fn = PQ.promisify&lt;string&gt;(getName);\n    const firstName = 'Maciej';\n    const lastName = 'Cieslar';\n\n    return fn(firstName, lastName).then((value) =&gt; {\n      return expect(value).toBe(`${firstName} ${lastName}`);\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public static promisify&lt;U = any&gt;(\n    fn: (...args: any[]) =&gt; void,\n    context = null,\n  ) {\n    return (...args: any[]) =&gt; {\n      return new PQ&lt;U&gt;((resolve, reject) =&gt; {\n        return fn.apply(context, [\n          ...args,\n          (err: any, result: U) =&gt; {\n            if (err) {\n              return reject(err);\n            }\n\n            return resolve(result);\n          },\n        ]);\n      });\n    };\n  }\n}</code></pre><p>We apply to the function all the passed arguments, plus — as the last one — we give the error-first <strong>callback</strong>.</p><h4 id=\"promise-promisifyall\">Promise.promisifyAll</h4><p><a href=\"http://bluebirdjs.com/docs/api/promise.promisifyall.html\" rel=\"noopener\">How it should work.</a></p><pre><code class=\"language-typescript\">describe('PQ.promisifyAll', () =&gt; {\n  test('promisifies a object', () =&gt; {\n    const person = {\n      name: 'Maciej Cieslar',\n      getName(callback) {\n        return callback(null, this.name);\n      },\n    };\n\n    const promisifiedPerson = PQ.promisifyAll&lt;{\n      getNameAsync: () =&gt; PQ&lt;string&gt;;\n    }&gt;(person);\n\n    return promisifiedPerson.getNameAsync().then((name) =&gt; {\n      expect(name).toBe('Maciej Cieslar');\n    });\n  });\n});</code></pre><pre><code class=\"language-typescript\">class PQ&lt;T&gt; {\n\n  // ...\n  \n  public static promisifyAll&lt;U&gt;(obj: any): U {\n    return Object.keys(obj).reduce((result, key) =&gt; {\n      let prop = obj[key];\n\n      if (isFunction(prop)) {\n        prop = PQ.promisify(prop, obj);\n      }\n\n      result[`${key}Async`] = prop;\n\n      return result;\n    }, {}) as U;\n  }\n}</code></pre><p>We iterate over the keys of the object and <strong>promisify</strong> its methods and add to each name of the method word <strong>Async</strong>.</p><h3 id=\"wrapping-up\">Wrapping up</h3><p>Presented here were but a few amongst all of the Bluebird API methods, so I strongly encourage you to explore, play around with, and try implementing the rest of them.</p><p>It might seem hard at first but don’t get discouraged — it would be worthless if it were it easy.</p><p>Thank you very much for reading! I hope you found this article informative and that it helped you get a grasp of the concept of promises, and that from now on you will feel more comfortable using them or simply writing asynchronous code.</p><p>If you have any questions or comments, feel free to put them in the comment section below or send me a <a href=\"https://www.mcieslar.com/contact\" rel=\"noopener\">message</a>.</p><p>Check out my <a href=\"https://www.maciejcieslar.com/about/\" rel=\"noopener\">social media</a>!</p><p><a href=\"http://eepurl.com/dAKhxb\" rel=\"noopener\">Join my newsletter</a>!</p><p><em>Originally published at <a href=\"https://www.mcieslar.com/implementing-promises-in-javascript\" rel=\"noopener\">www.mcieslar.com</a> on August 4, 2018.</em></p>\n\n                        </section>\n                        \n                            <div class=\"sidebar\">\n                                \n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                        <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                                    \n                                \n                            </div>\n                        \n                    </div>\n                    <hr>\n                    \n                        <div class=\"post-full-author-header\" data-test-label=\"author-header-with-bio\">\n                            \n                                \n    \n    \n    \n\n    <section class=\"author-card\" data-test-label=\"author-card\">\n        \n            <span class=\"avatar-wrapper\">\n                \n                <svg role=\"img\" style=\"pointer-events: none;\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" data-test-label=\"avatar\"><title>Maciej Cieślar</title><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z\" fill=\"#FFF\"></path></g></svg>\n\n            </span>\n        \n\n        <section class=\"author-card-content \">\n            <span class=\"author-card-name\">\n                <a href=\"/news/author/maciejcieslar/\" data-test-label=\"profile-link\">\n                    \n                        Maciej Cieślar\n                    \n                </a>\n            </span>\n            \n                \n                    <p data-test-label=\"default-bio\">\n                        Read <a href=\"/news/author/maciejcieslar/\">more posts</a>.\n                    </p>\n                \n            \n        </section>\n    </section>\n\n                            \n                        </div>\n                        <hr>\n                    \n\n                    \n                    \n                        \n    \n\n\n<p data-test-label=\"social-row-cta\" class=\"social-row\">\n    If this article was helpful, <button id=\"tweet-btn\" class=\"cta-button\" data-test-label=\"tweet-button\">share it</button>.\n</p>\n\n\n    \n    <script>document.addEventListener(\"DOMContentLoaded\",(()=>{const t=document.getElementById(\"tweet-btn\"),e=window.location,n=\"Implementing%20Promises%20In%20JavaScript\".replace(/&#39;/g,\"%27\"),o=\"\",i=\"\",r=Boolean(\"\");let a;if(r&&(o||i)){const t={originalPostAuthor:\"\",currentPostAuthor:\"Maciej Cieślar\"};a=encodeURIComponent(`Thank you ${o||t.originalPostAuthor} for writing this helpful article, and ${i||t.currentPostAuthor} for translating it.`)}else!r&&i&&(a=encodeURIComponent(`Thank you ${i} for writing this helpful article.`));const c=`window.open(\\n    '${a?`https://twitter.com/intent/tweet?text=${a}%0A%0A${n}%0A%0A${e}`:`https://twitter.com/intent/tweet?text=${n}%0A%0A${e}`}',\\n    'share-twitter',\\n    'width=550, height=235'\\n  ); return false;`;t.setAttribute(\"onclick\",c)}));</script>\n\n\n                        \n\n<div class=\"learn-cta-row\" data-test-label=\"learn-cta-row\">\n    <p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" class=\"cta-button\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n    </p>\n</div>\n\n                    \n                </section>\n                \n                    <div class=\"banner-ad bottom\">\n                        \n                            <div class=\"ad-wrapper\" data-test-label=\"ad-wrapper\">\n    \n    <div class=\"ad-text\" data-test-label=\"ad-text\">ADVERTISEMENT</div>\n    <ins class=\"adsbygoogle\" style=\"display: block; height: 280px;\" data-ad-client=\"ca-pub-9482786369113753\" data-ad-slot=\"5720086888\" data-ad-format=\"auto\" data-full-width-responsive=\"true\"></ins>\n    <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    </script>\n</div>\n\n                        \n                    </div>\n                \n            </article>\n        </div>\n    </main>\n\n\n            \n\n\n<footer class=\"site-footer\">\n    <div class=\"footer-top\">\n        <div class=\"footer-desc-col\">\n            <p data-test-label=\"tax-exempt-status\">freeCodeCamp is a donor-supported tax-exempt 501(c)(3) charity organization (United States Federal Tax Identification Number: 82-0779546)</p>\n            <p data-test-label=\"mission-statement\">Our mission: to help people learn to code for free. We accomplish this by creating thousands of videos, articles, and interactive coding lessons - all freely available to the public.</p>\n            <p data-test-label=\"donation-initiatives\">Donations to freeCodeCamp go toward our education initiatives, and help pay for servers, services, and staff.</p>\n            <p class=\"footer-donation\" data-test-label=\"donate-text\">\n                You can <a href=\"https://www.freecodecamp.org/donate/\" class=\"inline\" rel=\"noopener noreferrer\" target=\"_blank\">make a tax-deductible donation here</a>.\n            </p>\n        </div>\n        <div class=\"trending-guides\" data-test-label=\"trending-guides\">\n            <h2 id=\"trending-guides\" class=\"col-header\">Trending Guides</h2>\n            <ul class=\"trending-guides-articles\" aria-labelledby=\"trending-guides\">\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-transform-functions-and-properties/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Transform\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-create-a-static-blog-with-lume/\" rel=\"noopener noreferrer\" target=\"_blank\">Build a Static Blog\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-build-an-ai-chatbot-with-redis-python-and-gpt/\" rel=\"noopener noreferrer\" target=\"_blank\">Build an AI Chatbot\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/what-is-programming-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">What is Programming?\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/python-code-examples-sample-script-coding-tutorial-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Python Code Examples\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/a-practical-guide-to-start-opensource-contributions/\" rel=\"noopener noreferrer\" target=\"_blank\">Open Source for Devs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/http-full-course/\" rel=\"noopener noreferrer\" target=\"_blank\">HTTP Networking in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-unit-tests-in-react-redux/\" rel=\"noopener noreferrer\" target=\"_blank\">Write React Unit Tests\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/introduction-to-algorithms-with-javascript-examples/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Algorithms in JS\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/how-to-write-clean-code/\" rel=\"noopener noreferrer\" target=\"_blank\">How to Write Clean Code\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-php-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn PHP\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-java-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Java\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-swift-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Swift\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-golang-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Golang\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/get-started-with-nodejs/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Node.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/complete-guide-to-css-grid/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn CSS Grid\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/learn-solidity-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Solidity\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/the-express-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Express.js\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/javascript-es-modules-and-module-bundlers/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn JS Modules\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/apache-kafka-handbook/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn Apache Kafka\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/rest-api-design-best-practices-build-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">REST API Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/front-end-javascript-development-react-angular-vue-compared/\" rel=\"noopener noreferrer\" target=\"_blank\">Front-End JS Development\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-consume-and-document-a-rest-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build REST APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/build-strongly-typed-polymorphic-components-with-react-and-typescript/\" rel=\"noopener noreferrer\" target=\"_blank\">Intermediate TS and React\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/command-line-for-beginners/\" rel=\"noopener noreferrer\" target=\"_blank\">Command Line for Beginners\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-operating-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Intro to Operating Systems\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/building-consuming-and-documenting-a-graphql-api/\" rel=\"noopener noreferrer\" target=\"_blank\">Learn to Build GraphQL APIs\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/oss-security-best-practices/\" rel=\"noopener noreferrer\" target=\"_blank\">OSS Security Best Practices\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/design-patterns-for-distributed-systems/\" rel=\"noopener noreferrer\" target=\"_blank\">Distributed Systems Patterns\n                    </a>\n                </li>\n                <li>\n                    <a href=\"https://www.freecodecamp.org/news/an-introduction-to-software-architecture-patterns/\" rel=\"noopener noreferrer\" target=\"_blank\">Software Architecture Patterns\n                    </a>\n                </li>\n            </ul>\n            <div class=\"spacer\" style=\"padding: 15px 0;\"></div>\n            <div>\n                <h2 id=\"mobile-app\" class=\"col-header\">\n                    Mobile App\n                </h2>\n                <div class=\"min-h-[1px] px-[15px] md:w-2/3 md:ml-[16.6%]\">\n                    <ul aria-labelledby=\"mobile-app\" class=\"mobile-app-container\">\n                        <li>\n                            <a href=\"https://apps.apple.com/us/app/freecodecamp/id6446908151?itsct=apps_box_link&itscg=30200\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/apple-store-badge.svg\" lang=\"en\" alt=\"Download on the App Store\">\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"https://play.google.com/store/apps/details?id=org.freecodecamp\" rel=\"noopener noreferrer\" target=\"_blank\">\n                                <img src=\"https://cdn.freecodecamp.org/platform/universal/google-play-badge.svg\" lang=\"en\" alt=\"Get it on Google Play\">\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-bottom\">\n        <h2 class=\"col-header\" data-test-label=\"our-nonprofit\">Our Charity</h2>\n        <div class=\"our-nonprofit\">\n            <a href=\"https://www.freecodecamp.org/news/about/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"about\">\n                About\n            </a>\n            <a href=\"https://www.linkedin.com/school/free-code-camp/people/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"alumni\">\n                Alumni Network\n            </a>\n            <a href=\"https://github.com/freeCodeCamp/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"open-source\">\n                Open Source\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/shop/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"shop\">\n                Shop\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/support/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"support\">\n                Support\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/sponsors/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"sponsors\">\n                Sponsors\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/academic-honesty-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"honesty\">\n                Academic Honesty\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/code-of-conduct/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"coc\">\n                Code of Conduct\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/privacy-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"privacy\">\n                Privacy Policy\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/terms-of-service/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"tos\">\n                Terms of Service\n            </a>\n            <a href=\"https://www.freecodecamp.org/news/copyright-policy/\" rel=\"noopener noreferrer\" target=\"_blank\" data-test-label=\"copyright\">\n                Copyright Policy\n            </a>\n        </div>\n    </div>\n</footer>\n\n        </div>\n\n        \n        \n        \n\n        <!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-5D6RKKP\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n\n        \n    <script defer src=\"https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015\" integrity=\"sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==\" data-cf-beacon='{\"rayId\":\"8ac95b6c99eece19\",\"version\":\"2024.7.0\",\"serverTiming\":{\"name\":{\"cfL4\":true}},\"token\":\"bdb993c6dde44e178aabd9555e75e4f4\",\"b\":1}' crossorigin=\"anonymous\"></script>\n</body>\n</html>\n"}}}